var Wj=Object.defineProperty;var B1=Pe=>{throw TypeError(Pe)};var qj=(Pe,Ue,nt)=>Ue in Pe?Wj(Pe,Ue,{enumerable:!0,configurable:!0,writable:!0,value:nt}):Pe[Ue]=nt;var p=(Pe,Ue,nt)=>qj(Pe,typeof Ue!="symbol"?Ue+"":Ue,nt),j1=(Pe,Ue,nt)=>Ue.has(Pe)||B1("Cannot "+nt);var W1=(Pe,Ue,nt)=>(j1(Pe,Ue,"read from private field"),nt?nt.call(Pe):Ue.get(Pe)),q1=(Pe,Ue,nt)=>Ue.has(Pe)?B1("Cannot add the same private member more than once"):Ue instanceof WeakSet?Ue.add(Pe):Ue.set(Pe,nt),J1=(Pe,Ue,nt,er)=>(j1(Pe,Ue,"write to private field"),er?er.call(Pe,nt):Ue.set(Pe,nt),nt);(function(){"use strict";var Lo,hr,bv,vv,Sv,wv,Ev,Ov,Tv,Iv,Av,Rv,xv,kv,Cv,$v,Pv,Mv,Fv,Nv,Lv,Dv,Uv,Kv,Bv,jv,Wv,qv,Jv,Gv,Hv,Vv,zv,Yv,Xv,Zv,Qv,eS,tS,nS,rS,iS,sS,oS,cS,uS,aS;var Pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ue(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var nt={exports:{}},er=typeof Reflect=="object"?Reflect:null,Op=er&&typeof er.apply=="function"?er.apply:function(t,n,s){return Function.prototype.apply.call(t,n,s)},oc;er&&typeof er.ownKeys=="function"?oc=er.ownKeys:Object.getOwnPropertySymbols?oc=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:oc=function(t){return Object.getOwnPropertyNames(t)};function H1(e){console&&console.warn&&console.warn(e)}var Tp=Number.isNaN||function(t){return t!==t};function Ce(){Ce.init.call(this)}nt.exports=Ce,nt.exports.once=X1,Ce.EventEmitter=Ce,Ce.prototype._events=void 0,Ce.prototype._eventsCount=0,Ce.prototype._maxListeners=void 0;var Ip=10;function cc(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Ce,"defaultMaxListeners",{enumerable:!0,get:function(){return Ip},set:function(e){if(typeof e!="number"||e<0||Tp(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Ip=e}}),Ce.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Ce.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Tp(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Ap(e){return e._maxListeners===void 0?Ce.defaultMaxListeners:e._maxListeners}Ce.prototype.getMaxListeners=function(){return Ap(this)},Ce.prototype.emit=function(t){for(var n=[],s=1;s<arguments.length;s++)n.push(arguments[s]);var o=t==="error",u=this._events;if(u!==void 0)o=o&&u.error===void 0;else if(!o)return!1;if(o){var a;if(n.length>0&&(a=n[0]),a instanceof Error)throw a;var f=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw f.context=a,f}var d=u[t];if(d===void 0)return!1;if(typeof d=="function")Op(d,this,n);else for(var m=d.length,y=$p(d,m),s=0;s<m;++s)Op(y[s],this,n);return!0};function Rp(e,t,n,s){var o,u,a;if(cc(n),u=e._events,u===void 0?(u=e._events=Object.create(null),e._eventsCount=0):(u.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),u=e._events),a=u[t]),a===void 0)a=u[t]=n,++e._eventsCount;else if(typeof a=="function"?a=u[t]=s?[n,a]:[a,n]:s?a.unshift(n):a.push(n),o=Ap(e),o>0&&a.length>o&&!a.warned){a.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=e,f.type=t,f.count=a.length,H1(f)}return e}Ce.prototype.addListener=function(t,n){return Rp(this,t,n,!1)},Ce.prototype.on=Ce.prototype.addListener,Ce.prototype.prependListener=function(t,n){return Rp(this,t,n,!0)};function V1(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function xp(e,t,n){var s={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=V1.bind(s);return o.listener=n,s.wrapFn=o,o}Ce.prototype.once=function(t,n){return cc(n),this.on(t,xp(this,t,n)),this},Ce.prototype.prependOnceListener=function(t,n){return cc(n),this.prependListener(t,xp(this,t,n)),this},Ce.prototype.removeListener=function(t,n){var s,o,u,a,f;if(cc(n),o=this._events,o===void 0)return this;if(s=o[t],s===void 0)return this;if(s===n||s.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete o[t],o.removeListener&&this.emit("removeListener",t,s.listener||n));else if(typeof s!="function"){for(u=-1,a=s.length-1;a>=0;a--)if(s[a]===n||s[a].listener===n){f=s[a].listener,u=a;break}if(u<0)return this;u===0?s.shift():z1(s,u),s.length===1&&(o[t]=s[0]),o.removeListener!==void 0&&this.emit("removeListener",t,f||n)}return this},Ce.prototype.off=Ce.prototype.removeListener,Ce.prototype.removeAllListeners=function(t){var n,s,o;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[t]),this;if(arguments.length===0){var u=Object.keys(s),a;for(o=0;o<u.length;++o)a=u[o],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=s[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(o=n.length-1;o>=0;o--)this.removeListener(t,n[o]);return this};function kp(e,t,n){var s=e._events;if(s===void 0)return[];var o=s[t];return o===void 0?[]:typeof o=="function"?n?[o.listener||o]:[o]:n?Y1(o):$p(o,o.length)}Ce.prototype.listeners=function(t){return kp(this,t,!0)},Ce.prototype.rawListeners=function(t){return kp(this,t,!1)},Ce.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Cp.call(e,t)},Ce.prototype.listenerCount=Cp;function Cp(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Ce.prototype.eventNames=function(){return this._eventsCount>0?oc(this._events):[]};function $p(e,t){for(var n=new Array(t),s=0;s<t;++s)n[s]=e[s];return n}function z1(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function Y1(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function X1(e,t){return new Promise(function(n,s){function o(a){e.removeListener(t,u),s(a)}function u(){typeof e.removeListener=="function"&&e.removeListener("error",o),n([].slice.call(arguments))}Pp(e,t,u,{once:!0}),t!=="error"&&Z1(e,o,{once:!0})})}function Z1(e,t,n){typeof e.on=="function"&&Pp(e,"error",t,n)}function Pp(e,t,n,s){if(typeof e.on=="function")s.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function o(u){s.once&&e.removeEventListener(t,o),n(u)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Q1=nt.exports;const Mp=()=>eE(new Q1.EventEmitter),eE=e=>({on:(t,n)=>(e.on(t,n),()=>{e.off(t,n)}),emit:t=>{e.emit("*",t),e.emit(t.type,t)}});var uc={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */uc.exports,function(e,t){(function(){var n,s="4.17.21",o=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",f="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",m=500,y="__lodash_placeholder__",v=1,O=2,I=4,R=1,W=2,L=1,K=2,Y=4,j=8,H=16,z=32,G=64,k=128,F=256,D=512,U=30,N="...",q=800,Te=16,Ie=1,ct=2,je=3,ne=1/0,Ve=9007199254740991,Cn=17976931348623157e292,dr=NaN,Ot=4294967295,tL=Ot-1,nL=Ot>>>1,rL=[["ary",k],["bind",L],["bindKey",K],["curry",j],["curryRight",H],["flip",D],["partial",z],["partialRight",G],["rearg",F]],vs="[object Arguments]",ta="[object Array]",iL="[object AsyncFunction]",Do="[object Boolean]",Uo="[object Date]",sL="[object DOMException]",na="[object Error]",ra="[object Function]",lS="[object GeneratorFunction]",$n="[object Map]",Ko="[object Number]",oL="[object Null]",pr="[object Object]",fS="[object Promise]",cL="[object Proxy]",Bo="[object RegExp]",Pn="[object Set]",jo="[object String]",ia="[object Symbol]",uL="[object Undefined]",Wo="[object WeakMap]",aL="[object WeakSet]",qo="[object ArrayBuffer]",Ss="[object DataView]",rd="[object Float32Array]",id="[object Float64Array]",sd="[object Int8Array]",od="[object Int16Array]",cd="[object Int32Array]",ud="[object Uint8Array]",ad="[object Uint8ClampedArray]",ld="[object Uint16Array]",fd="[object Uint32Array]",lL=/\b__p \+= '';/g,fL=/\b(__p \+=) '' \+/g,hL=/(__e\(.*?\)|\b__t\)) \+\n'';/g,hS=/&(?:amp|lt|gt|quot|#39);/g,dS=/[&<>"']/g,dL=RegExp(hS.source),pL=RegExp(dS.source),gL=/<%-([\s\S]+?)%>/g,mL=/<%([\s\S]+?)%>/g,pS=/<%=([\s\S]+?)%>/g,_L=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yL=/^\w*$/,bL=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hd=/[\\^$.*+?()[\]{}|]/g,vL=RegExp(hd.source),dd=/^\s+/,SL=/\s/,wL=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,EL=/\{\n\/\* \[wrapped with (.+)\] \*/,OL=/,? & /,TL=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,IL=/[()=,{}\[\]\/\s]/,AL=/\\(\\)?/g,RL=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,gS=/\w*$/,xL=/^[-+]0x[0-9a-f]+$/i,kL=/^0b[01]+$/i,CL=/^\[object .+?Constructor\]$/,$L=/^0o[0-7]+$/i,PL=/^(?:0|[1-9]\d*)$/,ML=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,sa=/($^)/,FL=/['\n\r\u2028\u2029\\]/g,oa="\\ud800-\\udfff",NL="\\u0300-\\u036f",LL="\\ufe20-\\ufe2f",DL="\\u20d0-\\u20ff",mS=NL+LL+DL,_S="\\u2700-\\u27bf",yS="a-z\\xdf-\\xf6\\xf8-\\xff",UL="\\xac\\xb1\\xd7\\xf7",KL="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",BL="\\u2000-\\u206f",jL=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",bS="A-Z\\xc0-\\xd6\\xd8-\\xde",vS="\\ufe0e\\ufe0f",SS=UL+KL+BL+jL,pd="['’]",WL="["+oa+"]",wS="["+SS+"]",ca="["+mS+"]",ES="\\d+",qL="["+_S+"]",OS="["+yS+"]",TS="[^"+oa+SS+ES+_S+yS+bS+"]",gd="\\ud83c[\\udffb-\\udfff]",JL="(?:"+ca+"|"+gd+")",IS="[^"+oa+"]",md="(?:\\ud83c[\\udde6-\\uddff]){2}",_d="[\\ud800-\\udbff][\\udc00-\\udfff]",ws="["+bS+"]",AS="\\u200d",RS="(?:"+OS+"|"+TS+")",GL="(?:"+ws+"|"+TS+")",xS="(?:"+pd+"(?:d|ll|m|re|s|t|ve))?",kS="(?:"+pd+"(?:D|LL|M|RE|S|T|VE))?",CS=JL+"?",$S="["+vS+"]?",HL="(?:"+AS+"(?:"+[IS,md,_d].join("|")+")"+$S+CS+")*",VL="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",zL="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",PS=$S+CS+HL,YL="(?:"+[qL,md,_d].join("|")+")"+PS,XL="(?:"+[IS+ca+"?",ca,md,_d,WL].join("|")+")",ZL=RegExp(pd,"g"),QL=RegExp(ca,"g"),yd=RegExp(gd+"(?="+gd+")|"+XL+PS,"g"),eD=RegExp([ws+"?"+OS+"+"+xS+"(?="+[wS,ws,"$"].join("|")+")",GL+"+"+kS+"(?="+[wS,ws+RS,"$"].join("|")+")",ws+"?"+RS+"+"+xS,ws+"+"+kS,zL,VL,ES,YL].join("|"),"g"),tD=RegExp("["+AS+oa+mS+vS+"]"),nD=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,rD=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],iD=-1,Le={};Le[rd]=Le[id]=Le[sd]=Le[od]=Le[cd]=Le[ud]=Le[ad]=Le[ld]=Le[fd]=!0,Le[vs]=Le[ta]=Le[qo]=Le[Do]=Le[Ss]=Le[Uo]=Le[na]=Le[ra]=Le[$n]=Le[Ko]=Le[pr]=Le[Bo]=Le[Pn]=Le[jo]=Le[Wo]=!1;var Fe={};Fe[vs]=Fe[ta]=Fe[qo]=Fe[Ss]=Fe[Do]=Fe[Uo]=Fe[rd]=Fe[id]=Fe[sd]=Fe[od]=Fe[cd]=Fe[$n]=Fe[Ko]=Fe[pr]=Fe[Bo]=Fe[Pn]=Fe[jo]=Fe[ia]=Fe[ud]=Fe[ad]=Fe[ld]=Fe[fd]=!0,Fe[na]=Fe[ra]=Fe[Wo]=!1;var sD={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},oD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},cD={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},uD={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},aD=parseFloat,lD=parseInt,MS=typeof Pe=="object"&&Pe&&Pe.Object===Object&&Pe,fD=typeof self=="object"&&self&&self.Object===Object&&self,yt=MS||fD||Function("return this")(),bd=t&&!t.nodeType&&t,pi=bd&&!0&&e&&!e.nodeType&&e,FS=pi&&pi.exports===bd,vd=FS&&MS.process,fn=function(){try{var w=pi&&pi.require&&pi.require("util").types;return w||vd&&vd.binding&&vd.binding("util")}catch{}}(),NS=fn&&fn.isArrayBuffer,LS=fn&&fn.isDate,DS=fn&&fn.isMap,US=fn&&fn.isRegExp,KS=fn&&fn.isSet,BS=fn&&fn.isTypedArray;function Xt(w,x,A){switch(A.length){case 0:return w.call(x);case 1:return w.call(x,A[0]);case 2:return w.call(x,A[0],A[1]);case 3:return w.call(x,A[0],A[1],A[2])}return w.apply(x,A)}function hD(w,x,A,J){for(var ie=-1,Re=w==null?0:w.length;++ie<Re;){var ut=w[ie];x(J,ut,A(ut),w)}return J}function hn(w,x){for(var A=-1,J=w==null?0:w.length;++A<J&&x(w[A],A,w)!==!1;);return w}function dD(w,x){for(var A=w==null?0:w.length;A--&&x(w[A],A,w)!==!1;);return w}function jS(w,x){for(var A=-1,J=w==null?0:w.length;++A<J;)if(!x(w[A],A,w))return!1;return!0}function $r(w,x){for(var A=-1,J=w==null?0:w.length,ie=0,Re=[];++A<J;){var ut=w[A];x(ut,A,w)&&(Re[ie++]=ut)}return Re}function ua(w,x){var A=w==null?0:w.length;return!!A&&Es(w,x,0)>-1}function Sd(w,x,A){for(var J=-1,ie=w==null?0:w.length;++J<ie;)if(A(x,w[J]))return!0;return!1}function De(w,x){for(var A=-1,J=w==null?0:w.length,ie=Array(J);++A<J;)ie[A]=x(w[A],A,w);return ie}function Pr(w,x){for(var A=-1,J=x.length,ie=w.length;++A<J;)w[ie+A]=x[A];return w}function wd(w,x,A,J){var ie=-1,Re=w==null?0:w.length;for(J&&Re&&(A=w[++ie]);++ie<Re;)A=x(A,w[ie],ie,w);return A}function pD(w,x,A,J){var ie=w==null?0:w.length;for(J&&ie&&(A=w[--ie]);ie--;)A=x(A,w[ie],ie,w);return A}function Ed(w,x){for(var A=-1,J=w==null?0:w.length;++A<J;)if(x(w[A],A,w))return!0;return!1}var gD=Od("length");function mD(w){return w.split("")}function _D(w){return w.match(TL)||[]}function WS(w,x,A){var J;return A(w,function(ie,Re,ut){if(x(ie,Re,ut))return J=Re,!1}),J}function aa(w,x,A,J){for(var ie=w.length,Re=A+(J?1:-1);J?Re--:++Re<ie;)if(x(w[Re],Re,w))return Re;return-1}function Es(w,x,A){return x===x?xD(w,x,A):aa(w,qS,A)}function yD(w,x,A,J){for(var ie=A-1,Re=w.length;++ie<Re;)if(J(w[ie],x))return ie;return-1}function qS(w){return w!==w}function JS(w,x){var A=w==null?0:w.length;return A?Id(w,x)/A:dr}function Od(w){return function(x){return x==null?n:x[w]}}function Td(w){return function(x){return w==null?n:w[x]}}function GS(w,x,A,J,ie){return ie(w,function(Re,ut,Me){A=J?(J=!1,Re):x(A,Re,ut,Me)}),A}function bD(w,x){var A=w.length;for(w.sort(x);A--;)w[A]=w[A].value;return w}function Id(w,x){for(var A,J=-1,ie=w.length;++J<ie;){var Re=x(w[J]);Re!==n&&(A=A===n?Re:A+Re)}return A}function Ad(w,x){for(var A=-1,J=Array(w);++A<w;)J[A]=x(A);return J}function vD(w,x){return De(x,function(A){return[A,w[A]]})}function HS(w){return w&&w.slice(0,XS(w)+1).replace(dd,"")}function Zt(w){return function(x){return w(x)}}function Rd(w,x){return De(x,function(A){return w[A]})}function Jo(w,x){return w.has(x)}function VS(w,x){for(var A=-1,J=w.length;++A<J&&Es(x,w[A],0)>-1;);return A}function zS(w,x){for(var A=w.length;A--&&Es(x,w[A],0)>-1;);return A}function SD(w,x){for(var A=w.length,J=0;A--;)w[A]===x&&++J;return J}var wD=Td(sD),ED=Td(oD);function OD(w){return"\\"+uD[w]}function TD(w,x){return w==null?n:w[x]}function Os(w){return tD.test(w)}function ID(w){return nD.test(w)}function AD(w){for(var x,A=[];!(x=w.next()).done;)A.push(x.value);return A}function xd(w){var x=-1,A=Array(w.size);return w.forEach(function(J,ie){A[++x]=[ie,J]}),A}function YS(w,x){return function(A){return w(x(A))}}function Mr(w,x){for(var A=-1,J=w.length,ie=0,Re=[];++A<J;){var ut=w[A];(ut===x||ut===y)&&(w[A]=y,Re[ie++]=A)}return Re}function la(w){var x=-1,A=Array(w.size);return w.forEach(function(J){A[++x]=J}),A}function RD(w){var x=-1,A=Array(w.size);return w.forEach(function(J){A[++x]=[J,J]}),A}function xD(w,x,A){for(var J=A-1,ie=w.length;++J<ie;)if(w[J]===x)return J;return-1}function kD(w,x,A){for(var J=A+1;J--;)if(w[J]===x)return J;return J}function Ts(w){return Os(w)?$D(w):gD(w)}function Mn(w){return Os(w)?PD(w):mD(w)}function XS(w){for(var x=w.length;x--&&SL.test(w.charAt(x)););return x}var CD=Td(cD);function $D(w){for(var x=yd.lastIndex=0;yd.test(w);)++x;return x}function PD(w){return w.match(yd)||[]}function MD(w){return w.match(eD)||[]}var FD=function w(x){x=x==null?yt:Is.defaults(yt.Object(),x,Is.pick(yt,rD));var A=x.Array,J=x.Date,ie=x.Error,Re=x.Function,ut=x.Math,Me=x.Object,kd=x.RegExp,ND=x.String,dn=x.TypeError,fa=A.prototype,LD=Re.prototype,As=Me.prototype,ha=x["__core-js_shared__"],da=LD.toString,ke=As.hasOwnProperty,DD=0,ZS=function(){var r=/[^.]+$/.exec(ha&&ha.keys&&ha.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),pa=As.toString,UD=da.call(Me),KD=yt._,BD=kd("^"+da.call(ke).replace(hd,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ga=FS?x.Buffer:n,Fr=x.Symbol,ma=x.Uint8Array,QS=ga?ga.allocUnsafe:n,_a=YS(Me.getPrototypeOf,Me),ew=Me.create,tw=As.propertyIsEnumerable,ya=fa.splice,nw=Fr?Fr.isConcatSpreadable:n,Go=Fr?Fr.iterator:n,gi=Fr?Fr.toStringTag:n,ba=function(){try{var r=vi(Me,"defineProperty");return r({},"",{}),r}catch{}}(),jD=x.clearTimeout!==yt.clearTimeout&&x.clearTimeout,WD=J&&J.now!==yt.Date.now&&J.now,qD=x.setTimeout!==yt.setTimeout&&x.setTimeout,va=ut.ceil,Sa=ut.floor,Cd=Me.getOwnPropertySymbols,JD=ga?ga.isBuffer:n,rw=x.isFinite,GD=fa.join,HD=YS(Me.keys,Me),at=ut.max,Tt=ut.min,VD=J.now,zD=x.parseInt,iw=ut.random,YD=fa.reverse,$d=vi(x,"DataView"),Ho=vi(x,"Map"),Pd=vi(x,"Promise"),Rs=vi(x,"Set"),Vo=vi(x,"WeakMap"),zo=vi(Me,"create"),wa=Vo&&new Vo,xs={},XD=Si($d),ZD=Si(Ho),QD=Si(Pd),eU=Si(Rs),tU=Si(Vo),Ea=Fr?Fr.prototype:n,Yo=Ea?Ea.valueOf:n,sw=Ea?Ea.toString:n;function g(r){if(Je(r)&&!oe(r)&&!(r instanceof ye)){if(r instanceof pn)return r;if(ke.call(r,"__wrapped__"))return o1(r)}return new pn(r)}var ks=function(){function r(){}return function(i){if(!We(i))return{};if(ew)return ew(i);r.prototype=i;var c=new r;return r.prototype=n,c}}();function Oa(){}function pn(r,i){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=n}g.templateSettings={escape:gL,evaluate:mL,interpolate:pS,variable:"",imports:{_:g}},g.prototype=Oa.prototype,g.prototype.constructor=g,pn.prototype=ks(Oa.prototype),pn.prototype.constructor=pn;function ye(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ot,this.__views__=[]}function nU(){var r=new ye(this.__wrapped__);return r.__actions__=Ut(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=Ut(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=Ut(this.__views__),r}function rU(){if(this.__filtered__){var r=new ye(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function iU(){var r=this.__wrapped__.value(),i=this.__dir__,c=oe(r),l=i<0,h=c?r.length:0,_=mK(0,h,this.__views__),b=_.start,S=_.end,E=S-b,C=l?S:b-1,$=this.__iteratees__,M=$.length,B=0,V=Tt(E,this.__takeCount__);if(!c||!l&&h==E&&V==E)return xw(r,this.__actions__);var Q=[];e:for(;E--&&B<V;){C+=i;for(var he=-1,ee=r[C];++he<M;){var _e=$[he],ve=_e.iteratee,tn=_e.type,$t=ve(ee);if(tn==ct)ee=$t;else if(!$t){if(tn==Ie)continue e;break e}}Q[B++]=ee}return Q}ye.prototype=ks(Oa.prototype),ye.prototype.constructor=ye;function mi(r){var i=-1,c=r==null?0:r.length;for(this.clear();++i<c;){var l=r[i];this.set(l[0],l[1])}}function sU(){this.__data__=zo?zo(null):{},this.size=0}function oU(r){var i=this.has(r)&&delete this.__data__[r];return this.size-=i?1:0,i}function cU(r){var i=this.__data__;if(zo){var c=i[r];return c===d?n:c}return ke.call(i,r)?i[r]:n}function uU(r){var i=this.__data__;return zo?i[r]!==n:ke.call(i,r)}function aU(r,i){var c=this.__data__;return this.size+=this.has(r)?0:1,c[r]=zo&&i===n?d:i,this}mi.prototype.clear=sU,mi.prototype.delete=oU,mi.prototype.get=cU,mi.prototype.has=uU,mi.prototype.set=aU;function gr(r){var i=-1,c=r==null?0:r.length;for(this.clear();++i<c;){var l=r[i];this.set(l[0],l[1])}}function lU(){this.__data__=[],this.size=0}function fU(r){var i=this.__data__,c=Ta(i,r);if(c<0)return!1;var l=i.length-1;return c==l?i.pop():ya.call(i,c,1),--this.size,!0}function hU(r){var i=this.__data__,c=Ta(i,r);return c<0?n:i[c][1]}function dU(r){return Ta(this.__data__,r)>-1}function pU(r,i){var c=this.__data__,l=Ta(c,r);return l<0?(++this.size,c.push([r,i])):c[l][1]=i,this}gr.prototype.clear=lU,gr.prototype.delete=fU,gr.prototype.get=hU,gr.prototype.has=dU,gr.prototype.set=pU;function mr(r){var i=-1,c=r==null?0:r.length;for(this.clear();++i<c;){var l=r[i];this.set(l[0],l[1])}}function gU(){this.size=0,this.__data__={hash:new mi,map:new(Ho||gr),string:new mi}}function mU(r){var i=La(this,r).delete(r);return this.size-=i?1:0,i}function _U(r){return La(this,r).get(r)}function yU(r){return La(this,r).has(r)}function bU(r,i){var c=La(this,r),l=c.size;return c.set(r,i),this.size+=c.size==l?0:1,this}mr.prototype.clear=gU,mr.prototype.delete=mU,mr.prototype.get=_U,mr.prototype.has=yU,mr.prototype.set=bU;function _i(r){var i=-1,c=r==null?0:r.length;for(this.__data__=new mr;++i<c;)this.add(r[i])}function vU(r){return this.__data__.set(r,d),this}function SU(r){return this.__data__.has(r)}_i.prototype.add=_i.prototype.push=vU,_i.prototype.has=SU;function Fn(r){var i=this.__data__=new gr(r);this.size=i.size}function wU(){this.__data__=new gr,this.size=0}function EU(r){var i=this.__data__,c=i.delete(r);return this.size=i.size,c}function OU(r){return this.__data__.get(r)}function TU(r){return this.__data__.has(r)}function IU(r,i){var c=this.__data__;if(c instanceof gr){var l=c.__data__;if(!Ho||l.length<o-1)return l.push([r,i]),this.size=++c.size,this;c=this.__data__=new mr(l)}return c.set(r,i),this.size=c.size,this}Fn.prototype.clear=wU,Fn.prototype.delete=EU,Fn.prototype.get=OU,Fn.prototype.has=TU,Fn.prototype.set=IU;function ow(r,i){var c=oe(r),l=!c&&wi(r),h=!c&&!l&&Kr(r),_=!c&&!l&&!h&&Ms(r),b=c||l||h||_,S=b?Ad(r.length,ND):[],E=S.length;for(var C in r)(i||ke.call(r,C))&&!(b&&(C=="length"||h&&(C=="offset"||C=="parent")||_&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||vr(C,E)))&&S.push(C);return S}function cw(r){var i=r.length;return i?r[qd(0,i-1)]:n}function AU(r,i){return Da(Ut(r),yi(i,0,r.length))}function RU(r){return Da(Ut(r))}function Md(r,i,c){(c!==n&&!Nn(r[i],c)||c===n&&!(i in r))&&_r(r,i,c)}function Xo(r,i,c){var l=r[i];(!(ke.call(r,i)&&Nn(l,c))||c===n&&!(i in r))&&_r(r,i,c)}function Ta(r,i){for(var c=r.length;c--;)if(Nn(r[c][0],i))return c;return-1}function xU(r,i,c,l){return Nr(r,function(h,_,b){i(l,h,c(h),b)}),l}function uw(r,i){return r&&Zn(i,dt(i),r)}function kU(r,i){return r&&Zn(i,Bt(i),r)}function _r(r,i,c){i=="__proto__"&&ba?ba(r,i,{configurable:!0,enumerable:!0,value:c,writable:!0}):r[i]=c}function Fd(r,i){for(var c=-1,l=i.length,h=A(l),_=r==null;++c<l;)h[c]=_?n:gp(r,i[c]);return h}function yi(r,i,c){return r===r&&(c!==n&&(r=r<=c?r:c),i!==n&&(r=r>=i?r:i)),r}function gn(r,i,c,l,h,_){var b,S=i&v,E=i&O,C=i&I;if(c&&(b=h?c(r,l,h,_):c(r)),b!==n)return b;if(!We(r))return r;var $=oe(r);if($){if(b=yK(r),!S)return Ut(r,b)}else{var M=It(r),B=M==ra||M==lS;if(Kr(r))return $w(r,S);if(M==pr||M==vs||B&&!h){if(b=E||B?{}:Xw(r),!S)return E?cK(r,kU(b,r)):oK(r,uw(b,r))}else{if(!Fe[M])return h?r:{};b=bK(r,M,S)}}_||(_=new Fn);var V=_.get(r);if(V)return V;_.set(r,b),I1(r)?r.forEach(function(ee){b.add(gn(ee,i,c,ee,r,_))}):O1(r)&&r.forEach(function(ee,_e){b.set(_e,gn(ee,i,c,_e,r,_))});var Q=C?E?tp:ep:E?Bt:dt,he=$?n:Q(r);return hn(he||r,function(ee,_e){he&&(_e=ee,ee=r[_e]),Xo(b,_e,gn(ee,i,c,_e,r,_))}),b}function CU(r){var i=dt(r);return function(c){return aw(c,r,i)}}function aw(r,i,c){var l=c.length;if(r==null)return!l;for(r=Me(r);l--;){var h=c[l],_=i[h],b=r[h];if(b===n&&!(h in r)||!_(b))return!1}return!0}function lw(r,i,c){if(typeof r!="function")throw new dn(a);return ic(function(){r.apply(n,c)},i)}function Zo(r,i,c,l){var h=-1,_=ua,b=!0,S=r.length,E=[],C=i.length;if(!S)return E;c&&(i=De(i,Zt(c))),l?(_=Sd,b=!1):i.length>=o&&(_=Jo,b=!1,i=new _i(i));e:for(;++h<S;){var $=r[h],M=c==null?$:c($);if($=l||$!==0?$:0,b&&M===M){for(var B=C;B--;)if(i[B]===M)continue e;E.push($)}else _(i,M,l)||E.push($)}return E}var Nr=Lw(Xn),fw=Lw(Ld,!0);function $U(r,i){var c=!0;return Nr(r,function(l,h,_){return c=!!i(l,h,_),c}),c}function Ia(r,i,c){for(var l=-1,h=r.length;++l<h;){var _=r[l],b=i(_);if(b!=null&&(S===n?b===b&&!en(b):c(b,S)))var S=b,E=_}return E}function PU(r,i,c,l){var h=r.length;for(c=ae(c),c<0&&(c=-c>h?0:h+c),l=l===n||l>h?h:ae(l),l<0&&(l+=h),l=c>l?0:R1(l);c<l;)r[c++]=i;return r}function hw(r,i){var c=[];return Nr(r,function(l,h,_){i(l,h,_)&&c.push(l)}),c}function bt(r,i,c,l,h){var _=-1,b=r.length;for(c||(c=SK),h||(h=[]);++_<b;){var S=r[_];i>0&&c(S)?i>1?bt(S,i-1,c,l,h):Pr(h,S):l||(h[h.length]=S)}return h}var Nd=Dw(),dw=Dw(!0);function Xn(r,i){return r&&Nd(r,i,dt)}function Ld(r,i){return r&&dw(r,i,dt)}function Aa(r,i){return $r(i,function(c){return Sr(r[c])})}function bi(r,i){i=Dr(i,r);for(var c=0,l=i.length;r!=null&&c<l;)r=r[Qn(i[c++])];return c&&c==l?r:n}function pw(r,i,c){var l=i(r);return oe(r)?l:Pr(l,c(r))}function kt(r){return r==null?r===n?uL:oL:gi&&gi in Me(r)?gK(r):RK(r)}function Dd(r,i){return r>i}function MU(r,i){return r!=null&&ke.call(r,i)}function FU(r,i){return r!=null&&i in Me(r)}function NU(r,i,c){return r>=Tt(i,c)&&r<at(i,c)}function Ud(r,i,c){for(var l=c?Sd:ua,h=r[0].length,_=r.length,b=_,S=A(_),E=1/0,C=[];b--;){var $=r[b];b&&i&&($=De($,Zt(i))),E=Tt($.length,E),S[b]=!c&&(i||h>=120&&$.length>=120)?new _i(b&&$):n}$=r[0];var M=-1,B=S[0];e:for(;++M<h&&C.length<E;){var V=$[M],Q=i?i(V):V;if(V=c||V!==0?V:0,!(B?Jo(B,Q):l(C,Q,c))){for(b=_;--b;){var he=S[b];if(!(he?Jo(he,Q):l(r[b],Q,c)))continue e}B&&B.push(Q),C.push(V)}}return C}function LU(r,i,c,l){return Xn(r,function(h,_,b){i(l,c(h),_,b)}),l}function Qo(r,i,c){i=Dr(i,r),r=t1(r,i);var l=r==null?r:r[Qn(_n(i))];return l==null?n:Xt(l,r,c)}function gw(r){return Je(r)&&kt(r)==vs}function DU(r){return Je(r)&&kt(r)==qo}function UU(r){return Je(r)&&kt(r)==Uo}function ec(r,i,c,l,h){return r===i?!0:r==null||i==null||!Je(r)&&!Je(i)?r!==r&&i!==i:KU(r,i,c,l,ec,h)}function KU(r,i,c,l,h,_){var b=oe(r),S=oe(i),E=b?ta:It(r),C=S?ta:It(i);E=E==vs?pr:E,C=C==vs?pr:C;var $=E==pr,M=C==pr,B=E==C;if(B&&Kr(r)){if(!Kr(i))return!1;b=!0,$=!1}if(B&&!$)return _||(_=new Fn),b||Ms(r)?Vw(r,i,c,l,h,_):dK(r,i,E,c,l,h,_);if(!(c&R)){var V=$&&ke.call(r,"__wrapped__"),Q=M&&ke.call(i,"__wrapped__");if(V||Q){var he=V?r.value():r,ee=Q?i.value():i;return _||(_=new Fn),h(he,ee,c,l,_)}}return B?(_||(_=new Fn),pK(r,i,c,l,h,_)):!1}function BU(r){return Je(r)&&It(r)==$n}function Kd(r,i,c,l){var h=c.length,_=h,b=!l;if(r==null)return!_;for(r=Me(r);h--;){var S=c[h];if(b&&S[2]?S[1]!==r[S[0]]:!(S[0]in r))return!1}for(;++h<_;){S=c[h];var E=S[0],C=r[E],$=S[1];if(b&&S[2]){if(C===n&&!(E in r))return!1}else{var M=new Fn;if(l)var B=l(C,$,E,r,i,M);if(!(B===n?ec($,C,R|W,l,M):B))return!1}}return!0}function mw(r){if(!We(r)||EK(r))return!1;var i=Sr(r)?BD:CL;return i.test(Si(r))}function jU(r){return Je(r)&&kt(r)==Bo}function WU(r){return Je(r)&&It(r)==Pn}function qU(r){return Je(r)&&qa(r.length)&&!!Le[kt(r)]}function _w(r){return typeof r=="function"?r:r==null?jt:typeof r=="object"?oe(r)?vw(r[0],r[1]):bw(r):U1(r)}function Bd(r){if(!rc(r))return HD(r);var i=[];for(var c in Me(r))ke.call(r,c)&&c!="constructor"&&i.push(c);return i}function JU(r){if(!We(r))return AK(r);var i=rc(r),c=[];for(var l in r)l=="constructor"&&(i||!ke.call(r,l))||c.push(l);return c}function jd(r,i){return r<i}function yw(r,i){var c=-1,l=Kt(r)?A(r.length):[];return Nr(r,function(h,_,b){l[++c]=i(h,_,b)}),l}function bw(r){var i=rp(r);return i.length==1&&i[0][2]?Qw(i[0][0],i[0][1]):function(c){return c===r||Kd(c,r,i)}}function vw(r,i){return sp(r)&&Zw(i)?Qw(Qn(r),i):function(c){var l=gp(c,r);return l===n&&l===i?mp(c,r):ec(i,l,R|W)}}function Ra(r,i,c,l,h){r!==i&&Nd(i,function(_,b){if(h||(h=new Fn),We(_))GU(r,i,b,c,Ra,l,h);else{var S=l?l(cp(r,b),_,b+"",r,i,h):n;S===n&&(S=_),Md(r,b,S)}},Bt)}function GU(r,i,c,l,h,_,b){var S=cp(r,c),E=cp(i,c),C=b.get(E);if(C){Md(r,c,C);return}var $=_?_(S,E,c+"",r,i,b):n,M=$===n;if(M){var B=oe(E),V=!B&&Kr(E),Q=!B&&!V&&Ms(E);$=E,B||V||Q?oe(S)?$=S:ze(S)?$=Ut(S):V?(M=!1,$=$w(E,!0)):Q?(M=!1,$=Pw(E,!0)):$=[]:sc(E)||wi(E)?($=S,wi(S)?$=x1(S):(!We(S)||Sr(S))&&($=Xw(E))):M=!1}M&&(b.set(E,$),h($,E,l,_,b),b.delete(E)),Md(r,c,$)}function Sw(r,i){var c=r.length;if(c)return i+=i<0?c:0,vr(i,c)?r[i]:n}function ww(r,i,c){i.length?i=De(i,function(_){return oe(_)?function(b){return bi(b,_.length===1?_[0]:_)}:_}):i=[jt];var l=-1;i=De(i,Zt(Z()));var h=yw(r,function(_,b,S){var E=De(i,function(C){return C(_)});return{criteria:E,index:++l,value:_}});return bD(h,function(_,b){return sK(_,b,c)})}function HU(r,i){return Ew(r,i,function(c,l){return mp(r,l)})}function Ew(r,i,c){for(var l=-1,h=i.length,_={};++l<h;){var b=i[l],S=bi(r,b);c(S,b)&&tc(_,Dr(b,r),S)}return _}function VU(r){return function(i){return bi(i,r)}}function Wd(r,i,c,l){var h=l?yD:Es,_=-1,b=i.length,S=r;for(r===i&&(i=Ut(i)),c&&(S=De(r,Zt(c)));++_<b;)for(var E=0,C=i[_],$=c?c(C):C;(E=h(S,$,E,l))>-1;)S!==r&&ya.call(S,E,1),ya.call(r,E,1);return r}function Ow(r,i){for(var c=r?i.length:0,l=c-1;c--;){var h=i[c];if(c==l||h!==_){var _=h;vr(h)?ya.call(r,h,1):Hd(r,h)}}return r}function qd(r,i){return r+Sa(iw()*(i-r+1))}function zU(r,i,c,l){for(var h=-1,_=at(va((i-r)/(c||1)),0),b=A(_);_--;)b[l?_:++h]=r,r+=c;return b}function Jd(r,i){var c="";if(!r||i<1||i>Ve)return c;do i%2&&(c+=r),i=Sa(i/2),i&&(r+=r);while(i);return c}function pe(r,i){return up(e1(r,i,jt),r+"")}function YU(r){return cw(Fs(r))}function XU(r,i){var c=Fs(r);return Da(c,yi(i,0,c.length))}function tc(r,i,c,l){if(!We(r))return r;i=Dr(i,r);for(var h=-1,_=i.length,b=_-1,S=r;S!=null&&++h<_;){var E=Qn(i[h]),C=c;if(E==="__proto__"||E==="constructor"||E==="prototype")return r;if(h!=b){var $=S[E];C=l?l($,E,S):n,C===n&&(C=We($)?$:vr(i[h+1])?[]:{})}Xo(S,E,C),S=S[E]}return r}var Tw=wa?function(r,i){return wa.set(r,i),r}:jt,ZU=ba?function(r,i){return ba(r,"toString",{configurable:!0,enumerable:!1,value:yp(i),writable:!0})}:jt;function QU(r){return Da(Fs(r))}function mn(r,i,c){var l=-1,h=r.length;i<0&&(i=-i>h?0:h+i),c=c>h?h:c,c<0&&(c+=h),h=i>c?0:c-i>>>0,i>>>=0;for(var _=A(h);++l<h;)_[l]=r[l+i];return _}function eK(r,i){var c;return Nr(r,function(l,h,_){return c=i(l,h,_),!c}),!!c}function xa(r,i,c){var l=0,h=r==null?l:r.length;if(typeof i=="number"&&i===i&&h<=nL){for(;l<h;){var _=l+h>>>1,b=r[_];b!==null&&!en(b)&&(c?b<=i:b<i)?l=_+1:h=_}return h}return Gd(r,i,jt,c)}function Gd(r,i,c,l){var h=0,_=r==null?0:r.length;if(_===0)return 0;i=c(i);for(var b=i!==i,S=i===null,E=en(i),C=i===n;h<_;){var $=Sa((h+_)/2),M=c(r[$]),B=M!==n,V=M===null,Q=M===M,he=en(M);if(b)var ee=l||Q;else C?ee=Q&&(l||B):S?ee=Q&&B&&(l||!V):E?ee=Q&&B&&!V&&(l||!he):V||he?ee=!1:ee=l?M<=i:M<i;ee?h=$+1:_=$}return Tt(_,tL)}function Iw(r,i){for(var c=-1,l=r.length,h=0,_=[];++c<l;){var b=r[c],S=i?i(b):b;if(!c||!Nn(S,E)){var E=S;_[h++]=b===0?0:b}}return _}function Aw(r){return typeof r=="number"?r:en(r)?dr:+r}function Qt(r){if(typeof r=="string")return r;if(oe(r))return De(r,Qt)+"";if(en(r))return sw?sw.call(r):"";var i=r+"";return i=="0"&&1/r==-1/0?"-0":i}function Lr(r,i,c){var l=-1,h=ua,_=r.length,b=!0,S=[],E=S;if(c)b=!1,h=Sd;else if(_>=o){var C=i?null:fK(r);if(C)return la(C);b=!1,h=Jo,E=new _i}else E=i?[]:S;e:for(;++l<_;){var $=r[l],M=i?i($):$;if($=c||$!==0?$:0,b&&M===M){for(var B=E.length;B--;)if(E[B]===M)continue e;i&&E.push(M),S.push($)}else h(E,M,c)||(E!==S&&E.push(M),S.push($))}return S}function Hd(r,i){return i=Dr(i,r),r=t1(r,i),r==null||delete r[Qn(_n(i))]}function Rw(r,i,c,l){return tc(r,i,c(bi(r,i)),l)}function ka(r,i,c,l){for(var h=r.length,_=l?h:-1;(l?_--:++_<h)&&i(r[_],_,r););return c?mn(r,l?0:_,l?_+1:h):mn(r,l?_+1:0,l?h:_)}function xw(r,i){var c=r;return c instanceof ye&&(c=c.value()),wd(i,function(l,h){return h.func.apply(h.thisArg,Pr([l],h.args))},c)}function Vd(r,i,c){var l=r.length;if(l<2)return l?Lr(r[0]):[];for(var h=-1,_=A(l);++h<l;)for(var b=r[h],S=-1;++S<l;)S!=h&&(_[h]=Zo(_[h]||b,r[S],i,c));return Lr(bt(_,1),i,c)}function kw(r,i,c){for(var l=-1,h=r.length,_=i.length,b={};++l<h;){var S=l<_?i[l]:n;c(b,r[l],S)}return b}function zd(r){return ze(r)?r:[]}function Yd(r){return typeof r=="function"?r:jt}function Dr(r,i){return oe(r)?r:sp(r,i)?[r]:s1(xe(r))}var tK=pe;function Ur(r,i,c){var l=r.length;return c=c===n?l:c,!i&&c>=l?r:mn(r,i,c)}var Cw=jD||function(r){return yt.clearTimeout(r)};function $w(r,i){if(i)return r.slice();var c=r.length,l=QS?QS(c):new r.constructor(c);return r.copy(l),l}function Xd(r){var i=new r.constructor(r.byteLength);return new ma(i).set(new ma(r)),i}function nK(r,i){var c=i?Xd(r.buffer):r.buffer;return new r.constructor(c,r.byteOffset,r.byteLength)}function rK(r){var i=new r.constructor(r.source,gS.exec(r));return i.lastIndex=r.lastIndex,i}function iK(r){return Yo?Me(Yo.call(r)):{}}function Pw(r,i){var c=i?Xd(r.buffer):r.buffer;return new r.constructor(c,r.byteOffset,r.length)}function Mw(r,i){if(r!==i){var c=r!==n,l=r===null,h=r===r,_=en(r),b=i!==n,S=i===null,E=i===i,C=en(i);if(!S&&!C&&!_&&r>i||_&&b&&E&&!S&&!C||l&&b&&E||!c&&E||!h)return 1;if(!l&&!_&&!C&&r<i||C&&c&&h&&!l&&!_||S&&c&&h||!b&&h||!E)return-1}return 0}function sK(r,i,c){for(var l=-1,h=r.criteria,_=i.criteria,b=h.length,S=c.length;++l<b;){var E=Mw(h[l],_[l]);if(E){if(l>=S)return E;var C=c[l];return E*(C=="desc"?-1:1)}}return r.index-i.index}function Fw(r,i,c,l){for(var h=-1,_=r.length,b=c.length,S=-1,E=i.length,C=at(_-b,0),$=A(E+C),M=!l;++S<E;)$[S]=i[S];for(;++h<b;)(M||h<_)&&($[c[h]]=r[h]);for(;C--;)$[S++]=r[h++];return $}function Nw(r,i,c,l){for(var h=-1,_=r.length,b=-1,S=c.length,E=-1,C=i.length,$=at(_-S,0),M=A($+C),B=!l;++h<$;)M[h]=r[h];for(var V=h;++E<C;)M[V+E]=i[E];for(;++b<S;)(B||h<_)&&(M[V+c[b]]=r[h++]);return M}function Ut(r,i){var c=-1,l=r.length;for(i||(i=A(l));++c<l;)i[c]=r[c];return i}function Zn(r,i,c,l){var h=!c;c||(c={});for(var _=-1,b=i.length;++_<b;){var S=i[_],E=l?l(c[S],r[S],S,c,r):n;E===n&&(E=r[S]),h?_r(c,S,E):Xo(c,S,E)}return c}function oK(r,i){return Zn(r,ip(r),i)}function cK(r,i){return Zn(r,zw(r),i)}function Ca(r,i){return function(c,l){var h=oe(c)?hD:xU,_=i?i():{};return h(c,r,Z(l,2),_)}}function Cs(r){return pe(function(i,c){var l=-1,h=c.length,_=h>1?c[h-1]:n,b=h>2?c[2]:n;for(_=r.length>3&&typeof _=="function"?(h--,_):n,b&&Ct(c[0],c[1],b)&&(_=h<3?n:_,h=1),i=Me(i);++l<h;){var S=c[l];S&&r(i,S,l,_)}return i})}function Lw(r,i){return function(c,l){if(c==null)return c;if(!Kt(c))return r(c,l);for(var h=c.length,_=i?h:-1,b=Me(c);(i?_--:++_<h)&&l(b[_],_,b)!==!1;);return c}}function Dw(r){return function(i,c,l){for(var h=-1,_=Me(i),b=l(i),S=b.length;S--;){var E=b[r?S:++h];if(c(_[E],E,_)===!1)break}return i}}function uK(r,i,c){var l=i&L,h=nc(r);function _(){var b=this&&this!==yt&&this instanceof _?h:r;return b.apply(l?c:this,arguments)}return _}function Uw(r){return function(i){i=xe(i);var c=Os(i)?Mn(i):n,l=c?c[0]:i.charAt(0),h=c?Ur(c,1).join(""):i.slice(1);return l[r]()+h}}function $s(r){return function(i){return wd(L1(N1(i).replace(ZL,"")),r,"")}}function nc(r){return function(){var i=arguments;switch(i.length){case 0:return new r;case 1:return new r(i[0]);case 2:return new r(i[0],i[1]);case 3:return new r(i[0],i[1],i[2]);case 4:return new r(i[0],i[1],i[2],i[3]);case 5:return new r(i[0],i[1],i[2],i[3],i[4]);case 6:return new r(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new r(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var c=ks(r.prototype),l=r.apply(c,i);return We(l)?l:c}}function aK(r,i,c){var l=nc(r);function h(){for(var _=arguments.length,b=A(_),S=_,E=Ps(h);S--;)b[S]=arguments[S];var C=_<3&&b[0]!==E&&b[_-1]!==E?[]:Mr(b,E);if(_-=C.length,_<c)return qw(r,i,$a,h.placeholder,n,b,C,n,n,c-_);var $=this&&this!==yt&&this instanceof h?l:r;return Xt($,this,b)}return h}function Kw(r){return function(i,c,l){var h=Me(i);if(!Kt(i)){var _=Z(c,3);i=dt(i),c=function(S){return _(h[S],S,h)}}var b=r(i,c,l);return b>-1?h[_?i[b]:b]:n}}function Bw(r){return br(function(i){var c=i.length,l=c,h=pn.prototype.thru;for(r&&i.reverse();l--;){var _=i[l];if(typeof _!="function")throw new dn(a);if(h&&!b&&Na(_)=="wrapper")var b=new pn([],!0)}for(l=b?l:c;++l<c;){_=i[l];var S=Na(_),E=S=="wrapper"?np(_):n;E&&op(E[0])&&E[1]==(k|j|z|F)&&!E[4].length&&E[9]==1?b=b[Na(E[0])].apply(b,E[3]):b=_.length==1&&op(_)?b[S]():b.thru(_)}return function(){var C=arguments,$=C[0];if(b&&C.length==1&&oe($))return b.plant($).value();for(var M=0,B=c?i[M].apply(this,C):$;++M<c;)B=i[M].call(this,B);return B}})}function $a(r,i,c,l,h,_,b,S,E,C){var $=i&k,M=i&L,B=i&K,V=i&(j|H),Q=i&D,he=B?n:nc(r);function ee(){for(var _e=arguments.length,ve=A(_e),tn=_e;tn--;)ve[tn]=arguments[tn];if(V)var $t=Ps(ee),nn=SD(ve,$t);if(l&&(ve=Fw(ve,l,h,V)),_&&(ve=Nw(ve,_,b,V)),_e-=nn,V&&_e<C){var Ye=Mr(ve,$t);return qw(r,i,$a,ee.placeholder,c,ve,Ye,S,E,C-_e)}var Ln=M?c:this,Er=B?Ln[r]:r;return _e=ve.length,S?ve=xK(ve,S):Q&&_e>1&&ve.reverse(),$&&E<_e&&(ve.length=E),this&&this!==yt&&this instanceof ee&&(Er=he||nc(Er)),Er.apply(Ln,ve)}return ee}function jw(r,i){return function(c,l){return LU(c,r,i(l),{})}}function Pa(r,i){return function(c,l){var h;if(c===n&&l===n)return i;if(c!==n&&(h=c),l!==n){if(h===n)return l;typeof c=="string"||typeof l=="string"?(c=Qt(c),l=Qt(l)):(c=Aw(c),l=Aw(l)),h=r(c,l)}return h}}function Zd(r){return br(function(i){return i=De(i,Zt(Z())),pe(function(c){var l=this;return r(i,function(h){return Xt(h,l,c)})})})}function Ma(r,i){i=i===n?" ":Qt(i);var c=i.length;if(c<2)return c?Jd(i,r):i;var l=Jd(i,va(r/Ts(i)));return Os(i)?Ur(Mn(l),0,r).join(""):l.slice(0,r)}function lK(r,i,c,l){var h=i&L,_=nc(r);function b(){for(var S=-1,E=arguments.length,C=-1,$=l.length,M=A($+E),B=this&&this!==yt&&this instanceof b?_:r;++C<$;)M[C]=l[C];for(;E--;)M[C++]=arguments[++S];return Xt(B,h?c:this,M)}return b}function Ww(r){return function(i,c,l){return l&&typeof l!="number"&&Ct(i,c,l)&&(c=l=n),i=wr(i),c===n?(c=i,i=0):c=wr(c),l=l===n?i<c?1:-1:wr(l),zU(i,c,l,r)}}function Fa(r){return function(i,c){return typeof i=="string"&&typeof c=="string"||(i=yn(i),c=yn(c)),r(i,c)}}function qw(r,i,c,l,h,_,b,S,E,C){var $=i&j,M=$?b:n,B=$?n:b,V=$?_:n,Q=$?n:_;i|=$?z:G,i&=~($?G:z),i&Y||(i&=-4);var he=[r,i,h,V,M,Q,B,S,E,C],ee=c.apply(n,he);return op(r)&&n1(ee,he),ee.placeholder=l,r1(ee,r,i)}function Qd(r){var i=ut[r];return function(c,l){if(c=yn(c),l=l==null?0:Tt(ae(l),292),l&&rw(c)){var h=(xe(c)+"e").split("e"),_=i(h[0]+"e"+(+h[1]+l));return h=(xe(_)+"e").split("e"),+(h[0]+"e"+(+h[1]-l))}return i(c)}}var fK=Rs&&1/la(new Rs([,-0]))[1]==ne?function(r){return new Rs(r)}:Sp;function Jw(r){return function(i){var c=It(i);return c==$n?xd(i):c==Pn?RD(i):vD(i,r(i))}}function yr(r,i,c,l,h,_,b,S){var E=i&K;if(!E&&typeof r!="function")throw new dn(a);var C=l?l.length:0;if(C||(i&=-97,l=h=n),b=b===n?b:at(ae(b),0),S=S===n?S:ae(S),C-=h?h.length:0,i&G){var $=l,M=h;l=h=n}var B=E?n:np(r),V=[r,i,c,l,h,$,M,_,b,S];if(B&&IK(V,B),r=V[0],i=V[1],c=V[2],l=V[3],h=V[4],S=V[9]=V[9]===n?E?0:r.length:at(V[9]-C,0),!S&&i&(j|H)&&(i&=-25),!i||i==L)var Q=uK(r,i,c);else i==j||i==H?Q=aK(r,i,S):(i==z||i==(L|z))&&!h.length?Q=lK(r,i,c,l):Q=$a.apply(n,V);var he=B?Tw:n1;return r1(he(Q,V),r,i)}function Gw(r,i,c,l){return r===n||Nn(r,As[c])&&!ke.call(l,c)?i:r}function Hw(r,i,c,l,h,_){return We(r)&&We(i)&&(_.set(i,r),Ra(r,i,n,Hw,_),_.delete(i)),r}function hK(r){return sc(r)?n:r}function Vw(r,i,c,l,h,_){var b=c&R,S=r.length,E=i.length;if(S!=E&&!(b&&E>S))return!1;var C=_.get(r),$=_.get(i);if(C&&$)return C==i&&$==r;var M=-1,B=!0,V=c&W?new _i:n;for(_.set(r,i),_.set(i,r);++M<S;){var Q=r[M],he=i[M];if(l)var ee=b?l(he,Q,M,i,r,_):l(Q,he,M,r,i,_);if(ee!==n){if(ee)continue;B=!1;break}if(V){if(!Ed(i,function(_e,ve){if(!Jo(V,ve)&&(Q===_e||h(Q,_e,c,l,_)))return V.push(ve)})){B=!1;break}}else if(!(Q===he||h(Q,he,c,l,_))){B=!1;break}}return _.delete(r),_.delete(i),B}function dK(r,i,c,l,h,_,b){switch(c){case Ss:if(r.byteLength!=i.byteLength||r.byteOffset!=i.byteOffset)return!1;r=r.buffer,i=i.buffer;case qo:return!(r.byteLength!=i.byteLength||!_(new ma(r),new ma(i)));case Do:case Uo:case Ko:return Nn(+r,+i);case na:return r.name==i.name&&r.message==i.message;case Bo:case jo:return r==i+"";case $n:var S=xd;case Pn:var E=l&R;if(S||(S=la),r.size!=i.size&&!E)return!1;var C=b.get(r);if(C)return C==i;l|=W,b.set(r,i);var $=Vw(S(r),S(i),l,h,_,b);return b.delete(r),$;case ia:if(Yo)return Yo.call(r)==Yo.call(i)}return!1}function pK(r,i,c,l,h,_){var b=c&R,S=ep(r),E=S.length,C=ep(i),$=C.length;if(E!=$&&!b)return!1;for(var M=E;M--;){var B=S[M];if(!(b?B in i:ke.call(i,B)))return!1}var V=_.get(r),Q=_.get(i);if(V&&Q)return V==i&&Q==r;var he=!0;_.set(r,i),_.set(i,r);for(var ee=b;++M<E;){B=S[M];var _e=r[B],ve=i[B];if(l)var tn=b?l(ve,_e,B,i,r,_):l(_e,ve,B,r,i,_);if(!(tn===n?_e===ve||h(_e,ve,c,l,_):tn)){he=!1;break}ee||(ee=B=="constructor")}if(he&&!ee){var $t=r.constructor,nn=i.constructor;$t!=nn&&"constructor"in r&&"constructor"in i&&!(typeof $t=="function"&&$t instanceof $t&&typeof nn=="function"&&nn instanceof nn)&&(he=!1)}return _.delete(r),_.delete(i),he}function br(r){return up(e1(r,n,a1),r+"")}function ep(r){return pw(r,dt,ip)}function tp(r){return pw(r,Bt,zw)}var np=wa?function(r){return wa.get(r)}:Sp;function Na(r){for(var i=r.name+"",c=xs[i],l=ke.call(xs,i)?c.length:0;l--;){var h=c[l],_=h.func;if(_==null||_==r)return h.name}return i}function Ps(r){var i=ke.call(g,"placeholder")?g:r;return i.placeholder}function Z(){var r=g.iteratee||bp;return r=r===bp?_w:r,arguments.length?r(arguments[0],arguments[1]):r}function La(r,i){var c=r.__data__;return wK(i)?c[typeof i=="string"?"string":"hash"]:c.map}function rp(r){for(var i=dt(r),c=i.length;c--;){var l=i[c],h=r[l];i[c]=[l,h,Zw(h)]}return i}function vi(r,i){var c=TD(r,i);return mw(c)?c:n}function gK(r){var i=ke.call(r,gi),c=r[gi];try{r[gi]=n;var l=!0}catch{}var h=pa.call(r);return l&&(i?r[gi]=c:delete r[gi]),h}var ip=Cd?function(r){return r==null?[]:(r=Me(r),$r(Cd(r),function(i){return tw.call(r,i)}))}:wp,zw=Cd?function(r){for(var i=[];r;)Pr(i,ip(r)),r=_a(r);return i}:wp,It=kt;($d&&It(new $d(new ArrayBuffer(1)))!=Ss||Ho&&It(new Ho)!=$n||Pd&&It(Pd.resolve())!=fS||Rs&&It(new Rs)!=Pn||Vo&&It(new Vo)!=Wo)&&(It=function(r){var i=kt(r),c=i==pr?r.constructor:n,l=c?Si(c):"";if(l)switch(l){case XD:return Ss;case ZD:return $n;case QD:return fS;case eU:return Pn;case tU:return Wo}return i});function mK(r,i,c){for(var l=-1,h=c.length;++l<h;){var _=c[l],b=_.size;switch(_.type){case"drop":r+=b;break;case"dropRight":i-=b;break;case"take":i=Tt(i,r+b);break;case"takeRight":r=at(r,i-b);break}}return{start:r,end:i}}function _K(r){var i=r.match(EL);return i?i[1].split(OL):[]}function Yw(r,i,c){i=Dr(i,r);for(var l=-1,h=i.length,_=!1;++l<h;){var b=Qn(i[l]);if(!(_=r!=null&&c(r,b)))break;r=r[b]}return _||++l!=h?_:(h=r==null?0:r.length,!!h&&qa(h)&&vr(b,h)&&(oe(r)||wi(r)))}function yK(r){var i=r.length,c=new r.constructor(i);return i&&typeof r[0]=="string"&&ke.call(r,"index")&&(c.index=r.index,c.input=r.input),c}function Xw(r){return typeof r.constructor=="function"&&!rc(r)?ks(_a(r)):{}}function bK(r,i,c){var l=r.constructor;switch(i){case qo:return Xd(r);case Do:case Uo:return new l(+r);case Ss:return nK(r,c);case rd:case id:case sd:case od:case cd:case ud:case ad:case ld:case fd:return Pw(r,c);case $n:return new l;case Ko:case jo:return new l(r);case Bo:return rK(r);case Pn:return new l;case ia:return iK(r)}}function vK(r,i){var c=i.length;if(!c)return r;var l=c-1;return i[l]=(c>1?"& ":"")+i[l],i=i.join(c>2?", ":" "),r.replace(wL,`{
/* [wrapped with `+i+`] */
`)}function SK(r){return oe(r)||wi(r)||!!(nw&&r&&r[nw])}function vr(r,i){var c=typeof r;return i=i??Ve,!!i&&(c=="number"||c!="symbol"&&PL.test(r))&&r>-1&&r%1==0&&r<i}function Ct(r,i,c){if(!We(c))return!1;var l=typeof i;return(l=="number"?Kt(c)&&vr(i,c.length):l=="string"&&i in c)?Nn(c[i],r):!1}function sp(r,i){if(oe(r))return!1;var c=typeof r;return c=="number"||c=="symbol"||c=="boolean"||r==null||en(r)?!0:yL.test(r)||!_L.test(r)||i!=null&&r in Me(i)}function wK(r){var i=typeof r;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?r!=="__proto__":r===null}function op(r){var i=Na(r),c=g[i];if(typeof c!="function"||!(i in ye.prototype))return!1;if(r===c)return!0;var l=np(c);return!!l&&r===l[0]}function EK(r){return!!ZS&&ZS in r}var OK=ha?Sr:Ep;function rc(r){var i=r&&r.constructor,c=typeof i=="function"&&i.prototype||As;return r===c}function Zw(r){return r===r&&!We(r)}function Qw(r,i){return function(c){return c==null?!1:c[r]===i&&(i!==n||r in Me(c))}}function TK(r){var i=ja(r,function(l){return c.size===m&&c.clear(),l}),c=i.cache;return i}function IK(r,i){var c=r[1],l=i[1],h=c|l,_=h<(L|K|k),b=l==k&&c==j||l==k&&c==F&&r[7].length<=i[8]||l==(k|F)&&i[7].length<=i[8]&&c==j;if(!(_||b))return r;l&L&&(r[2]=i[2],h|=c&L?0:Y);var S=i[3];if(S){var E=r[3];r[3]=E?Fw(E,S,i[4]):S,r[4]=E?Mr(r[3],y):i[4]}return S=i[5],S&&(E=r[5],r[5]=E?Nw(E,S,i[6]):S,r[6]=E?Mr(r[5],y):i[6]),S=i[7],S&&(r[7]=S),l&k&&(r[8]=r[8]==null?i[8]:Tt(r[8],i[8])),r[9]==null&&(r[9]=i[9]),r[0]=i[0],r[1]=h,r}function AK(r){var i=[];if(r!=null)for(var c in Me(r))i.push(c);return i}function RK(r){return pa.call(r)}function e1(r,i,c){return i=at(i===n?r.length-1:i,0),function(){for(var l=arguments,h=-1,_=at(l.length-i,0),b=A(_);++h<_;)b[h]=l[i+h];h=-1;for(var S=A(i+1);++h<i;)S[h]=l[h];return S[i]=c(b),Xt(r,this,S)}}function t1(r,i){return i.length<2?r:bi(r,mn(i,0,-1))}function xK(r,i){for(var c=r.length,l=Tt(i.length,c),h=Ut(r);l--;){var _=i[l];r[l]=vr(_,c)?h[_]:n}return r}function cp(r,i){if(!(i==="constructor"&&typeof r[i]=="function")&&i!="__proto__")return r[i]}var n1=i1(Tw),ic=qD||function(r,i){return yt.setTimeout(r,i)},up=i1(ZU);function r1(r,i,c){var l=i+"";return up(r,vK(l,kK(_K(l),c)))}function i1(r){var i=0,c=0;return function(){var l=VD(),h=Te-(l-c);if(c=l,h>0){if(++i>=q)return arguments[0]}else i=0;return r.apply(n,arguments)}}function Da(r,i){var c=-1,l=r.length,h=l-1;for(i=i===n?l:i;++c<i;){var _=qd(c,h),b=r[_];r[_]=r[c],r[c]=b}return r.length=i,r}var s1=TK(function(r){var i=[];return r.charCodeAt(0)===46&&i.push(""),r.replace(bL,function(c,l,h,_){i.push(h?_.replace(AL,"$1"):l||c)}),i});function Qn(r){if(typeof r=="string"||en(r))return r;var i=r+"";return i=="0"&&1/r==-1/0?"-0":i}function Si(r){if(r!=null){try{return da.call(r)}catch{}try{return r+""}catch{}}return""}function kK(r,i){return hn(rL,function(c){var l="_."+c[0];i&c[1]&&!ua(r,l)&&r.push(l)}),r.sort()}function o1(r){if(r instanceof ye)return r.clone();var i=new pn(r.__wrapped__,r.__chain__);return i.__actions__=Ut(r.__actions__),i.__index__=r.__index__,i.__values__=r.__values__,i}function CK(r,i,c){(c?Ct(r,i,c):i===n)?i=1:i=at(ae(i),0);var l=r==null?0:r.length;if(!l||i<1)return[];for(var h=0,_=0,b=A(va(l/i));h<l;)b[_++]=mn(r,h,h+=i);return b}function $K(r){for(var i=-1,c=r==null?0:r.length,l=0,h=[];++i<c;){var _=r[i];_&&(h[l++]=_)}return h}function PK(){var r=arguments.length;if(!r)return[];for(var i=A(r-1),c=arguments[0],l=r;l--;)i[l-1]=arguments[l];return Pr(oe(c)?Ut(c):[c],bt(i,1))}var MK=pe(function(r,i){return ze(r)?Zo(r,bt(i,1,ze,!0)):[]}),FK=pe(function(r,i){var c=_n(i);return ze(c)&&(c=n),ze(r)?Zo(r,bt(i,1,ze,!0),Z(c,2)):[]}),NK=pe(function(r,i){var c=_n(i);return ze(c)&&(c=n),ze(r)?Zo(r,bt(i,1,ze,!0),n,c):[]});function LK(r,i,c){var l=r==null?0:r.length;return l?(i=c||i===n?1:ae(i),mn(r,i<0?0:i,l)):[]}function DK(r,i,c){var l=r==null?0:r.length;return l?(i=c||i===n?1:ae(i),i=l-i,mn(r,0,i<0?0:i)):[]}function UK(r,i){return r&&r.length?ka(r,Z(i,3),!0,!0):[]}function KK(r,i){return r&&r.length?ka(r,Z(i,3),!0):[]}function BK(r,i,c,l){var h=r==null?0:r.length;return h?(c&&typeof c!="number"&&Ct(r,i,c)&&(c=0,l=h),PU(r,i,c,l)):[]}function c1(r,i,c){var l=r==null?0:r.length;if(!l)return-1;var h=c==null?0:ae(c);return h<0&&(h=at(l+h,0)),aa(r,Z(i,3),h)}function u1(r,i,c){var l=r==null?0:r.length;if(!l)return-1;var h=l-1;return c!==n&&(h=ae(c),h=c<0?at(l+h,0):Tt(h,l-1)),aa(r,Z(i,3),h,!0)}function a1(r){var i=r==null?0:r.length;return i?bt(r,1):[]}function jK(r){var i=r==null?0:r.length;return i?bt(r,ne):[]}function WK(r,i){var c=r==null?0:r.length;return c?(i=i===n?1:ae(i),bt(r,i)):[]}function qK(r){for(var i=-1,c=r==null?0:r.length,l={};++i<c;){var h=r[i];l[h[0]]=h[1]}return l}function l1(r){return r&&r.length?r[0]:n}function JK(r,i,c){var l=r==null?0:r.length;if(!l)return-1;var h=c==null?0:ae(c);return h<0&&(h=at(l+h,0)),Es(r,i,h)}function GK(r){var i=r==null?0:r.length;return i?mn(r,0,-1):[]}var HK=pe(function(r){var i=De(r,zd);return i.length&&i[0]===r[0]?Ud(i):[]}),VK=pe(function(r){var i=_n(r),c=De(r,zd);return i===_n(c)?i=n:c.pop(),c.length&&c[0]===r[0]?Ud(c,Z(i,2)):[]}),zK=pe(function(r){var i=_n(r),c=De(r,zd);return i=typeof i=="function"?i:n,i&&c.pop(),c.length&&c[0]===r[0]?Ud(c,n,i):[]});function YK(r,i){return r==null?"":GD.call(r,i)}function _n(r){var i=r==null?0:r.length;return i?r[i-1]:n}function XK(r,i,c){var l=r==null?0:r.length;if(!l)return-1;var h=l;return c!==n&&(h=ae(c),h=h<0?at(l+h,0):Tt(h,l-1)),i===i?kD(r,i,h):aa(r,qS,h,!0)}function ZK(r,i){return r&&r.length?Sw(r,ae(i)):n}var QK=pe(f1);function f1(r,i){return r&&r.length&&i&&i.length?Wd(r,i):r}function eB(r,i,c){return r&&r.length&&i&&i.length?Wd(r,i,Z(c,2)):r}function tB(r,i,c){return r&&r.length&&i&&i.length?Wd(r,i,n,c):r}var nB=br(function(r,i){var c=r==null?0:r.length,l=Fd(r,i);return Ow(r,De(i,function(h){return vr(h,c)?+h:h}).sort(Mw)),l});function rB(r,i){var c=[];if(!(r&&r.length))return c;var l=-1,h=[],_=r.length;for(i=Z(i,3);++l<_;){var b=r[l];i(b,l,r)&&(c.push(b),h.push(l))}return Ow(r,h),c}function ap(r){return r==null?r:YD.call(r)}function iB(r,i,c){var l=r==null?0:r.length;return l?(c&&typeof c!="number"&&Ct(r,i,c)?(i=0,c=l):(i=i==null?0:ae(i),c=c===n?l:ae(c)),mn(r,i,c)):[]}function sB(r,i){return xa(r,i)}function oB(r,i,c){return Gd(r,i,Z(c,2))}function cB(r,i){var c=r==null?0:r.length;if(c){var l=xa(r,i);if(l<c&&Nn(r[l],i))return l}return-1}function uB(r,i){return xa(r,i,!0)}function aB(r,i,c){return Gd(r,i,Z(c,2),!0)}function lB(r,i){var c=r==null?0:r.length;if(c){var l=xa(r,i,!0)-1;if(Nn(r[l],i))return l}return-1}function fB(r){return r&&r.length?Iw(r):[]}function hB(r,i){return r&&r.length?Iw(r,Z(i,2)):[]}function dB(r){var i=r==null?0:r.length;return i?mn(r,1,i):[]}function pB(r,i,c){return r&&r.length?(i=c||i===n?1:ae(i),mn(r,0,i<0?0:i)):[]}function gB(r,i,c){var l=r==null?0:r.length;return l?(i=c||i===n?1:ae(i),i=l-i,mn(r,i<0?0:i,l)):[]}function mB(r,i){return r&&r.length?ka(r,Z(i,3),!1,!0):[]}function _B(r,i){return r&&r.length?ka(r,Z(i,3)):[]}var yB=pe(function(r){return Lr(bt(r,1,ze,!0))}),bB=pe(function(r){var i=_n(r);return ze(i)&&(i=n),Lr(bt(r,1,ze,!0),Z(i,2))}),vB=pe(function(r){var i=_n(r);return i=typeof i=="function"?i:n,Lr(bt(r,1,ze,!0),n,i)});function SB(r){return r&&r.length?Lr(r):[]}function wB(r,i){return r&&r.length?Lr(r,Z(i,2)):[]}function EB(r,i){return i=typeof i=="function"?i:n,r&&r.length?Lr(r,n,i):[]}function lp(r){if(!(r&&r.length))return[];var i=0;return r=$r(r,function(c){if(ze(c))return i=at(c.length,i),!0}),Ad(i,function(c){return De(r,Od(c))})}function h1(r,i){if(!(r&&r.length))return[];var c=lp(r);return i==null?c:De(c,function(l){return Xt(i,n,l)})}var OB=pe(function(r,i){return ze(r)?Zo(r,i):[]}),TB=pe(function(r){return Vd($r(r,ze))}),IB=pe(function(r){var i=_n(r);return ze(i)&&(i=n),Vd($r(r,ze),Z(i,2))}),AB=pe(function(r){var i=_n(r);return i=typeof i=="function"?i:n,Vd($r(r,ze),n,i)}),RB=pe(lp);function xB(r,i){return kw(r||[],i||[],Xo)}function kB(r,i){return kw(r||[],i||[],tc)}var CB=pe(function(r){var i=r.length,c=i>1?r[i-1]:n;return c=typeof c=="function"?(r.pop(),c):n,h1(r,c)});function d1(r){var i=g(r);return i.__chain__=!0,i}function $B(r,i){return i(r),r}function Ua(r,i){return i(r)}var PB=br(function(r){var i=r.length,c=i?r[0]:0,l=this.__wrapped__,h=function(_){return Fd(_,r)};return i>1||this.__actions__.length||!(l instanceof ye)||!vr(c)?this.thru(h):(l=l.slice(c,+c+(i?1:0)),l.__actions__.push({func:Ua,args:[h],thisArg:n}),new pn(l,this.__chain__).thru(function(_){return i&&!_.length&&_.push(n),_}))});function MB(){return d1(this)}function FB(){return new pn(this.value(),this.__chain__)}function NB(){this.__values__===n&&(this.__values__=A1(this.value()));var r=this.__index__>=this.__values__.length,i=r?n:this.__values__[this.__index__++];return{done:r,value:i}}function LB(){return this}function DB(r){for(var i,c=this;c instanceof Oa;){var l=o1(c);l.__index__=0,l.__values__=n,i?h.__wrapped__=l:i=l;var h=l;c=c.__wrapped__}return h.__wrapped__=r,i}function UB(){var r=this.__wrapped__;if(r instanceof ye){var i=r;return this.__actions__.length&&(i=new ye(this)),i=i.reverse(),i.__actions__.push({func:Ua,args:[ap],thisArg:n}),new pn(i,this.__chain__)}return this.thru(ap)}function KB(){return xw(this.__wrapped__,this.__actions__)}var BB=Ca(function(r,i,c){ke.call(r,c)?++r[c]:_r(r,c,1)});function jB(r,i,c){var l=oe(r)?jS:$U;return c&&Ct(r,i,c)&&(i=n),l(r,Z(i,3))}function WB(r,i){var c=oe(r)?$r:hw;return c(r,Z(i,3))}var qB=Kw(c1),JB=Kw(u1);function GB(r,i){return bt(Ka(r,i),1)}function HB(r,i){return bt(Ka(r,i),ne)}function VB(r,i,c){return c=c===n?1:ae(c),bt(Ka(r,i),c)}function p1(r,i){var c=oe(r)?hn:Nr;return c(r,Z(i,3))}function g1(r,i){var c=oe(r)?dD:fw;return c(r,Z(i,3))}var zB=Ca(function(r,i,c){ke.call(r,c)?r[c].push(i):_r(r,c,[i])});function YB(r,i,c,l){r=Kt(r)?r:Fs(r),c=c&&!l?ae(c):0;var h=r.length;return c<0&&(c=at(h+c,0)),Ja(r)?c<=h&&r.indexOf(i,c)>-1:!!h&&Es(r,i,c)>-1}var XB=pe(function(r,i,c){var l=-1,h=typeof i=="function",_=Kt(r)?A(r.length):[];return Nr(r,function(b){_[++l]=h?Xt(i,b,c):Qo(b,i,c)}),_}),ZB=Ca(function(r,i,c){_r(r,c,i)});function Ka(r,i){var c=oe(r)?De:yw;return c(r,Z(i,3))}function QB(r,i,c,l){return r==null?[]:(oe(i)||(i=i==null?[]:[i]),c=l?n:c,oe(c)||(c=c==null?[]:[c]),ww(r,i,c))}var e2=Ca(function(r,i,c){r[c?0:1].push(i)},function(){return[[],[]]});function t2(r,i,c){var l=oe(r)?wd:GS,h=arguments.length<3;return l(r,Z(i,4),c,h,Nr)}function n2(r,i,c){var l=oe(r)?pD:GS,h=arguments.length<3;return l(r,Z(i,4),c,h,fw)}function r2(r,i){var c=oe(r)?$r:hw;return c(r,Wa(Z(i,3)))}function i2(r){var i=oe(r)?cw:YU;return i(r)}function s2(r,i,c){(c?Ct(r,i,c):i===n)?i=1:i=ae(i);var l=oe(r)?AU:XU;return l(r,i)}function o2(r){var i=oe(r)?RU:QU;return i(r)}function c2(r){if(r==null)return 0;if(Kt(r))return Ja(r)?Ts(r):r.length;var i=It(r);return i==$n||i==Pn?r.size:Bd(r).length}function u2(r,i,c){var l=oe(r)?Ed:eK;return c&&Ct(r,i,c)&&(i=n),l(r,Z(i,3))}var a2=pe(function(r,i){if(r==null)return[];var c=i.length;return c>1&&Ct(r,i[0],i[1])?i=[]:c>2&&Ct(i[0],i[1],i[2])&&(i=[i[0]]),ww(r,bt(i,1),[])}),Ba=WD||function(){return yt.Date.now()};function l2(r,i){if(typeof i!="function")throw new dn(a);return r=ae(r),function(){if(--r<1)return i.apply(this,arguments)}}function m1(r,i,c){return i=c?n:i,i=r&&i==null?r.length:i,yr(r,k,n,n,n,n,i)}function _1(r,i){var c;if(typeof i!="function")throw new dn(a);return r=ae(r),function(){return--r>0&&(c=i.apply(this,arguments)),r<=1&&(i=n),c}}var fp=pe(function(r,i,c){var l=L;if(c.length){var h=Mr(c,Ps(fp));l|=z}return yr(r,l,i,c,h)}),y1=pe(function(r,i,c){var l=L|K;if(c.length){var h=Mr(c,Ps(y1));l|=z}return yr(i,l,r,c,h)});function b1(r,i,c){i=c?n:i;var l=yr(r,j,n,n,n,n,n,i);return l.placeholder=b1.placeholder,l}function v1(r,i,c){i=c?n:i;var l=yr(r,H,n,n,n,n,n,i);return l.placeholder=v1.placeholder,l}function S1(r,i,c){var l,h,_,b,S,E,C=0,$=!1,M=!1,B=!0;if(typeof r!="function")throw new dn(a);i=yn(i)||0,We(c)&&($=!!c.leading,M="maxWait"in c,_=M?at(yn(c.maxWait)||0,i):_,B="trailing"in c?!!c.trailing:B);function V(Ye){var Ln=l,Er=h;return l=h=n,C=Ye,b=r.apply(Er,Ln),b}function Q(Ye){return C=Ye,S=ic(_e,i),$?V(Ye):b}function he(Ye){var Ln=Ye-E,Er=Ye-C,K1=i-Ln;return M?Tt(K1,_-Er):K1}function ee(Ye){var Ln=Ye-E,Er=Ye-C;return E===n||Ln>=i||Ln<0||M&&Er>=_}function _e(){var Ye=Ba();if(ee(Ye))return ve(Ye);S=ic(_e,he(Ye))}function ve(Ye){return S=n,B&&l?V(Ye):(l=h=n,b)}function tn(){S!==n&&Cw(S),C=0,l=E=h=S=n}function $t(){return S===n?b:ve(Ba())}function nn(){var Ye=Ba(),Ln=ee(Ye);if(l=arguments,h=this,E=Ye,Ln){if(S===n)return Q(E);if(M)return Cw(S),S=ic(_e,i),V(E)}return S===n&&(S=ic(_e,i)),b}return nn.cancel=tn,nn.flush=$t,nn}var f2=pe(function(r,i){return lw(r,1,i)}),h2=pe(function(r,i,c){return lw(r,yn(i)||0,c)});function d2(r){return yr(r,D)}function ja(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new dn(a);var c=function(){var l=arguments,h=i?i.apply(this,l):l[0],_=c.cache;if(_.has(h))return _.get(h);var b=r.apply(this,l);return c.cache=_.set(h,b)||_,b};return c.cache=new(ja.Cache||mr),c}ja.Cache=mr;function Wa(r){if(typeof r!="function")throw new dn(a);return function(){var i=arguments;switch(i.length){case 0:return!r.call(this);case 1:return!r.call(this,i[0]);case 2:return!r.call(this,i[0],i[1]);case 3:return!r.call(this,i[0],i[1],i[2])}return!r.apply(this,i)}}function p2(r){return _1(2,r)}var g2=tK(function(r,i){i=i.length==1&&oe(i[0])?De(i[0],Zt(Z())):De(bt(i,1),Zt(Z()));var c=i.length;return pe(function(l){for(var h=-1,_=Tt(l.length,c);++h<_;)l[h]=i[h].call(this,l[h]);return Xt(r,this,l)})}),hp=pe(function(r,i){var c=Mr(i,Ps(hp));return yr(r,z,n,i,c)}),w1=pe(function(r,i){var c=Mr(i,Ps(w1));return yr(r,G,n,i,c)}),m2=br(function(r,i){return yr(r,F,n,n,n,i)});function _2(r,i){if(typeof r!="function")throw new dn(a);return i=i===n?i:ae(i),pe(r,i)}function y2(r,i){if(typeof r!="function")throw new dn(a);return i=i==null?0:at(ae(i),0),pe(function(c){var l=c[i],h=Ur(c,0,i);return l&&Pr(h,l),Xt(r,this,h)})}function b2(r,i,c){var l=!0,h=!0;if(typeof r!="function")throw new dn(a);return We(c)&&(l="leading"in c?!!c.leading:l,h="trailing"in c?!!c.trailing:h),S1(r,i,{leading:l,maxWait:i,trailing:h})}function v2(r){return m1(r,1)}function S2(r,i){return hp(Yd(i),r)}function w2(){if(!arguments.length)return[];var r=arguments[0];return oe(r)?r:[r]}function E2(r){return gn(r,I)}function O2(r,i){return i=typeof i=="function"?i:n,gn(r,I,i)}function T2(r){return gn(r,v|I)}function I2(r,i){return i=typeof i=="function"?i:n,gn(r,v|I,i)}function A2(r,i){return i==null||aw(r,i,dt(i))}function Nn(r,i){return r===i||r!==r&&i!==i}var R2=Fa(Dd),x2=Fa(function(r,i){return r>=i}),wi=gw(function(){return arguments}())?gw:function(r){return Je(r)&&ke.call(r,"callee")&&!tw.call(r,"callee")},oe=A.isArray,k2=NS?Zt(NS):DU;function Kt(r){return r!=null&&qa(r.length)&&!Sr(r)}function ze(r){return Je(r)&&Kt(r)}function C2(r){return r===!0||r===!1||Je(r)&&kt(r)==Do}var Kr=JD||Ep,$2=LS?Zt(LS):UU;function P2(r){return Je(r)&&r.nodeType===1&&!sc(r)}function M2(r){if(r==null)return!0;if(Kt(r)&&(oe(r)||typeof r=="string"||typeof r.splice=="function"||Kr(r)||Ms(r)||wi(r)))return!r.length;var i=It(r);if(i==$n||i==Pn)return!r.size;if(rc(r))return!Bd(r).length;for(var c in r)if(ke.call(r,c))return!1;return!0}function F2(r,i){return ec(r,i)}function N2(r,i,c){c=typeof c=="function"?c:n;var l=c?c(r,i):n;return l===n?ec(r,i,n,c):!!l}function dp(r){if(!Je(r))return!1;var i=kt(r);return i==na||i==sL||typeof r.message=="string"&&typeof r.name=="string"&&!sc(r)}function L2(r){return typeof r=="number"&&rw(r)}function Sr(r){if(!We(r))return!1;var i=kt(r);return i==ra||i==lS||i==iL||i==cL}function E1(r){return typeof r=="number"&&r==ae(r)}function qa(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Ve}function We(r){var i=typeof r;return r!=null&&(i=="object"||i=="function")}function Je(r){return r!=null&&typeof r=="object"}var O1=DS?Zt(DS):BU;function D2(r,i){return r===i||Kd(r,i,rp(i))}function U2(r,i,c){return c=typeof c=="function"?c:n,Kd(r,i,rp(i),c)}function K2(r){return T1(r)&&r!=+r}function B2(r){if(OK(r))throw new ie(u);return mw(r)}function j2(r){return r===null}function W2(r){return r==null}function T1(r){return typeof r=="number"||Je(r)&&kt(r)==Ko}function sc(r){if(!Je(r)||kt(r)!=pr)return!1;var i=_a(r);if(i===null)return!0;var c=ke.call(i,"constructor")&&i.constructor;return typeof c=="function"&&c instanceof c&&da.call(c)==UD}var pp=US?Zt(US):jU;function q2(r){return E1(r)&&r>=-9007199254740991&&r<=Ve}var I1=KS?Zt(KS):WU;function Ja(r){return typeof r=="string"||!oe(r)&&Je(r)&&kt(r)==jo}function en(r){return typeof r=="symbol"||Je(r)&&kt(r)==ia}var Ms=BS?Zt(BS):qU;function J2(r){return r===n}function G2(r){return Je(r)&&It(r)==Wo}function H2(r){return Je(r)&&kt(r)==aL}var V2=Fa(jd),z2=Fa(function(r,i){return r<=i});function A1(r){if(!r)return[];if(Kt(r))return Ja(r)?Mn(r):Ut(r);if(Go&&r[Go])return AD(r[Go]());var i=It(r),c=i==$n?xd:i==Pn?la:Fs;return c(r)}function wr(r){if(!r)return r===0?r:0;if(r=yn(r),r===ne||r===-1/0){var i=r<0?-1:1;return i*Cn}return r===r?r:0}function ae(r){var i=wr(r),c=i%1;return i===i?c?i-c:i:0}function R1(r){return r?yi(ae(r),0,Ot):0}function yn(r){if(typeof r=="number")return r;if(en(r))return dr;if(We(r)){var i=typeof r.valueOf=="function"?r.valueOf():r;r=We(i)?i+"":i}if(typeof r!="string")return r===0?r:+r;r=HS(r);var c=kL.test(r);return c||$L.test(r)?lD(r.slice(2),c?2:8):xL.test(r)?dr:+r}function x1(r){return Zn(r,Bt(r))}function Y2(r){return r?yi(ae(r),-9007199254740991,Ve):r===0?r:0}function xe(r){return r==null?"":Qt(r)}var X2=Cs(function(r,i){if(rc(i)||Kt(i)){Zn(i,dt(i),r);return}for(var c in i)ke.call(i,c)&&Xo(r,c,i[c])}),k1=Cs(function(r,i){Zn(i,Bt(i),r)}),Ga=Cs(function(r,i,c,l){Zn(i,Bt(i),r,l)}),Z2=Cs(function(r,i,c,l){Zn(i,dt(i),r,l)}),Q2=br(Fd);function e3(r,i){var c=ks(r);return i==null?c:uw(c,i)}var t3=pe(function(r,i){r=Me(r);var c=-1,l=i.length,h=l>2?i[2]:n;for(h&&Ct(i[0],i[1],h)&&(l=1);++c<l;)for(var _=i[c],b=Bt(_),S=-1,E=b.length;++S<E;){var C=b[S],$=r[C];($===n||Nn($,As[C])&&!ke.call(r,C))&&(r[C]=_[C])}return r}),n3=pe(function(r){return r.push(n,Hw),Xt(C1,n,r)});function r3(r,i){return WS(r,Z(i,3),Xn)}function i3(r,i){return WS(r,Z(i,3),Ld)}function s3(r,i){return r==null?r:Nd(r,Z(i,3),Bt)}function o3(r,i){return r==null?r:dw(r,Z(i,3),Bt)}function c3(r,i){return r&&Xn(r,Z(i,3))}function u3(r,i){return r&&Ld(r,Z(i,3))}function a3(r){return r==null?[]:Aa(r,dt(r))}function l3(r){return r==null?[]:Aa(r,Bt(r))}function gp(r,i,c){var l=r==null?n:bi(r,i);return l===n?c:l}function f3(r,i){return r!=null&&Yw(r,i,MU)}function mp(r,i){return r!=null&&Yw(r,i,FU)}var h3=jw(function(r,i,c){i!=null&&typeof i.toString!="function"&&(i=pa.call(i)),r[i]=c},yp(jt)),d3=jw(function(r,i,c){i!=null&&typeof i.toString!="function"&&(i=pa.call(i)),ke.call(r,i)?r[i].push(c):r[i]=[c]},Z),p3=pe(Qo);function dt(r){return Kt(r)?ow(r):Bd(r)}function Bt(r){return Kt(r)?ow(r,!0):JU(r)}function g3(r,i){var c={};return i=Z(i,3),Xn(r,function(l,h,_){_r(c,i(l,h,_),l)}),c}function m3(r,i){var c={};return i=Z(i,3),Xn(r,function(l,h,_){_r(c,h,i(l,h,_))}),c}var _3=Cs(function(r,i,c){Ra(r,i,c)}),C1=Cs(function(r,i,c,l){Ra(r,i,c,l)}),y3=br(function(r,i){var c={};if(r==null)return c;var l=!1;i=De(i,function(_){return _=Dr(_,r),l||(l=_.length>1),_}),Zn(r,tp(r),c),l&&(c=gn(c,v|O|I,hK));for(var h=i.length;h--;)Hd(c,i[h]);return c});function b3(r,i){return $1(r,Wa(Z(i)))}var v3=br(function(r,i){return r==null?{}:HU(r,i)});function $1(r,i){if(r==null)return{};var c=De(tp(r),function(l){return[l]});return i=Z(i),Ew(r,c,function(l,h){return i(l,h[0])})}function S3(r,i,c){i=Dr(i,r);var l=-1,h=i.length;for(h||(h=1,r=n);++l<h;){var _=r==null?n:r[Qn(i[l])];_===n&&(l=h,_=c),r=Sr(_)?_.call(r):_}return r}function w3(r,i,c){return r==null?r:tc(r,i,c)}function E3(r,i,c,l){return l=typeof l=="function"?l:n,r==null?r:tc(r,i,c,l)}var P1=Jw(dt),M1=Jw(Bt);function O3(r,i,c){var l=oe(r),h=l||Kr(r)||Ms(r);if(i=Z(i,4),c==null){var _=r&&r.constructor;h?c=l?new _:[]:We(r)?c=Sr(_)?ks(_a(r)):{}:c={}}return(h?hn:Xn)(r,function(b,S,E){return i(c,b,S,E)}),c}function T3(r,i){return r==null?!0:Hd(r,i)}function I3(r,i,c){return r==null?r:Rw(r,i,Yd(c))}function A3(r,i,c,l){return l=typeof l=="function"?l:n,r==null?r:Rw(r,i,Yd(c),l)}function Fs(r){return r==null?[]:Rd(r,dt(r))}function R3(r){return r==null?[]:Rd(r,Bt(r))}function x3(r,i,c){return c===n&&(c=i,i=n),c!==n&&(c=yn(c),c=c===c?c:0),i!==n&&(i=yn(i),i=i===i?i:0),yi(yn(r),i,c)}function k3(r,i,c){return i=wr(i),c===n?(c=i,i=0):c=wr(c),r=yn(r),NU(r,i,c)}function C3(r,i,c){if(c&&typeof c!="boolean"&&Ct(r,i,c)&&(i=c=n),c===n&&(typeof i=="boolean"?(c=i,i=n):typeof r=="boolean"&&(c=r,r=n)),r===n&&i===n?(r=0,i=1):(r=wr(r),i===n?(i=r,r=0):i=wr(i)),r>i){var l=r;r=i,i=l}if(c||r%1||i%1){var h=iw();return Tt(r+h*(i-r+aD("1e-"+((h+"").length-1))),i)}return qd(r,i)}var $3=$s(function(r,i,c){return i=i.toLowerCase(),r+(c?F1(i):i)});function F1(r){return _p(xe(r).toLowerCase())}function N1(r){return r=xe(r),r&&r.replace(ML,wD).replace(QL,"")}function P3(r,i,c){r=xe(r),i=Qt(i);var l=r.length;c=c===n?l:yi(ae(c),0,l);var h=c;return c-=i.length,c>=0&&r.slice(c,h)==i}function M3(r){return r=xe(r),r&&pL.test(r)?r.replace(dS,ED):r}function F3(r){return r=xe(r),r&&vL.test(r)?r.replace(hd,"\\$&"):r}var N3=$s(function(r,i,c){return r+(c?"-":"")+i.toLowerCase()}),L3=$s(function(r,i,c){return r+(c?" ":"")+i.toLowerCase()}),D3=Uw("toLowerCase");function U3(r,i,c){r=xe(r),i=ae(i);var l=i?Ts(r):0;if(!i||l>=i)return r;var h=(i-l)/2;return Ma(Sa(h),c)+r+Ma(va(h),c)}function K3(r,i,c){r=xe(r),i=ae(i);var l=i?Ts(r):0;return i&&l<i?r+Ma(i-l,c):r}function B3(r,i,c){r=xe(r),i=ae(i);var l=i?Ts(r):0;return i&&l<i?Ma(i-l,c)+r:r}function j3(r,i,c){return c||i==null?i=0:i&&(i=+i),zD(xe(r).replace(dd,""),i||0)}function W3(r,i,c){return(c?Ct(r,i,c):i===n)?i=1:i=ae(i),Jd(xe(r),i)}function q3(){var r=arguments,i=xe(r[0]);return r.length<3?i:i.replace(r[1],r[2])}var J3=$s(function(r,i,c){return r+(c?"_":"")+i.toLowerCase()});function G3(r,i,c){return c&&typeof c!="number"&&Ct(r,i,c)&&(i=c=n),c=c===n?Ot:c>>>0,c?(r=xe(r),r&&(typeof i=="string"||i!=null&&!pp(i))&&(i=Qt(i),!i&&Os(r))?Ur(Mn(r),0,c):r.split(i,c)):[]}var H3=$s(function(r,i,c){return r+(c?" ":"")+_p(i)});function V3(r,i,c){return r=xe(r),c=c==null?0:yi(ae(c),0,r.length),i=Qt(i),r.slice(c,c+i.length)==i}function z3(r,i,c){var l=g.templateSettings;c&&Ct(r,i,c)&&(i=n),r=xe(r),i=Ga({},i,l,Gw);var h=Ga({},i.imports,l.imports,Gw),_=dt(h),b=Rd(h,_),S,E,C=0,$=i.interpolate||sa,M="__p += '",B=kd((i.escape||sa).source+"|"+$.source+"|"+($===pS?RL:sa).source+"|"+(i.evaluate||sa).source+"|$","g"),V="//# sourceURL="+(ke.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++iD+"]")+`
`;r.replace(B,function(ee,_e,ve,tn,$t,nn){return ve||(ve=tn),M+=r.slice(C,nn).replace(FL,OD),_e&&(S=!0,M+=`' +
__e(`+_e+`) +
'`),$t&&(E=!0,M+=`';
`+$t+`;
__p += '`),ve&&(M+=`' +
((__t = (`+ve+`)) == null ? '' : __t) +
'`),C=nn+ee.length,ee}),M+=`';
`;var Q=ke.call(i,"variable")&&i.variable;if(!Q)M=`with (obj) {
`+M+`
}
`;else if(IL.test(Q))throw new ie(f);M=(E?M.replace(lL,""):M).replace(fL,"$1").replace(hL,"$1;"),M="function("+(Q||"obj")+`) {
`+(Q?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(S?", __e = _.escape":"")+(E?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+M+`return __p
}`;var he=D1(function(){return Re(_,V+"return "+M).apply(n,b)});if(he.source=M,dp(he))throw he;return he}function Y3(r){return xe(r).toLowerCase()}function X3(r){return xe(r).toUpperCase()}function Z3(r,i,c){if(r=xe(r),r&&(c||i===n))return HS(r);if(!r||!(i=Qt(i)))return r;var l=Mn(r),h=Mn(i),_=VS(l,h),b=zS(l,h)+1;return Ur(l,_,b).join("")}function Q3(r,i,c){if(r=xe(r),r&&(c||i===n))return r.slice(0,XS(r)+1);if(!r||!(i=Qt(i)))return r;var l=Mn(r),h=zS(l,Mn(i))+1;return Ur(l,0,h).join("")}function ej(r,i,c){if(r=xe(r),r&&(c||i===n))return r.replace(dd,"");if(!r||!(i=Qt(i)))return r;var l=Mn(r),h=VS(l,Mn(i));return Ur(l,h).join("")}function tj(r,i){var c=U,l=N;if(We(i)){var h="separator"in i?i.separator:h;c="length"in i?ae(i.length):c,l="omission"in i?Qt(i.omission):l}r=xe(r);var _=r.length;if(Os(r)){var b=Mn(r);_=b.length}if(c>=_)return r;var S=c-Ts(l);if(S<1)return l;var E=b?Ur(b,0,S).join(""):r.slice(0,S);if(h===n)return E+l;if(b&&(S+=E.length-S),pp(h)){if(r.slice(S).search(h)){var C,$=E;for(h.global||(h=kd(h.source,xe(gS.exec(h))+"g")),h.lastIndex=0;C=h.exec($);)var M=C.index;E=E.slice(0,M===n?S:M)}}else if(r.indexOf(Qt(h),S)!=S){var B=E.lastIndexOf(h);B>-1&&(E=E.slice(0,B))}return E+l}function nj(r){return r=xe(r),r&&dL.test(r)?r.replace(hS,CD):r}var rj=$s(function(r,i,c){return r+(c?" ":"")+i.toUpperCase()}),_p=Uw("toUpperCase");function L1(r,i,c){return r=xe(r),i=c?n:i,i===n?ID(r)?MD(r):_D(r):r.match(i)||[]}var D1=pe(function(r,i){try{return Xt(r,n,i)}catch(c){return dp(c)?c:new ie(c)}}),ij=br(function(r,i){return hn(i,function(c){c=Qn(c),_r(r,c,fp(r[c],r))}),r});function sj(r){var i=r==null?0:r.length,c=Z();return r=i?De(r,function(l){if(typeof l[1]!="function")throw new dn(a);return[c(l[0]),l[1]]}):[],pe(function(l){for(var h=-1;++h<i;){var _=r[h];if(Xt(_[0],this,l))return Xt(_[1],this,l)}})}function oj(r){return CU(gn(r,v))}function yp(r){return function(){return r}}function cj(r,i){return r==null||r!==r?i:r}var uj=Bw(),aj=Bw(!0);function jt(r){return r}function bp(r){return _w(typeof r=="function"?r:gn(r,v))}function lj(r){return bw(gn(r,v))}function fj(r,i){return vw(r,gn(i,v))}var hj=pe(function(r,i){return function(c){return Qo(c,r,i)}}),dj=pe(function(r,i){return function(c){return Qo(r,c,i)}});function vp(r,i,c){var l=dt(i),h=Aa(i,l);c==null&&!(We(i)&&(h.length||!l.length))&&(c=i,i=r,r=this,h=Aa(i,dt(i)));var _=!(We(c)&&"chain"in c)||!!c.chain,b=Sr(r);return hn(h,function(S){var E=i[S];r[S]=E,b&&(r.prototype[S]=function(){var C=this.__chain__;if(_||C){var $=r(this.__wrapped__),M=$.__actions__=Ut(this.__actions__);return M.push({func:E,args:arguments,thisArg:r}),$.__chain__=C,$}return E.apply(r,Pr([this.value()],arguments))})}),r}function pj(){return yt._===this&&(yt._=KD),this}function Sp(){}function gj(r){return r=ae(r),pe(function(i){return Sw(i,r)})}var mj=Zd(De),_j=Zd(jS),yj=Zd(Ed);function U1(r){return sp(r)?Od(Qn(r)):VU(r)}function bj(r){return function(i){return r==null?n:bi(r,i)}}var vj=Ww(),Sj=Ww(!0);function wp(){return[]}function Ep(){return!1}function wj(){return{}}function Ej(){return""}function Oj(){return!0}function Tj(r,i){if(r=ae(r),r<1||r>Ve)return[];var c=Ot,l=Tt(r,Ot);i=Z(i),r-=Ot;for(var h=Ad(l,i);++c<r;)i(c);return h}function Ij(r){return oe(r)?De(r,Qn):en(r)?[r]:Ut(s1(xe(r)))}function Aj(r){var i=++DD;return xe(r)+i}var Rj=Pa(function(r,i){return r+i},0),xj=Qd("ceil"),kj=Pa(function(r,i){return r/i},1),Cj=Qd("floor");function $j(r){return r&&r.length?Ia(r,jt,Dd):n}function Pj(r,i){return r&&r.length?Ia(r,Z(i,2),Dd):n}function Mj(r){return JS(r,jt)}function Fj(r,i){return JS(r,Z(i,2))}function Nj(r){return r&&r.length?Ia(r,jt,jd):n}function Lj(r,i){return r&&r.length?Ia(r,Z(i,2),jd):n}var Dj=Pa(function(r,i){return r*i},1),Uj=Qd("round"),Kj=Pa(function(r,i){return r-i},0);function Bj(r){return r&&r.length?Id(r,jt):0}function jj(r,i){return r&&r.length?Id(r,Z(i,2)):0}return g.after=l2,g.ary=m1,g.assign=X2,g.assignIn=k1,g.assignInWith=Ga,g.assignWith=Z2,g.at=Q2,g.before=_1,g.bind=fp,g.bindAll=ij,g.bindKey=y1,g.castArray=w2,g.chain=d1,g.chunk=CK,g.compact=$K,g.concat=PK,g.cond=sj,g.conforms=oj,g.constant=yp,g.countBy=BB,g.create=e3,g.curry=b1,g.curryRight=v1,g.debounce=S1,g.defaults=t3,g.defaultsDeep=n3,g.defer=f2,g.delay=h2,g.difference=MK,g.differenceBy=FK,g.differenceWith=NK,g.drop=LK,g.dropRight=DK,g.dropRightWhile=UK,g.dropWhile=KK,g.fill=BK,g.filter=WB,g.flatMap=GB,g.flatMapDeep=HB,g.flatMapDepth=VB,g.flatten=a1,g.flattenDeep=jK,g.flattenDepth=WK,g.flip=d2,g.flow=uj,g.flowRight=aj,g.fromPairs=qK,g.functions=a3,g.functionsIn=l3,g.groupBy=zB,g.initial=GK,g.intersection=HK,g.intersectionBy=VK,g.intersectionWith=zK,g.invert=h3,g.invertBy=d3,g.invokeMap=XB,g.iteratee=bp,g.keyBy=ZB,g.keys=dt,g.keysIn=Bt,g.map=Ka,g.mapKeys=g3,g.mapValues=m3,g.matches=lj,g.matchesProperty=fj,g.memoize=ja,g.merge=_3,g.mergeWith=C1,g.method=hj,g.methodOf=dj,g.mixin=vp,g.negate=Wa,g.nthArg=gj,g.omit=y3,g.omitBy=b3,g.once=p2,g.orderBy=QB,g.over=mj,g.overArgs=g2,g.overEvery=_j,g.overSome=yj,g.partial=hp,g.partialRight=w1,g.partition=e2,g.pick=v3,g.pickBy=$1,g.property=U1,g.propertyOf=bj,g.pull=QK,g.pullAll=f1,g.pullAllBy=eB,g.pullAllWith=tB,g.pullAt=nB,g.range=vj,g.rangeRight=Sj,g.rearg=m2,g.reject=r2,g.remove=rB,g.rest=_2,g.reverse=ap,g.sampleSize=s2,g.set=w3,g.setWith=E3,g.shuffle=o2,g.slice=iB,g.sortBy=a2,g.sortedUniq=fB,g.sortedUniqBy=hB,g.split=G3,g.spread=y2,g.tail=dB,g.take=pB,g.takeRight=gB,g.takeRightWhile=mB,g.takeWhile=_B,g.tap=$B,g.throttle=b2,g.thru=Ua,g.toArray=A1,g.toPairs=P1,g.toPairsIn=M1,g.toPath=Ij,g.toPlainObject=x1,g.transform=O3,g.unary=v2,g.union=yB,g.unionBy=bB,g.unionWith=vB,g.uniq=SB,g.uniqBy=wB,g.uniqWith=EB,g.unset=T3,g.unzip=lp,g.unzipWith=h1,g.update=I3,g.updateWith=A3,g.values=Fs,g.valuesIn=R3,g.without=OB,g.words=L1,g.wrap=S2,g.xor=TB,g.xorBy=IB,g.xorWith=AB,g.zip=RB,g.zipObject=xB,g.zipObjectDeep=kB,g.zipWith=CB,g.entries=P1,g.entriesIn=M1,g.extend=k1,g.extendWith=Ga,vp(g,g),g.add=Rj,g.attempt=D1,g.camelCase=$3,g.capitalize=F1,g.ceil=xj,g.clamp=x3,g.clone=E2,g.cloneDeep=T2,g.cloneDeepWith=I2,g.cloneWith=O2,g.conformsTo=A2,g.deburr=N1,g.defaultTo=cj,g.divide=kj,g.endsWith=P3,g.eq=Nn,g.escape=M3,g.escapeRegExp=F3,g.every=jB,g.find=qB,g.findIndex=c1,g.findKey=r3,g.findLast=JB,g.findLastIndex=u1,g.findLastKey=i3,g.floor=Cj,g.forEach=p1,g.forEachRight=g1,g.forIn=s3,g.forInRight=o3,g.forOwn=c3,g.forOwnRight=u3,g.get=gp,g.gt=R2,g.gte=x2,g.has=f3,g.hasIn=mp,g.head=l1,g.identity=jt,g.includes=YB,g.indexOf=JK,g.inRange=k3,g.invoke=p3,g.isArguments=wi,g.isArray=oe,g.isArrayBuffer=k2,g.isArrayLike=Kt,g.isArrayLikeObject=ze,g.isBoolean=C2,g.isBuffer=Kr,g.isDate=$2,g.isElement=P2,g.isEmpty=M2,g.isEqual=F2,g.isEqualWith=N2,g.isError=dp,g.isFinite=L2,g.isFunction=Sr,g.isInteger=E1,g.isLength=qa,g.isMap=O1,g.isMatch=D2,g.isMatchWith=U2,g.isNaN=K2,g.isNative=B2,g.isNil=W2,g.isNull=j2,g.isNumber=T1,g.isObject=We,g.isObjectLike=Je,g.isPlainObject=sc,g.isRegExp=pp,g.isSafeInteger=q2,g.isSet=I1,g.isString=Ja,g.isSymbol=en,g.isTypedArray=Ms,g.isUndefined=J2,g.isWeakMap=G2,g.isWeakSet=H2,g.join=YK,g.kebabCase=N3,g.last=_n,g.lastIndexOf=XK,g.lowerCase=L3,g.lowerFirst=D3,g.lt=V2,g.lte=z2,g.max=$j,g.maxBy=Pj,g.mean=Mj,g.meanBy=Fj,g.min=Nj,g.minBy=Lj,g.stubArray=wp,g.stubFalse=Ep,g.stubObject=wj,g.stubString=Ej,g.stubTrue=Oj,g.multiply=Dj,g.nth=ZK,g.noConflict=pj,g.noop=Sp,g.now=Ba,g.pad=U3,g.padEnd=K3,g.padStart=B3,g.parseInt=j3,g.random=C3,g.reduce=t2,g.reduceRight=n2,g.repeat=W3,g.replace=q3,g.result=S3,g.round=Uj,g.runInContext=w,g.sample=i2,g.size=c2,g.snakeCase=J3,g.some=u2,g.sortedIndex=sB,g.sortedIndexBy=oB,g.sortedIndexOf=cB,g.sortedLastIndex=uB,g.sortedLastIndexBy=aB,g.sortedLastIndexOf=lB,g.startCase=H3,g.startsWith=V3,g.subtract=Kj,g.sum=Bj,g.sumBy=jj,g.template=z3,g.times=Tj,g.toFinite=wr,g.toInteger=ae,g.toLength=R1,g.toLower=Y3,g.toNumber=yn,g.toSafeInteger=Y2,g.toString=xe,g.toUpper=X3,g.trim=Z3,g.trimEnd=Q3,g.trimStart=ej,g.truncate=tj,g.unescape=nj,g.uniqueId=Aj,g.upperCase=rj,g.upperFirst=_p,g.each=p1,g.eachRight=g1,g.first=l1,vp(g,function(){var r={};return Xn(g,function(i,c){ke.call(g.prototype,c)||(r[c]=i)}),r}(),{chain:!1}),g.VERSION=s,hn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){g[r].placeholder=g}),hn(["drop","take"],function(r,i){ye.prototype[r]=function(c){c=c===n?1:at(ae(c),0);var l=this.__filtered__&&!i?new ye(this):this.clone();return l.__filtered__?l.__takeCount__=Tt(c,l.__takeCount__):l.__views__.push({size:Tt(c,Ot),type:r+(l.__dir__<0?"Right":"")}),l},ye.prototype[r+"Right"]=function(c){return this.reverse()[r](c).reverse()}}),hn(["filter","map","takeWhile"],function(r,i){var c=i+1,l=c==Ie||c==je;ye.prototype[r]=function(h){var _=this.clone();return _.__iteratees__.push({iteratee:Z(h,3),type:c}),_.__filtered__=_.__filtered__||l,_}}),hn(["head","last"],function(r,i){var c="take"+(i?"Right":"");ye.prototype[r]=function(){return this[c](1).value()[0]}}),hn(["initial","tail"],function(r,i){var c="drop"+(i?"":"Right");ye.prototype[r]=function(){return this.__filtered__?new ye(this):this[c](1)}}),ye.prototype.compact=function(){return this.filter(jt)},ye.prototype.find=function(r){return this.filter(r).head()},ye.prototype.findLast=function(r){return this.reverse().find(r)},ye.prototype.invokeMap=pe(function(r,i){return typeof r=="function"?new ye(this):this.map(function(c){return Qo(c,r,i)})}),ye.prototype.reject=function(r){return this.filter(Wa(Z(r)))},ye.prototype.slice=function(r,i){r=ae(r);var c=this;return c.__filtered__&&(r>0||i<0)?new ye(c):(r<0?c=c.takeRight(-r):r&&(c=c.drop(r)),i!==n&&(i=ae(i),c=i<0?c.dropRight(-i):c.take(i-r)),c)},ye.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},ye.prototype.toArray=function(){return this.take(Ot)},Xn(ye.prototype,function(r,i){var c=/^(?:filter|find|map|reject)|While$/.test(i),l=/^(?:head|last)$/.test(i),h=g[l?"take"+(i=="last"?"Right":""):i],_=l||/^find/.test(i);h&&(g.prototype[i]=function(){var b=this.__wrapped__,S=l?[1]:arguments,E=b instanceof ye,C=S[0],$=E||oe(b),M=function(_e){var ve=h.apply(g,Pr([_e],S));return l&&B?ve[0]:ve};$&&c&&typeof C=="function"&&C.length!=1&&(E=$=!1);var B=this.__chain__,V=!!this.__actions__.length,Q=_&&!B,he=E&&!V;if(!_&&$){b=he?b:new ye(this);var ee=r.apply(b,S);return ee.__actions__.push({func:Ua,args:[M],thisArg:n}),new pn(ee,B)}return Q&&he?r.apply(this,S):(ee=this.thru(M),Q?l?ee.value()[0]:ee.value():ee)})}),hn(["pop","push","shift","sort","splice","unshift"],function(r){var i=fa[r],c=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",l=/^(?:pop|shift)$/.test(r);g.prototype[r]=function(){var h=arguments;if(l&&!this.__chain__){var _=this.value();return i.apply(oe(_)?_:[],h)}return this[c](function(b){return i.apply(oe(b)?b:[],h)})}}),Xn(ye.prototype,function(r,i){var c=g[i];if(c){var l=c.name+"";ke.call(xs,l)||(xs[l]=[]),xs[l].push({name:i,func:c})}}),xs[$a(n,K).name]=[{name:"wrapper",func:n}],ye.prototype.clone=nU,ye.prototype.reverse=rU,ye.prototype.value=iU,g.prototype.at=PB,g.prototype.chain=MB,g.prototype.commit=FB,g.prototype.next=NB,g.prototype.plant=DB,g.prototype.reverse=UB,g.prototype.toJSON=g.prototype.valueOf=g.prototype.value=KB,g.prototype.first=g.prototype.head,Go&&(g.prototype[Go]=LB),g},Is=FD();pi?((pi.exports=Is)._=Is,bd._=Is):yt._=Is}).call(Pe)}(uc,uc.exports);var tE=uc.exports,we=Ue(tE);const nE=1,Ha=2,rE={INIT_ACK:{statusByte:2,parse:e=>({type:"init-ack",projectName:e[0]})},INIT:{statusByte:3,parse:e=>({type:"init-project",tracksCount:e[0]})},DONE:{statusByte:4,parse:e=>({type:"init-done"})},TRACK:{statusByte:5,parse:e=>({type:"init-track",name:e[0],trackIndex:we.toNumber(e[1]),color:we.toNumber(e[2])})},CLIP:{statusByte:6,parse:e=>({type:"init-clip",name:e[0],trackIndex:we.toNumber(e[1]),clipIndex:we.toNumber(e[2]),color:we.toNumber(e[3]),startTime:we.toNumber(e[4]),endTime:we.toNumber(e[5])})},BEAT:{statusByte:7,parse:e=>({type:"beat",value:we.toNumber(e[0])})},BAR_BEAT:{statusByte:8,parse:e=>({type:"bar-beat",value:we.toNumber(e[0])})},SIG:{statusByte:9,parse:e=>({type:"sig",numer:we.toNumber(e[0]),denom:we.toNumber(e[1])})},TEMPO:{statusByte:10,parse:e=>({type:"tempo",value:we.toNumber(e[0])})},IS_PLAYING:{statusByte:11,parse:e=>({type:"is-playing",value:we.toNumber(e[0])===1})},CUE:{statusByte:12,parse:e=>({type:"init-cue",id:we.toNumber(e[0]),name:e[1],time:we.toNumber(e[2]),index:we.toNumber(e[3])})},METRONOME_STATE:{statusByte:13,parse:e=>({type:"metronome-state",value:we.toNumber(e[0])===1})},LOOP_STATE:{statusByte:14,parse:e=>({type:"loop-state",value:we.toNumber(e[0])===1})},HALF_BEAT:{statusByte:15,parse:e=>({type:"half-beat",isHalf:we.toNumber(e[0])===1})}},iE=we.fromPairs(we.map(rE,e=>[e.statusByte,e])),sE=e=>{const t=we.join(we.map(e,s=>String.fromCharCode(s)),""),n=we.split(t,String.fromCharCode(nE));return[we.toNumber(n[0]),n.splice(1)]},oE=e=>{try{if(e.manufacturer===Ha){const[t,n]=sE(e.body),s=iE[t];if(s!==void 0)return s.parse(n);console.warn("Did not find parser for message",e)}}catch(t){console.error("Got error parsing message",t)}},Fp=e=>{const t=[];return we.forEach(e,(n,s)=>{t.push(e.charCodeAt(s))}),t},bn={base:(e,t)=>({type:"sysex",manufacturer:Ha,body:[e,...Fp(t.toString())]}),baseJSON:(e,t)=>({type:"sysex",manufacturer:Ha,body:[e,...Fp(JSON.stringify(t))]}),init:()=>bn.base(64,1),initReady:e=>bn.baseJSON(65,{tracks:e}),play:()=>bn.base(80,1),stop:()=>bn.base(81,1),jumpToCue:e=>bn.base(82,e),jumpBy:e=>bn.base(84,e),record:()=>bn.base(85,1),metronome:e=>bn.base(86,e?1:0),loop:e=>bn.base(87,e?1:0)};function vn(e){for(var t=arguments.length,n=Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Ei(e){return!!e&&!!e[Wt]}function Br(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var s=Object.getPrototypeOf(n);if(s===null)return!0;var o=Object.hasOwnProperty.call(s,"constructor")&&s.constructor;return o===Object||typeof o=="function"&&Function.toString.call(o)===pE}(e)||Array.isArray(e)||!!e[Jp]||!!(!((t=e.constructor)===null||t===void 0)&&t[Jp])||za(e)||Ya(e))}function Ns(e,t,n){n===void 0&&(n=!1),Oi(e)===0?(n?Object.keys:ul)(e).forEach(function(s){n&&typeof s=="symbol"||t(s,e[s],e)}):e.forEach(function(s,o){return t(o,s,e)})}function Oi(e){var t=e[Wt];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:za(e)?2:Ya(e)?3:0}function Va(e,t){return Oi(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function cE(e,t){return Oi(e)===2?e.get(t):e[t]}function Np(e,t,n){var s=Oi(e);s===2?e.set(t,n):s===3?e.add(n):e[t]=n}function uE(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function za(e){return hE&&e instanceof Map}function Ya(e){return dE&&e instanceof Set}function jr(e){return e.o||e.t}function Xa(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=gE(e);delete t[Wt];for(var n=ul(t),s=0;s<n.length;s++){var o=n[s],u=t[o];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(t[o]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function Za(e,t){return t===void 0&&(t=!1),Qa(e)||Ei(e)||!Br(e)||(Oi(e)>1&&(e.set=e.add=e.clear=e.delete=aE),Object.freeze(e),t&&Ns(e,function(n,s){return Za(s,!0)},!0)),e}function aE(){vn(2)}function Qa(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Dn(e){var t=mE[e];return t||vn(18,e),t}function Lp(){return Ls}function el(e,t){t&&(Dn("Patches"),e.u=[],e.s=[],e.v=t)}function ac(e){tl(e),e.p.forEach(lE),e.p=null}function tl(e){e===Ls&&(Ls=e.l)}function Dp(e){return Ls={p:[],l:Ls,h:e,m:!0,_:0}}function lE(e){var t=e[Wt];t.i===0||t.i===1?t.j():t.g=!0}function nl(e,t){t._=t.p.length;var n=t.p[0],s=e!==void 0&&e!==n;return t.h.O||Dn("ES5").S(t,e,s),s?(n[Wt].P&&(ac(t),vn(4)),Br(e)&&(e=lc(t,e),t.l||fc(t,e)),t.u&&Dn("Patches").M(n[Wt].t,e,t.u,t.s)):e=lc(t,n,[]),ac(t),t.u&&t.v(t.u,t.s),e!==qp?e:void 0}function lc(e,t,n){if(Qa(t))return t;var s=t[Wt];if(!s)return Ns(t,function(f,d){return Up(e,s,t,f,d,n)},!0),t;if(s.A!==e)return t;if(!s.P)return fc(e,s.t,!0),s.t;if(!s.I){s.I=!0,s.A._--;var o=s.i===4||s.i===5?s.o=Xa(s.k):s.o,u=o,a=!1;s.i===3&&(u=new Set(o),o.clear(),a=!0),Ns(u,function(f,d){return Up(e,s,o,f,d,n,a)}),fc(e,o,!1),n&&e.u&&Dn("Patches").N(s,n,e.u,e.s)}return s.o}function Up(e,t,n,s,o,u,a){if(Ei(o)){var f=lc(e,o,u&&t&&t.i!==3&&!Va(t.R,s)?u.concat(s):void 0);if(Np(n,s,f),!Ei(f))return;e.m=!1}else a&&n.add(o);if(Br(o)&&!Qa(o)){if(!e.h.D&&e._<1)return;lc(e,o),t&&t.A.l||fc(e,o)}}function fc(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&Za(t,n)}function rl(e,t){var n=e[Wt];return(n?jr(n):e)[t]}function Kp(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var s=Object.getOwnPropertyDescriptor(n,t);if(s)return s;n=Object.getPrototypeOf(n)}}function il(e){e.P||(e.P=!0,e.l&&il(e.l))}function sl(e){e.o||(e.o=Xa(e.t))}function ol(e,t,n){var s=za(t)?Dn("MapSet").F(t,n):Ya(t)?Dn("MapSet").T(t,n):e.O?function(o,u){var a=Array.isArray(o),f={i:a?1:0,A:u?u.A:Lp(),P:!1,I:!1,R:{},l:u,t:o,k:null,o:null,j:null,C:!1},d=f,m=al;a&&(d=[f],m=Ds);var y=Proxy.revocable(d,m),v=y.revoke,O=y.proxy;return f.k=O,f.j=v,O}(t,n):Dn("ES5").J(t,n);return(n?n.A:Lp()).p.push(s),s}function fE(e){return Ei(e)||vn(22,e),function t(n){if(!Br(n))return n;var s,o=n[Wt],u=Oi(n);if(o){if(!o.P&&(o.i<4||!Dn("ES5").K(o)))return o.t;o.I=!0,s=Bp(n,u),o.I=!1}else s=Bp(n,u);return Ns(s,function(a,f){o&&cE(o.t,a)===f||Np(s,a,t(f))}),u===3?new Set(s):s}(e)}function Bp(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Xa(e)}var jp,Ls,cl=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",hE=typeof Map<"u",dE=typeof Set<"u",Wp=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",qp=cl?Symbol.for("immer-nothing"):((jp={})["immer-nothing"]=!0,jp),Jp=cl?Symbol.for("immer-draftable"):"__$immer_draftable",Wt=cl?Symbol.for("immer-state"):"__$immer_state",pE=""+Object.prototype.constructor,ul=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,gE=Object.getOwnPropertyDescriptors||function(e){var t={};return ul(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},mE={},al={get:function(e,t){if(t===Wt)return e;var n=jr(e);if(!Va(n,t))return function(o,u,a){var f,d=Kp(u,a);return d?"value"in d?d.value:(f=d.get)===null||f===void 0?void 0:f.call(o.k):void 0}(e,n,t);var s=n[t];return e.I||!Br(s)?s:s===rl(e.t,t)?(sl(e),e.o[t]=ol(e.A.h,s,e)):s},has:function(e,t){return t in jr(e)},ownKeys:function(e){return Reflect.ownKeys(jr(e))},set:function(e,t,n){var s=Kp(jr(e),t);if(s!=null&&s.set)return s.set.call(e.k,n),!0;if(!e.P){var o=rl(jr(e),t),u=o==null?void 0:o[Wt];if(u&&u.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(uE(n,o)&&(n!==void 0||Va(e.t,t)))return!0;sl(e),il(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return rl(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,sl(e),il(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=jr(e),s=Reflect.getOwnPropertyDescriptor(n,t);return s&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:s.enumerable,value:n[t]}},defineProperty:function(){vn(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){vn(12)}},Ds={};Ns(al,function(e,t){Ds[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Ds.deleteProperty=function(e,t){return Ds.set.call(this,e,t,void 0)},Ds.set=function(e,t,n){return al.set.call(this,e[0],t,n,e[0])};var _E=function(){function e(n){var s=this;this.O=Wp,this.D=!0,this.produce=function(o,u,a){if(typeof o=="function"&&typeof u!="function"){var f=u;u=o;var d=s;return function(W){var L=this;W===void 0&&(W=f);for(var K=arguments.length,Y=Array(K>1?K-1:0),j=1;j<K;j++)Y[j-1]=arguments[j];return d.produce(W,function(H){var z;return(z=u).call.apply(z,[L,H].concat(Y))})}}var m;if(typeof u!="function"&&vn(6),a!==void 0&&typeof a!="function"&&vn(7),Br(o)){var y=Dp(s),v=ol(s,o,void 0),O=!0;try{m=u(v),O=!1}finally{O?ac(y):tl(y)}return typeof Promise<"u"&&m instanceof Promise?m.then(function(W){return el(y,a),nl(W,y)},function(W){throw ac(y),W}):(el(y,a),nl(m,y))}if(!o||typeof o!="object"){if((m=u(o))===void 0&&(m=o),m===qp&&(m=void 0),s.D&&Za(m,!0),a){var I=[],R=[];Dn("Patches").M(o,m,I,R),a(I,R)}return m}vn(21,o)},this.produceWithPatches=function(o,u){if(typeof o=="function")return function(m){for(var y=arguments.length,v=Array(y>1?y-1:0),O=1;O<y;O++)v[O-1]=arguments[O];return s.produceWithPatches(m,function(I){return o.apply(void 0,[I].concat(v))})};var a,f,d=s.produce(o,u,function(m,y){a=m,f=y});return typeof Promise<"u"&&d instanceof Promise?d.then(function(m){return[m,a,f]}):[d,a,f]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Br(n)||vn(8),Ei(n)&&(n=fE(n));var s=Dp(this),o=ol(this,n,void 0);return o[Wt].C=!0,tl(s),o},t.finishDraft=function(n,s){var o=n&&n[Wt],u=o.A;return el(u,s),nl(void 0,u)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!Wp&&vn(20),this.O=n},t.applyPatches=function(n,s){var o;for(o=s.length-1;o>=0;o--){var u=s[o];if(u.path.length===0&&u.op==="replace"){n=u.value;break}}o>-1&&(s=s.slice(o+1));var a=Dn("Patches").$;return Ei(n)?a(n,s):this.produce(n,function(f){return a(f,s)})},e}(),qt=new _E,ll=qt.produce;qt.produceWithPatches.bind(qt),qt.setAutoFreeze.bind(qt),qt.setUseProxies.bind(qt),qt.applyPatches.bind(qt),qt.createDraft.bind(qt),qt.finishDraft.bind(qt);const yE=e=>typeof e=="function",T=function(e,t){if(typeof e=="function")return function(){return e(arguments)?t.apply(this,arguments):n=>t(n,...arguments)};switch(e){case 0:case 1:throw new RangeError(`Invalid arity ${e}`);case 2:return function(n,s){return arguments.length>=2?t(n,s):function(o){return t(o,n)}};case 3:return function(n,s,o){return arguments.length>=3?t(n,s,o):function(u){return t(u,n,s)}};case 4:return function(n,s,o,u){return arguments.length>=4?t(n,s,o,u):function(a){return t(a,n,s,o)}};case 5:return function(n,s,o,u,a){return arguments.length>=5?t(n,s,o,u,a):function(f){return t(f,n,s,o,u)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);const n=arguments;return function(s){return t(s,...n)}}}},Xe=e=>e,hc=e=>()=>e,Gp=hc(!0),fl=hc(!1),Hp=hc(void 0),bE=Hp;function P(e,t,n,s,o,u,a,f,d){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return s(n(t(e)));case 5:return o(s(n(t(e))));case 6:return u(o(s(n(t(e)))));case 7:return a(u(o(s(n(t(e))))));case 8:return f(a(u(o(s(n(t(e)))))));case 9:return d(f(a(u(o(s(n(t(e))))))));default:{let m=arguments[0];for(let y=1;y<arguments.length;y++)m=arguments[y](m);return m}}}const hl=e=>(t,n)=>t===n||e(t,n),vE=T(2,(e,t)=>hl((n,s)=>e(t(n),t(s)))),SE=e=>hl((t,n)=>{if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(!e(t[s],n[s]))return!1;return!0});let wE="3.13.12";const dc=()=>wE,pc=`effect/GlobalValue/globalStoreId/${dc()}`;let Us;const Ee=(e,t)=>(Us||(globalThis[pc]??(globalThis[pc]=new Map),Us=globalThis[pc]),Us.has(e)||Us.set(e,t()),Us.get(e)),Un=e=>typeof e=="string",Wr=e=>typeof e=="number",dl=e=>typeof e=="boolean",gc=e=>typeof e=="bigint",pl=e=>typeof e=="symbol",Ks=yE,EE=e=>e===void 0,OE=e=>!1,gl=e=>typeof e=="object"&&e!==null,Or=e=>gl(e)||Ks(e),ue=T(2,(e,t)=>Or(e)&&t in e),Vp=T(2,(e,t)=>ue(e,"_tag")&&e._tag===t),Ti=e=>e==null,TE=e=>e!=null,IE=e=>e instanceof Date,zp=e=>ue(e,Symbol.iterator),AE=e=>gl(e)&&!Array.isArray(e),RE=e=>ue(e,"then")&&Ks(e.then),mc=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;let Yp=class G1{constructor(t){p(this,"self");p(this,"called",!1);this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new G1(this.self)}};const xE=335903614,kE=4150755663,CE=1481765933,$E=1284865837,PE=9007199254740992,ME=134217728;class FE{constructor(t,n,s,o){p(this,"_state");return Ti(n)&&Ti(t)?(n=Math.random()*4294967295>>>0,t=0):Ti(n)&&(n=t,t=0),Ti(o)&&Ti(s)?(o=this._state?this._state[3]:kE,s=this._state?this._state[2]:xE):Ti(o)&&(o=s,s=0),this._state=new Int32Array([0,0,s>>>0,((o||0)|1)>>>0]),this._next(),Xp(this._state,this._state[0],this._state[1],t>>>0,n>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(t){this._state[0]=t[0],this._state[1]=t[1],this._state[2]=t[2],this._state[3]=t[3]|1}integer(t){return Math.round(this.number()*Number.MAX_SAFE_INTEGER)%t}number(){const t=(this._next()&67108863)*1,n=(this._next()&134217727)*1;return(t*ME+n)/PE}_next(){const t=this._state[0]>>>0,n=this._state[1]>>>0;NE(this._state,t,n,CE,$E),Xp(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let s=t>>>18,o=(n>>>18|t<<14)>>>0;s=(s^t)>>>0,o=(o^n)>>>0;const u=(o>>>27|s<<5)>>>0,a=t>>>27,f=(-a>>>0&31)>>>0;return(u>>>a|u<<f)>>>0}}function NE(e,t,n,s,o){let u=(n>>>16)*(o&65535)>>>0,a=(n&65535)*(o>>>16)>>>0,f=(n&65535)*(o&65535)>>>0,d=(n>>>16)*(o>>>16)+((a>>>16)+(u>>>16))>>>0;a=a<<16>>>0,f=f+a>>>0,f>>>0<a>>>0&&(d=d+1>>>0),u=u<<16>>>0,f=f+u>>>0,f>>>0<u>>>0&&(d=d+1>>>0),d=d+Math.imul(n,s)>>>0,d=d+Math.imul(t,o)>>>0,e[0]=d,e[1]=f}function Xp(e,t,n,s,o){let u=t+s>>>0;const a=n+o>>>0;a>>>0<n>>>0&&(u=u+1|0),e[0]=u,e[1]=a}const ml=Symbol.for("effect/Utils/YieldWrap");class Bs{constructor(t){q1(this,Lo);J1(this,Lo,t)}[ml](){return W1(this,Lo)}}Lo=new WeakMap;function LE(e){if(typeof e=="object"&&e!==null&&ml in e)return e[ml]();throw new Error(mc("yieldWrapGet"))}const rn=Ee("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0})),At=(e=>{const t={[e](n){return n()}};return function(n){return t[e](n)}})("effect_internal_function"),_l=Ee(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),de=Symbol.for("effect/Hash"),X=e=>{if(rn.enabled===!0)return 0;switch(typeof e){case"number":return bl(e);case"bigint":return Ze(e.toString(10));case"boolean":return Ze(String(e));case"symbol":return Ze(String(e));case"string":return Ze(e);case"undefined":return Ze("undefined");case"function":case"object":return e===null?Ze("null"):e instanceof Date?X(e.toISOString()):DE(e)?e[de]():yl(e);default:throw new Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},yl=e=>(_l.has(e)||_l.set(e,bl(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),_l.get(e)),Se=e=>t=>t*53^e,_c=e=>e&3221225471|e>>>1&1073741824,DE=e=>ue(e,de),bl=e=>{if(e!==e||e===1/0)return 0;let t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)t^=e/=4294967295;return _c(t)},Ze=e=>{let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return _c(t)},UE=(e,t)=>{let n=12289;for(let s=0;s<t.length;s++)n^=P(Ze(t[s]),Se(X(e[t[s]])));return _c(n)},Zp=e=>UE(e,Object.keys(e)),js=e=>{let t=6151;for(let n=0;n<e.length;n++)t=P(t,Se(X(e[n])));return _c(t)},qe=function(){if(arguments.length===1){const n=arguments[0];return function(s){return Object.defineProperty(n,de,{value(){return s},enumerable:!1}),s}}const e=arguments[0],t=arguments[1];return Object.defineProperty(e,de,{value(){return t},enumerable:!1}),t},le=Symbol.for("effect/Equal");function fe(){return arguments.length===1?e=>yc(e,arguments[0]):yc(arguments[0],arguments[1])}function yc(e,t){if(e===t)return!0;const n=typeof e;if(n!==typeof t)return!1;if(n==="object"||n==="function"){if(e!==null&&t!==null){if(bc(e)&&bc(t))return X(e)===X(t)&&e[le](t)?!0:rn.enabled&&rn.tester?rn.tester(e,t):!1;if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString()}if(rn.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((s,o)=>yc(s,t[o]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){const s=Object.keys(e),o=Object.keys(t);if(s.length===o.length){for(const u of s)if(!(u in t&&yc(e[u],t[u])))return rn.tester?rn.tester(e,t):!1;return!0}}return rn.tester?rn.tester(e,t):!1}}return rn.enabled&&rn.tester?rn.tester(e,t):!1}const bc=e=>ue(e,le),vl=()=>fe,Ke=Symbol.for("nodejs.util.inspect.custom"),rt=e=>{try{if(ue(e,"toJSON")&&Ks(e.toJSON)&&e.toJSON.length===0)return e.toJSON();if(Array.isArray(e))return e.map(rt)}catch{return{}}return BE(e)},lt=e=>JSON.stringify(e,null,2),Ii=(e,t=2)=>{if(typeof e=="string")return e;try{return typeof e=="object"?Qp(e,t):String(e)}catch{return String(e)}},Qp=(e,t)=>{let n=[];const s=JSON.stringify(e,(o,u)=>typeof u=="object"&&u!==null?n.includes(u)?void 0:n.push(u)&&(qr.fiberRefs!==void 0&&eg(u)?u[Sl](qr.fiberRefs):u):u,t);return n=void 0,s},Sl=Symbol.for("effect/Inspectable/Redactable"),eg=e=>typeof e=="object"&&e!==null&&Sl in e,qr=Ee("effect/Inspectable/redactableState",()=>({fiberRefs:void 0})),KE=(e,t)=>{const n=qr.fiberRefs;qr.fiberRefs=e;try{return t()}finally{qr.fiberRefs=n}},BE=e=>eg(e)&&qr.fiberRefs!==void 0?e[Sl](qr.fiberRefs):e,re=(e,t)=>{switch(t.length){case 0:return e;case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let n=e;for(let s=0,o=t.length;s<o;s++)n=t[s](n);return n}}},Ws="Async",vc="Commit",Sn="Failure",wl="OnFailure",Sc="OnSuccess",wc="OnSuccessAndFailure",wn="Success",tg="Sync",jE="Tag",qs="UpdateRuntimeFlags",Ec="While",Oc="Iterator",ng="WithRuntime",Tc="Yield",El="RevertFlags",WE=Symbol.for("effect/Effect"),qE=Symbol.for("effect/Stream"),JE=Symbol.for("effect/Sink"),GE=Symbol.for("effect/Channel"),Ai={_R:e=>e,_E:e=>e,_A:e=>e,_V:dc()},HE={_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},VE={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},Js={[WE]:Ai,[qE]:Ai,[JE]:HE,[GE]:VE,[le](e){return this===e},[de](){return qe(this,yl(this))},[Symbol.iterator](){return new Yp(new Bs(this))},pipe(){return re(this,arguments)}},Ol={[de](){return qe(this,Zp(this))},[le](e){const t=Object.keys(this),n=Object.keys(e);if(t.length!==n.length)return!1;for(const s of t)if(!(s in e&&fe(this[s],e[s])))return!1;return!0}},Gs={...Js,_op:vc},zE={...Gs,...Ol},YE=function(){function e(){}return e.prototype=Gs,e}(),rg=Symbol.for("effect/Option"),ig={...Js,[rg]:{_A:e=>e},[Ke](){return this.toJSON()},toString(){return lt(this.toJSON())}},XE=Object.assign(Object.create(ig),{_tag:"Some",_op:"Some",[le](e){return sg(e)&&cg(e)&&fe(this.value,e.value)},[de](){return qe(this,Se(X(this._tag))(X(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:rt(this.value)}}}),ZE=X("None"),QE=Object.assign(Object.create(ig),{_tag:"None",_op:"None",[le](e){return sg(e)&&og(e)},[de](){return ZE},toJSON(){return{_id:"Option",_tag:this._tag}}}),sg=e=>ue(e,rg),og=e=>e._tag==="None",cg=e=>e._tag==="Some",ug=Object.create(QE),Tl=e=>{const t=Object.create(XE);return t.value=e,t},ag=Symbol.for("effect/Either"),lg={...Js,[ag]:{_R:e=>e},[Ke](){return this.toJSON()},toString(){return lt(this.toJSON())}},eO=Object.assign(Object.create(lg),{_tag:"Right",_op:"Right",[le](e){return Il(e)&&hg(e)&&fe(this.right,e.right)},[de](){return Se(X(this._tag))(X(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:rt(this.right)}}}),tO=Object.assign(Object.create(lg),{_tag:"Left",_op:"Left",[le](e){return Il(e)&&fg(e)&&fe(this.left,e.left)},[de](){return Se(X(this._tag))(X(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:rt(this.left)}}}),Il=e=>ue(e,ag),fg=e=>e._tag==="Left",hg=e=>e._tag==="Right",nO=e=>{const t=Object.create(tO);return t.left=e,t},Oe=e=>{const t=Object.create(eO);return t.right=e,t},ge=nO,rO=Il,pt=fg,tr=hg,iO=T(2,(e,t)=>pt(e)?ge(t(e.left)):Oe(e.right)),sO=T(2,(e,t)=>tr(e)?Oe(t(e.right)):ge(e.left)),Al=T(2,(e,{onLeft:t,onRight:n})=>pt(e)?t(e.left):n(e.right)),oO=Al({onLeft:Xe,onRight:Xe}),dg=T(2,(e,t)=>{if(tr(e))return e.right;throw t(e.left)}),cO=dg(()=>new Error("getOrThrow called on a Left")),pg=e=>e.length>0,gg=e=>(t,n)=>t===n?0:e(t,n),uO=gg((e,t)=>e<t?-1:1),mg=T(2,(e,t)=>gg((n,s)=>e(t(n),t(s)))),aO=e=>T(2,(t,n)=>e(t,n)===1),te=()=>ug,be=Tl,gt=og,vt=cg,Jt=T(2,(e,{onNone:t,onSome:n})=>gt(e)?t():n(e.value)),ft=T(2,(e,t)=>gt(e)?t():e.value),Tr=T(2,(e,t)=>gt(e)?t():e),lO=T(2,(e,t)=>gt(e)?be(t()):e),Ic=e=>e==null?te():be(e),Kn=ft(Hp),fO=e=>(...t)=>{try{return be(e(...t))}catch{return te()}},_g=T(2,(e,t)=>gt(e)?te():be(t(e.value))),Ac=T(2,(e,t)=>gt(e)?te():t(e.value)),hO=T(2,(e,t)=>gt(e)?te():Ic(t(e.value))),dO=(e=>T(2,(t,n)=>gt(t)?!1:e(t.value,n)))(vl()),pO=T(2,(e,t)=>gt(e)?!1:t(e.value)),gO=(...e)=>e,Rc=e=>new Array(e),mO=T(2,(e,t)=>{const n=Math.max(1,Math.floor(e)),s=new Array(n);for(let o=0;o<n;o++)s[o]=t(o);return s}),Qe=e=>Array.isArray(e)?e:Array.from(e),_O=e=>Array.isArray(e)?e:[e],yO=T(2,(e,{onEmpty:t,onNonEmpty:n})=>mt(e)?n(Pt(e),Jr(e)):t()),xc=T(2,(e,t)=>[t,...e]),bO=T(2,(e,t)=>[...e,t]),yg=T(2,(e,t)=>Qe(e).concat(Qe(t))),vO=Array.isArray,SO=e=>e.length===0,kc=pg,mt=pg,bg=(e,t)=>e<0||e>=t.length,wO=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length)),EO=T(2,(e,t)=>{const n=Math.floor(t);return bg(n,e)?te():be(e[n])}),vg=T(2,(e,t)=>{const n=Math.floor(t);if(bg(n,e))throw new Error(`Index ${n} out of bounds`);return e[n]}),Hs=EO(0),Pt=vg(0),OO=e=>mt(e)?be(Sg(e)):te(),Sg=e=>e[e.length-1],Jr=e=>e.slice(1),TO=(e,t)=>{let n=0;for(const s of e){if(!t(s,n))break;n++}return n},IO=T(2,(e,t)=>kO(e,TO(e,t))),AO=T(2,(e,t)=>{const n=Qe(e);return n.slice(wO(t,n),n.length)}),wg=e=>Array.from(e).reverse(),Vs=T(2,(e,t)=>{const n=Array.from(e);return n.sort(t),n}),Eg=T(2,(e,t)=>RO(e,t,gO)),RO=T(3,(e,t,n)=>{const s=Qe(e),o=Qe(t);if(mt(s)&&mt(o)){const u=[n(Pt(s),Pt(o))],a=Math.min(s.length,o.length);for(let f=1;f<a;f++)u[f]=n(s[f],o[f]);return u}return[]}),xO=vl(),kO=T(2,(e,t)=>{const n=Array.from(e),s=Math.floor(t);return mt(n)?s>=1?CO(n,s):[[],n]:[n,[]]}),CO=T(2,(e,t)=>{const n=Math.max(1,Math.floor(t));return n>=e.length?[zs(e),[]]:[xc(e.slice(1,n),Pt(e)),e.slice(n)]}),zs=e=>e.slice(),$O=T(3,(e,t,n)=>{const s=Qe(e),o=Qe(t);return mt(s)?mt(o)?Ag(n)(yg(s,o)):s:o}),Cc=T(2,(e,t)=>$O(e,t,xO)),Ri=()=>[],En=e=>[e],xi=T(2,(e,t)=>e.map(t)),Og=T(2,(e,t)=>{if(SO(e))return[];const n=[];for(let s=0;s<e.length;s++){const o=t(e[s],s);for(let u=0;u<o.length;u++)n.push(o[u])}return n}),PO=Og(Xe),Tg=T(3,(e,t,n)=>Qe(e).reduce((s,o,u)=>n(s,o,u),t)),Ig=(e,t)=>{const n=[];let s=e,o;for(;vt(o=t(s));){const[u,a]=o.value;n.push(u),s=a}return n},Rl=SE,Ag=T(2,(e,t)=>{const n=Qe(e);if(mt(n)){const s=[Pt(n)],o=Jr(n);for(const u of o)s.every(a=>!t(u,a))&&s.push(u);return s}return[]}),MO=e=>Ag(e,vl()),ki=T(2,(e,t)=>Qe(e).join(t)),Rg=(e,t)=>{switch(t._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(e);case"SymbolKeyword":return Object.getOwnPropertySymbols(e);case"Refinement":return Rg(e,t.from)}},Ci=e=>Object.keys(e).concat(Object.getOwnPropertySymbols(e)),xg=e=>{let t=!1,n;return()=>(t||(n=e(),t=!0),n)},FO=e=>{try{return e.toISOString()}catch{return String(e)}},Bn=(e,t=!0)=>{if(Array.isArray(e))return`[${e.map(n=>Bn(n,t)).join(",")}]`;if(IE(e))return FO(e);if(ue(e,"toString")&&Ks(e.toString)&&e.toString!==Object.prototype.toString)return e.toString();if(Un(e))return JSON.stringify(e);if(Wr(e)||e==null||dl(e)||pl(e))return String(e);if(gc(e))return String(e)+"n";if(zp(e))return`${e.constructor.name}(${Bn(Array.from(e),t)})`;try{t&&JSON.stringify(e);const n=`{${Ci(e).map(o=>`${Un(o)?JSON.stringify(o):String(o)}:${Bn(e[o],!1)}`).join(",")}}`,s=e.constructor.name;return e.constructor!==Object.prototype.constructor?`${s}(${n})`:n}catch{return"<circular structure>"}},NO=e=>typeof e=="string"?JSON.stringify(e):String(e),kg=e=>Array.isArray(e),Cg=e=>`[${NO(e)}]`,LO=e=>kg(e)?e.map(Cg).join(""):Cg(e),Gr=(e,t,n,s)=>{let o=e;return t!==void 0&&(o+=`
details: ${t}`),s&&(o+=`
schema (${s._tag}): ${s}`),o},DO=e=>Gr("Unsupported key schema",void 0,void 0,e),UO=e=>Gr("Unsupported literal",`literal value: ${Bn(e)}`),$g=e=>Gr("Duplicate index signature",`${e} index signature`),KO=Gr("Unsupported index signature parameter","An index signature parameter type must be `string`, `symbol`, a template literal type or a refinement of the previous types"),BO=Gr("Invalid element","A required element cannot follow an optional element. ts(1257)"),Pg=e=>Gr("Duplicate property signature transformation",`Duplicate key ${Bn(e)}`),jO=e=>Gr("Duplicate property signature",`Duplicate key ${Bn(e)}`),$i=uO,$c=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&"),WO=Symbol.for("effect/annotation/Brand"),qO=Symbol.for("effect/annotation/SchemaId"),Mg=Symbol.for("effect/annotation/Message"),xl=Symbol.for("effect/annotation/MissingMessage"),Fg=Symbol.for("effect/annotation/Identifier"),Ir=Symbol.for("effect/annotation/Title"),kl=Symbol.for("effect/annotation/AutoTitle"),Pc=Symbol.for("effect/annotation/Description"),Ng=Symbol.for("effect/annotation/Examples"),Lg=Symbol.for("effect/annotation/Default"),Dg=Symbol.for("effect/annotation/JSONSchema"),Ug=Symbol.for("effect/annotation/Arbitrary"),Kg=Symbol.for("effect/annotation/Pretty"),Bg=Symbol.for("effect/annotation/Equivalence"),JO=Symbol.for("effect/annotation/Documentation"),jg=Symbol.for("effect/annotation/Concurrency"),Wg=Symbol.for("effect/annotation/Batching"),qg=Symbol.for("effect/annotation/ParseIssueTitle"),Jg=Symbol.for("effect/annotation/ParseOptions"),Gg=Symbol.for("effect/annotation/DecodingFallback"),Hg=Symbol.for("effect/annotation/Surrogate"),GO=Symbol.for("effect/annotation/StableFilter"),St=T(2,(e,t)=>Object.prototype.hasOwnProperty.call(e.annotations,t)?be(e.annotations[t]):te()),HO=St(WO),VO=St(Mg),zO=St(xl),Vg=St(Ir),zg=St(kl),Mc=St(Fg),Yg=St(Pc),YO=St(jg),XO=St(Wg),ZO=St(qg),QO=St(Jg),eT=St(Gg),Xg=St(Hg),tT=St(GO),nT=e=>pO(tT(e),t=>t===!0),Zg=Symbol.for("effect/annotation/JSONIdentifier"),rT=St(Zg),iT=e=>Tr(rT(e),()=>Mc(e));class Qg{constructor(t,n,s,o={}){p(this,"typeParameters");p(this,"decodeUnknown");p(this,"encodeUnknown");p(this,"annotations");p(this,"_tag","Declaration");this.typeParameters=t,this.decodeUnknown=n,this.encodeUnknown=s,this.annotations=o}toString(){return ft(Wn(this),()=>"<declaration schema>")}toJSON(){return{_tag:this._tag,typeParameters:this.typeParameters.map(t=>t.toJSON()),annotations:ht(this.annotations)}}}const Ys=e=>t=>t._tag===e;class sT{constructor(t,n={}){p(this,"literal");p(this,"annotations");p(this,"_tag","Literal");this.literal=t,this.annotations=n}toString(){return ft(Wn(this),()=>Bn(this.literal))}toJSON(){return{_tag:this._tag,literal:gc(this.literal)?String(this.literal):this.literal,annotations:ht(this.annotations)}}}const em=Ys("Literal");class oT{constructor(t,n={}){p(this,"symbol");p(this,"annotations");p(this,"_tag","UniqueSymbol");this.symbol=t,this.annotations=n}toString(){return ft(Wn(this),()=>Bn(this.symbol))}toJSON(){return{_tag:this._tag,symbol:String(this.symbol),annotations:ht(this.annotations)}}}class cT{constructor(t={}){p(this,"annotations");p(this,"_tag","UndefinedKeyword");this.annotations=t}toString(){return Fi(this)}toJSON(){return{_tag:this._tag,annotations:ht(this.annotations)}}}const Cl=new cT({[Ir]:"undefined"});class uT{constructor(t={}){p(this,"annotations");p(this,"_tag","NeverKeyword");this.annotations=t}toString(){return Fi(this)}toJSON(){return{_tag:this._tag,annotations:ht(this.annotations)}}}const $l=new uT({[Ir]:"never"});class aT{constructor(t={}){p(this,"annotations");p(this,"_tag","UnknownKeyword");this.annotations=t}toString(){return Fi(this)}toJSON(){return{_tag:this._tag,annotations:ht(this.annotations)}}}const lT=new aT({[Ir]:"unknown"});class fT{constructor(t={}){p(this,"annotations");p(this,"_tag","AnyKeyword");this.annotations=t}toString(){return Fi(this)}toJSON(){return{_tag:this._tag,annotations:ht(this.annotations)}}}const hT=new fT({[Ir]:"any"});class dT{constructor(t={}){p(this,"annotations");p(this,"_tag","StringKeyword");this.annotations=t}toString(){return Fi(this)}toJSON(){return{_tag:this._tag,annotations:ht(this.annotations)}}}const pT=new dT({[Ir]:"string",[Pc]:"a string"}),gT=Ys("StringKeyword");class mT{constructor(t={}){p(this,"annotations");p(this,"_tag","NumberKeyword");this.annotations=t}toString(){return Fi(this)}toJSON(){return{_tag:this._tag,annotations:ht(this.annotations)}}}const _T=new mT({[Ir]:"number",[Pc]:"a number"}),yT=Ys("SymbolKeyword");let Fc=class{constructor(t,n={}){p(this,"type");p(this,"annotations");this.type=t,this.annotations=n}toJSON(){return{type:this.type.toJSON(),annotations:ht(this.annotations)}}toString(){return String(this.type)}};class Hr extends Fc{constructor(n,s,o={}){super(n,o);p(this,"isOptional");this.isOptional=s}toJSON(){return{type:this.type.toJSON(),isOptional:this.isOptional,annotations:ht(this.annotations)}}toString(){return String(this.type)+(this.isOptional?"?":"")}}const tm=e=>e.map(t=>t.type);class Pl{constructor(t,n,s,o={}){p(this,"elements");p(this,"rest");p(this,"isReadonly");p(this,"annotations");p(this,"_tag","TupleType");this.elements=t,this.rest=n,this.isReadonly=s,this.annotations=o;let u=!1,a=!1;for(const f of t)if(f.isOptional)u=!0;else if(u){a=!0;break}if(a||u&&n.length>1)throw new Error(BO)}toString(){return ft(Wn(this),()=>bT(this))}toJSON(){return{_tag:this._tag,elements:this.elements.map(t=>t.toJSON()),rest:this.rest.map(t=>t.toJSON()),isReadonly:this.isReadonly,annotations:ht(this.annotations)}}}const bT=e=>{const t=e.elements.map(String).join(", ");return yO(e.rest,{onEmpty:()=>`readonly [${t}]`,onNonEmpty:(n,s)=>{const o=String(n),u=o.includes(" | ")?`(${o})`:o;if(s.length>0){const a=s.map(String).join(", ");return e.elements.length>0?`readonly [${t}, ...${u}[], ${a}]`:`readonly [...${u}[], ${a}]`}else return e.elements.length>0?`readonly [${t}, ...${u}[]]`:`ReadonlyArray<${o}>`}})};class wt extends Hr{constructor(n,s,o,u,a){super(s,o,a);p(this,"name");p(this,"isReadonly");this.name=n,this.isReadonly=u}toString(){return(this.isReadonly?"readonly ":"")+String(this.name)+(this.isOptional?"?":"")+": "+this.type}toJSON(){return{name:String(this.name),type:this.type.toJSON(),isOptional:this.isOptional,isReadonly:this.isReadonly,annotations:ht(this.annotations)}}}const nm=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return nm(e.from)}return!1};class Nc{constructor(t,n,s){p(this,"type");p(this,"isReadonly");p(this,"parameter");if(this.type=n,this.isReadonly=s,nm(t))this.parameter=t;else throw new Error(KO)}toString(){return(this.isReadonly?"readonly ":"")+`[x: ${this.parameter}]: ${this.type}`}toJSON(){return{parameter:this.parameter.toJSON(),type:this.type.toJSON(),isReadonly:this.isReadonly}}}class Vr{constructor(t,n,s={}){p(this,"annotations");p(this,"_tag","TypeLiteral");p(this,"propertySignatures");p(this,"indexSignatures");this.annotations=s;const o={};for(let a=0;a<t.length;a++){const f=t[a].name;if(Object.prototype.hasOwnProperty.call(o,f))throw new Error(jO(f));o[f]=null}const u={string:!1,symbol:!1};for(let a=0;a<n.length;a++){const f=gm(n[a].parameter);if(gT(f)){if(u.string)throw new Error($g("string"));u.string=!0}else if(yT(f)){if(u.symbol)throw new Error($g("symbol"));u.symbol=!0}}this.propertySignatures=t,this.indexSignatures=n}toString(){return ft(Wn(this),()=>vT(this))}toJSON(){return{_tag:this._tag,propertySignatures:this.propertySignatures.map(t=>t.toJSON()),indexSignatures:this.indexSignatures.map(t=>t.toJSON()),annotations:ht(this.annotations)}}}const rm=e=>e.map(String).join("; "),vT=e=>{if(e.propertySignatures.length>0){const t=e.propertySignatures.map(String).join("; ");return e.indexSignatures.length>0?`{ ${t}; ${rm(e.indexSignatures)} }`:`{ ${t} }`}else return e.indexSignatures.length>0?`{ ${rm(e.indexSignatures)} }`:"{}"},ST=Vs(mg($i,e=>{switch(e._tag){case"AnyKeyword":return 0;case"UnknownKeyword":return 1;case"ObjectKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3}return 4})),wT={string:"StringKeyword",number:"NumberKeyword",boolean:"BooleanKeyword",bigint:"BigIntKeyword"},im=e=>Og(e,t=>om(t)?im(t.types):[t]),ET=e=>{const t=ST(e),n=[],s={},o=[];for(const u of t)switch(u._tag){case"NeverKeyword":break;case"AnyKeyword":return[hT];case"UnknownKeyword":return[lT];case"ObjectKeyword":case"UndefinedKeyword":case"VoidKeyword":case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":{s[u._tag]||(s[u._tag]=u,n.push(u));break}case"Literal":{const a=typeof u.literal;switch(a){case"string":case"number":case"bigint":case"boolean":{const f=wT[a];!s[f]&&!o.includes(u.literal)&&(o.push(u.literal),n.push(u));break}case"object":{o.includes(u.literal)||(o.push(u.literal),n.push(u));break}}break}case"UniqueSymbol":{!s.SymbolKeyword&&!o.includes(u.symbol)&&(o.push(u.symbol),n.push(u));break}case"TupleType":{s.ObjectKeyword||n.push(u);break}case"TypeLiteral":{u.propertySignatures.length===0&&u.indexSignatures.length===0?s["{}"]||(s["{}"]=u,n.push(u)):s.ObjectKeyword||n.push(u);break}default:n.push(u)}return n};let nr=(hr=class{constructor(t,n={}){p(this,"types");p(this,"annotations");p(this,"_tag","Union");this.types=t,this.annotations=n}toString(){return ft(Wn(this),()=>this.types.map(String).join(" | "))}toJSON(){return{_tag:this._tag,types:this.types.map(t=>t.toJSON()),annotations:ht(this.annotations)}}},p(hr,"make",(t,n)=>sm(t)?new hr(t,n):t.length===1?t[0]:$l),p(hr,"unify",(t,n)=>hr.make(ET(im(t)),n)),hr);const sm=e=>e.length>1,om=Ys("Union"),Ml=Ee(Symbol.for("effect/Schema/AST/toJSONMemoMap"),()=>new WeakMap);class cm{constructor(t,n={}){p(this,"f");p(this,"annotations");p(this,"_tag","Suspend");this.f=t,this.annotations=n,this.f=xg(t)}toString(){return Wn(this).pipe(Tr(()=>Ac(fO(this.f)(),t=>Wn(t))),ft(()=>"<suspended schema>"))}toJSON(){const t=this.f();let n=Ml.get(t);return n||(Ml.set(t,{_tag:this._tag}),n={_tag:this._tag,ast:t.toJSON(),annotations:ht(this.annotations)},Ml.set(t,n),n)}}let OT=class{constructor(t,n,s={}){p(this,"from");p(this,"filter");p(this,"annotations");p(this,"_tag","Refinement");this.from=t,this.filter=n,this.annotations=s}toString(){return Mc(this).pipe(ft(()=>Jt(mm(this),{onNone:()=>`{ ${this.from} | filter }`,onSome:t=>um(this.from)?String(this.from)+" & "+t:t})))}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),annotations:ht(this.annotations)}}};const um=Ys("Refinement"),Fl={};let am=class{constructor(t,n,s,o={}){p(this,"from");p(this,"to");p(this,"transformation");p(this,"annotations");p(this,"_tag","Transformation");this.from=t,this.to=n,this.transformation=s,this.annotations=o}toString(){return ft(Wn(this),()=>`(${String(this.from)} <-> ${String(this.to)})`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),to:this.to.toJSON(),annotations:ht(this.annotations)}}};class TT{constructor(t,n){p(this,"decode");p(this,"encode");p(this,"_tag","FinalTransformation");this.decode=t,this.encode=n}}let IT=class{constructor(t,n,s,o){p(this,"from");p(this,"to");p(this,"decode");p(this,"encode");this.from=t,this.to=n,this.decode=s,this.encode=o}};class AT{constructor(t){p(this,"propertySignatureTransformations");p(this,"_tag","TypeLiteralTransformation");this.propertySignatureTransformations=t;const n={},s={};for(const o of t){const u=o.from;if(n[u])throw new Error(Pg(u));n[u]=!0;const a=o.to;if(s[a])throw new Error(Pg(a));s[a]=!0}}}const Pi=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={...e.annotations,...t},o=Xg(e);return vt(o)&&(s[Hg]=Pi(o.value,t)),n.annotations.value=s,Object.create(Object.getPrototypeOf(e),n)},RT="[\\s\\S]*",xT="[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?",lm=(e,t)=>{switch(e._tag){case"Literal":return $c(String(e.literal));case"StringKeyword":return RT;case"NumberKeyword":return xT;case"TemplateLiteral":return fm(e);case"Union":return e.types.map(n=>lm(n)).join("|")}},kT=(e,t,n,s)=>om(e)?`(${t})`:t,fm=(e,t,n)=>{let s="";if(e.head!==""){const o=$c(e.head);s+=o}for(const o of e.spans){const u=lm(o.type);if(s+=kT(o.type,u),o.literal!==""){const a=$c(o.literal);s+=a}}return s},CT=e=>new RegExp(`^${fm(e)}$`),hm=(e,t)=>{const n=[],s=[],o=u=>{switch(u._tag){case"NeverKeyword":break;case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":case"Refinement":s.push(new Nc(u,t,!0));break;case"Literal":if(Un(u.literal)||Wr(u.literal))n.push(new wt(u.literal,t,!1,!0));else throw new Error(UO(u.literal));break;case"Enums":{for(const[a,f]of u.enums)n.push(new wt(f,t,!1,!0));break}case"UniqueSymbol":n.push(new wt(u.symbol,t,!1,!0));break;case"Union":u.types.forEach(o);break;default:throw new Error(DO(u))}};return o(e),{propertySignatures:n,indexSignatures:s}},dm=e=>t=>{let n;for(const s of e)Object.prototype.hasOwnProperty.call(t.annotations,s)&&(n===void 0&&(n={}),n[s]=t.annotations[s]);return n},$T=dm([Ng,Lg,Dg,Ug,Kg,Bg]),Mt=e=>{switch(e._tag){case"Declaration":{const t=sn(e.typeParameters,Mt);return t===e.typeParameters?e:new Qg(t,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{const t=sn(e.elements,o=>{const u=Mt(o.type);return u===o.type?o:new Hr(u,o.isOptional)}),n=tm(e.rest),s=sn(n,Mt);return t===e.elements&&s===n?e:new Pl(t,s.map(o=>new Fc(o)),e.isReadonly,e.annotations)}case"TypeLiteral":{const t=sn(e.propertySignatures,s=>{const o=Mt(s.type);return o===s.type?s:new wt(s.name,o,s.isOptional,s.isReadonly)}),n=sn(e.indexSignatures,s=>{const o=Mt(s.type);return o===s.type?s:new Nc(s.parameter,o,s.isReadonly)});return t===e.propertySignatures&&n===e.indexSignatures?e:new Vr(t,n,e.annotations)}case"Union":{const t=sn(e.types,Mt);return t===e.types?e:nr.make(t,e.annotations)}case"Suspend":return new cm(()=>Mt(e.f()),e.annotations);case"Refinement":{const t=Mt(e.from);return t===e.from?e:new OT(t,e.filter,e.annotations)}case"Transformation":{const t=$T(e);return Mt(t!==void 0?Pi(e.to,t):e.to)}}return e},Mi=e=>Jt(iT(e),{onNone:()=>{},onSome:t=>({[Zg]:t})});function sn(e,t){let n=!1;const s=Rc(e.length);for(let o=0;o<e.length;o++){const u=e[o],a=t(u);a!==u&&(n=!0),s[o]=a}return n?s:e}const jn=(e,t)=>{switch(e._tag){case"Declaration":{const n=sn(e.typeParameters,s=>jn(s));return n===e.typeParameters?e:new Qg(n,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{const n=sn(e.elements,u=>{const a=jn(u.type);return a===u.type?u:new Hr(a,u.isOptional)}),s=tm(e.rest),o=sn(s,u=>jn(u));return n===e.elements&&o===s?e:new Pl(n,o.map(u=>new Fc(u)),e.isReadonly,Mi(e))}case"TypeLiteral":{const n=sn(e.propertySignatures,o=>{const u=jn(o.type);return u===o.type?o:new wt(o.name,u,o.isOptional,o.isReadonly)}),s=sn(e.indexSignatures,o=>{const u=jn(o.type);return u===o.type?o:new Nc(o.parameter,u,o.isReadonly)});return n===e.propertySignatures&&s===e.indexSignatures?e:new Vr(n,s,Mi(e))}case"Union":{const n=sn(e.types,s=>jn(s));return n===e.types?e:nr.make(n,Mi(e))}case"Suspend":return new cm(()=>jn(e.f()),Mi(e));case"Refinement":{const n=jn(e.from),s=Mi(e);return s?Pi(n,s):n}case"Transformation":{const n=Mi(e);return jn(n?Pi(e.from,n):e.from)}}return e},pm=e=>jn(e),ht=e=>{const t={};for(const n of Object.getOwnPropertySymbols(e))t[String(n)]=e[n];return t},gm=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return e;case"Refinement":return gm(e.from)}},Fi=e=>ft(Wn(e),()=>e._tag);function PT(e){return Jt(HO(e),{onNone:()=>"",onSome:t=>t.map(n=>` & Brand<${Bn(n)}>`).join("")})}const mm=e=>Vg(e).pipe(Tr(()=>Yg(e)),Tr(()=>zg(e)),_g(t=>t+PT(e))),Wn=e=>Tr(Mc(e),()=>mm(e)),MT=Symbol.for("effect/Context/Tag"),Lc=Symbol.for("effect/Context/Reference"),_m={...Js,_op:"Tag",[Symbol.for("effect/STM")]:Ai,[MT]:{_Service:e=>e,_Identifier:e=>e},toString(){return lt(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[Ke](){return this.toJSON()},of(e){return e},context(e){return bm(this,e)}},FT={..._m,[Lc]:Lc},NT=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;Error.stackTraceLimit=t;const s=Object.create(_m);return Object.defineProperty(s,"stack",{get(){return n.stack}}),s.key=e,s},LT=()=>(e,t)=>{const n=Error.stackTraceLimit;Error.stackTraceLimit=2;const s=new Error;Error.stackTraceLimit=n;function o(){}return Object.setPrototypeOf(o,FT),o.key=e,o.defaultValue=t.defaultValue,Object.defineProperty(o,"stack",{get(){return s.stack}}),o},ym=Symbol.for("effect/Context"),DT={[ym]:{_Services:e=>e},[le](e){if(KT(e)&&this.unsafeMap.size===e.unsafeMap.size){for(const t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!fe(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[de](){return qe(this,bl(this.unsafeMap.size))},pipe(){return re(this,arguments)},toString(){return lt(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(rt)}},[Ke](){return this.toJSON()}},Ni=e=>{const t=Object.create(DT);return t.unsafeMap=e,t},UT=e=>{const t=new Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){const n=e.stack.split(`
`);if(n.length>2){const s=n[2].match(/at (.*)/);s&&(t.message=t.message+` (defined at ${s[1]})`)}}if(t.stack){const n=t.stack.split(`
`);n.splice(1,3),t.stack=n.join(`
`)}return t},KT=e=>ue(e,ym),BT=e=>ue(e,Lc),jT=Ni(new Map),WT=()=>jT,bm=(e,t)=>Ni(new Map([[e.key,t]])),qT=T(3,(e,t,n)=>{const s=new Map(e.unsafeMap);return s.set(t.key,n),Ni(s)}),Nl=Ee("effect/Context/defaultValueCache",()=>new Map),Ll=e=>{if(Nl.has(e.key))return Nl.get(e.key);const t=e.defaultValue();return Nl.set(e.key,t),t},JT=(e,t)=>e.unsafeMap.has(t.key)?e.unsafeMap.get(t.key):Ll(t),vm=T(2,(e,t)=>{if(!e.unsafeMap.has(t.key)){if(Lc in t)return Ll(t);throw UT(t)}return e.unsafeMap.get(t.key)}),GT=vm,HT=T(2,(e,t)=>e.unsafeMap.has(t.key)?Tl(e.unsafeMap.get(t.key)):BT(t)?Tl(Ll(t)):ug),VT=T(2,(e,t)=>{const n=new Map(e.unsafeMap);for(const[s,o]of t.unsafeMap)n.set(s,o);return Ni(n)}),zr=NT,Dl=WT,zT=bm,Xs=qT,Sm=GT,wm=vm,Zs=HT,Em=VT,Om=LT,Tm=Symbol.for("effect/Chunk");function YT(e,t,n,s,o){for(let u=t;u<Math.min(e.length,t+o);u++)n[s+u-t]=e[u];return n}const Im=[],XT=(e=>hl((t,n)=>t.length===n.length&&Yr(t).every((s,o)=>e(s,Di(n,o)))))(fe),ZT={[Tm]:{_A:e=>e},toString(){return lt(this.toJSON())},toJSON(){return{_id:"Chunk",values:Yr(this).map(rt)}},[Ke](){return this.toJSON()},[le](e){return Am(e)&&XT(this,e)},[de](){return qe(this,js(Yr(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return Im[Symbol.iterator]();default:return Yr(this)[Symbol.iterator]()}},pipe(){return re(this,arguments)}},it=e=>{const t=Object.create(ZT);switch(t.backing=e,e._tag){case"IEmpty":{t.length=0,t.depth=0,t.left=t,t.right=t;break}case"IConcat":{t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break}case"IArray":{t.length=e.array.length,t.depth=0,t.left=qn,t.right=qn;break}case"ISingleton":{t.length=1,t.depth=0,t.left=qn,t.right=qn;break}case"ISlice":{t.length=e.length,t.depth=e.chunk.depth+1,t.left=qn,t.right=qn;break}}return t},Am=e=>ue(e,Tm),qn=it({_tag:"IEmpty"}),rr=()=>qn,Ul=(...e)=>QT(e),Gt=e=>it({_tag:"ISingleton",a:e}),Rm=e=>Am(e)?e:Dc(Qe(e)),Kl=(e,t,n)=>{switch(e.backing._tag){case"IArray":{YT(e.backing.array,0,t,n,e.length);break}case"IConcat":{Kl(e.left,t,n),Kl(e.right,t,n+e.left.length);break}case"ISingleton":{t[n]=e.backing.a;break}case"ISlice":{let s=0,o=n;for(;s<e.length;)t[o]=Di(e,s),s+=1,o+=1;break}}},Yr=e=>{switch(e.backing._tag){case"IEmpty":return Im;case"IArray":return e.backing.array;default:{const t=new Array(e.length);return Kl(e,t,0),e.backing={_tag:"IArray",array:t},e.left=qn,e.right=qn,e.depth=0,t}}},Li=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return it({_tag:"IArray",array:wg(e.backing.array)});case"IConcat":return it({_tag:"IConcat",left:Li(e.backing.right),right:Li(e.backing.left)});case"ISlice":return Dc(wg(Yr(e)))}},Dc=e=>e.length===0?rr():e.length===1?Gt(e[0]):it({_tag:"IArray",array:e}),QT=e=>Dc(e),Di=T(2,(e,t)=>{switch(e.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":{if(t!==0)throw new Error("Index out of bounds");return e.backing.a}case"IArray":{if(t>=e.length||t<0)throw new Error("Index out of bounds");return e.backing.array[t]}case"IConcat":return t<e.left.length?Di(e.left,t):Di(e.right,t-e.left.length);case"ISlice":return Di(e.backing.chunk,t+e.backing.offset)}}),eI=T(2,(e,t)=>Tn(e,Gt(t))),On=T(2,(e,t)=>Tn(Gt(t),e)),Bl=T(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return qn;switch(e.backing._tag){case"ISlice":return it({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":return t>e.left.length?Bl(e.right,t-e.left.length):it({_tag:"IConcat",left:Bl(e.left,t),right:e.right});default:return it({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}}),Tn=T(2,(e,t)=>{if(e.backing._tag==="IEmpty")return t;if(t.backing._tag==="IEmpty")return e;const n=t.depth-e.depth;if(Math.abs(n)<=1)return it({_tag:"IConcat",left:e,right:t});if(n<-1)if(e.left.depth>=e.right.depth){const s=Tn(e.right,t);return it({_tag:"IConcat",left:e.left,right:s})}else{const s=Tn(e.right.right,t);if(s.depth===e.depth-3){const o=it({_tag:"IConcat",left:e.right.left,right:s});return it({_tag:"IConcat",left:e.left,right:o})}else{const o=it({_tag:"IConcat",left:e.left,right:e.right.left});return it({_tag:"IConcat",left:o,right:s})}}else if(t.right.depth>=t.left.depth){const s=Tn(e,t.left);return it({_tag:"IConcat",left:s,right:t.right})}else{const s=Tn(e,t.left.left);if(s.depth===t.depth-3){const o=it({_tag:"IConcat",left:s,right:t.left.right});return it({_tag:"IConcat",left:o,right:t.right})}else{const o=it({_tag:"IConcat",left:t.left.right,right:t.right});return it({_tag:"IConcat",left:s,right:o})}}}),tI=e=>e.length===0,Ui=e=>e.length>0,xm=e=>Di(e,0),Ki=xm,Xr=e=>Bl(e,1),jl=Symbol.for("effect/Duration"),km=BigInt(0),Cm=BigInt(24),Uc=BigInt(60),Wl=BigInt(1e3),$m=BigInt(1e6),Pm=BigInt(1e9),nI=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,ir=e=>{if(Fm(e))return e;if(Wr(e))return Jl(e);if(gc(e))return ql(e);if(Array.isArray(e)&&e.length===2&&e.every(Wr))return e[0]===-1/0||e[1]===-1/0||Number.isNaN(e[0])||Number.isNaN(e[1])?Nm:e[0]===1/0||e[1]===1/0?oI:ql(BigInt(Math.round(e[0]*1e9))+BigInt(Math.round(e[1])));if(Un(e)){const t=nI.exec(e);if(t){const[n,s,o]=t,u=Number(s);switch(o){case"nano":case"nanos":return ql(BigInt(s));case"micro":case"micros":return cI(BigInt(s));case"milli":case"millis":return Jl(u);case"second":case"seconds":return uI(u);case"minute":case"minutes":return aI(u);case"hour":case"hours":return lI(u);case"day":case"days":return fI(u);case"week":case"weeks":return hI(u)}}}throw new Error("Invalid DurationInput")},Mm={_tag:"Millis",millis:0},rI={_tag:"Infinity"},iI={[jl]:jl,[de](){return qe(this,Zp(this.value))},[le](e){return Fm(e)&&yI(this,e)},toString(){return`Duration(${vI(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:pI(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[Ke](){return this.toJSON()},pipe(){return re(this,arguments)}},Jn=e=>{const t=Object.create(iI);return Wr(e)?isNaN(e)||e<=0?t.value=Mm:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(e*1e6))}:t.value=rI:e<=km?t.value=Mm:t.value={_tag:"Nanos",nanos:e},t},Fm=e=>ue(e,jl),sI=e=>{switch(e.value._tag){case"Millis":return e.value.millis===0;case"Nanos":return e.value.nanos===km;case"Infinity":return!1}},Nm=Jn(0),oI=Jn(1/0),ql=e=>Jn(e),cI=e=>Jn(e*Wl),Jl=e=>Jn(e),uI=e=>Jn(e*1e3),aI=e=>Jn(e*6e4),lI=e=>Jn(e*36e5),fI=e=>Jn(e*864e5),hI=e=>Jn(e*6048e5),Gl=e=>gI(e,{onMillis:t=>t,onNanos:t=>Number(t)/1e6}),dI=e=>{const t=ir(e);switch(t.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return t.value.nanos;case"Millis":return BigInt(Math.round(t.value.millis*1e6))}},pI=e=>{const t=ir(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/Pm),Number(t.value.nanos%Pm)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}},gI=T(2,(e,t)=>{const n=ir(e);switch(n.value._tag){case"Nanos":return t.onNanos(n.value.nanos);case"Infinity":return t.onMillis(1/0);case"Millis":return t.onMillis(n.value.millis)}}),Lm=T(3,(e,t,n)=>{const s=ir(e),o=ir(t);if(s.value._tag==="Infinity"||o.value._tag==="Infinity")return n.onMillis(Gl(s),Gl(o));if(s.value._tag==="Nanos"||o.value._tag==="Nanos"){const u=s.value._tag==="Nanos"?s.value.nanos:BigInt(Math.round(s.value.millis*1e6)),a=o.value._tag==="Nanos"?o.value.nanos:BigInt(Math.round(o.value.millis*1e6));return n.onNanos(u,a)}return n.onMillis(s.value.millis,o.value.millis)}),mI=(e,t)=>Lm(e,t,{onMillis:(n,s)=>n===s,onNanos:(n,s)=>n===s}),_I=T(2,(e,t)=>Lm(e,t,{onMillis:(n,s)=>n>=s,onNanos:(n,s)=>n>=s})),yI=T(2,(e,t)=>mI(ir(e),ir(t))),bI=e=>{const t=ir(e);if(t.value._tag==="Infinity")return{days:1/0,hours:1/0,minutes:1/0,seconds:1/0,millis:1/0,nanos:1/0};const n=dI(t),s=n/$m,o=s/Wl,u=o/Uc,a=u/Uc,f=a/Cm;return{days:Number(f),hours:Number(a%Cm),minutes:Number(u%Uc),seconds:Number(o%Uc),millis:Number(s%Wl),nanos:Number(n%$m)}},vI=e=>{const t=ir(e);if(t.value._tag==="Infinity")return"Infinity";if(sI(t))return"0";const n=bI(t),s=[];return n.days!==0&&s.push(`${n.days}d`),n.hours!==0&&s.push(`${n.hours}h`),n.minutes!==0&&s.push(`${n.minutes}m`),n.seconds!==0&&s.push(`${n.seconds}s`),n.millis!==0&&s.push(`${n.millis}ms`),n.nanos!==0&&s.push(`${n.nanos}ns`),s.join(" ")},Zr=5,Hl=Math.pow(2,Zr),SI=Hl-1,wI=Hl/2,EI=Hl/4;function OI(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Bi(e,t){return t>>>e&SI}function ji(e){return 1<<e}function Dm(e,t){return OI(e&t-1)}const TI=(e,t)=>({value:e,previous:t});function Wi(e,t,n,s){let o=s;if(!e){const u=s.length;o=new Array(u);for(let a=0;a<u;++a)o[a]=s[a]}return o[t]=n,o}function Um(e,t,n){const s=n.length-1;let o=0,u=0,a=n;if(e)o=u=t;else for(a=new Array(s);o<t;)a[u++]=n[o++];for(++o;o<=s;)a[u++]=n[o++];return e&&(a.length=s),a}function II(e,t,n,s){const o=s.length;if(e){let d=o;for(;d>=t;)s[d--]=s[d];return s[t]=n,s}let u=0,a=0;const f=new Array(o+1);for(;u<t;)f[a++]=s[u++];for(f[t]=n;u<o;)f[++a]=s[u++];return f}class Ar{constructor(){p(this,"_tag","EmptyNode")}modify(t,n,s,o,u,a){const f=s(te());return gt(f)?new Ar:(++a.value,new Qr(t,o,u,f))}}function In(e){return Vp(e,"EmptyNode")}function AI(e){return In(e)||e._tag==="LeafNode"||e._tag==="CollisionNode"}function Kc(e,t){return In(e)?!1:t===e.edit}class Qr{constructor(t,n,s,o){p(this,"edit");p(this,"hash");p(this,"key");p(this,"value");p(this,"_tag","LeafNode");this.edit=t,this.hash=n,this.key=s,this.value=o}modify(t,n,s,o,u,a){if(fe(u,this.key)){const d=s(this.value);return d===this.value?this:gt(d)?(--a.value,new Ar):Kc(this,t)?(this.value=d,this):new Qr(t,o,u,d)}const f=s(te());return gt(f)?this:(++a.value,Km(t,n,this.hash,this,o,new Qr(t,o,u,f)))}}class Vl{constructor(t,n,s){p(this,"edit");p(this,"hash");p(this,"children");p(this,"_tag","CollisionNode");this.edit=t,this.hash=n,this.children=s}modify(t,n,s,o,u,a){if(o===this.hash){const d=Kc(this,t),m=this.updateCollisionList(d,t,this.hash,this.children,s,u,a);return m===this.children?this:m.length>1?new Vl(t,this.hash,m):m[0]}const f=s(te());return gt(f)?this:(++a.value,Km(t,n,this.hash,this,o,new Qr(t,o,u,f)))}updateCollisionList(t,n,s,o,u,a,f){const d=o.length;for(let y=0;y<d;++y){const v=o[y];if("key"in v&&fe(a,v.key)){const O=v.value,I=u(O);return I===O?o:gt(I)?(--f.value,Um(t,y,o)):Wi(t,y,new Qr(n,s,a,I),o)}}const m=u(te());return gt(m)?o:(++f.value,Wi(t,d,new Qr(n,s,a,m),o))}}class qi{constructor(t,n,s){p(this,"edit");p(this,"mask");p(this,"children");p(this,"_tag","IndexedNode");this.edit=t,this.mask=n,this.children=s}modify(t,n,s,o,u,a){const f=this.mask,d=this.children,m=Bi(n,o),y=ji(m),v=Dm(f,y),O=f&y,I=Kc(this,t);if(!O){const Y=new Ar().modify(t,n+Zr,s,o,u,a);return Y?d.length>=wI?xI(t,m,Y,f,d):new qi(t,f|y,II(I,v,Y,d)):this}const R=d[v],W=R.modify(t,n+Zr,s,o,u,a);if(R===W)return this;let L=f,K;if(In(W)){if(L&=~y,!L)return new Ar;if(d.length<=2&&AI(d[v^1]))return d[v^1];K=Um(I,v,d)}else K=Wi(I,v,W,d);return I?(this.mask=L,this.children=K,this):new qi(t,L,K)}}class zl{constructor(t,n,s){p(this,"edit");p(this,"size");p(this,"children");p(this,"_tag","ArrayNode");this.edit=t,this.size=n,this.children=s}modify(t,n,s,o,u,a){let f=this.size;const d=this.children,m=Bi(n,o),y=d[m],v=(y||new Ar).modify(t,n+Zr,s,o,u,a);if(y===v)return this;const O=Kc(this,t);let I;if(In(y)&&!In(v))++f,I=Wi(O,m,v,d);else if(!In(y)&&In(v)){if(--f,f<=EI)return RI(t,f,m,d);I=Wi(O,m,new Ar,d)}else I=Wi(O,m,v,d);return O?(this.size=f,this.children=I,this):new zl(t,f,I)}}function RI(e,t,n,s){const o=new Array(t-1);let u=0,a=0;for(let f=0,d=s.length;f<d;++f)if(f!==n){const m=s[f];m&&!In(m)&&(o[u++]=m,a|=1<<f)}return new qi(e,a,o)}function xI(e,t,n,s,o){const u=[];let a=s,f=0;for(let d=0;a;++d)a&1&&(u[d]=o[f++]),a>>>=1;return u[t]=n,new zl(e,f+1,u)}function kI(e,t,n,s,o,u){if(n===o)return new Vl(e,n,[u,s]);const a=Bi(t,n),f=Bi(t,o);if(a===f)return d=>new qi(e,ji(a)|ji(f),[d]);{const d=a<f?[s,u]:[u,s];return new qi(e,ji(a)|ji(f),d)}}function Km(e,t,n,s,o,u){let a,f=t;for(;;){const d=kI(e,f,n,s,o,u);if(typeof d=="function")a=TI(d,a),f=f+Zr;else{let m=d;for(;a!=null;)m=a.value(m),a=a.previous;return m}}}const Bm="effect/HashMap",Yl=Symbol.for(Bm),CI={[Yl]:Yl,[Symbol.iterator](){return new Bc(this,(e,t)=>[e,t])},[de](){let e=X(Bm);for(const t of this)e^=P(X(t[0]),Se(X(t[1])));return qe(this,e)},[le](e){if(MI(e)){if(e._size!==this._size)return!1;for(const t of this){const n=P(e,Zl(t[0],X(t[0])));if(gt(n))return!1;if(!fe(t[1],n.value))return!1}return!0}return!1},toString(){return lt(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(rt)}},[Ke](){return this.toJSON()},pipe(){return re(this,arguments)}},Xl=(e,t,n,s)=>{const o=Object.create(CI);return o._editable=e,o._edit=t,o._root=n,o._size=s,o};class Bc{constructor(t,n){p(this,"map");p(this,"f");p(this,"v");this.map=t,this.f=n,this.v=jm(this.map._root,this.f,void 0)}next(){if(gt(this.v))return{done:!0,value:void 0};const t=this.v.value;return this.v=jc(t.cont),{done:!1,value:t.value}}[Symbol.iterator](){return new Bc(this.map,this.f)}}const jc=e=>e?Wm(e[0],e[1],e[2],e[3],e[4]):te(),jm=(e,t,n=void 0)=>{switch(e._tag){case"LeafNode":return vt(e.value)?be({value:t(e.key,e.value.value),cont:n}):jc(n);case"CollisionNode":case"ArrayNode":case"IndexedNode":{const s=e.children;return Wm(s.length,s,0,t,n)}default:return jc(n)}},Wm=(e,t,n,s,o)=>{for(;n<e;){const u=t[n++];if(u&&!In(u))return jm(u,s,[e,t,n,s,o])}return jc(o)},$I=Xl(!1,0,new Ar,0),Wc=()=>$I,PI=e=>{const t=Jm(Wc());for(const n of e)Qs(t,n[0],n[1]);return UI(t)},MI=e=>ue(e,Yl),FI=e=>e&&In(e._root),NI=T(2,(e,t)=>Zl(e,t,X(t))),Zl=T(3,(e,t,n)=>{let s=e._root,o=0;for(;;)switch(s._tag){case"LeafNode":return fe(t,s.key)?s.value:te();case"CollisionNode":{if(n===s.hash){const u=s.children;for(let a=0,f=u.length;a<f;++a){const d=u[a];if("key"in d&&fe(t,d.key))return d.value}}return te()}case"IndexedNode":{const u=Bi(o,n),a=ji(u);if(s.mask&a){s=s.children[Dm(s.mask,a)],o+=Zr;break}return te()}case"ArrayNode":{if(s=s.children[Bi(o,n)],s){o+=Zr;break}return te()}default:return te()}}),LI=T(2,(e,t)=>vt(Zl(e,t,X(t)))),Qs=T(3,(e,t,n)=>ef(e,t,()=>be(n))),DI=T(3,(e,t,n)=>e._editable?(e._root=t,e._size=n,e):t===e._root?e:Xl(e._editable,e._edit,t,n)),qm=e=>new Bc(e,t=>t),Ql=e=>e._size,Jm=e=>Xl(!0,e._edit+1,e._root,e._size),UI=e=>(e._editable=!1,e),ef=T(3,(e,t,n)=>KI(e,t,X(t),n)),KI=T(4,(e,t,n,s)=>{const o={value:e._size},u=e._root.modify(e._editable?e._edit:NaN,0,s,n,t,o);return P(e,DI(u,o.value))}),Gm=T(2,(e,t)=>ef(e,t,te)),BI=T(2,(e,t)=>qc(e,Wc(),(n,s,o)=>Qs(n,o,t(s,o)))),jI=T(2,(e,t)=>qc(e,void 0,(n,s,o)=>t(s,o))),qc=T(3,(e,t,n)=>{const s=e._root;if(s._tag==="LeafNode")return vt(s.value)?n(t,s.value.value,s.key):t;if(s._tag==="EmptyNode")return t;const o=[s.children];let u;for(;u=o.pop();)for(let a=0,f=u.length;a<f;){const d=u[a++];d&&!In(d)&&(d._tag==="LeafNode"?vt(d.value)&&(t=n(t,d.value.value,d.key)):o.push(d.children))}return t}),Hm="effect/HashSet",tf=Symbol.for(Hm),WI={[tf]:tf,[Symbol.iterator](){return qm(this._keyMap)},[de](){return qe(this,Se(X(this._keyMap))(X(Hm)))},[le](e){return qI(e)?Ql(this._keyMap)===Ql(e._keyMap)&&fe(this._keyMap,e._keyMap):!1},toString(){return lt(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(rt)}},[Ke](){return this.toJSON()},pipe(){return re(this,arguments)}},Jc=e=>{const t=Object.create(WI);return t._keyMap=e,t},qI=e=>ue(e,tf),JI=Jc(Wc()),Gc=()=>JI,GI=e=>{const t=nf(Gc());for(const n of e)eo(t,n);return rf(t)},HI=(...e)=>{const t=nf(Gc());for(const n of e)eo(t,n);return rf(t)},VI=T(2,(e,t)=>LI(e._keyMap,t)),zI=e=>Ql(e._keyMap),nf=e=>Jc(Jm(e._keyMap)),rf=e=>(e._keyMap._editable=!1,e),Vm=T(2,(e,t)=>{const n=nf(e);return t(n),rf(n)}),eo=T(2,(e,t)=>e._keyMap._editable?(Qs(t,!0)(e._keyMap),e):Jc(Qs(t,!0)(e._keyMap))),zm=T(2,(e,t)=>e._keyMap._editable?(Gm(t)(e._keyMap),e):Jc(Gm(t)(e._keyMap))),YI=T(2,(e,t)=>Vm(e,n=>{for(const s of t)zm(n,s)})),XI=T(2,(e,t)=>Vm(Gc(),n=>{ZI(e,s=>eo(n,s));for(const s of t)eo(n,s)})),ZI=T(2,(e,t)=>jI(e._keyMap,(n,s)=>t(s))),QI=T(3,(e,t,n)=>qc(e._keyMap,t,(s,o,u)=>n(s,u))),ei=Gc,eA=GI,sf=HI,tA=VI,Ym=zI,to=eo,Xm=zm,Zm=YI,no=XI,Hc=QI,Qm=Symbol.for("effect/MutableRef"),nA={[Qm]:Qm,toString(){return lt(this.toJSON())},toJSON(){return{_id:"MutableRef",current:rt(this.current)}},[Ke](){return this.toJSON()},pipe(){return re(this,arguments)}},e_=e=>{const t=Object.create(nA);return t.current=e,t},Vc=e=>e.current,t_=T(2,(e,t)=>(e.current=t,e)),of="effect/FiberId",ro=Symbol.for(of),zc="None",cf="Runtime",rA="Composite",iA=Ze(`${of}-${zc}`);let sA=class{constructor(){p(this,bv,ro);p(this,"_tag",zc);p(this,"id",-1);p(this,"startTimeMillis",-1)}[(bv=ro,de)](){return iA}[le](t){return n_(t)&&t._tag===zc}toString(){return lt(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[Ke](){return this.toJSON()}};class oA{constructor(t,n){p(this,"id");p(this,"startTimeMillis");p(this,vv,ro);p(this,"_tag",cf);this.id=t,this.startTimeMillis=n}[(vv=ro,de)](){return qe(this,Ze(`${of}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[le](t){return n_(t)&&t._tag===cf&&this.id===t.id&&this.startTimeMillis===t.startTimeMillis}toString(){return lt(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[Ke](){return this.toJSON()}}const cA=new sA,n_=e=>ue(e,ro),uf=e=>{switch(e._tag){case zc:return ei();case cf:return sf(e.id);case rA:return P(uf(e.left),no(uf(e.right)))}},r_=Ee(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>e_(0)),i_=e=>Array.from(uf(e)).map(n=>`#${n}`).join(","),uA=()=>{const e=Vc(r_);return P(r_,t_(e+1)),new oA(e,Date.now())},Ji=cA,aA=i_,s_=uA,af=Wc,lA=PI,fA=FI,o_=NI,c_=Qs,u_=qm,hA=ef,dA=BI,a_=qc,io=Symbol.for("effect/List"),lf=e=>Qe(e),pA=(e=>vE(Rl(e),lf))(fe),gA={[io]:io,_tag:"Cons",toString(){return lt(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:lf(this).map(rt)}},[Ke](){return this.toJSON()},[le](e){return f_(e)&&this._tag===e._tag&&pA(this,e)},[de](){return qe(this,js(lf(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if(t._tag==="Nil")return e=!0,this.return();const n=t.head;return t=t.tail,{done:e,value:n}},return(n){return e||(e=!0),{done:!0,value:n}}}},pipe(){return re(this,arguments)}},Yc=(e,t)=>{const n=Object.create(gA);return n.head=e,n.tail=t,n},mA=Ze("Nil"),_A={[io]:io,_tag:"Nil",toString(){return lt(this.toJSON())},toJSON(){return{_id:"List",_tag:"Nil"}},[Ke](){return this.toJSON()},[de](){return mA},[le](e){return f_(e)&&this._tag===e._tag},[Symbol.iterator](){return{next(){return{done:!0,value:void 0}}}},pipe(){return re(this,arguments)}},l_=Object.create(_A),f_=e=>ue(e,io),sr=e=>e._tag==="Nil",yA=e=>e._tag==="Cons",bA=()=>l_,ti=(e,t)=>Yc(e,t),Gi=bA,ff=e=>Yc(e,l_),vA=T(2,(e,t)=>wA(t,e)),SA=T(2,(e,t)=>ti(t,e)),wA=T(2,(e,t)=>{if(sr(e))return t;if(sr(t))return e;{const n=Yc(t.head,e);let s=n,o=t.tail;for(;!sr(o);){const u=Yc(o.head,e);s.tail=u,s=u,o=o.tail}return n}}),EA=T(3,(e,t,n)=>{let s=t,o=e;for(;!sr(o);)s=n(s,o.head),o=o.tail;return s}),OA=e=>{let t=Gi(),n=e;for(;!sr(n);)t=SA(t,n.head),n=n.tail;return t},hf=function(){function e(t){t&&Object.assign(this,t)}return e.prototype=Ol,e}(),TA=Symbol.for("effect/DifferContextPatch");function h_(e){return e}const so={...hf.prototype,[TA]:{_Value:h_,_Patch:h_}},IA=Object.create(Object.assign(Object.create(so),{_tag:"Empty"})),d_=()=>IA,AA=Object.assign(Object.create(so),{_tag:"AndThen"}),RA=(e,t)=>{const n=Object.create(AA);return n.first=e,n.second=t,n},xA=Object.assign(Object.create(so),{_tag:"AddService"}),kA=(e,t)=>{const n=Object.create(xA);return n.key=e,n.service=t,n},CA=Object.assign(Object.create(so),{_tag:"RemoveService"}),$A=e=>{const t=Object.create(CA);return t.key=e,t},PA=Object.assign(Object.create(so),{_tag:"UpdateService"}),MA=(e,t)=>{const n=Object.create(PA);return n.key=e,n.update=t,n},FA=(e,t)=>{const n=new Map(e.unsafeMap);let s=d_();for(const[o,u]of t.unsafeMap.entries())if(n.has(o)){const a=n.get(o);n.delete(o),fe(a,u)||(s=Xc(MA(o,()=>u))(s))}else n.delete(o),s=Xc(kA(o,u))(s);for(const[o]of n.entries())s=Xc($A(o))(s);return s},Xc=T(2,(e,t)=>RA(e,t)),NA=T(2,(e,t)=>{if(e._tag==="Empty")return t;let n=!1,s=Gt(e);const o=new Map(t.unsafeMap);for(;Ui(s);){const a=Ki(s),f=Xr(s);switch(a._tag){case"Empty":{s=f;break}case"AddService":{o.set(a.key,a.service),s=f;break}case"AndThen":{s=On(On(f,a.second),a.first);break}case"RemoveService":{o.delete(a.key),s=f;break}case"UpdateService":{o.set(a.key,a.update(o.get(a.key))),n=!0,s=f;break}}}if(!n)return Ni(o);const u=new Map;for(const[a]of t.unsafeMap)o.has(a)&&(u.set(a,o.get(a)),o.delete(a));for(const[a,f]of o)u.set(a,f);return Ni(u)}),LA=Symbol.for("effect/DifferHashSetPatch");function df(e){return e}const Zc={...hf.prototype,[LA]:{_Value:df,_Key:df,_Patch:df}},DA=Object.create(Object.assign(Object.create(Zc),{_tag:"Empty"})),p_=()=>DA,UA=Object.assign(Object.create(Zc),{_tag:"AndThen"}),KA=(e,t)=>{const n=Object.create(UA);return n.first=e,n.second=t,n},BA=Object.assign(Object.create(Zc),{_tag:"Add"}),jA=e=>{const t=Object.create(BA);return t.value=e,t},WA=Object.assign(Object.create(Zc),{_tag:"Remove"}),qA=e=>{const t=Object.create(WA);return t.value=e,t},JA=(e,t)=>{const[n,s]=Hc([e,p_()],([o,u],a)=>tA(a)(o)?[Xm(a)(o),u]:[o,pf(jA(a))(u)])(t);return Hc(s,(o,u)=>pf(qA(u))(o))(n)},pf=T(2,(e,t)=>KA(e,t)),GA=T(2,(e,t)=>{if(e._tag==="Empty")return t;let n=t,s=Gt(e);for(;Ui(s);){const o=Ki(s),u=Xr(s);switch(o._tag){case"Empty":{s=u;break}case"AndThen":{s=On(o.first)(On(o.second)(u));break}case"Add":{n=to(o.value)(n),s=u;break}case"Remove":n=Xm(o.value)(n),s=u}}return n}),HA=Symbol.for("effect/DifferReadonlyArrayPatch");function g_(e){return e}const oo={...hf.prototype,[HA]:{_Value:g_,_Patch:g_}},VA=Object.create(Object.assign(Object.create(oo),{_tag:"Empty"})),m_=()=>VA,zA=Object.assign(Object.create(oo),{_tag:"AndThen"}),YA=(e,t)=>{const n=Object.create(zA);return n.first=e,n.second=t,n},XA=Object.assign(Object.create(oo),{_tag:"Append"}),ZA=e=>{const t=Object.create(XA);return t.values=e,t},QA=Object.assign(Object.create(oo),{_tag:"Slice"}),eR=(e,t)=>{const n=Object.create(QA);return n.from=e,n.until=t,n},tR=Object.assign(Object.create(oo),{_tag:"Update"}),nR=(e,t)=>{const n=Object.create(tR);return n.index=e,n.patch=t,n},rR=e=>{let t=0,n=m_();for(;t<e.oldValue.length&&t<e.newValue.length;){const s=e.oldValue[t],o=e.newValue[t],u=e.differ.diff(s,o);fe(u,e.differ.empty)||(n=Qc(n,nR(t,u))),t=t+1}return t<e.oldValue.length&&(n=Qc(n,eR(0,t))),t<e.newValue.length&&(n=Qc(n,ZA(AO(t)(e.newValue)))),n},Qc=T(2,(e,t)=>YA(e,t)),iR=T(3,(e,t,n)=>{if(e._tag==="Empty")return t;let s=t.slice(),o=En(e);for(;kc(o);){const u=Pt(o),a=Jr(o);switch(u._tag){case"Empty":{o=a;break}case"AndThen":{a.unshift(u.first,u.second),o=a;break}case"Append":{for(const f of u.values)s.push(f);o=a;break}case"Slice":{s=s.slice(u.from,u.until),o=a;break}case"Update":{s[u.index]=n.patch(u.patch,s[u.index]),o=a;break}}}return s}),sR={[Symbol.for("effect/Differ")]:{_P:Xe,_V:Xe},pipe(){return re(this,arguments)}},Hi=e=>{const t=Object.create(sR);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},oR=()=>Hi({empty:d_(),combine:(e,t)=>Xc(t)(e),diff:(e,t)=>FA(e,t),patch:(e,t)=>NA(t)(e)}),cR=()=>Hi({empty:p_(),combine:(e,t)=>pf(t)(e),diff:(e,t)=>JA(e,t),patch:(e,t)=>GA(t)(e)}),uR=e=>Hi({empty:m_(),combine:(t,n)=>Qc(t,n),diff:(t,n)=>rR({oldValue:t,newValue:n,differ:e}),patch:(t,n)=>iR(t,n,e)}),__=()=>aR((e,t)=>t),aR=e=>Hi({empty:Xe,combine:(t,n)=>t===Xe?n:n===Xe?t:s=>n(t(s)),diff:(t,n)=>fe(t,n)?Xe:hc(n),patch:(t,n)=>e(n,t(n))}),co=255,y_=8,gf=e=>e&co,mf=e=>e>>y_&co,uo=(e,t)=>(e&co)+((t&e&co)<<y_),lR=uo(0,0),fR=e=>uo(e,e),hR=e=>uo(e,0),dR=T(2,(e,t)=>uo(gf(e)&~t,mf(e))),pR=T(2,(e,t)=>e|t),gR=e=>~e>>>0&co,mR=0,Vi=1,_R=2,b_=4,_f=16,v_=32,yR=e=>eu(e,v_),bR=T(2,(e,t)=>e|t),Rr=e=>S_(e)&&!SR(e),S_=e=>eu(e,Vi),eu=T(2,(e,t)=>(e&t)!==0),w_=(...e)=>e.reduce((t,n)=>t|n,0),vR=w_(mR),E_=e=>eu(e,b_),SR=e=>eu(e,_f),tu=T(2,(e,t)=>uo(e^t,t)),nu=T(2,(e,t)=>e&(gR(gf(t))|mf(t))|gf(t)&mf(t)),O_=Hi({empty:lR,diff:(e,t)=>tu(e,t),combine:(e,t)=>pR(t)(e),patch:(e,t)=>nu(t,e)}),wR=fR,T_=hR,I_=dR,A_=(e,t)=>({_tag:"Par",left:e,right:t}),ru=(e,t)=>({_tag:"Seq",left:e,right:t}),ER=e=>{let t=ff(e),n=Gi();for(;;){const[s,o]=EA(t,[R_(),Gi()],([u,a],f)=>{const[d,m]=OR(f);return[xR(u,d),vA(a,m)]});if(n=TR(n,s),sr(o))return OA(n);t=o}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},OR=e=>{let t=e,n=R_(),s=Gi(),o=Gi();for(;;)switch(t._tag){case"Empty":{if(sr(s))return[n,o];t=s.head,s=s.tail;break}case"Par":{s=ti(t.right,s),t=t.left;break}case"Seq":{const u=t.left,a=t.right;switch(u._tag){case"Empty":{t=a;break}case"Par":{const f=u.left,d=u.right;t=A_(ru(f,a),ru(d,a));break}case"Seq":{const f=u.left,d=u.right;t=ru(f,ru(d,a));break}case"Single":{t=u,o=ti(a,o);break}}break}case"Single":{if(n=RR(n,t),sr(s))return[n,o];t=s.head,s=s.tail;break}}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},TR=(e,t)=>{if(sr(e))return ff(bf(t));if(kR(t))return e;const n=NR(e.head),s=CR(t);return n.length===1&&s.length===1&&fe(n[0],s[0])?ti(FR(e.head,bf(t)),e.tail):ti(bf(t),e)},IR=Symbol.for("effect/RequestBlock/RequestBlockParallel"),AR={_R:e=>e};Sv=IR;class yf{constructor(t){p(this,"map");p(this,Sv,AR);this.map=t}}const R_=()=>new yf(af()),RR=(e,t)=>new yf(hA(e.map,t.dataSource,n=>lO(_g(n,eI(t.blockedRequest)),()=>Gt(t.blockedRequest)))),xR=(e,t)=>new yf(a_(e.map,t.map,(n,s,o)=>c_(n,o,Jt(o_(n,o),{onNone:()=>s,onSome:u=>Tn(s,u)})))),kR=e=>fA(e.map),CR=e=>Array.from(u_(e.map)),bf=e=>MR(dA(e.map,t=>Gt(t))),$R=Symbol.for("effect/RequestBlock/RequestBlockSequential"),PR={_R:e=>e};wv=$R;class x_{constructor(t){p(this,"map");p(this,wv,PR);this.map=t}}const MR=e=>new x_(e),FR=(e,t)=>new x_(a_(t.map,e.map,(n,s,o)=>c_(n,o,Jt(o_(n,o),{onNone:()=>rr(),onSome:u=>Tn(u,s)})))),NR=e=>Array.from(u_(e.map)),LR=e=>Array.from(e.map),ao="Die",ni="Empty",ri="Fail",zi="Interrupt",Yi="Parallel",Xi="Sequential",k_="effect/Cause",C_=Symbol.for(k_),DR={_E:e=>e},Zi={[C_]:DR,[de](){return P(X(k_),Se(X(ZR(this))),qe(this))},[le](e){return UR(e)&&XR(this,e)},pipe(){return re(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:rt(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:rt(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:rt(this.left),right:rt(this.right)}}},toString(){return es(this)},[Ke](){return this.toJSON()}},lo=(()=>{const e=Object.create(Zi);return e._tag=ni,e})(),iu=e=>{const t=Object.create(Zi);return t._tag=ri,t.error=e,t},Gn=e=>{const t=Object.create(Zi);return t._tag=ao,t.defect=e,t},xr=e=>{const t=Object.create(Zi);return t._tag=zi,t.fiberId=e,t},su=(e,t)=>{const n=Object.create(Zi);return n._tag=Yi,n.left=e,n.right=t,n},on=(e,t)=>{const n=Object.create(Zi);return n._tag=Xi,n.left=e,n.right=t,n},UR=e=>ue(e,C_),KR=e=>e._tag===ni,BR=e=>e._tag===ri,jR=e=>e._tag===ni?!0:Qi(e,!0,(t,n)=>{switch(n._tag){case ni:return be(t);case ao:case ri:case zi:return be(!1);default:return te()}}),WR=e=>vt(zR(e)),vf=e=>wf(void 0,ex)(e),qR=e=>Li(Qi(e,rr(),(t,n)=>n._tag===ri?be(P(t,On(n.error))):te())),JR=e=>Li(Qi(e,rr(),(t,n)=>n._tag===ao?be(P(t,On(n.defect))):te())),GR=e=>Qi(e,ei(),(t,n)=>n._tag===zi?be(P(t,to(n.fiberId))):te()),HR=e=>P_(e,t=>t._tag===ri?be(t.error):te()),VR=e=>{const t=HR(e);switch(t._tag){case"None":return Oe(e);case"Some":return ge(t.value)}},zR=e=>P_(e,t=>t._tag===zi?be(t.fiberId):te()),$_=e=>N_(e,{onEmpty:lo,onFail:()=>lo,onDie:Gn,onInterrupt:xr,onSequential:on,onParallel:su}),YR=e=>N_(e,{onEmpty:lo,onFail:Gn,onDie:Gn,onInterrupt:xr,onSequential:on,onParallel:su}),XR=(e,t)=>{let n=Gt(e),s=Gt(t);for(;Ui(n)&&Ui(s);){const[o,u]=P(Ki(n),Qi([ei(),rr()],([d,m],y)=>{const[v,O]=Sf(y);return be([P(d,no(v)),P(m,Tn(O))])})),[a,f]=P(Ki(s),Qi([ei(),rr()],([d,m],y)=>{const[v,O]=Sf(y);return be([P(d,no(v)),P(m,Tn(O))])}));if(!fe(o,a))return!1;n=u,s=f}return!0},ZR=e=>QR(Gt(e),rr()),QR=(e,t)=>{for(;;){const[n,s]=P(e,Tg([ei(),rr()],([u,a],f)=>{const[d,m]=Sf(f);return[P(u,no(d)),P(a,Tn(m))]})),o=Ym(n)>0?P(t,On(n)):t;if(tI(s))return Li(o);e=s,t=o}throw new Error(mc("Cause.flattenCauseLoop"))},P_=T(2,(e,t)=>{const n=[e];for(;n.length>0;){const s=n.pop(),o=t(s);switch(o._tag){case"None":{switch(s._tag){case Xi:case Yi:{n.push(s.right),n.push(s.left);break}}break}case"Some":return o}}return te()}),Sf=e=>{let t=e;const n=[];let s=ei(),o=rr();for(;t!==void 0;)switch(t._tag){case ni:{if(n.length===0)return[s,o];t=n.pop();break}case ri:{if(s=to(s,Ul(t._tag,t.error)),n.length===0)return[s,o];t=n.pop();break}case ao:{if(s=to(s,Ul(t._tag,t.defect)),n.length===0)return[s,o];t=n.pop();break}case zi:{if(s=to(s,Ul(t._tag,t.fiberId)),n.length===0)return[s,o];t=n.pop();break}case Xi:{switch(t.left._tag){case ni:{t=t.right;break}case Xi:{t=on(t.left.left,on(t.left.right,t.right));break}case Yi:{t=su(on(t.left.left,t.right),on(t.left.right,t.right));break}default:{o=On(o,t.right),t=t.left;break}}break}case Yi:{n.push(t.right),t=t.left;break}}throw new Error(mc("Cause.evaluateCauseLoop"))},ex={emptyCase:Gp,failCase:fl,dieCase:fl,interruptCase:Gp,sequentialCase:(e,t,n)=>t&&n,parallelCase:(e,t,n)=>t&&n},M_="SequentialCase",F_="ParallelCase",N_=T(2,(e,{onDie:t,onEmpty:n,onFail:s,onInterrupt:o,onParallel:u,onSequential:a})=>wf(e,void 0,{emptyCase:()=>n,failCase:(f,d)=>s(d),dieCase:(f,d)=>t(d),interruptCase:(f,d)=>o(d),sequentialCase:(f,d,m)=>a(d,m),parallelCase:(f,d,m)=>u(d,m)})),Qi=T(3,(e,t,n)=>{let s=t,o=e;const u=[];for(;o!==void 0;){const a=n(s,o);switch(s=vt(a)?a.value:s,o._tag){case Xi:{u.push(o.right),o=o.left;break}case Yi:{u.push(o.right),o=o.left;break}default:{o=void 0;break}}o===void 0&&u.length>0&&(o=u.pop())}return s}),wf=T(3,(e,t,n)=>{const s=[e],o=[];for(;s.length>0;){const a=s.pop();switch(a._tag){case ni:{o.push(Oe(n.emptyCase(t)));break}case ri:{o.push(Oe(n.failCase(t,a.error)));break}case ao:{o.push(Oe(n.dieCase(t,a.defect)));break}case zi:{o.push(Oe(n.interruptCase(t,a.fiberId)));break}case Xi:{s.push(a.right),s.push(a.left),o.push(ge({_tag:M_}));break}case Yi:{s.push(a.right),s.push(a.left),o.push(ge({_tag:F_}));break}}}const u=[];for(;o.length>0;){const a=o.pop();switch(a._tag){case"Left":{switch(a.left._tag){case M_:{const f=u.pop(),d=u.pop(),m=n.sequentialCase(t,f,d);u.push(m);break}case F_:{const f=u.pop(),d=u.pop(),m=n.parallelCase(t,f,d);u.push(m);break}}break}case"Right":{u.push(a.right);break}}}if(u.length===0)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return u.pop()}),es=(e,t)=>vf(e)?"All fibers interrupted without errors.":D_(e).map(function(n){return(t==null?void 0:t.renderErrorCause)!==!0||n.cause===void 0?n.stack:`${n.stack} {
${L_(n.cause,"  ")}
}`}).join(`
`),L_=(e,t)=>{const n=e.stack.split(`
`);let s=`${t}[cause]: ${n[0]}`;for(let o=1,u=n.length;o<u;o++)s+=`
${t}${n[o]}`;return e.cause&&(s+=` {
${L_(e.cause,`${t}  `)}
${t}}`),s};class ou extends globalThis.Error{constructor(n){const s=typeof n=="object"&&n!==null,o=Error.stackTraceLimit;Error.stackTraceLimit=1;super(tx(n),s&&"cause"in n&&typeof n.cause<"u"?{cause:new ou(n.cause)}:void 0);p(this,"span");this.message===""&&(this.message="An error has occurred"),Error.stackTraceLimit=o,this.name=n instanceof Error?n.name:"Error",s&&(ts in n&&(this.span=n[ts]),Object.keys(n).forEach(u=>{u in this||(this[u]=n[u])})),this.stack=ix(`${this.name}: ${this.message}`,n instanceof Error&&n.stack?n.stack:"",this.span)}}const tx=e=>{if(typeof e=="string")return e;if(typeof e=="object"&&e!==null&&e instanceof Error)return e.message;try{if(ue(e,"toString")&&Ks(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return Qp(e)},nx=/\((.*)\)/g,rx=Ee("effect/Tracer/spanToTrace",()=>new WeakMap),ix=(e,t,n)=>{const s=[e],o=t.startsWith(e)?t.slice(e.length).split(`
`):t.split(`
`);for(let u=1;u<o.length&&!o[u].includes("Generator.next");u++){if(o[u].includes("effect_internal_function")){s.pop();break}s.push(o[u].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(n){let u=n,a=0;for(;u&&u._tag==="Span"&&a<10;){const f=rx.get(u);if(typeof f=="function"){const d=f();if(typeof d=="string"){const m=d.matchAll(nx);let y=!1;for(const[,v]of m)y=!0,s.push(`    at ${u.name} (${v})`);y||s.push(`    at ${u.name} (${d.replace(/^at /,"")})`)}else s.push(`    at ${u.name}`)}else s.push(`    at ${u.name}`);u=Kn(u.parent),a++}}return s.join(`
`)},ts=Symbol.for("effect/SpanAnnotation"),D_=e=>wf(e,void 0,{emptyCase:()=>[],dieCase:(t,n)=>[new ou(n)],failCase:(t,n)=>[new ou(n)],interruptCase:()=>[],parallelCase:(t,n,s)=>[...n,...s],sequentialCase:(t,n,s)=>[...n,...s]}),cu="Pending",U_="Done",sx=Symbol.for("effect/Deferred"),ox={_E:e=>e,_A:e=>e},cx=e=>({_tag:cu,joiners:e}),ux=e=>({_tag:U_,effect:e});class fo{constructor(t){p(this,"self");p(this,"called",!1);this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new fo(this.self)}}const K_=(e,t)=>{const n=new _t("Blocked");return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n},ax=e=>{const t=new _t("RunBlocked");return t.effect_instruction_i0=e,t},ns=Symbol.for("effect/Effect");class lx{constructor(t,n){p(this,"patch");p(this,"op");p(this,"_op",El);this.patch=t,this.op=n}}class _t{constructor(t){p(this,"_op");p(this,"effect_instruction_i0");p(this,"effect_instruction_i1");p(this,"effect_instruction_i2");p(this,"trace");p(this,Ev,Ai);this._op=t}[(Ev=ns,le)](t){return this===t}[de](){return qe(this,yl(this))}pipe(){return re(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:rt(this.effect_instruction_i0),effect_instruction_i1:rt(this.effect_instruction_i1),effect_instruction_i2:rt(this.effect_instruction_i2)}}toString(){return lt(this.toJSON())}[Ke](){return this.toJSON()}[Symbol.iterator](){return new fo(new Bs(this))}}class B_{constructor(t){p(this,"_op");p(this,"effect_instruction_i0");p(this,"effect_instruction_i1");p(this,"effect_instruction_i2");p(this,"trace");p(this,Ov,Ai);this._op=t,this._tag=t}[(Ov=ns,le)](t){return Mf(t)&&t._op==="Failure"&&fe(this.effect_instruction_i0,t.effect_instruction_i0)}[de](){return P(Ze(this._tag),Se(X(this.effect_instruction_i0)),qe(this))}get cause(){return this.effect_instruction_i0}pipe(){return re(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return lt(this.toJSON())}[Ke](){return this.toJSON()}[Symbol.iterator](){return new fo(new Bs(this))}}class j_{constructor(t){p(this,"_op");p(this,"effect_instruction_i0");p(this,"effect_instruction_i1");p(this,"effect_instruction_i2");p(this,"trace");p(this,Tv,Ai);this._op=t,this._tag=t}[(Tv=ns,le)](t){return Mf(t)&&t._op==="Success"&&fe(this.effect_instruction_i0,t.effect_instruction_i0)}[de](){return P(Ze(this._tag),Se(X(this.effect_instruction_i0)),qe(this))}get value(){return this.effect_instruction_i0}pipe(){return re(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:rt(this.value)}}toString(){return lt(this.toJSON())}[Ke](){return this.toJSON()}[Symbol.iterator](){return new fo(new Bs(this))}}const uu=e=>ue(e,ns),Ht=e=>{const t=new _t(ng);return t.effect_instruction_i0=e,t},fx=T(3,(e,t,n)=>du(s=>se(e,o=>se(H_(st(()=>s(t(o)))),u=>st(()=>n(o,u)).pipe(rs({onFailure:a=>{switch(u._tag){case Sn:return An(on(u.effect_instruction_i0,a));case wn:return An(a)}},onSuccess:()=>u})))))),ho=T(2,(e,t)=>se(e,()=>Be(t))),po=e=>ho(e,void 0),W_=function(){const e=new _t(vc);switch(arguments.length){case 2:{e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break}case 3:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break}case 4:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break}default:throw new Error(mc("you're not supposed to end up here"))}return e},au=(e,t=Ji)=>{const n=new _t(Ws);let s;return n.effect_instruction_i0=o=>{s=e(o)},n.effect_instruction_i1=t,Q_(n,o=>uu(s)?s:Rn)},hx=(e,t=Ji)=>st(()=>au(e,t)),go=(e,t=Ji)=>W_(e,function(){let n,s;function o(d){n?n(d):s===void 0&&(s=d)}const u=new _t(Ws);u.effect_instruction_i0=d=>{n=d,s&&d(s)},u.effect_instruction_i1=t;let a,f;return this.effect_instruction_i0.length!==1?(f=new AbortController,a=At(()=>this.effect_instruction_i0(o,f.signal))):a=At(()=>this.effect_instruction_i0(o)),a||f?Q_(u,d=>(f&&f.abort(),a??Rn)):u}),Ef=T(2,(e,t)=>Tf(e,{onFailure:t,onSuccess:Be})),q_=Symbol.for("effect/OriginalAnnotation"),Of=(e,t)=>vt(t)?new Proxy(e,{has(n,s){return s===ts||s===q_||s in n},get(n,s){return s===ts?t.value:s===q_?e:n[s]}}):e,J_=e=>Or(e)&&!(ts in e)?Ht(t=>An(Gn(Of(e,Nf(t))))):An(Gn(e)),G_=e=>dx(()=>Gn(new jx(e))),lu=e=>Tf(e,{onFailure:t=>Be(ge(t)),onSuccess:t=>Be(Oe(t))}),H_=e=>mx(e,{onFailure:Ne,onSuccess:et}),Ft=e=>Or(e)&&!(ts in e)?Ht(t=>An(iu(Of(e,Nf(t))))):An(iu(e)),V_=e=>se(ce(e),Ft),An=e=>{const t=new B_(Sn);return t.effect_instruction_i0=e,t},dx=e=>se(ce(e),An),px=Ht(e=>Be(e.id())),z_=e=>Ht(t=>e(t.id())),se=T(2,(e,t)=>{const n=new _t(Sc);return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n}),gx=e=>{const t=new _t("OnStep");return t.effect_instruction_i0=e,t},Y_=e=>se(e,Xe),mx=T(2,(e,t)=>rs(e,{onFailure:n=>Be(t.onFailure(n)),onSuccess:n=>Be(t.onSuccess(n))})),rs=T(2,(e,t)=>{const n=new _t(wc);return n.effect_instruction_i0=e,n.effect_instruction_i1=t.onFailure,n.effect_instruction_i2=t.onSuccess,n}),Tf=T(2,(e,t)=>rs(e,{onFailure:n=>{if(JR(n).length>0)return An(YR(n));const o=qR(n);return o.length>0?t.onFailure(xm(o)):An(n)},onSuccess:t.onSuccess})),kr=T(2,(e,t)=>st(()=>{const n=Qe(e),s=Rc(n.length);let o=0;return ho(Af({while:()=>o<n.length,body:()=>t(n[o],o),step:u=>{s[o++]=u}}),s)})),fu=T(2,(e,t)=>st(()=>{const n=Qe(e);let s=0;return Af({while:()=>s<n.length,body:()=>t(n[s],s),step:()=>{s++}})})),X_=e=>{const t=new _t(qs);return t.effect_instruction_i0=wR(Vi),t.effect_instruction_i1=()=>e,t},Nt=T(2,(e,t)=>se(e,n=>ce(()=>t(n)))),Z_=T(2,(e,t)=>Tf(e,{onFailure:n=>V_(()=>t.onFailure(n)),onSuccess:n=>ce(()=>t.onSuccess(n))})),hu=T(2,(e,t)=>rs(e,{onFailure:n=>{const s=VR(n);switch(s._tag){case"Left":return V_(()=>t(s.left));case"Right":return An(s.right)}},onSuccess:Be})),If=T(2,(e,t)=>du(n=>rs(n(e),{onFailure:s=>{const o=Ne(s);return rs(t(o),{onFailure:u=>Ne(on(s,u)),onSuccess:()=>o})},onSuccess:s=>{const o=et(s);return pu(t(o),o)}}))),Q_=T(2,(e,t)=>If(e,my({onFailure:n=>vf(n)?po(t(GR(n))):Rn,onSuccess:()=>Rn}))),Be=e=>{const t=new j_(wn);return t.effect_instruction_i0=e,t},st=e=>{const t=new _t(vc);return t.commit=e,t},ce=e=>{const t=new _t(tg);return t.effect_instruction_i0=e,t},_x=T(e=>e.length===3||e.length===2&&!(Or(e[1])&&"onlyEffect"in e[1]),(e,t)=>se(e,n=>{const s=typeof t=="function"?t(n):t;return uu(s)?ho(s,n):RE(s)?au(o=>{s.then(u=>o(Be(n)),u=>o(Ft(new Jx(u,"An unknown error occurred in Effect.tap"))))}):Be(n)})),yx=e=>Ht(t=>{const n=t.getFiberRef($f),s=P(n,ft(()=>t.scope()));return e(gu($f,be(s)))}),ey=e=>{const t=new _t(qs);return t.effect_instruction_i0=T_(Vi),t.effect_instruction_i1=()=>e,t},du=e=>W_(e,function(){const t=new _t(qs);return t.effect_instruction_i0=T_(Vi),t.effect_instruction_i1=n=>S_(n)?At(()=>this.effect_instruction_i0(X_)):At(()=>this.effect_instruction_i0(ey)),t}),Rn=Be(void 0),bx=e=>{const t=new _t(qs);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},Af=e=>{const t=new _t(Ec);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},Rf=e=>{const t=new _t(Tc);return typeof(e==null?void 0:e.priority)<"u"?Nx(t,e.priority):t},ty=T(2,(e,t)=>se(e,n=>Nt(t,s=>[n,s]))),ny=T(2,(e,t)=>se(e,n=>ho(t,n))),pu=T(2,(e,t)=>se(e,()=>t)),vx=e=>se(px,t=>P(e,ry(t))),ry=T(2,(e,t)=>se(e.interruptAsFork(t),()=>e.await)),Sx={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return re(this,arguments)}},wx={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return re(this,arguments)}},Ex={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return re(this,arguments)}},Ox={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return re(this,arguments)}},iy={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return re(this,arguments)}},sy={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return re(this,arguments)}},Tx={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return re(this,arguments)}},Ix={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return re(this,arguments)}},Ax=Symbol.for("effect/FiberRef"),Rx={_A:e=>e},xf=e=>Ht(t=>et(t.getFiberRef(e))),kf=T(2,(e,t)=>se(xf(e),t)),oy=T(2,(e,t)=>xx(e,()=>[void 0,t])),xx=T(2,(e,t)=>Ht(n=>{const[s,o]=t(n.getFiberRef(e));return n.setFiberRef(e,o),Be(s)})),gu=T(3,(e,t,n)=>fx(ny(xf(t),oy(t,n)),()=>e,s=>oy(t,s))),Vt=(e,t)=>is(e,{differ:__(),fork:(t==null?void 0:t.fork)??Xe,join:t==null?void 0:t.join}),kx=e=>{const t=cR();return is(e,{differ:t,fork:t.empty})},Cx=e=>{const t=uR(__());return is(e,{differ:t,fork:t.empty})},cy=e=>{const t=oR();return is(e,{differ:t,fork:t.empty})},is=(e,t)=>({...Gs,[Ax]:Rx,initial:e,commit(){return xf(this)},diff:(s,o)=>t.differ.diff(s,o),combine:(s,o)=>t.differ.combine(s,o),patch:s=>o=>t.differ.patch(s,o),fork:t.fork,join:t.join??((s,o)=>o)}),$x=e=>is(e,{differ:O_,fork:O_.empty}),mo=Ee(Symbol.for("effect/FiberRef/currentContext"),()=>cy(Dl())),mu=Ee(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>Vt(0)),uy=Ee(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>Vt(2048)),Px=Ee(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>Vt(af())),Mx=Ee(Symbol.for("effect/FiberRef/currentLogLevel"),()=>Vt(iy)),Fx=Ee(Symbol.for("effect/FiberRef/currentLogSpan"),()=>Vt(Gi())),Nx=T(2,(e,t)=>gu(e,mu,t)),Lx=Ee(Symbol.for("effect/FiberRef/currentConcurrency"),()=>Vt("unbounded")),Dx=Ee(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>Vt(!0)),Ux=Ee(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>Vt(be(sy))),Cf=Ee(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>Cx(Ri())),$f=Ee(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>Vt(te(),{fork:()=>te(),join:(e,t)=>e})),_u=Ee(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>Vt(lo,{fork:()=>lo,join:(e,t)=>e})),Kx=(e,t)=>e.addFinalizer(()=>po(t)),Bx=(e,t)=>e.close(t),yu=(e,t)=>e.fork(t),Pf=function(){class e extends globalThis.Error{commit(){return Ft(this)}toJSON(){const n={...this};return this.message&&(n.message=this.message),this.cause&&(n.cause=this.cause),n}[Ke](){return this.toString!==globalThis.Error.prototype.toString?this.stack?`${this.toString()}
${this.stack.split(`
`).slice(1).join(`
`)}`:this.toString():"Bun"in globalThis?es(iu(this),{renderErrorCause:!0}):this}}return Object.assign(e.prototype,zE),e}(),ay=(e,t)=>{class n extends Pf{constructor(){super(...arguments);p(this,"_tag",t)}}return Object.assign(n.prototype,e),n.prototype.name=t,n},ly=Symbol.for("effect/Cause/errors/RuntimeException"),jx=ay({[ly]:ly},"RuntimeException"),Wx=Symbol.for("effect/Cause/errors/InterruptedException"),qx=e=>ue(e,Wx),fy=Symbol.for("effect/Cause/errors/NoSuchElement"),hy=ay({[fy]:fy},"NoSuchElementException"),dy=Symbol.for("effect/Cause/errors/UnknownException"),Jx=function(){class e extends Pf{constructor(s,o){super(o??"An unknown error occurred",{cause:s});p(this,"_tag","UnknownException");p(this,"error");this.error=s}}return Object.assign(e.prototype,{[dy]:dy,name:"UnknownException"}),e}(),Mf=e=>uu(e)&&"_tag"in e&&(e._tag==="Success"||e._tag==="Failure"),Gx=e=>e._tag==="Success",py=(e,t)=>Yx(e,t!=null&&t.parallel?su:on),Hx=e=>Ne(Gn(e)),gy=e=>Ne(iu(e)),Ne=e=>{const t=new B_(Sn);return t.effect_instruction_i0=e,t},Vx=e=>Ne(xr(e)),Ff=T(2,(e,t)=>{switch(e._tag){case Sn:return Ne(e.effect_instruction_i0);case wn:return et(t(e.effect_instruction_i0))}}),my=T(2,(e,{onFailure:t,onSuccess:n})=>{switch(e._tag){case Sn:return t(e.effect_instruction_i0);case wn:return n(e.effect_instruction_i0)}}),et=e=>{const t=new j_(wn);return t.effect_instruction_i0=e,t},ii=et(void 0),zx=T(3,(e,t,{onFailure:n,onSuccess:s})=>{switch(e._tag){case Sn:switch(t._tag){case wn:return Ne(e.effect_instruction_i0);case Sn:return Ne(n(e.effect_instruction_i0,t.effect_instruction_i0))}case wn:switch(t._tag){case wn:return et(s(e.effect_instruction_i0,t.effect_instruction_i0));case Sn:return Ne(t.effect_instruction_i0)}}}),Yx=(e,t)=>{const n=Rm(e);return Ui(n)?P(Xr(n),Tg(P(Ki(n),Ff(Gt)),(s,o)=>P(s,zx(o,{onSuccess:(u,a)=>P(u,On(a)),onFailure:t}))),Ff(Li),Ff(s=>Yr(s)),be):te()},Xx=e=>({...Gs,[sx]:ox,state:e_(cx([])),commit(){return _y(this)},blockingOn:e}),_y=e=>hx(t=>{const n=Vc(e.state);switch(n._tag){case U_:return t(n.effect);case cu:return n.joiners.push(t),Zx(e,t)}},e.blockingOn),yy=(e,t)=>{const n=Vc(e.state);if(n._tag===cu){t_(e.state,ux(t));for(let s=0,o=n.joiners.length;s<o;s++)n.joiners[s](t)}},Zx=(e,t)=>ce(()=>{const n=Vc(e.state);if(n._tag===cu){const s=n.joiners.indexOf(t);s>=0&&n.joiners.splice(s,1)}}),Qx=Ht(e=>et(e.currentContext)),ek=()=>Qx,_o=e=>se(ek(),e),tk=T(2,(e,t)=>gu(mo,t)(e)),nk=T(2,(e,t)=>_o(n=>tk(e,t(n)))),Nf=e=>{const t=e.currentSpan;return t!==void 0&&t._tag==="Span"?be(t):te()},rk=Gx,by=Symbol.for("effect/MutableHashMap"),ik={[by]:by,[Symbol.iterator](){return new Lf(this)},toString(){return lt(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(rt)}},[Ke](){return this.toJSON()},pipe(){return re(this,arguments)}};class Lf{constructor(t){p(this,"self");p(this,"referentialIterator");p(this,"bucketIterator");this.self=t,this.referentialIterator=t.referential[Symbol.iterator]()}next(){if(this.bucketIterator!==void 0)return this.bucketIterator.next();const t=this.referentialIterator.next();return t.done?(this.bucketIterator=new sk(this.self.buckets.values()),this.next()):t}[Symbol.iterator](){return new Lf(this.self)}}class sk{constructor(t){p(this,"backing");p(this,"currentBucket");this.backing=t}next(){if(this.currentBucket===void 0){const n=this.backing.next();if(n.done)return n;this.currentBucket=n.value[Symbol.iterator]()}const t=this.currentBucket.next();return t.done?(this.currentBucket=void 0,this.next()):t}}const ok=()=>{const e=Object.create(ik);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e},si=T(2,(e,t)=>{if(bc(t)===!1)return e.referential.has(t)?be(e.referential.get(t)):te();const n=t[de](),s=e.buckets.get(n);return s===void 0?te():ck(e,s,t)}),ck=(e,t,n,s=!1)=>{for(let o=0,u=t.length;o<u;o++)if(n[le](t[o][0])){const a=t[o][1];return s&&(t.splice(o,1),e.bucketsSize--),be(a)}return te()},yo=T(2,(e,t)=>vt(si(e,t))),bo=T(3,(e,t,n)=>{if(bc(t)===!1)return e.referential.set(t,n),e;const s=t[de](),o=e.buckets.get(s);return o===void 0?(e.buckets.set(s,[[t,n]]),e.bucketsSize++,e):(uk(e,o,t),o.push([t,n]),e.bucketsSize++,e)}),uk=(e,t,n)=>{for(let s=0,o=t.length;s<o;s++)if(n[le](t[s][0])){t.splice(s,1),e.bucketsSize--;return}};function ak(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var vy={exports:{}},Ge=vy.exports={},Hn,Vn;function Df(){throw new Error("setTimeout has not been defined")}function Uf(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Hn=setTimeout:Hn=Df}catch{Hn=Df}try{typeof clearTimeout=="function"?Vn=clearTimeout:Vn=Uf}catch{Vn=Uf}})();function Sy(e){if(Hn===setTimeout)return setTimeout(e,0);if((Hn===Df||!Hn)&&setTimeout)return Hn=setTimeout,setTimeout(e,0);try{return Hn(e,0)}catch{try{return Hn.call(null,e,0)}catch{return Hn.call(this,e,0)}}}function lk(e){if(Vn===clearTimeout)return clearTimeout(e);if((Vn===Uf||!Vn)&&clearTimeout)return Vn=clearTimeout,clearTimeout(e);try{return Vn(e)}catch{try{return Vn.call(null,e)}catch{return Vn.call(this,e)}}}var or=[],ss=!1,oi,bu=-1;function fk(){!ss||!oi||(ss=!1,oi.length?or=oi.concat(or):bu=-1,or.length&&wy())}function wy(){if(!ss){var e=Sy(fk);ss=!0;for(var t=or.length;t;){for(oi=or,or=[];++bu<t;)oi&&oi[bu].run();bu=-1,t=or.length}oi=null,ss=!1,lk(e)}}Ge.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];or.push(new Ey(e,t)),or.length===1&&!ss&&Sy(wy)};function Ey(e,t){this.fun=e,this.array=t}Ey.prototype.run=function(){this.fun.apply(null,this.array)},Ge.title="browser",Ge.browser=!0,Ge.env={},Ge.argv=[],Ge.version="",Ge.versions={};function cr(){}Ge.on=cr,Ge.addListener=cr,Ge.once=cr,Ge.off=cr,Ge.removeListener=cr,Ge.removeAllListeners=cr,Ge.emit=cr,Ge.prependListener=cr,Ge.prependOnceListener=cr,Ge.listeners=function(e){return[]},Ge.binding=function(e){throw new Error("process.binding is not supported")},Ge.cwd=function(){return"/"},Ge.chdir=function(e){throw new Error("process.chdir is not supported")},Ge.umask=function(){return 0};var hk=vy.exports;const xn=ak(hk),Oy=Symbol.for("effect/Clock"),Kf=zr("effect/Clock"),dk=2**31-1,Ty={unsafeSchedule(e,t){const n=Gl(t);if(n>dk)return fl;let s=!1;const o=setTimeout(()=>{s=!0,e()},n);return()=>(clearTimeout(o),!s)}},Iy=function(){const e=BigInt(1e6);if(typeof performance>"u")return()=>BigInt(Date.now())*e;if(typeof performance.timeOrigin=="number"&&performance.timeOrigin===0)return()=>BigInt(Math.round(performance.now()*1e6));const t=BigInt(Date.now())*e-BigInt(Math.round(performance.now()*1e6));return()=>t+BigInt(Math.round(performance.now()*1e6))}(),pk=function(){const e=typeof xn=="object"&&"hrtime"in xn&&typeof xn.hrtime.bigint=="function"?xn.hrtime:void 0;if(!e)return Iy;const t=Iy()-e.bigint();return()=>t+e.bigint()}();Iv=Oy;class gk{constructor(){p(this,Iv,Oy);p(this,"currentTimeMillis",ce(()=>this.unsafeCurrentTimeMillis()));p(this,"currentTimeNanos",ce(()=>this.unsafeCurrentTimeNanos()))}unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return pk()}scheduler(){return Be(Ty)}sleep(t){return go(n=>{const s=Ty.unsafeSchedule(()=>n(Rn),t);return po(ce(s))})}}const mk=()=>new gk,Ay="And",Ry="Or",xy="InvalidData",ky="MissingData",Cy="SourceUnavailable",$y="Unsupported",Py=Symbol.for("effect/ConfigError"),os={_tag:"ConfigError",[Py]:Py},My=(e,t)=>{const n=Object.create(os);return n._op=Ay,n.left=e,n.right=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),n},Fy=(e,t)=>{const n=Object.create(os);return n._op=Ry,n.left=e,n.right=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),n},_k=(e,t,n={pathDelim:"."})=>{const s=Object.create(os);return s._op=xy,s.path=e,s.message=t,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`(Invalid data at ${P(this.path,ki(n.pathDelim))}: "${this.message}")`}}),s},ci=(e,t,n={pathDelim:"."})=>{const s=Object.create(os);return s._op=ky,s.path=e,s.message=t,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`(Missing data at ${P(this.path,ki(n.pathDelim))}: "${this.message}")`}}),s},yk=(e,t,n,s={pathDelim:"."})=>{const o=Object.create(os);return o._op=Cy,o.path=e,o.message=t,o.cause=n,Object.defineProperty(o,"toString",{enumerable:!1,value(){return`(Source unavailable at ${P(this.path,ki(s.pathDelim))}: "${this.message}")`}}),o},bk=(e,t,n={pathDelim:"."})=>{const s=Object.create(os);return s._op=$y,s.path=e,s.message=t,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${P(this.path,ki(n.pathDelim))}: "${this.message}")`}}),s},ui=T(2,(e,t)=>{switch(e._op){case Ay:return My(ui(e.left,t),ui(e.right,t));case Ry:return Fy(ui(e.left,t),ui(e.right,t));case xy:return _k([...t,...e.path],e.message);case ky:return ci([...t,...e.path],e.message);case Cy:return yk([...t,...e.path],e.message,e.cause);case $y:return bk([...t,...e.path],e.message)}}),vk={_tag:"Empty"},Bf=T(2,(e,t)=>{let n=ff(t),s=e;for(;yA(n);){const o=n.head;switch(o._tag){case"Empty":{n=n.tail;break}case"AndThen":{n=ti(o.first,ti(o.second,n.tail));break}case"MapName":{s=xi(s,o.f),n=n.tail;break}case"Nested":{s=xc(s,o.name),n=n.tail;break}case"Unnested":{if(P(Hs(s),dO(o.name)))s=Jr(s),n=n.tail;else return ge(ci(s,`Expected ${o.name} to be in path in ConfigProvider#unnested`));break}}}return Oe(s)}),Sk="Constant",wk="Fail",Ek="Fallback",Ok="Described",Tk="Lazy",Ik="MapOrFail",Ak="Nested",Rk="Primitive",xk="Sequence",kk="HashMap",Ck="ZipWith";var Ny={};const vu=(e,t)=>[...e,...t],Ly=Symbol.for("effect/ConfigProvider"),$k=zr("effect/ConfigProvider"),Dy=Symbol.for("effect/ConfigProviderFlat"),Pk=e=>({[Ly]:Ly,pipe(){return re(this,arguments)},...e}),Mk=e=>({[Dy]:Dy,patch:e.patch,load:(t,n,s=!0)=>e.load(t,n,s),enumerateChildren:e.enumerateChildren}),Fk=e=>Pk({load:t=>se(cn(e,Ri(),t,!1),n=>Jt(Hs(n),{onNone:()=>Ft(ci(Ri(),`Expected a single value having structure: ${t}`)),onSome:Be})),flattened:e}),Nk=e=>{const{pathDelim:t,seqDelim:n}=Object.assign({},{pathDelim:"_",seqDelim:","},e),s=d=>P(d,ki(t)),o=d=>d.split(t),u=()=>typeof xn<"u"&&"env"in xn&&typeof Ny=="object"?Ny:{};return Fk(Mk({load:(d,m,y=!0)=>{const v=s(d),O=u(),I=v in O?be(O[v]):te();return P(I,hu(()=>ci(d,`Expected ${v} to exist in the process context`)),se(R=>Bk(R,d,m,n,y)))},enumerateChildren:d=>ce(()=>{const m=u(),O=Object.keys(m).map(I=>o(I.toUpperCase())).filter(I=>{for(let R=0;R<d.length;R++){const W=P(d,vg(R)),L=I[R];if(L===void 0||W!==L)return!1}return!0}).flatMap(I=>I.slice(d.length,d.length+1));return eA(O)}),patch:vk}))},Lk=(e,t,n,s)=>{const o=Ig(n.length,d=>d>=s.length?te():be([e(d),d+1])),u=Ig(s.length,d=>d>=n.length?te():be([t(d),d+1])),a=vu(n,o),f=vu(s,u);return[a,f]},Dk=(e,t)=>{let n=t;if(n._tag==="Nested"){const s=e.slice();for(;n._tag==="Nested";)s.push(n.name),n=n.config;return s}return e},cn=(e,t,n,s)=>{const o=n;switch(o._tag){case Sk:return Be(En(o.value));case Ok:return st(()=>cn(e,t,o.config,s));case wk:return Ft(ci(t,o.message));case Ek:return P(st(()=>cn(e,t,o.first,s)),Ef(u=>o.condition(u)?P(cn(e,t,o.second,s),Ef(a=>Ft(Fy(u,a)))):Ft(u)));case Tk:return st(()=>cn(e,t,o.config(),s));case Ik:return st(()=>P(cn(e,t,o.original,s),se(kr(u=>P(o.mapOrFail(u),hu(ui(Dk(t,o.original))))))));case Ak:return st(()=>cn(e,vu(t,En(o.name)),o.config,s));case Rk:return P(Bf(t,e.patch),se(u=>P(e.load(u,o,s),se(a=>{if(a.length===0){const f=P(OO(u),ft(()=>"<n/a>"));return Ft(ci([],`Expected ${o.description} with name ${f}`))}return Be(a)}))));case xk:return P(Bf(t,e.patch),se(u=>P(e.enumerateChildren(u),se(Wk),se(a=>a.length===0?st(()=>Nt(cn(e,t,o.config,!0),En)):P(kr(a,f=>cn(e,bO(t,`[${f}]`),o.config,!0)),Nt(f=>{const d=PO(f);return d.length===0?En(Ri()):En(d)}))))));case kk:return st(()=>P(Bf(t,e.patch),se(u=>P(e.enumerateChildren(u),se(a=>P(a,kr(f=>cn(e,vu(u,En(f)),o.valueConfig,s)),Nt(f=>f.length===0?En(af()):P(jk(f),xi(d=>lA(Eg(Qe(a),d)))))))))));case Ck:return st(()=>P(cn(e,t,o.left,s),lu,se(u=>P(cn(e,t,o.right,s),lu,se(a=>{if(pt(u)&&pt(a))return Ft(My(u.left,a.left));if(pt(u)&&tr(a))return Ft(u.left);if(tr(u)&&pt(a))return Ft(a.left);if(tr(u)&&tr(a)){const f=P(t,ki(".")),d=Uk(t,f),[m,y]=Lk(d,d,P(u.right,xi(Oe)),P(a.right,xi(Oe)));return P(m,Eg(y),kr(([v,O])=>P(ty(v,O),Nt(([I,R])=>o.zip(I,R)))))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},Uk=(e,t)=>n=>ge(ci(e,`The element at index ${n} in a sequence at path "${t}" was missing`)),Kk=(e,t)=>e.split(new RegExp(`\\s*${$c(t)}\\s*`)),Bk=(e,t,n,s,o)=>o?P(Kk(e,s),kr(u=>n.parse(u.trim())),hu(ui(t))):P(n.parse(e),Z_({onFailure:ui(t),onSuccess:En})),jk=e=>Object.keys(e[0]).map(t=>e.map(n=>n[t])),Wk=e=>P(kr(e,Jk),Z_({onFailure:()=>Ri(),onSuccess:Vs($i)}),lu,Nt(oO)),qk=/^(\[(\d+)\])$/,Jk=e=>{const t=e.match(qk);if(t!==null){const n=t[2];return P(n!==void 0&&n.length>0?be(n):te(),Ac(Gk))}return te()},Gk=e=>{const t=Number.parseInt(e);return Number.isNaN(t)?te():be(t)},Uy=Symbol.for("effect/Console"),Ky=zr("effect/Console"),Hk={[Uy]:Uy,assert(e,...t){return ce(()=>{console.assert(e,...t)})},clear:ce(()=>{console.clear()}),count(e){return ce(()=>{console.count(e)})},countReset(e){return ce(()=>{console.countReset(e)})},debug(...e){return ce(()=>{console.debug(...e)})},dir(e,t){return ce(()=>{console.dir(e,t)})},dirxml(...e){return ce(()=>{console.dirxml(...e)})},error(...e){return ce(()=>{console.error(...e)})},group(e){return e!=null&&e.collapsed?ce(()=>console.groupCollapsed(e==null?void 0:e.label)):ce(()=>console.group(e==null?void 0:e.label))},groupEnd:ce(()=>{console.groupEnd()}),info(...e){return ce(()=>{console.info(...e)})},log(...e){return ce(()=>{console.log(...e)})},table(e,t){return ce(()=>{console.table(e,t)})},time(e){return ce(()=>console.time(e))},timeEnd(e){return ce(()=>console.timeEnd(e))},timeLog(e,...t){return ce(()=>{console.timeLog(e,...t)})},trace(...e){return ce(()=>{console.trace(...e)})},warn(...e){return ce(()=>{console.warn(...e)})},unsafe:console},By=Symbol.for("effect/Random"),Vk=zr("effect/Random");Av=By;class zk{constructor(t){p(this,"seed");p(this,Av,By);p(this,"PRNG");this.seed=t,this.PRNG=new FE(t)}get next(){return ce(()=>this.PRNG.number())}get nextBoolean(){return Nt(this.next,t=>t>.5)}get nextInt(){return ce(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(t,n){return Nt(this.next,s=>(n-t)*s+t)}nextIntBetween(t,n){return ce(()=>this.PRNG.integer(n-t)+t)}shuffle(t){return Yk(t,n=>this.nextIntBetween(0,n))}}const Yk=(e,t)=>st(()=>P(ce(()=>Array.from(e)),se(n=>{const s=[];for(let o=n.length;o>=2;o=o-1)s.push(o);return P(s,fu(o=>P(t(o),Nt(u=>Xk(n,o-1,u)))),ho(Rm(n)))}))),Xk=(e,t,n)=>{const s=e[t];return e[t]=e[n],e[n]=s,e},Zk=e=>new zk(X(e)),jy=Symbol.for("effect/Tracer"),Qk=e=>({[jy]:jy,...e}),Wy=zr("effect/Tracer"),qy=zr("effect/ParentSpan"),Jy=function(){const e="abcdef0123456789",t=e.length;return function(n){let s="";for(let o=0;o<n;o++)s+=e.charAt(Math.floor(Math.random()*t));return s}}();class eC{constructor(t,n,s,o,u,a){p(this,"name");p(this,"parent");p(this,"context");p(this,"links");p(this,"startTime");p(this,"kind");p(this,"_tag","Span");p(this,"spanId");p(this,"traceId","native");p(this,"sampled",!0);p(this,"status");p(this,"attributes");p(this,"events",[]);this.name=t,this.parent=n,this.context=s,this.links=o,this.startTime=u,this.kind=a,this.status={_tag:"Started",startTime:u},this.attributes=new Map,this.traceId=n._tag==="Some"?n.value.traceId:Jy(32),this.spanId=Jy(16)}end(t,n){this.status={_tag:"Ended",endTime:t,exit:n,startTime:this.status.startTime}}attribute(t,n){this.attributes.set(t,n)}event(t,n,s){this.events.push([t,n,s??{}])}}const tC=P(Dl(),Xs(Kf,mk()),Xs(Ky,Hk),Xs(Vk,Zk(Math.random())),Xs($k,Nk()),Xs(Wy,Qk({span:(e,t,n,s,o,u)=>new eC(e,t,n,s,o,u),context:e=>e()}))),Su=Ee(Symbol.for("effect/DefaultServices/currentServices"),()=>cy(tC));function nC(e){return new Cr(e)}function rC(){return nC(new Map)}const Gy=Symbol.for("effect/FiberRefs");Rv=Gy;class Cr{constructor(t){p(this,"locals");p(this,Rv,Gy);this.locals=t}pipe(){return re(this,arguments)}}const iC=(e,t,n,s=!1)=>{const o=e;let u=t,a=n,f=s,d;for(;d===void 0;)if(mt(u)&&mt(a)){const m=Pt(u)[0],y=Jr(u),v=Pt(a)[0],O=Pt(a)[1],I=Jr(a);m.startTimeMillis<v.startTimeMillis?(a=I,f=!0):m.startTimeMillis>v.startTimeMillis?u=y:m.id<v.id?(a=I,f=!0):m.id>v.id?u=y:d=[O,f]}else d=[o.initial,!0];return d},sC=T(3,(e,t,n)=>{const s=new Map(e.locals);return n.locals.forEach((o,u)=>{const a=o[0][1];if(!o[0][0][le](t)){if(!s.has(u)){if(fe(a,u.initial))return;s.set(u,[[t,u.join(u.initial,a)]]);return}const f=s.get(u),[d,m]=iC(u,f,o);if(m){const y=u.diff(d,a),v=f[0][1],O=u.join(v,u.patch(y)(v));if(!fe(v,O)){let I;const R=f[0][0];R[le](t)?I=[[R,O],...f.slice(1)]:I=[[t,O],...f],s.set(u,I)}}}}),new Cr(s)}),oC=T(2,(e,t)=>{const n=new Map;return Hy(e,n,t),new Cr(n)}),Hy=(e,t,n)=>{e.locals.forEach((s,o)=>{const u=s[0][1],a=o.patch(o.fork)(u);fe(u,a)?t.set(o,s):t.set(o,[[n,a],...s])})},Vy=T(2,(e,t)=>{const n=new Map(e.locals);return n.delete(t),new Cr(n)}),cC=T(2,(e,t)=>e.locals.has(t)?be(Pt(e.locals.get(t))[1]):te()),vo=T(2,(e,t)=>P(cC(e,t),ft(()=>t.initial))),jf=T(2,(e,{fiberId:t,fiberRef:n,value:s})=>{if(e.locals.size===0)return new Cr(new Map([[n,[[t,s]]]]));const o=new Map(e.locals);return Wf(o,t,n,s),new Cr(o)}),Wf=(e,t,n,s)=>{const o=e.get(n)??[];let u;if(mt(o)){const[a,f]=Pt(o);if(a[le](t)){if(fe(f,s))return;u=[[t,s],...o.slice(1)]}else u=[[t,s],...o]}else u=[[t,s]];e.set(n,u)},uC=T(2,(e,{entries:t,forkAs:n})=>{if(e.locals.size===0)return new Cr(new Map(t));const s=new Map(e.locals);return n!==void 0&&Hy(e,s,n),t.forEach(([o,u])=>{u.length===1?Wf(s,u[0][0],o,u[0][1]):u.forEach(([a,f])=>{Wf(s,a,o,f)})}),new Cr(s)}),aC=vo,lC=uC,fC=rC,hC=Sx,dC=wx,pC=Ex,gC=Ox,mC=iy,_C=sy,yC=Tx,bC=Ix,vC=aO(P($i,mg(e=>e.ordinal))),SC=e=>{switch(e){case"All":return hC;case"Debug":return _C;case"Error":return pC;case"Fatal":return dC;case"Info":return mC;case"Trace":return yC;case"None":return bC;case"Warning":return gC}},zy=e=>e.replace(/[\s="]/g,"_"),wC=e=>t=>`${zy(t.label)}=${e-t.startTime}ms`,EC=Js,OC=YE;class TC extends OC{}const Yy="Empty",Xy="Add",Zy="Remove",Qy="Update",e0="AndThen",IC={_tag:Yy},AC=(e,t)=>{const n=new Map(e.locals);let s=IC;for(const[o,u]of t.locals.entries()){const a=Pt(u)[1],f=n.get(o);if(f!==void 0){const d=Pt(f)[1];fe(d,a)||(s=qf({_tag:Qy,fiberRef:o,patch:o.diff(d,a)})(s))}else s=qf({_tag:Xy,fiberRef:o,value:a})(s);n.delete(o)}for(const[o]of n.entries())s=qf({_tag:Zy,fiberRef:o})(s);return s},qf=T(2,(e,t)=>({_tag:e0,first:e,second:t})),RC=T(3,(e,t,n)=>{let s=n,o=En(e);for(;mt(o);){const u=Pt(o),a=Jr(o);switch(u._tag){case Yy:{o=a;break}case Xy:{s=jf(s,{fiberId:t,fiberRef:u.fiberRef,value:u.value}),o=a;break}case Zy:{s=Vy(s,u.fiberRef),o=a;break}case Qy:{const f=vo(s,u.fiberRef);s=jf(s,{fiberId:t,fiberRef:u.fiberRef,value:u.fiberRef.patch(u.patch)(f)}),o=a;break}case e0:{o=xc(u.first)(xc(u.second)(a));break}}}return s}),t0="effect/MetricLabel",Jf=Symbol.for(t0);class xC{constructor(t,n){p(this,"key");p(this,"value");p(this,xv,Jf);p(this,"_hash");this.key=t,this.value=n,this._hash=Ze(t0+this.key+this.value)}[(xv=Jf,de)](){return this._hash}[le](t){return CC(t)&&this.key===t.key&&this.value===t.value}pipe(){return re(this,arguments)}}const kC=(e,t)=>new xC(e,t),CC=e=>ue(e,Jf),$C="Sequential",PC="Parallel",MC="ParallelN",n0={_tag:$C},FC={_tag:PC},NC=e=>({_tag:MC,parallelism:e}),Gf=n0,Hf=FC,Vf=NC,LC=AC,DC=RC,wu="effect/FiberStatus",ai=Symbol.for(wu),Eu="Done",r0="Running",i0="Suspended",UC=Ze(`${wu}-${Eu}`);class KC{constructor(){p(this,kv,ai);p(this,"_tag",Eu)}[(kv=ai,de)](){return UC}[le](t){return zf(t)&&t._tag===Eu}}class BC{constructor(t){p(this,"runtimeFlags");p(this,Cv,ai);p(this,"_tag",r0);this.runtimeFlags=t}[(Cv=ai,de)](){return P(X(wu),Se(X(this._tag)),Se(X(this.runtimeFlags)),qe(this))}[le](t){return zf(t)&&t._tag===r0&&this.runtimeFlags===t.runtimeFlags}}class jC{constructor(t,n){p(this,"runtimeFlags");p(this,"blockingOn");p(this,$v,ai);p(this,"_tag",i0);this.runtimeFlags=t,this.blockingOn=n}[($v=ai,de)](){return P(X(wu),Se(X(this._tag)),Se(X(this.runtimeFlags)),Se(X(this.blockingOn)),qe(this))}[le](t){return zf(t)&&t._tag===i0&&this.runtimeFlags===t.runtimeFlags&&fe(this.blockingOn,t.blockingOn)}}const WC=new KC,qC=e=>new BC(e),JC=(e,t)=>new jC(e,t),zf=e=>ue(e,ai),GC=e=>e._tag===Eu,HC=WC,s0=qC,VC=JC,zC=GC,YC=Symbol.for("effect/Micro"),Ou=Symbol.for("effect/Micro/MicroExit"),o0=Symbol.for("effect/Micro/MicroCause"),XC={_E:Xe};class c0 extends globalThis.Error{constructor(n,s,o){const u=`MicroCause.${n}`;let a,f,d;if(s instanceof globalThis.Error){a=`(${u}) ${s.name}`,f=s.message;const m=f.split(`
`).length;d=s.stack?`(${u}) ${s.stack.split(`
`).slice(0,m+3).join(`
`)}`:`${a}: ${f}`}else a=u,f=Ii(s,0),d=`${a}: ${f}`;o.length>0&&(d+=`
    ${o.join(`
    `)}`);super(f);p(this,"_tag");p(this,"traces");p(this,Pv);this._tag=n,this.traces=o,this[o0]=XC,this.name=a,this.stack=d}pipe(){return re(this,arguments)}toString(){return this.stack}[(Pv=o0,Ke)](){return this.stack}}class ZC extends c0{constructor(n,s=[]){super("Die",n,s);p(this,"defect");this.defect=n}}const QC=(e,t=[])=>new ZC(e,t);class e$ extends c0{constructor(t=[]){super("Interrupt","interrupted",t)}}const t$=(e=[])=>new e$(e),n$=e=>e._tag==="Interrupt",u0=Symbol.for("effect/Micro/MicroFiber"),r$={_A:Xe,_E:Xe};Mv=u0;class i${constructor(t,n=!0){p(this,"context");p(this,"interruptible");p(this,Mv);p(this,"_stack",[]);p(this,"_observers",[]);p(this,"_exit");p(this,"_children");p(this,"currentOpCount",0);p(this,"_interrupted",!1);p(this,"_yielded");this.context=t,this.interruptible=n,this[u0]=r$}getRef(t){return JT(this.context,t)}addObserver(t){return this._exit?(t(this._exit),bE):(this._observers.push(t),()=>{const n=this._observers.indexOf(t);n>=0&&this._observers.splice(n,1)})}unsafeInterrupt(){this._exit||(this._interrupted=!0,this.interruptible&&this.evaluate(th))}unsafePoll(){return this._exit}evaluate(t){if(this._exit)return;if(this._yielded!==void 0){const o=this._yielded;this._yielded=void 0,o()}const n=this.runLoop(t);if(n===Iu)return;const s=a0.interruptChildren&&a0.interruptChildren(this);if(s!==void 0)return this.evaluate(Ru(s,()=>n));this._exit=n;for(let o=0;o<this._observers.length;o++)this._observers[o](n);this._observers.length=0}runLoop(t){let n=!1,s=t;this.currentOpCount=0;try{for(;;){if(this.currentOpCount++,!n&&this.getRef(rh).shouldYield(this)){n=!0;const o=s;s=Ru(u$,()=>o)}if(s=s[Yf](this),s===Iu){const o=this._yielded;return Ou in o?(this._yielded=void 0,o):Iu}}}catch(o){return ue(s,Yf)?nh(o):nh(`MicroFiber.runLoop: Not a valid effect: ${String(s)}`)}}getCont(t){for(;;){const n=this._stack.pop();if(!n)return;const s=n[Tu]&&n[Tu](this);if(s)return{[t]:s};if(n[t])return n}}yieldWith(t){return this._yielded=t,Iu}children(){return this._children??(this._children=new Set)}}const a0=Ee("effect/Micro/fiberMiddleware",()=>({interruptChildren:void 0})),l0=Symbol.for("effect/Micro/identifier"),ot=Symbol.for("effect/Micro/args"),Yf=Symbol.for("effect/Micro/evaluate"),cs=Symbol.for("effect/Micro/successCont"),us=Symbol.for("effect/Micro/failureCont"),Tu=Symbol.for("effect/Micro/ensureCont"),Iu=Symbol.for("effect/Micro/Yield"),s$={_A:Xe,_E:Xe,_R:Xe},o$={...EC,_op:"Micro",[YC]:s$,pipe(){return re(this,arguments)},[Symbol.iterator](){return new Yp(new Bs(this))},toJSON(){return{_id:"Micro",op:this[l0],...ot in this?{args:this[ot]}:void 0}},toString(){return lt(this)},[Ke](){return lt(this)}};function c$(e){return nh("Micro.evaluate: Not implemented")}const Au=e=>({...o$,[l0]:e.op,[Yf]:e.eval??c$,[cs]:e.contA,[us]:e.contE,[Tu]:e.ensure}),Xf=e=>{const t=Au(e);return function(){const n=Object.create(t);return n[ot]=e.single===!1?arguments:arguments[0],n}},f0=e=>{const t={...Au(e),[Ou]:Ou,_tag:e.op,get[e.prop](){return this[ot]},toJSON(){return{_id:"MicroExit",_tag:e.op,[e.prop]:this[ot]}},[le](n){return f$(n)&&n._tag===e.op&&fe(this[ot],n[ot])},[de](){return qe(this,Se(Ze(e.op))(X(this[ot])))}};return function(n){const s=Object.create(t);return s[ot]=n,s[cs]=void 0,s[us]=void 0,s[Tu]=void 0,s}},Zf=f0({op:"Success",prop:"value",eval(e){const t=e.getCont(cs);return t?t[cs](this[ot],e):e.yieldWith(this)}}),h0=f0({op:"Failure",prop:"cause",eval(e){let t=e.getCont(us);for(;n$(this[ot])&&t&&e.interruptible;)t=e.getCont(us);return t?t[us](this[ot],e):e.yieldWith(this)}}),u$=Xf({op:"Yield",eval(e){let t=!1;return e.getRef(rh).scheduleTask(()=>{t||e.evaluate(h$)},this[ot]??0),e.yieldWith(()=>{t=!0})}})(0),a$=Zf(void 0),Qf=Xf({op:"WithMicroFiber",eval(e){return this[ot](e)}}),Ru=T(2,(e,t)=>{const n=Object.create(l$);return n[ot]=e,n[cs]=t,n}),l$=Au({op:"OnSuccess",eval(e){return e._stack.push(this),this[ot]}}),f$=e=>ue(e,Ou),d0=Zf,eh=h0,th=eh(t$()),nh=e=>eh(QC(e)),h$=d0(void 0),d$="setImmediate"in globalThis?globalThis.setImmediate:e=>setTimeout(e,0);class p0{constructor(){p(this,"tasks",[]);p(this,"running",!1);p(this,"afterScheduled",()=>{this.running=!1,this.runTasks()})}scheduleTask(t,n){this.tasks.push(t),this.running||(this.running=!0,d$(this.afterScheduled))}runTasks(){const t=this.tasks;this.tasks=[];for(let n=0,s=t.length;n<s;n++)t[n]()}shouldYield(t){return t.currentOpCount>=t.getRef(m$)}flush(){for(;this.tasks.length>0;)this.runTasks()}}const p$=T(2,(e,t)=>Qf(n=>{const s=n.context;return n.context=t(s),b$(e,()=>(n.context=s,a$))})),g$=T(2,(e,t)=>p$(e,Em(t)));class m$ extends Om()("effect/Micro/currentMaxOpsBeforeYield",{defaultValue:()=>2048}){}class rh extends Om()("effect/Micro/currentScheduler",{defaultValue:()=>new p0}){}const _$=T(2,(e,t)=>{const n=Object.create(y$);return n[ot]=e,n[cs]=t.onSuccess,n[us]=t.onFailure,n}),y$=Au({op:"OnSuccessAndFailure",eval(e){return e._stack.push(this),this[ot]}}),b$=T(2,(e,t)=>S$(n=>_$(n(e),{onFailure:s=>Ru(t(eh(s)),()=>h0(s)),onSuccess:s=>Ru(t(d0(s)),()=>Zf(s))}))),g0=Xf({op:"SetInterruptible",ensure(e){if(e.interruptible=this[ot],e._interrupted&&e.interruptible)return()=>th}}),v$=e=>Qf(t=>t.interruptible?e:(t.interruptible=!0,t._stack.push(g0(!1)),t._interrupted?th:e)),S$=e=>Qf(t=>t.interruptible?(t.interruptible=!1,t._stack.push(g0(!0)),e(v$)):e(Xe)),w$=(e,t)=>{const n=new i$(rh.context(new p0));return n.evaluate(e),n};class m0{constructor(){p(this,"buckets",[])}scheduleTask(t,n){const s=this.buckets.length;let o,u=0;for(;u<s&&this.buckets[u][0]<=n;u++)o=this.buckets[u];o&&o[0]===n?o[1].push(t):u===s?this.buckets.push([n,[t]]):this.buckets.splice(u,0,[n,[t]])}}class E${constructor(t){p(this,"maxNextTickBeforeTimer");p(this,"running",!1);p(this,"tasks",new m0);this.maxNextTickBeforeTimer=t}starveInternal(t){const n=this.tasks.buckets;this.tasks.buckets=[];for(const[s,o]of n)for(let u=0;u<o.length;u++)o[u]();this.tasks.buckets.length===0?this.running=!1:this.starve(t)}starve(t=0){t>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(t+1))}shouldYield(t){return t.currentOpCount>t.getFiberRef(uy)?t.getFiberRef(mu):!1}scheduleTask(t,n){this.tasks.scheduleTask(t,n),this.running||(this.running=!0,this.starve())}}const _0=Ee(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new E$(2048));class y0{constructor(){p(this,"tasks",new m0);p(this,"deferred",!1)}scheduleTask(t,n){this.deferred?_0.scheduleTask(t,n):this.tasks.scheduleTask(t,n)}shouldYield(t){return t.currentOpCount>t.getFiberRef(uy)?t.getFiberRef(mu):!1}flush(){for(;this.tasks.buckets.length>0;){const t=this.tasks.buckets;this.tasks.buckets=[];for(const[n,s]of t)for(let o=0;o<s.length;o++)s[o]()}this.deferred=!0}}const b0=Ee(Symbol.for("effect/FiberRef/currentScheduler"),()=>Vt(_0)),v0=Ee(Symbol.for("effect/FiberRef/currentRequestMap"),()=>Vt(new Map)),S0=(e,t,n,s)=>{switch(e){case void 0:return t();case"unbounded":return n();case"inherit":return kf(Lx,o=>o==="unbounded"?n():o>1?s(o):t());default:return e>1?s(e):t()}},ih="InterruptSignal",sh="Stateful",oh="Resume",ch="YieldNow",uh=e=>({_tag:ih,cause:e}),xu=e=>({_tag:sh,onFiber:e}),as=e=>({_tag:oh,effect:e}),O$=()=>({_tag:ch}),ku=Symbol.for("effect/FiberScope");Fv=ku;class T${constructor(){p(this,Fv,ku);p(this,"fiberId",Ji);p(this,"roots",new Set)}add(t,n){this.roots.add(n),n.addObserver(()=>{this.roots.delete(n)})}}Nv=ku;class I${constructor(t,n){p(this,"fiberId");p(this,"parent");p(this,Nv,ku);this.fiberId=t,this.parent=n}add(t,n){this.parent.tell(xu(s=>{s.addChild(n),n.addObserver(()=>{s.removeChild(n)})}))}}const A$=e=>new I$(e.id(),e),ah=Ee(Symbol.for("effect/FiberScope/Global"),()=>new T$),R$=Symbol.for("effect/Fiber"),x$={_E:e=>e,_A:e=>e},k$=Symbol.for("effect/Fiber"),w0=e=>ny(Y_(e.await),e.inheritAll);({...Gs});const li="effect/FiberCurrent",C$=Symbol.for("effect/Logger"),$$={_Message:e=>e,_Output:e=>e},lh=e=>({[C$]:$$,log:e,pipe(){return re(this,arguments)}}),P$=/^[^\s"=]*$/,M$=lh(((e,t)=>({annotations:n,cause:s,date:o,fiberId:u,logLevel:a,message:f,spans:d})=>{const m=R=>R.match(P$)?R:e(R),y=(R,W)=>`${zy(R)}=${m(W)}`,v=(R,W)=>" "+y(R,W);let O=y("timestamp",o.toISOString());O+=v("level",a.label),O+=v("fiber",i_(u));const I=_O(f);for(let R=0;R<I.length;R++)O+=v("message",Ii(I[R],t));KR(s)||(O+=v("cause",es(s,{renderErrorCause:!0})));for(const R of d)O+=" "+wC(o.getTime())(R);for(const[R,W]of n)O+=v(R,Ii(W,t));return O})(e=>`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`));typeof xn=="object"&&xn!==null&&typeof xn.stdout=="object"&&xn.stdout!==null&&xn.stdout.isTTY;const E0="effect/MetricBoundaries",fh=Symbol.for(E0);class F${constructor(t){p(this,"values");p(this,Lv,fh);p(this,"_hash");this.values=t,this._hash=P(Ze(E0),Se(js(this.values)))}[(Lv=fh,de)](){return this._hash}[le](t){return N$(t)&&fe(this.values,t.values)}pipe(){return re(this,arguments)}}const N$=e=>ue(e,fh),L$=e=>{const t=P(e,yg(Gt(Number.POSITIVE_INFINITY)),MO);return new F$(t)},D$=e=>P(mO(e.count-1,t=>e.start*Math.pow(e.factor,t)),Dc,L$),O0=Symbol.for("effect/MetricKeyType"),T0="effect/MetricKeyType/Counter",hh=Symbol.for(T0),U$=Symbol.for("effect/MetricKeyType/Frequency"),K$=Symbol.for("effect/MetricKeyType/Gauge"),I0="effect/MetricKeyType/Histogram",dh=Symbol.for(I0),B$=Symbol.for("effect/MetricKeyType/Summary"),A0={_In:e=>e,_Out:e=>e};class j${constructor(t,n){p(this,"incremental");p(this,"bigint");p(this,Uv,A0);p(this,Dv,hh);p(this,"_hash");this.incremental=t,this.bigint=n,this._hash=Ze(T0)}[(Uv=O0,Dv=hh,de)](){return this._hash}[le](t){return R0(t)}pipe(){return re(this,arguments)}}class W${constructor(t){p(this,"boundaries");p(this,Bv,A0);p(this,Kv,dh);p(this,"_hash");this.boundaries=t,this._hash=P(Ze(I0),Se(X(this.boundaries)))}[(Bv=O0,Kv=dh,de)](){return this._hash}[le](t){return x0(t)&&fe(this.boundaries,t.boundaries)}pipe(){return re(this,arguments)}}const q$=e=>new j$((e==null?void 0:e.incremental)??!1,(e==null?void 0:e.bigint)??!1),J$=e=>new W$(e),R0=e=>ue(e,hh),G$=e=>ue(e,U$),H$=e=>ue(e,K$),x0=e=>ue(e,dh),V$=e=>ue(e,B$),k0=Symbol.for("effect/MetricKey"),z$={_Type:e=>e},Y$=Rl(fe);class ph{constructor(t,n,s,o=[]){p(this,"name");p(this,"keyType");p(this,"description");p(this,"tags");p(this,jv,z$);p(this,"_hash");this.name=t,this.keyType=n,this.description=s,this.tags=o,this._hash=P(Ze(this.name+this.description),Se(X(this.keyType)),Se(js(this.tags)))}[(jv=k0,de)](){return this._hash}[le](t){return X$(t)&&this.name===t.name&&fe(this.keyType,t.keyType)&&fe(this.description,t.description)&&Y$(this.tags,t.tags)}pipe(){return re(this,arguments)}}const X$=e=>ue(e,k0),Z$=(e,t)=>new ph(e,q$(t),Ic(t==null?void 0:t.description)),Q$=(e,t,n)=>new ph(e,J$(t),Ic(n)),eP=T(2,(e,t)=>t.length===0?e:new ph(e.name,e.keyType,e.description,Cc(e.tags,t))),So=Symbol.for("effect/MetricState"),C0="effect/MetricState/Counter",gh=Symbol.for(C0),$0="effect/MetricState/Frequency",mh=Symbol.for($0),P0="effect/MetricState/Gauge",_h=Symbol.for(P0),M0="effect/MetricState/Histogram",yh=Symbol.for(M0),F0="effect/MetricState/Summary",bh=Symbol.for(F0),wo={_A:e=>e};class tP{constructor(t){p(this,"count");p(this,qv,wo);p(this,Wv,gh);this.count=t}[(qv=So,Wv=gh,de)](){return P(X(C0),Se(X(this.count)),qe(this))}[le](t){return hP(t)&&this.count===t.count}pipe(){return re(this,arguments)}}const nP=Rl(fe);class rP{constructor(t){p(this,"occurrences");p(this,Gv,wo);p(this,Jv,mh);p(this,"_hash");this.occurrences=t}[(Gv=So,Jv=mh,de)](){return P(Ze($0),Se(js(Qe(this.occurrences.entries()))),qe(this))}[le](t){return dP(t)&&nP(Qe(this.occurrences.entries()),Qe(t.occurrences.entries()))}pipe(){return re(this,arguments)}}class iP{constructor(t){p(this,"value");p(this,Vv,wo);p(this,Hv,_h);this.value=t}[(Vv=So,Hv=_h,de)](){return P(X(P0),Se(X(this.value)),qe(this))}[le](t){return pP(t)&&this.value===t.value}pipe(){return re(this,arguments)}}class sP{constructor(t,n,s,o,u){p(this,"buckets");p(this,"count");p(this,"min");p(this,"max");p(this,"sum");p(this,Yv,wo);p(this,zv,yh);this.buckets=t,this.count=n,this.min=s,this.max=o,this.sum=u}[(Yv=So,zv=yh,de)](){return P(X(M0),Se(X(this.buckets)),Se(X(this.count)),Se(X(this.min)),Se(X(this.max)),Se(X(this.sum)),qe(this))}[le](t){return gP(t)&&fe(this.buckets,t.buckets)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return re(this,arguments)}}class oP{constructor(t,n,s,o,u,a){p(this,"error");p(this,"quantiles");p(this,"count");p(this,"min");p(this,"max");p(this,"sum");p(this,Zv,wo);p(this,Xv,bh);this.error=t,this.quantiles=n,this.count=s,this.min=o,this.max=u,this.sum=a}[(Zv=So,Xv=bh,de)](){return P(X(F0),Se(X(this.error)),Se(X(this.quantiles)),Se(X(this.count)),Se(X(this.min)),Se(X(this.max)),Se(X(this.sum)),qe(this))}[le](t){return mP(t)&&this.error===t.error&&fe(this.quantiles,t.quantiles)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return re(this,arguments)}}const cP=e=>new tP(e),uP=e=>new rP(e),aP=e=>new iP(e),lP=e=>new sP(e.buckets,e.count,e.min,e.max,e.sum),fP=e=>new oP(e.error,e.quantiles,e.count,e.min,e.max,e.sum),hP=e=>ue(e,gh),dP=e=>ue(e,mh),pP=e=>ue(e,_h),gP=e=>ue(e,yh),mP=e=>ue(e,bh),_P=Symbol.for("effect/MetricHook"),yP={_In:e=>e,_Out:e=>e},Eo=e=>({[_P]:yP,pipe(){return re(this,arguments)},...e}),N0=BigInt(0),bP=e=>{let t=e.keyType.bigint?N0:0;const n=e.keyType.incremental?e.keyType.bigint?o=>o>=N0:o=>o>=0:o=>!0,s=o=>{n(o)&&(t=t+o)};return Eo({get:()=>cP(t),update:s,modify:s})},vP=e=>{const t=new Map;for(const s of e.keyType.preregisteredWords)t.set(s,0);const n=s=>{const o=t.get(s)??0;t.set(s,o+1)};return Eo({get:()=>uP(t),update:n,modify:n})},SP=(e,t)=>{let n=t;return Eo({get:()=>aP(n),update:s=>{n=s},modify:s=>{n=n+s}})},wP=e=>{const t=e.keyType.boundaries.values,n=t.length,s=new Uint32Array(n+1),o=new Float32Array(n);let u=0,a=0,f=Number.MAX_VALUE,d=Number.MIN_VALUE;P(t,Vs($i),xi((v,O)=>{o[O]=v}));const m=v=>{let O=0,I=n;for(;O!==I;){const R=Math.floor(O+(I-O)/2),W=o[R];v<=W?I=R:O=R,I===O+1&&(v<=o[O]?I=O:O=I)}s[O]=s[O]+1,u=u+1,a=a+v,v<f&&(f=v),v>d&&(d=v)},y=()=>{const v=Rc(n);let O=0;for(let I=0;I<n;I++){const R=o[I],W=s[I];O=O+W,v[I]=[R,O]}return v};return Eo({get:()=>lP({buckets:y(),count:u,min:f,max:d,sum:a}),update:m,modify:m})},EP=e=>{const{error:t,maxAge:n,maxSize:s,quantiles:o}=e.keyType,u=P(o,Vs($i)),a=Rc(s);let f=0,d=0,m=0,y=Number.MAX_VALUE,v=Number.MIN_VALUE;const O=R=>{const W=[];let L=0;for(;L!==s-1;){const K=a[L];if(K!=null){const[Y,j]=K,H=Jl(R-Y);_I(H,Nm)&&H<=n&&W.push(j)}L=L+1}return OP(t,u,Vs(W,$i))},I=(R,W)=>{if(s>0){f=f+1;const L=f%s;a[L]=[W,R]}d=d+1,m=m+R,R<y&&(y=R),R>v&&(v=R)};return Eo({get:()=>fP({error:t,quantiles:O(Date.now()),count:d,min:y,max:v,sum:m}),update:([R,W])=>I(R,W),modify:([R,W])=>I(R,W)})},OP=(e,t,n)=>{const s=n.length;if(!mt(t))return Ri();const o=t[0],u=t.slice(1),a=L0(e,s,te(),0,o,n),f=En(a);return u.forEach(d=>{f.push(L0(e,s,a.value,a.consumed,d,a.rest))}),xi(f,d=>[d.quantile,d.value])},L0=(e,t,n,s,o,u)=>{let a=e,f=t,d=n,m=s,y=o,v=u,O=e,I=t,R=n,W=s,L=o,K=u;for(;;){if(!mt(v))return{quantile:y,value:te(),consumed:m,rest:[]};if(y===1)return{quantile:y,value:be(Sg(v)),consumed:m+v.length,rest:[]};const Y=IO(v,k=>k<=v[0]),j=y*f,H=a/2*j,z=m+Y[0].length,G=Math.abs(z-j);if(z<j-H){O=a,I=f,R=Hs(v),W=z,L=y,K=Y[1],a=O,f=I,d=R,m=W,y=L,v=K;continue}if(z>j+H)return{quantile:y,value:d,consumed:m,rest:v};switch(d._tag){case"None":{O=a,I=f,R=Hs(v),W=z,L=y,K=Y[1],a=O,f=I,d=R,m=W,y=L,v=K;continue}case"Some":{const k=Math.abs(j-d.value);if(G<k){O=a,I=f,R=Hs(v),W=z,L=y,K=Y[1],a=O,f=I,d=R,m=W,y=L,v=K;continue}return{quantile:y,value:be(d.value),consumed:m,rest:v}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},TP=Symbol.for("effect/MetricPair"),IP={_Type:e=>e},AP=(e,t)=>({[TP]:IP,metricKey:e,metricState:t,pipe(){return re(this,arguments)}}),D0=Symbol.for("effect/MetricRegistry");Qv=D0;class RP{constructor(){p(this,Qv,D0);p(this,"map",ok())}snapshot(){const t=[];for(const[n,s]of this.map)t.push(AP(n,s.get()));return t}get(t){const n=P(this.map,si(t),Kn);if(n==null){if(R0(t.keyType))return this.getCounter(t);if(H$(t.keyType))return this.getGauge(t);if(G$(t.keyType))return this.getFrequency(t);if(x0(t.keyType))return this.getHistogram(t);if(V$(t.keyType))return this.getSummary(t);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}else return n}getCounter(t){let n=P(this.map,si(t),Kn);if(n==null){const s=bP(t);P(this.map,yo(t))||P(this.map,bo(t,s)),n=s}return n}getFrequency(t){let n=P(this.map,si(t),Kn);if(n==null){const s=vP(t);P(this.map,yo(t))||P(this.map,bo(t,s)),n=s}return n}getGauge(t){let n=P(this.map,si(t),Kn);if(n==null){const s=SP(t,t.keyType.bigint?BigInt(0):0);P(this.map,yo(t))||P(this.map,bo(t,s)),n=s}return n}getHistogram(t){let n=P(this.map,si(t),Kn);if(n==null){const s=wP(t);P(this.map,yo(t))||P(this.map,bo(t,s)),n=s}return n}getSummary(t){let n=P(this.map,si(t),Kn);if(n==null){const s=EP(t);P(this.map,yo(t))||P(this.map,bo(t,s)),n=s}return n}}const xP=()=>new RP,kP=Symbol.for("effect/Metric"),CP={_Type:e=>e,_In:e=>e,_Out:e=>e},U0=Ee(Symbol.for("effect/Metric/globalMetricRegistry"),()=>xP()),K0=function(e,t,n,s){const o=Object.assign(u=>_x(u,a=>FP(o,a)),{[kP]:CP,keyType:e,unsafeUpdate:t,unsafeValue:n,unsafeModify:s,register(){return this.unsafeValue([]),this},pipe(){return re(this,arguments)}});return o},Cu=(e,t)=>B0(Z$(e,t)),B0=e=>{let t;const n=new WeakMap,s=o=>{if(o.length===0)return t!==void 0||(t=U0.get(e)),t;let u=n.get(o);return u!==void 0||(u=U0.get(eP(e,o)),n.set(o,u)),u};return K0(e.keyType,(o,u)=>s(u).update(o),o=>s(o).get(),(o,u)=>s(u).modify(o))},$P=(e,t,n)=>B0(Q$(e,t,n)),PP=T(3,(e,t,n)=>MP(e,[kC(t,n)])),MP=T(2,(e,t)=>K0(e.keyType,(n,s)=>e.unsafeUpdate(n,Cc(t,s)),n=>e.unsafeValue(Cc(t,n)),(n,s)=>e.unsafeModify(n,Cc(t,s)))),FP=T(2,(e,t)=>kf(Cf,n=>ce(()=>e.unsafeUpdate(t,n))));({...Ol});const NP=T(2,(e,t)=>kf(v0,n=>ce(()=>{if(n.has(e)){const s=n.get(e);s.state.completed||(s.state.completed=!0,yy(s.result,t))}}))),$u=Symbol.for("effect/Supervisor"),vh={_T:e=>e};eS=$u;const ed=class ed{constructor(t,n){p(this,"underlying");p(this,"value0");p(this,eS,vh);this.underlying=t,this.value0=n}get value(){return this.value0}onStart(t,n,s,o){this.underlying.onStart(t,n,s,o)}onEnd(t,n){this.underlying.onEnd(t,n)}onEffect(t,n){this.underlying.onEffect(t,n)}onSuspend(t){this.underlying.onSuspend(t)}onResume(t){this.underlying.onResume(t)}map(t){return new ed(this,P(this.value,Nt(t)))}zip(t){return new Mu(this,t)}};let Pu=ed;tS=$u;const td=class td{constructor(t,n){p(this,"left");p(this,"right");p(this,"_tag","Zip");p(this,tS,vh);this.left=t,this.right=n}get value(){return ty(this.left.value,this.right.value)}onStart(t,n,s,o){this.left.onStart(t,n,s,o),this.right.onStart(t,n,s,o)}onEnd(t,n){this.left.onEnd(t,n),this.right.onEnd(t,n)}onEffect(t,n){this.left.onEffect(t,n),this.right.onEffect(t,n)}onSuspend(t){this.left.onSuspend(t),this.right.onSuspend(t)}onResume(t){this.left.onResume(t),this.right.onResume(t)}map(t){return new Pu(this,P(this.value,Nt(t)))}zip(t){return new td(this,t)}};let Mu=td;const j0=e=>ue(e,$u)&&Vp(e,"Zip");nS=$u;class LP{constructor(t){p(this,"effect");p(this,nS,vh);this.effect=t}get value(){return this.effect}onStart(t,n,s,o){}onEnd(t,n){}onEffect(t,n){}onSuspend(t){}onResume(t){}map(t){return new Pu(this,P(this.value,Nt(t)))}zip(t){return new Mu(this,t)}onRun(t,n){return t()}}const DP=e=>new LP(e),Fu=Ee("effect/Supervisor/none",()=>DP(Rn)),UP=Hi,W0="Empty",q0="AddSupervisor",J0="RemoveSupervisor",G0="AndThen",Oo={_tag:W0},Nu=(e,t)=>({_tag:G0,first:e,second:t}),KP=(e,t)=>BP(t,Gt(e)),BP=(e,t)=>{let n=e,s=t;for(;Ui(s);){const o=Ki(s);switch(o._tag){case W0:{s=Xr(s);break}case q0:{n=n.zip(o.supervisor),s=Xr(s);break}case J0:{n=Sh(n,o.supervisor),s=Xr(s);break}case G0:{s=On(o.first)(On(o.second)(Xr(s)));break}}}return n},Sh=(e,t)=>fe(e,t)?Fu:j0(e)?Sh(e.left,t).zip(Sh(e.right,t)):e,Lu=e=>fe(e,Fu)?ei():j0(e)?P(Lu(e.left),no(Lu(e.right))):sf(e),jP=UP({empty:Oo,patch:KP,combine:Nu,diff:(e,t)=>{if(fe(e,t))return Oo;const n=Lu(e),s=Lu(t),o=P(s,Zm(n),Hc(Oo,(a,f)=>Nu(a,{_tag:q0,supervisor:f}))),u=P(n,Zm(s),Hc(Oo,(a,f)=>Nu(a,{_tag:J0,supervisor:f})));return Nu(o,u)}}),WP=Cu("effect_fiber_started",{incremental:!0}),H0=Cu("effect_fiber_active"),qP=Cu("effect_fiber_successes",{incremental:!0}),JP=Cu("effect_fiber_failures",{incremental:!0}),GP=PP($P("effect_fiber_lifetimes",D$({start:.5,factor:2,count:35})),"time_unit","milliseconds"),To="Continue",HP="Done",V0="Yield",VP={_E:e=>e,_A:e=>e},Du=e=>{throw new Error(`BUG: FiberRuntime - ${Ii(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},ur=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),ar=Ee("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),Io={[Sc]:(e,t,n)=>At(()=>t.effect_instruction_i1(n)),OnStep:(e,t,n)=>et(et(n)),[wc]:(e,t,n)=>At(()=>t.effect_instruction_i2(n)),[El]:(e,t,n)=>(e.patchRuntimeFlags(e.currentRuntimeFlags,t.patch),Rr(e.currentRuntimeFlags)&&e.isInterrupted()?Ne(e.getInterruptedCause()):et(n)),[Ec]:(e,t,n)=>(At(()=>t.effect_instruction_i2(n)),At(()=>t.effect_instruction_i0())?(e.pushStack(t),At(()=>t.effect_instruction_i1())):Rn),[Oc]:(e,t,n)=>{const s=At(()=>t.effect_instruction_i0.next(n));return s.done?et(s.value):(e.pushStack(t),LE(s.value))}},zP={[ih]:(e,t,n,s)=>(e.processNewInterruptSignal(s.cause),Rr(t)?Ne(s.cause):n),[oh]:(e,t,n,s)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[sh]:(e,t,n,s)=>(s.onFiber(e,s0(t)),n),[ch]:(e,t,n,s)=>se(Rf(),()=>n)},YP=e=>fu(ER(e),t=>fi(LR(t),([n,s])=>{const o=new Map,u=[];for(const f of s){u.push(Yr(f));for(const d of f)o.set(d.request,d)}const a=u.flat();return gu(lM(n.runAll(u),a,()=>a.forEach(f=>{f.listeners.interrupted=!0})),v0,o)},!1,!1)),XP=dc();class z0 extends TC{constructor(n,s,o){super();p(this,iS,x$);p(this,rS,VP);p(this,"_fiberRefs");p(this,"_fiberId");p(this,"_queue",new Array);p(this,"_children",null);p(this,"_observers",new Array);p(this,"_running",!1);p(this,"_stack",[]);p(this,"_asyncInterruptor",null);p(this,"_asyncBlockingOn",null);p(this,"_exitValue",null);p(this,"_steps",[]);p(this,"_isYielding",!1);p(this,"currentRuntimeFlags");p(this,"currentOpCount",0);p(this,"currentSupervisor");p(this,"currentScheduler");p(this,"currentTracer");p(this,"currentSpan");p(this,"currentContext");p(this,"currentDefaultServices");p(this,"run",()=>{this.drainQueueOnCurrentThread()});if(this.currentRuntimeFlags=o,this._fiberId=n,this._fiberRefs=s,E_(o)){const u=this.getFiberRef(Cf);WP.unsafeUpdate(1,u),H0.unsafeUpdate(1,u)}this.refreshRefCache()}commit(){return w0(this)}id(){return this._fiberId}resume(n){this.tell(as(n))}get status(){return this.ask((n,s)=>s)}get runtimeFlags(){return this.ask((n,s)=>zC(s)?n.currentRuntimeFlags:s.runtimeFlags)}scope(){return A$(this)}get children(){return this.ask(n=>Array.from(n.getChildren()))}getChildren(){return this._children===null&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(_u)}fiberRefs(){return this.ask(n=>n.getFiberRefs())}ask(n){return st(()=>{const s=Xx(this._fiberId);return this.tell(xu((o,u)=>{yy(s,ce(()=>n(o,u)))})),_y(s)})}tell(n){this._queue.push(n),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return go(n=>{const s=o=>n(Be(o));return this.tell(xu((o,u)=>{o._exitValue!==null?s(this._exitValue):o.addObserver(s)})),ce(()=>this.tell(xu((o,u)=>{o.removeObserver(s)})))},this.id())}get inheritAll(){return Ht((n,s)=>{const o=n.id(),u=n.getFiberRefs(),a=s.runtimeFlags,f=this.getFiberRefs(),d=sC(u,o,f);n.setFiberRefs(d);const m=n.getFiberRef(nb),y=P(tu(a,m),I_(Vi),I_(_f));return bx(y)})}get poll(){return ce(()=>Ic(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(n){return ce(()=>this.tell(uh(xr(n))))}unsafeInterruptAsFork(n){this.tell(uh(xr(n)))}addObserver(n){this._exitValue!==null?n(this._exitValue):this._observers.push(n)}removeObserver(n){this._observers=this._observers.filter(s=>s!==n)}getFiberRefs(){return this.setFiberRef(nb,this.currentRuntimeFlags),this._fiberRefs}unsafeDeleteFiberRef(n){this._fiberRefs=Vy(this._fiberRefs,n)}getFiberRef(n){return this._fiberRefs.locals.has(n)?this._fiberRefs.locals.get(n)[0][1]:n.initial}setFiberRef(n,s){this._fiberRefs=jf(this._fiberRefs,{fiberId:this._fiberId,fiberRef:n,value:s}),this.refreshRefCache()}refreshRefCache(){this.currentDefaultServices=this.getFiberRef(Su),this.currentTracer=this.currentDefaultServices.unsafeMap.get(Wy.key),this.currentSupervisor=this.getFiberRef(aM),this.currentScheduler=this.getFiberRef(b0),this.currentContext=this.getFiberRef(mo),this.currentSpan=this.currentContext.unsafeMap.get(qy.key)}setFiberRefs(n){this._fiberRefs=n,this.refreshRefCache()}addChild(n){this.getChildren().add(n)}removeChild(n){this.getChildren().delete(n)}transferChildren(n){const s=this._children;if(this._children=null,s!==null&&s.size>0)for(const o of s)o._exitValue===null&&n.add(this.currentRuntimeFlags,o)}drainQueueOnCurrentThread(){let n=!0;for(;n;){let s=To;const o=globalThis[li];globalThis[li]=this;try{for(;s===To;)s=this._queue.length===0?HP:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[li]=o}this._queue.length>0&&!this._running?(this._running=!0,s===V0?(this.drainQueueLaterOnExecutor(),n=!1):n=!0):n=!1}}drainQueueLaterOnExecutor(){this.currentScheduler.scheduleTask(this.run,this.getFiberRef(mu))}drainQueueWhileRunning(n,s){let o=s;for(;this._queue.length>0;){const u=this._queue.splice(0,1)[0];o=zP[u._tag](this,n,o,u)}return o}isInterrupted(){return!jR(this.getFiberRef(_u))}addInterruptedCause(n){const s=this.getFiberRef(_u);this.setFiberRef(_u,on(s,n))}processNewInterruptSignal(n){this.addInterruptedCause(n),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(this._children===null||this._children.size===0)return!1;let n=!1;for(const s of this._children)s.tell(uh(xr(this.id()))),n=!0;return n}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){const n=this._children.values();this._children=null;let s=!1;return Af({while:()=>!s,body:()=>{const u=n.next();return u.done?ce(()=>{s=!0}):po(u.value.await)},step:()=>{}})}return null}reportExitValue(n){if(E_(this.currentRuntimeFlags)){const s=this.getFiberRef(Cf),o=this.id().startTimeMillis,u=Date.now();switch(GP.unsafeUpdate(u-o,s),H0.unsafeUpdate(-1,s),n._tag){case wn:{qP.unsafeUpdate(1,s);break}case Sn:{JP.unsafeUpdate(1,s);break}}}if(n._tag==="Failure"){const s=this.getFiberRef(Ux);!vf(n.cause)&&s._tag==="Some"&&this.log("Fiber terminated with an unhandled error",n.cause,s)}}setExitValue(n){this._exitValue=n,this.reportExitValue(n);for(let s=this._observers.length-1;s>=0;s--)this._observers[s](n);this._observers=[]}getLoggers(){return this.getFiberRef(nM)}log(n,s,o){const u=vt(o)?o.value:this.getFiberRef(Mx),a=this.getFiberRef(ZP);if(vC(a,u))return;const f=this.getFiberRef(Fx),d=this.getFiberRef(Px),m=this.getLoggers(),y=this.getFiberRefs();if(Ym(m)>0){const v=Sm(this.getFiberRef(Su),Kf),O=new Date(v.unsafeCurrentTimeMillis());KE(y,()=>{for(const I of m)I.log({fiberId:this.id(),logLevel:u,message:n,cause:s,context:y,spans:f,annotations:d,date:O})})}}evaluateMessageWhileSuspended(n){switch(n._tag){case ch:return V0;case ih:return this.processNewInterruptSignal(n.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(Ne(n.cause)),this._asyncInterruptor=null),To;case oh:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(n.effect),To;case sh:return n.onFiber(this,this._exitValue!==null?HC:VC(this.currentRuntimeFlags,this._asyncBlockingOn)),To;default:return Du(n)}}evaluateEffect(n){this.currentSupervisor.onResume(this);try{let s=Rr(this.currentRuntimeFlags)&&this.isInterrupted()?Ne(this.getInterruptedCause()):n;for(;s!==null;){const o=s,u=this.runLoop(o);if(u===ur){const a=ar.currentOp;ar.currentOp=null,a._op===Tc?yR(this.currentRuntimeFlags)?(this.tell(O$()),this.tell(as(ii)),s=null):s=ii:a._op===Ws&&(s=null)}else{this.currentRuntimeFlags=P(this.currentRuntimeFlags,bR(_f));const a=this.interruptAllChildren();a!==null?s=se(a,()=>u):(this._queue.length===0?this.setExitValue(u):this.tell(as(u)),s=null)}}}finally{this.currentSupervisor.onSuspend(this)}}start(n){if(this._running)this.tell(as(n));else{this._running=!0;const s=globalThis[li];globalThis[li]=this;try{this.evaluateEffect(n)}finally{this._running=!1,globalThis[li]=s,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(n){this.tell(as(n))}patchRuntimeFlags(n,s){const o=nu(n,s);return globalThis[li]=this,this.currentRuntimeFlags=o,o}initiateAsync(n,s){let o=!1;const u=a=>{o||(o=!0,this.tell(as(a)))};Rr(n)&&(this._asyncInterruptor=u);try{s(u)}catch(a){u(An(Gn(a)))}}pushStack(n){this._stack.push(n),n._op==="OnStep"&&this._steps.push({refs:this.getFiberRefs(),flags:this.currentRuntimeFlags})}popStack(){const n=this._stack.pop();if(n)return n._op==="OnStep"&&this._steps.pop(),n}getNextSuccessCont(){let n=this.popStack();for(;n;){if(n._op!==wl)return n;n=this.popStack()}}getNextFailCont(){let n=this.popStack();for(;n;){if(n._op!==Sc&&n._op!==Ec&&n._op!==Oc)return n;n=this.popStack()}}[(iS=R$,rS=k$,jE)](n){return ce(()=>wm(this.currentContext,n))}Left(n){return Ft(n.left)}None(n){return Ft(new hy)}Right(n){return et(n.right)}Some(n){return et(n.value)}Micro(n){return au(s=>{let o=s;const u=w$(g$(n,this.currentContext));return u.addObserver(a=>{if(a._tag==="Success")return o(et(a.value));switch(a.cause._tag){case"Interrupt":return o(Ne(xr(Ji)));case"Fail":return o(Ft(a.cause.error));case"Die":return o(J_(a.cause.defect))}}),au(a=>{o=f=>{a(Rn)},u.unsafeInterrupt()})})}[tg](n){const s=At(()=>n.effect_instruction_i0()),o=this.getNextSuccessCont();return o!==void 0?(o._op in Io||Du(o),Io[o._op](this,o,s)):(ar.currentOp=et(s),ur)}[wn](n){const s=n,o=this.getNextSuccessCont();return o!==void 0?(o._op in Io||Du(o),Io[o._op](this,o,s.effect_instruction_i0)):(ar.currentOp=s,ur)}[Sn](n){const s=n.effect_instruction_i0,o=this.getNextFailCont();if(o!==void 0)switch(o._op){case wl:case wc:return Rr(this.currentRuntimeFlags)&&this.isInterrupted()?Ne($_(s)):At(()=>o.effect_instruction_i1(s));case"OnStep":return Rr(this.currentRuntimeFlags)&&this.isInterrupted()?Ne($_(s)):et(Ne(s));case El:return this.patchRuntimeFlags(this.currentRuntimeFlags,o.patch),Rr(this.currentRuntimeFlags)&&this.isInterrupted()?Ne(on(s,this.getInterruptedCause())):Ne(s);default:Du(o)}else return ar.currentOp=Ne(s),ur}[ng](n){return At(()=>n.effect_instruction_i0(this,s0(this.currentRuntimeFlags)))}Blocked(n){const s=this.getFiberRefs(),o=this.currentRuntimeFlags;if(this._steps.length>0){const u=[],a=this._steps[this._steps.length-1];let f=this.popStack();for(;f&&f._op!=="OnStep";)u.push(f),f=this.popStack();this.setFiberRefs(a.refs),this.currentRuntimeFlags=a.flags;const d=LC(a.refs,s),m=tu(a.flags,o);return et(K_(n.effect_instruction_i0,Ht(y=>{for(;u.length>0;)y.pushStack(u.pop());return y.setFiberRefs(DC(y.id(),y.getFiberRefs())(d)),y.currentRuntimeFlags=nu(m)(y.currentRuntimeFlags),n.effect_instruction_i1})))}return du(u=>se(X0(ax(n.effect_instruction_i0)),()=>u(n.effect_instruction_i1)))}RunBlocked(n){return YP(n.effect_instruction_i0)}[qs](n){const s=n.effect_instruction_i0,o=this.currentRuntimeFlags,u=nu(o,s);if(Rr(u)&&this.isInterrupted())return Ne(this.getInterruptedCause());if(this.patchRuntimeFlags(this.currentRuntimeFlags,s),n.effect_instruction_i1){const a=tu(u,o);return this.pushStack(new lx(a,n)),At(()=>n.effect_instruction_i1(o))}else return ii}[Sc](n){return this.pushStack(n),n.effect_instruction_i0}OnStep(n){return this.pushStack(n),n.effect_instruction_i0}[wl](n){return this.pushStack(n),n.effect_instruction_i0}[wc](n){return this.pushStack(n),n.effect_instruction_i0}[Ws](n){return this._asyncBlockingOn=n.effect_instruction_i1,this.initiateAsync(this.currentRuntimeFlags,n.effect_instruction_i0),ar.currentOp=n,ur}[Tc](n){return this._isYielding=!1,ar.currentOp=n,ur}[Ec](n){const s=n.effect_instruction_i0,o=n.effect_instruction_i1;return s()?(this.pushStack(n),o()):ii}[Oc](n){return Io[Oc](this,n,void 0)}[vc](n){return At(()=>n.commit())}runLoop(n){let s=n;for(this.currentOpCount=0;;){if(this.currentRuntimeFlags&_R&&this.currentSupervisor.onEffect(this,s),this._queue.length>0&&(s=this.drainQueueWhileRunning(this.currentRuntimeFlags,s)),!this._isYielding){this.currentOpCount+=1;const o=this.currentScheduler.shouldYield(this);if(o!==!1){this._isYielding=!0,this.currentOpCount=0;const u=s;s=se(Rf({priority:o}),()=>u)}}try{if(s=this.currentTracer.context(()=>XP!==s[ns]._V?G_(`Cannot execute an Effect versioned ${s[ns]._V} with a Runtime of version ${dc()}`):this[s._op](s),this),s===ur){const o=ar.currentOp;return o._op===Tc||o._op===Ws?ur:(ar.currentOp=null,o._op===wn||o._op===Sn?o:Ne(Gn(o)))}}catch(o){s!==ur&&!ue(s,"_op")||!(s._op in this)?s=G_(`Not a valid effect: ${Ii(s)}`):qx(o)?s=Ne(on(Gn(o),xr(Ji))):s=J_(o)}}}}const ZP=Ee("effect/FiberRef/currentMinimumLogLevel",()=>Vt(SC("Info"))),QP=e=>lh(t=>{const n=aC(t.context,Su);Sm(n,Ky).unsafe.log(e.log(t))}),eM=Ee(Symbol.for("effect/Logger/defaultLogger"),()=>QP(M$)),tM=Ee(Symbol.for("effect/Logger/tracerLogger"),()=>lh(({annotations:e,cause:t,context:n,fiberId:s,logLevel:o,message:u})=>{const a=Zs(vo(n,mo),qy);if(a._tag==="None"||a.value._tag==="ExternalSpan")return;const f=wm(vo(n,Su),Kf),d={};for(const[m,y]of e)d[m]=y;d["effect.fiberId"]=aA(s),d["effect.logLevel"]=o.label,t!==null&&t._tag!=="Empty"&&(d["effect.cause"]=es(t,{renderErrorCause:!0})),a.value.event(Ii(Array.isArray(u)?u[0]:u),f.unsafeCurrentTimeNanos(),d)})),nM=Ee(Symbol.for("effect/FiberRef/currentLoggers"),()=>kx(sf(eM,tM))),rM=T(e=>zp(e[0]),(e,t,n)=>Ht(s=>{const o=(n==null?void 0:n.batching)===!0||(n==null?void 0:n.batching)==="inherit"&&s.getFiberRef(Dx);return n!=null&&n.discard?S0(n.concurrency,()=>ls(Gf,n==null?void 0:n.concurrentFinalizers)(u=>o?fi(e,(a,f)=>u(t(a,f)),!0,!1,1):fu(e,(a,f)=>u(t(a,f)))),()=>ls(Hf,n==null?void 0:n.concurrentFinalizers)(u=>fi(e,(a,f)=>u(t(a,f)),o,!1)),u=>ls(Vf(u),n==null?void 0:n.concurrentFinalizers)(a=>fi(e,(f,d)=>a(t(f,d)),o,!1,u))):S0(n==null?void 0:n.concurrency,()=>ls(Gf,n==null?void 0:n.concurrentFinalizers)(u=>o?Y0(e,1,(a,f)=>u(t(a,f)),!0):kr(e,(a,f)=>u(t(a,f)))),()=>ls(Hf,n==null?void 0:n.concurrentFinalizers)(u=>iM(e,(a,f)=>u(t(a,f)),o)),u=>ls(Vf(u),n==null?void 0:n.concurrentFinalizers)(a=>Y0(e,u,(f,d)=>a(t(f,d)),o)))})),iM=(e,t,n)=>st(()=>{const s=Qe(e),o=new Array(s.length);return pu(fi(s,(a,f)=>se(t(a,f),d=>ce(()=>o[f]=d)),n,!1),Be(o))}),fi=(e,t,n,s,o)=>du(u=>yx(a=>Ht(f=>{let d=Array.from(e).reverse(),m=d.length;if(m===0)return Rn;let y=0,v=!1;const O=o?Math.min(d.length,o):d.length,I=new Set,R=new Array,W=()=>I.forEach(F=>{F.currentScheduler.scheduleTask(()=>{F.unsafeInterruptAsFork(f.id())},0)}),L=new Array,K=new Array,Y=new Array,j=()=>{const F=R.filter(({exit:D})=>D._tag==="Failure").sort((D,U)=>D.index<U.index?-1:D.index===U.index?0:1).map(({exit:D})=>D);return F.length===0&&F.push(ii),F},H=(F,D=!1)=>{const U=ey(a(F)),N=oM(U,f,f.currentRuntimeFlags,ah);return f.currentScheduler.scheduleTask(()=>{D&&N.unsafeInterruptAsFork(f.id()),N.resume(U)},0),N},z=()=>{s||(m-=d.length,d=[]),v=!0,W()},G=n?gx:H_,k=H(go(F=>{const D=(N,q)=>{N._op==="Blocked"?Y.push(N):(R.push({index:q,exit:N}),N._op==="Failure"&&!v&&z())},U=()=>{if(d.length>0){const N=d.pop();let q=y++;const Te=()=>{const ne=d.pop();return q=y++,se(Rf(),()=>se(G(u(t(ne,q))),Ie))},Ie=ne=>d.length>0&&(D(ne,q),d.length>0)?Te():Be(ne),ct=se(G(u(t(N,q))),Ie),je=H(ct);L.push(je),I.add(je),v&&je.currentScheduler.scheduleTask(()=>{je.unsafeInterruptAsFork(f.id())},0),je.addObserver(ne=>{let Ve;if(ne._op==="Failure"?Ve=ne:Ve=ne.effect_instruction_i0,K.push(je),I.delete(je),D(Ve,q),R.length===m)F(Be(ft(py(j(),{parallel:!0}),()=>ii)));else if(Y.length+R.length===m){const Cn=j(),dr=Y.map(Ot=>Ot.effect_instruction_i0).reduce(A_);F(Be(K_(dr,fi([ft(py(Cn,{parallel:!0}),()=>ii),...Y.map(Ot=>Ot.effect_instruction_i1)],Ot=>Ot,n,!0,o))))}else U()})}};for(let N=0;N<O;N++)U()}));return po(If(Y_(u(w0(k))),my({onFailure:F=>{z();const D=Y.length+1,U=Math.min(typeof o=="number"?o:Y.length,Y.length),N=Array.from(Y);return go(q=>{let Te=0,Ie=0;const ct=(ne,Ve)=>Cn=>{Te++,Te===D&&q(et(Ne(F))),N.length>0&&Ve&&je()},je=()=>{H(N.pop(),!0).addObserver(ct(Ie,!0)),Ie++};k.addObserver(ct(Ie,!1)),Ie++;for(let ne=0;ne<U;ne++)je()})},onSuccess:()=>kr(K,F=>F.inheritAll)})))}))),Y0=(e,t,n,s)=>st(()=>{const o=Qe(e),u=new Array(o.length);return pu(fi(o,(f,d)=>Nt(n(f,d),m=>u[d]=m),s,!1,t),Be(u))}),X0=e=>cM(e,ah),sM=(e,t,n,s=null)=>{const o=Z0(e,t,n,s);return o.resume(e),o},oM=(e,t,n,s=null)=>Z0(e,t,n,s),Z0=(e,t,n,s=null)=>{const o=s_(),u=t.getFiberRefs(),a=oC(u,o),f=new z0(o,a,n),d=vo(a,mo),m=f.currentSupervisor;return m.onStart(d,e,be(t),f),f.addObserver(v=>m.onEnd(v,f)),(s!==null?s:P(t.getFiberRef($f),ft(()=>t.scope()))).add(n,f),f},cM=(e,t)=>Ht((n,s)=>Be(sM(e,n,s.runtimeFlags,t))),Q0=e=>_o(t=>Jt(Zs(t,Ao),{onNone:()=>e,onSome:n=>{switch(n.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return se(yu(n,Hf),s=>wh(e,s))}}})),eb=e=>t=>_o(n=>Jt(Zs(n,Ao),{onNone:()=>t,onSome:s=>s.strategy._tag==="ParallelN"&&s.strategy.parallelism===e?t:se(yu(s,Vf(e)),o=>wh(t,o))})),ls=(e,t)=>n=>_o(s=>Jt(Zs(s,Ao),{onNone:()=>n(Xe),onSome:o=>{if(t===!0){const u=e._tag==="Parallel"?Q0:e._tag==="Sequential"?tb:eb(e.parallelism);switch(o.strategy._tag){case"Parallel":return u(n(Q0));case"Sequential":return u(n(tb));case"ParallelN":return u(n(eb(o.strategy.parallelism)))}}else return n(Xe)}})),tb=e=>_o(t=>Jt(Zs(t,Ao),{onNone:()=>e,onSome:n=>{switch(n.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return se(yu(n,Gf),s=>wh(e,s))}}})),Ao=zr("effect/Scope"),wh=T(2,(e,t)=>nk(e,Em(zT(Ao,t)))),uM=e=>is(e,{differ:jP,fork:Oo}),nb=$x(vR),aM=uM(Fu),lM=(e,t,n)=>z_(s=>se(se(X0(X_(e)),o=>go(u=>{const a=t.map(m=>m.listeners.count),f=()=>{a.every(m=>m===0)&&t.every(m=>m.result.state.current._tag==="Pending"?!0:!!(m.result.state.current._tag==="Done"&&Mf(m.result.state.current.effect)&&m.result.state.current.effect._tag==="Failure"&&WR(m.result.state.current.effect.cause)))&&(d.forEach(m=>m()),n==null||n(),u(vx(o)))};o.addObserver(m=>{d.forEach(y=>y()),u(m)});const d=t.map((m,y)=>{const v=O=>{a[y]=O,f()};return m.listeners.addObserver(v),()=>m.listeners.removeObserver(v)});return f(),ce(()=>{d.forEach(m=>m())})})),()=>st(()=>{const o=t.flatMap(u=>u.state.completed?[]:[u]);return fu(o,u=>NP(u.request,Vx(s)))}))),fM=BR,hM=es,dM=Bx,pM=yu,gM=function(){const e=Symbol.for("effect/Data/Error/plainArgs");return class extends Pf{constructor(n){super(n==null?void 0:n.message,n!=null&&n.cause?{cause:n.cause}:void 0),n&&(Object.assign(this,n),Object.defineProperty(this,e,{value:n,enumerable:!1}))}toJSON(){return{...this[e],...this}}}}(),mM=e=>{class t extends gM{constructor(){super(...arguments);p(this,"_tag",e)}}return t.prototype.name=e,t},rb=e=>(t,n)=>{const s=s_(),o=[[mo,[[s,e.context]]]];n!=null&&n.scheduler&&o.push([b0,[[s,n.scheduler]]]);let u=lC(e.fiberRefs,{entries:o,forkAs:s});n!=null&&n.updateRefs&&(u=n.updateRefs(u,s));const a=new z0(s,u,e.runtimeFlags);let f=t;n!=null&&n.scope&&(f=se(pM(n.scope,n0),m=>pu(Kx(m,z_(y=>fe(y,a.id())?Rn:ry(a,y))),If(t,y=>dM(m,y)))));const d=a.currentSupervisor;return d!==Fu&&(d.onStart(e.context,f,te(),a),a.addObserver(m=>d.onEnd(m,a))),ah.add(e.runtimeFlags,a),(n==null?void 0:n.immediate)===!1?a.resume(f):a.start(f),a},_M=e=>t=>{const n=EM(e)(t);if(n._tag==="Failure")throw SM(n.effect_instruction_i0);return n.effect_instruction_i0};class yM extends Error{constructor(n){super(`Fiber #${n.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`);p(this,"fiber");p(this,"_tag","AsyncFiberException");this.fiber=n,this.name=this._tag,this.stack=this.message}}const bM=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new yM(e);return Error.stackTraceLimit=t,n},Eh=Symbol.for("effect/Runtime/FiberFailure"),Uu=Symbol.for("effect/Runtime/FiberFailure/Cause");class vM extends Error{constructor(n){const s=D_(n)[0];super((s==null?void 0:s.message)||"An error has occurred");p(this,oS);p(this,sS);this[Eh]=Eh,this[Uu]=n,this.name=s?`(FiberFailure) ${s.name}`:"FiberFailure",s!=null&&s.stack&&(this.stack=s.stack)}toJSON(){return{_id:"FiberFailure",cause:this[Uu].toJSON()}}toString(){return"(FiberFailure) "+es(this[Uu],{renderErrorCause:!0})}[(oS=Eh,sS=Uu,Ke)](){return this.toString()}}const SM=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new vM(e);return Error.stackTraceLimit=t,n},wM=e=>{const t=e;switch(t._op){case"Failure":case"Success":return t;case"Left":return gy(t.left);case"Right":return et(t.right);case"Some":return et(t.value);case"None":return gy(hy())}},EM=e=>t=>{const n=wM(t);if(n)return n;const s=new y0,o=rb(e)(t,{scheduler:s});s.flush();const u=o.unsafePoll();return u||Hx(Of(bM(o),Nf(o)))};class OM{constructor(t,n,s){p(this,"context");p(this,"runtimeFlags");p(this,"fiberRefs");this.context=t,this.runtimeFlags=n,this.fiberRefs=s}pipe(){return re(this,arguments)}}const ib=(e=>new OM(e.context,e.runtimeFlags,e.fiberRefs))({context:Dl(),runtimeFlags:w_(Vi,v_,b_),fiberRefs:fC()}),TM=rb(ib),IM=_M(ib),AM=uu,Ku=rM,Bu=st,un=Rn,RM=Ef,Oh=Nt,xM=hu,fs=lu,zn=se,kM=TM,CM=IM;class Et{constructor(t,n,s){p(this,"path");p(this,"actual");p(this,"issue");p(this,"_tag","Pointer");this.path=t,this.actual=n,this.issue=s}}class sb{constructor(t,n){p(this,"actual");p(this,"message");p(this,"_tag","Unexpected");this.actual=t,this.message=n}}class Ro{constructor(t,n){p(this,"ast");p(this,"message");p(this,"_tag","Missing");p(this,"actual");this.ast=t,this.message=n}}class tt{constructor(t,n,s,o){p(this,"ast");p(this,"actual");p(this,"issues");p(this,"output");p(this,"_tag","Composite");this.ast=t,this.actual=n,this.issues=s,this.output=o}}class Th{constructor(t,n,s,o){p(this,"ast");p(this,"actual");p(this,"kind");p(this,"issue");p(this,"_tag","Refinement");this.ast=t,this.actual=n,this.kind=s,this.issue=o}}class Ih{constructor(t,n,s,o){p(this,"ast");p(this,"actual");p(this,"kind");p(this,"issue");p(this,"_tag","Transformation");this.ast=t,this.actual=n,this.kind=s,this.issue=o}}class hs{constructor(t,n,s){p(this,"ast");p(this,"actual");p(this,"message");p(this,"_tag","Type");this.ast=t,this.actual=n,this.message=s}}class ob{constructor(t,n,s){p(this,"ast");p(this,"actual");p(this,"message");p(this,"_tag","Forbidden");this.ast=t,this.actual=n,this.message=s}}const cb=Symbol.for("effect/Schema/ParseErrorTypeId");class $M extends mM("ParseError"){constructor(){super(...arguments);p(this,cS,cb)}get message(){return this.toString()}toString(){return Wu.formatIssueSync(this.issue)}toJSON(){return{_id:"ParseError",message:this.toString()}}[(cS=cb,Ke)](){return this.toJSON()}}const PM=e=>new $M({issue:e}),ub=Oe,Lt=rO,hi=T(2,(e,t)=>Lt(e)?Al(e,{onLeft:ge,onRight:t}):zn(e,t)),Yn=T(2,(e,t)=>Lt(e)?sO(e,t):Oh(e,t)),Ah=T(2,(e,t)=>Lt(e)?iO(e,t):xM(e,t)),ab=T(2,(e,t)=>Lt(e)?Al(e,{onLeft:t,onRight:Oe}):RM(e,t)),lb=(e,t)=>t===void 0||Wr(t)?e:e===void 0?t:{...e,...t},MM=(e,t,n)=>{const s=an(e);return(o,u)=>s(o,lb(n,u))},FM=(e,t,n)=>{const s=MM(e,t,n);return(o,u)=>dg(s(o,u),PM)},NM=(e,t)=>FM(Mt(e.ast),!0,t),LM=Ee(Symbol.for("effect/ParseResult/decodeMemoMap"),()=>new WeakMap),an=(e,t)=>{const n=LM,s=n.get(e);if(s)return s;const o=DM(e),u=QO(e),a=vt(u)?(m,y)=>o(m,lb(y,u.value)):o,f=eT(e),d=vt(f)?(m,y)=>ju(ab(a(m,y),f.value),e,m,y):a;return n.set(e,d),d},Rh=e=>Kn(YO(e)),xh=e=>Kn(XO(e)),DM=(e,t)=>{switch(e._tag){case"Refinement":{const n=an(e.from);return(s,o)=>{o=o??Fl;const u=(o==null?void 0:o.errors)==="all",a=hi(ab(n(s,o),f=>{const d=new Th(e,s,"From",f);return u&&nT(e)&&db(f)?Jt(e.filter(s,o,e),{onNone:()=>ge(d),onSome:m=>ge(new tt(e,s,[d,new Th(e,s,"Predicate",m)]))}):ge(d)}),f=>Jt(e.filter(f,o,e),{onNone:()=>Oe(f),onSome:d=>ge(new Th(e,s,"Predicate",d))}));return ju(a,e,s,o)}}case"Transformation":{const n=BM(e.transformation),s=an(e.from),o=an(e.to);return(u,a)=>ju(hi(Ah(s(u,a),f=>new Ih(e,u,"Encoded",f)),f=>hi(Ah(n(f,a??Fl,e,u),d=>new Ih(e,u,"Transformation",d)),d=>Ah(o(d,a),m=>new Ih(e,u,"Type",m)))),e,u,a)}case"Declaration":{const n=e.decodeUnknown(...e.typeParameters);return(s,o)=>ju(n(s,o??Fl,e),e,s,o)}case"Literal":return zt(e,n=>n===e.literal);case"UniqueSymbol":return zt(e,n=>n===e.symbol);case"UndefinedKeyword":return zt(e,EE);case"NeverKeyword":return zt(e,OE);case"UnknownKeyword":case"AnyKeyword":case"VoidKeyword":return Oe;case"StringKeyword":return zt(e,Un);case"NumberKeyword":return zt(e,Wr);case"BooleanKeyword":return zt(e,dl);case"BigIntKeyword":return zt(e,gc);case"SymbolKeyword":return zt(e,pl);case"ObjectKeyword":return zt(e,Or);case"Enums":return zt(e,n=>e.enums.some(([s,o])=>o===n));case"TemplateLiteral":{const n=CT(e);return zt(e,s=>Un(s)&&n.test(s))}case"TupleType":{const n=e.elements.map(m=>an(m.type)),s=e.rest.map(m=>an(m.type));let o=e.elements.filter(m=>!m.isOptional);e.rest.length>0&&(o=o.concat(e.rest.slice(1)));const u=o.length,a=e.elements.length>0?e.elements.map((m,y)=>y).join(" | "):"never",f=Rh(e),d=xh(e);return(m,y)=>{if(!vO(m))return ge(new hs(e,m));const v=(y==null?void 0:y.errors)==="all",O=[];let I=0;const R=[],W=m.length;for(let j=W;j<=u-1;j++){const H=new Et(j,m,new Ro(o[j-W]));if(v){O.push([I++,H]);continue}else return ge(new tt(e,m,H,R))}if(e.rest.length===0)for(let j=e.elements.length;j<=W-1;j++){const H=new Et(j,m,new sb(m[j],`is unexpected, expected: ${a}`));if(v){O.push([I++,H]);continue}else return ge(new tt(e,m,H,R))}let L=0,K;for(;L<n.length;L++)if(W<L+1){if(e.elements[L].isOptional)continue}else{const j=n[L],H=j(m[L],y);if(Lt(H)){if(pt(H)){const z=new Et(L,m,H.left);if(v){O.push([I++,z]);continue}else return ge(new tt(e,m,z,kn(R)))}R.push([I++,H.right])}else{const z=I++,G=L;K||(K=[]),K.push(({es:k,output:F})=>zn(fs(H),D=>{if(pt(D)){const U=new Et(G,m,D.left);return v?(k.push([z,U]),un):ge(new tt(e,m,U,kn(F)))}return F.push([z,D.right]),un}))}}if(mt(s)){const[j,...H]=s;for(;L<W-H.length;L++){const z=j(m[L],y);if(Lt(z))if(pt(z)){const G=new Et(L,m,z.left);if(v){O.push([I++,G]);continue}else return ge(new tt(e,m,G,kn(R)))}else R.push([I++,z.right]);else{const G=I++,k=L;K||(K=[]),K.push(({es:F,output:D})=>zn(fs(z),U=>{if(pt(U)){const N=new Et(k,m,U.left);return v?(F.push([G,N]),un):ge(new tt(e,m,N,kn(D)))}else return D.push([G,U.right]),un}))}}for(let z=0;z<H.length;z++)if(L+=z,!(W<L+1)){const G=H[z](m[L],y);if(Lt(G)){if(pt(G)){const k=new Et(L,m,G.left);if(v){O.push([I++,k]);continue}else return ge(new tt(e,m,k,kn(R)))}R.push([I++,G.right])}else{const k=I++,F=L;K||(K=[]),K.push(({es:D,output:U})=>zn(fs(G),N=>{if(pt(N)){const q=new Et(F,m,N.left);return v?(D.push([k,q]),un):ge(new tt(e,m,q,kn(U)))}return U.push([k,N.right]),un}))}}}const Y=({es:j,output:H})=>kc(j)?ge(new tt(e,m,kn(j),kn(H))):Oe(kn(H));if(K&&K.length>0){const j=K;return Bu(()=>{const H={es:zs(O),output:zs(R)};return zn(Ku(j,z=>z(H),{concurrency:f,batching:d,discard:!0}),()=>Y(H))})}return Y({output:R,es:O})}}case"TypeLiteral":{if(e.propertySignatures.length===0&&e.indexSignatures.length===0)return zt(e,TE);const n=[],s={},o=[];for(const y of e.propertySignatures)n.push([an(y.type),y]),s[y.name]=null,o.push(y.name);const u=e.indexSignatures.map(y=>[an(y.parameter),an(y.type),y.parameter]),a=nr.make(e.indexSignatures.map(y=>y.parameter).concat(o.map(y=>pl(y)?new oT(y):new sT(y)))),f=an(a),d=Rh(e),m=xh(e);return(y,v)=>{if(!AE(y))return ge(new hs(e,y));const O=(v==null?void 0:v.errors)==="all",I=[];let R=0;const W=(v==null?void 0:v.onExcessProperty)==="error",L=(v==null?void 0:v.onExcessProperty)==="preserve",K={};let Y;if(W||L){Y=Ci(y);for(const G of Y){const k=f(G,v);if(Lt(k)&&pt(k))if(W){const F=new Et(G,y,new sb(y[G],`is unexpected, expected: ${String(a)}`));if(O){I.push([R++,F]);continue}else return ge(new tt(e,y,F,K))}else K[G]=y[G]}}let j;const H=(v==null?void 0:v.exact)===!0;for(let G=0;G<n.length;G++){const k=n[G][1],F=k.name,D=Object.prototype.hasOwnProperty.call(y,F);if(!D){if(k.isOptional)continue;if(H){const q=new Et(F,y,new Ro(k));if(O){I.push([R++,q]);continue}else return ge(new tt(e,y,q,K))}}const U=n[G][0],N=U(y[F],v);if(Lt(N)){if(pt(N)){const q=new Et(F,y,D?N.left:new Ro(k));if(O){I.push([R++,q]);continue}else return ge(new tt(e,y,q,K))}K[F]=N.right}else{const q=R++,Te=F;j||(j=[]),j.push(({es:Ie,output:ct})=>zn(fs(N),je=>{if(pt(je)){const ne=new Et(Te,y,D?je.left:new Ro(k));return O?(Ie.push([q,ne]),un):ge(new tt(e,y,ne,ct))}return ct[Te]=je.right,un}))}}for(let G=0;G<u.length;G++){const k=u[G],F=k[0],D=k[1],U=Rg(y,k[2]);for(const N of U){const q=F(N,v);if(Lt(q)&&tr(q)){const Te=D(y[N],v);if(Lt(Te))if(pt(Te)){const Ie=new Et(N,y,Te.left);if(O){I.push([R++,Ie]);continue}else return ge(new tt(e,y,Ie,K))}else Object.prototype.hasOwnProperty.call(s,N)||(K[N]=Te.right);else{const Ie=R++,ct=N;j||(j=[]),j.push(({es:je,output:ne})=>zn(fs(Te),Ve=>{if(pt(Ve)){const Cn=new Et(ct,y,Ve.left);return O?(je.push([Ie,Cn]),un):ge(new tt(e,y,Cn,ne))}else return Object.prototype.hasOwnProperty.call(s,N)||(ne[N]=Ve.right),un}))}}}}const z=({es:G,output:k})=>{if(kc(G))return ge(new tt(e,y,kn(G),k));if((v==null?void 0:v.propertyOrder)==="original"){const F=Y||Ci(y);for(const U of o)F.indexOf(U)===-1&&F.push(U);const D={};for(const U of F)Object.prototype.hasOwnProperty.call(k,U)&&(D[U]=k[U]);return Oe(D)}return Oe(k)};if(j&&j.length>0){const G=j;return Bu(()=>{const k={es:zs(I),output:Object.assign({},K)};return zn(Ku(G,F=>F(k),{concurrency:d,batching:m,discard:!0}),()=>z(k))})}return z({es:I,output:K})}}case"Union":{const n=UM(e.types),s=Ci(n.keys),o=s.length,u=e.types.length,a=new Map;for(let m=0;m<u;m++)a.set(e.types[m],an(e.types[m]));const f=Rh(e)??1,d=xh(e);return(m,y)=>{const v=[];let O=0,I=[];if(o>0)if(gl(m))for(let L=0;L<o;L++){const K=s[L],Y=n.keys[K].buckets;if(Object.prototype.hasOwnProperty.call(m,K)){const j=String(m[K]);if(Object.prototype.hasOwnProperty.call(Y,j))I=I.concat(Y[j]);else{const{candidates:H,literals:z}=n.keys[K],G=nr.make(z),k=H.length===u?new Vr([new wt(K,G,!1,!0)],[]):nr.make(H);v.push([O++,new tt(k,m,new Et(K,m,new hs(G,m[K])))])}}else{const{candidates:j,literals:H}=n.keys[K],z=new wt(K,nr.make(H),!1,!0),G=j.length===u?new Vr([z],[]):nr.make(j);v.push([O++,new tt(G,m,new Et(K,m,new Ro(z)))])}}else{const L=n.candidates.length===u?e:nr.make(n.candidates);v.push([O++,new hs(L,m)])}n.otherwise.length>0&&(I=I.concat(n.otherwise));let R;for(let L=0;L<I.length;L++){const K=I[L],Y=a.get(K)(m,y);if(Lt(Y)&&(!R||R.length===0)){if(tr(Y))return Y;v.push([O++,Y.left])}else{const j=O++;R||(R=[]),R.push(H=>Bu(()=>"finalResult"in H?un:zn(fs(Y),z=>(tr(z)?H.finalResult=z:H.es.push([j,z.left]),un))))}}const W=L=>kc(L)?L.length===1&&L[0][1]._tag==="Type"?ge(L[0][1]):ge(new tt(e,m,kn(L))):ge(new hs(e,m));if(R&&R.length>0){const L=R;return Bu(()=>{const K={es:zs(v)};return zn(Ku(L,Y=>Y(K),{concurrency:f,batching:d,discard:!0}),()=>"finalResult"in K?K.finalResult:W(K.es))})}return W(v)}}case"Suspend":{const n=xg(()=>an(Pi(e.f(),e.annotations)));return(s,o)=>n()(s,o)}}},zt=(e,t)=>n=>t(n)?Oe(n):ge(new hs(e,n)),xo=(e,t)=>{switch(e._tag){case"Declaration":{const n=Xg(e);if(vt(n))return xo(n.value);break}case"TypeLiteral":{const n=[];for(let s=0;s<e.propertySignatures.length;s++){const o=e.propertySignatures[s],u=pm(o.type);em(u)&&!o.isOptional&&n.push([o.name,u])}return n}case"TupleType":{const n=[];for(let s=0;s<e.elements.length;s++){const o=e.elements[s],u=pm(o.type);em(u)&&!o.isOptional&&n.push([s,u])}return n}case"Refinement":return xo(e.from);case"Suspend":return xo(e.f());case"Transformation":return xo(e.from)}return[]},UM=(e,t)=>{const n={},s=[],o=[];for(let u=0;u<e.length;u++){const a=e[u],f=xo(a);if(f.length>0){o.push(a);for(let d=0;d<f.length;d++){const[m,y]=f[d],v=String(y.literal);n[m]=n[m]||{buckets:{},literals:[],candidates:[]};const O=n[m].buckets;if(Object.prototype.hasOwnProperty.call(O,v)){if(d<f.length-1)continue;O[v].push(a),n[m].literals.push(y),n[m].candidates.push(a)}else{O[v]=[a],n[m].literals.push(y),n[m].candidates.push(a);break}}}else s.push(a)}return{keys:n,otherwise:s,candidates:o}},ju=(e,t,n,s)=>{if((s==null?void 0:s.isEffectAllowed)===!0||Lt(e))return e;const o=new y0,u=kM(e,{scheduler:o});o.flush();const a=u.unsafePoll();if(a){if(rk(a))return Oe(a.value);const f=a.cause;return fM(f)?ge(f.error):ge(new ob(t,n,hM(f)))}return ge(new ob(t,n,"cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work"))},KM=([e],[t])=>e>t?1:e<t?-1:0;function kn(e){return e.sort(KM).map(t=>t[1])}const BM=(e,t)=>{switch(e._tag){case"FinalTransformation":return e.decode;case"ComposeTransformation":return Oe;case"TypeLiteralTransformation":return n=>{let s=Oe(n);for(const o of e.propertySignatureTransformations){const[u,a]=[o.from,o.to],f=o.decode;s=Yn(s,m=>{const y=f(Object.prototype.hasOwnProperty.call(m,u)?be(m[u]):te());return delete m[u],vt(y)&&(m[a]=y.value),m})}return s}}},Rt=(e,t=[])=>({value:e,forest:t}),Wu={formatIssue:e=>Yn(ds(e),jM),formatIssueSync:e=>{const t=Wu.formatIssue(e);return Lt(t)?cO(t):CM(t)},formatError:e=>Wu.formatIssue(e.issue),formatErrorSync:e=>Wu.formatIssueSync(e.issue)},jM=e=>e.value+fb(`
`,e.forest),fb=(e,t)=>{let n="";const s=t.length;let o;for(let u=0;u<s;u++){o=t[u];const a=u===s-1;n+=e+(a?"└":"├")+"─ "+o.value,n+=fb(e+(s>1&&!a?"│  ":"   "),o.forest)}return n},WM=e=>{switch(e){case"Encoded":return"Encoded side transformation failure";case"Transformation":return"Transformation process failure";case"Type":return"Type side transformation failure"}},qM=e=>{switch(e){case"From":return"From side refinement failure";case"Predicate":return"Predicate refinement failure"}},hb=e=>"ast"in e?be(e.ast):te(),kh=Oe(void 0),JM=e=>hb(e).pipe(Ac(VO),Jt({onNone:()=>kh,onSome:t=>{const n=t(e);return Un(n)?Oe({message:n,override:!1}):AM(n)?Oh(n,s=>({message:s,override:!1})):Un(n.message)?Oe({message:n.message,override:n.override}):Oh(n.message,s=>({message:s,override:n.override}))}})),Ch=e=>t=>t._tag===e,db=Ch("Composite"),pb=Ch("Refinement"),gb=Ch("Transformation"),ko=e=>hi(JM(e),t=>t!==void 0?!t.override&&(db(e)||pb(e)&&e.kind==="From"||gb(e)&&e.kind!=="Transformation")?gb(e)||pb(e)?ko(e.issue):kh:Oe(t.message):kh),mb=e=>hb(e).pipe(Ac(ZO),hO(t=>t(e)),Kn);function GM(e){return Yg(e).pipe(Tr(()=>Vg(e)),Tr(()=>zg(e)),Tr(()=>Mc(e)),ft(()=>`{ ${e.from} | filter }`))}function HM(e){return e.message!==void 0?e.message:`Expected ${um(e.ast)?GM(e.ast):String(e.ast)}, actual ${Bn(e.actual)}`}const VM=e=>Yn(ko(e),t=>t??mb(e)??HM(e)),qu=e=>mb(e)??String(e.ast),zM=e=>e.message??"is forbidden",YM=e=>e.message??"is unexpected",XM=e=>{const t=zO(e.ast);if(vt(t)){const n=t.value();return Un(n)?Oe(n):n}return Oe(e.message??"is missing")},ds=e=>{switch(e._tag){case"Type":return Yn(VM(e),Rt);case"Forbidden":return Oe(Rt(qu(e),[Rt(zM(e))]));case"Unexpected":return Oe(Rt(YM(e)));case"Missing":return Yn(XM(e),Rt);case"Transformation":return hi(ko(e),t=>t!==void 0?Oe(Rt(t)):Yn(ds(e.issue),n=>Rt(qu(e),[Rt(WM(e.kind),[n])])));case"Refinement":return hi(ko(e),t=>t!==void 0?Oe(Rt(t)):Yn(ds(e.issue),n=>Rt(qu(e),[Rt(qM(e.kind),[n])])));case"Pointer":return Yn(ds(e.issue),t=>Rt(LO(e.path),[t]));case"Composite":return hi(ko(e),t=>{if(t!==void 0)return Oe(Rt(t));const n=qu(e);return kg(e.issues)?Yn(Ku(e.issues,ds),s=>Rt(n,s)):Yn(ds(e.issues),s=>Rt(n,[s]))})}},ZM=T(e=>Or(e[0]),(e,...t)=>{const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}),QM=T(e=>Or(e[0]),(e,...t)=>{const n={...e};for(const s of t)delete n[s];return n}),Co=Symbol.for("effect/Schema");function lr(e){var t,n,s;return n=Co,t=Co,s=class{constructor(){p(this,n,_b)}static annotations(u){return lr(ps(this.ast,u))}static pipe(){return re(this,arguments)}static toString(){return String(e)}},p(s,"ast",e),p(s,"Type"),p(s,"Encoded"),p(s,"Context"),p(s,t,_b),s}const _b={_A:e=>e,_I:e=>e,_R:e=>e},yb={schemaId:qO,message:Mg,missingMessage:xl,identifier:Fg,title:Ir,description:Pc,examples:Ng,default:Lg,documentation:JO,jsonSchema:Dg,arbitrary:Ug,pretty:Kg,equivalence:Bg,concurrency:jg,batching:Wg,parseIssueTitle:qg,parseOptions:Jg,decodingFallback:Gg},$h=e=>{if(!e)return{};const t={...e};for(const n in yb)if(n in e){const s=yb[n];t[s]=e[n],delete t[n]}return t},ps=(e,t)=>Pi(e,$h(t)),gs=e=>ue(e,Co)&&Or(e[Co]);class eF extends lr(Cl){}class tF extends lr($l){}class ms extends lr(pT){}class nF extends lr(_T){}const rF=e=>nr.make(e.map(t=>t.ast));function bb(e,t=rF(e)){var n;return n=class extends lr(t){static annotations(o){return bb(this.members,ps(this.ast,o))}},p(n,"members",[...e]),n}function iF(...e){return sm(e)?bb(e):mt(e)?e[0]:tF}const sF=e=>iF(e,eF),oF=(e,t)=>new Pl(e.map(n=>gs(n)?new Hr(n.ast,!1):n.ast),t.map(n=>gs(n)?new Fc(n.ast):n.ast),!0);function vb(e,t,n=oF(e,t)){var s;return s=class extends lr(n){static annotations(u){return vb(this.elements,this.rest,ps(this.ast,u))}},p(s,"elements",[...e]),p(s,"rest",[...t]),s}function Sb(e,t){var n;return n=class extends vb([],[e],t){static annotations(o){return Sb(this.value,ps(this.ast,o))}},p(n,"value",e),n}const cF=e=>Sb(e),Ph=e=>e?'"?:"':'":"';class wb extends Hr{constructor(n,s,o,u,a){super(n,s,u);p(this,"isReadonly");p(this,"defaultValue");p(this,"_tag","PropertySignatureDeclaration");this.isReadonly=o,this.defaultValue=a}toString(){const n=Ph(this.isOptional),s=String(this.type);return`PropertySignature<${n}, ${s}, never, ${n}, ${s}>`}}class uF extends Hr{constructor(n,s,o,u,a){super(n,s,u);p(this,"isReadonly");p(this,"fromKey");this.isReadonly=o,this.fromKey=a}}class aF extends Hr{constructor(n,s,o,u,a){super(n,s,u);p(this,"isReadonly");p(this,"defaultValue");this.isReadonly=o,this.defaultValue=a}}const lF=e=>e===void 0?"never":Un(e)?JSON.stringify(e):String(e);class fF{constructor(t,n,s,o){p(this,"from");p(this,"to");p(this,"decode");p(this,"encode");p(this,"_tag","PropertySignatureTransformation");this.from=t,this.to=n,this.decode=s,this.encode=o}toString(){return`PropertySignature<${Ph(this.to.isOptional)}, ${this.to.type}, ${lF(this.from.fromKey)}, ${Ph(this.from.isOptional)}, ${this.from.type}>`}}const Eb=(e,t)=>{switch(e._tag){case"PropertySignatureDeclaration":return new wb(e.type,e.isOptional,e.isReadonly,{...e.annotations,...t},e.defaultValue);case"PropertySignatureTransformation":return new fF(new uF(e.from.type,e.from.isOptional,e.from.isReadonly,e.from.annotations),new aF(e.to.type,e.to.isOptional,e.to.isReadonly,{...e.to.annotations,...t},e.to.defaultValue),e.decode,e.encode)}},Ob=Symbol.for("effect/PropertySignature"),Tb=e=>ue(e,Ob);aS=Co,uS=Ob;const nd=class nd{constructor(t){p(this,"ast");p(this,aS);p(this,uS,null);p(this,"_TypeToken");p(this,"_Key");p(this,"_EncodedToken");p(this,"_HasDefault");this.ast=t}pipe(){return re(this,arguments)}annotations(t){return new nd(Eb(this.ast,$h(t)))}toString(){return String(this.ast)}};let Mh=nd;class Fh extends Mh{constructor(n,s){super(n);p(this,"from");this.from=s}annotations(n){return new Fh(Eb(this.ast,$h(n)),this.from)}}const hF=e=>{const t=e.ast===Cl||e.ast===$l?Cl:sF(e).ast;return new Fh(new wb(t,!0,!0,{},void 0),e)},dF=dm([xl]),pF=(e,t)=>{const n=Ci(e),s=[];if(n.length>0){const u=[],a=[],f=[];for(let d=0;d<n.length;d++){const m=n[d],y=e[m];if(Tb(y)){const v=y.ast;switch(v._tag){case"PropertySignatureDeclaration":{const O=v.type,I=v.isOptional,R=v.annotations;u.push(new wt(m,O,I,!0,dF(v))),a.push(new wt(m,Mt(O),I,!0,R)),s.push(new wt(m,O,I,!0,R));break}case"PropertySignatureTransformation":{const O=v.from.fromKey??m;u.push(new wt(O,v.from.type,v.from.isOptional,!0,v.from.annotations)),a.push(new wt(m,v.to.type,v.to.isOptional,!0,v.to.annotations)),f.push(new IT(O,m,v.decode,v.encode));break}}}else u.push(new wt(m,y.ast,!1,!0)),a.push(new wt(m,Mt(y.ast),!1,!0)),s.push(new wt(m,y.ast,!1,!0))}if(mt(f)){const d=[],m=[];for(const y of t){const{indexSignatures:v,propertySignatures:O}=hm(y.key.ast,y.value.ast);O.forEach(I=>{u.push(I),a.push(new wt(I.name,Mt(I.type),I.isOptional,I.isReadonly,I.annotations))}),v.forEach(I=>{d.push(I),m.push(new Nc(I.parameter,Mt(I.type),I.isReadonly))})}return new am(new Vr(u,d,{[kl]:"Struct (Encoded side)"}),new Vr(a,m,{[kl]:"Struct (Type side)"}),new AT(f))}}const o=[];for(const u of t){const{indexSignatures:a,propertySignatures:f}=hm(u.key.ast,u.value.ast);f.forEach(d=>s.push(d)),a.forEach(d=>o.push(d))}return new Vr(s,o)},gF=(e,t)=>{const n=Ci(e);for(const s of n){const o=e[s];if(t[s]===void 0&&Tb(o)){const u=o.ast,a=u._tag==="PropertySignatureDeclaration"?u.defaultValue:u.to.defaultValue;a!==void 0&&(t[s]=a())}}return t};function Ib(e,t,n=pF(e,t)){var s;return s=class extends lr(n){static annotations(u){return Ib(this.fields,this.records,ps(this.ast,u))}static pick(...u){return _s(ZM(e,...u))}static omit(...u){return _s(QM(e,...u))}},p(s,"fields",{...e}),p(s,"records",[...t]),p(s,"make",(u,a)=>{const f=gF(e,{...u});return yF(a)?f:NM(s)(f)}),s}function _s(e,...t){return Ib(e,t)}function Ab(e,t,n){var s;return s=class extends lr(n){static annotations(u){return Ab(this.from,this.to,ps(this.ast,u))}},p(s,"from",e),p(s,"to",t),s}const mF=T(e=>gs(e[0])&&gs(e[1]),(e,t,n)=>Ab(e,t,new am(e.ast,t.ast,new TT(n.decode,n.encode)))),_F=T(e=>gs(e[0])&&gs(e[1]),(e,t,n)=>mF(e,t,{strict:!0,decode:(s,o,u,a)=>ub(n.decode(s,a)),encode:(s,o,u,a)=>ub(n.encode(s,a))}));function yF(e){return dl(e)?e:(e==null?void 0:e.disableValidation)??!1}const Rb=Symbol.for("midi/structor/schema/form/annotation"),bF={annotation:e=>({[Rb]:e}),getFormName:e=>e._tag==="PropertySignatureDeclaration"||e._tag==="PropertySignatureTransformation"?te():St(Rb)(e)},vF=(e,t,n)=>16777216+(e<<16|t<<8|n<<0),SF=["","0","00","000","0000","00000","000000"];_F(ms,nF,{strict:!0,decode:e=>{const t=e.substring(0,2),n=e.substring(2,4),s=e.substring(4,6);return vF(parseInt(t,16),parseInt(n,16),parseInt(s,16))},encode:e=>{const t=e.toString(16);if(t.length>6)return t.substring(1,7);{const n=6-t.length;return SF[n]+t}}}).annotations(bF.annotation("Color"));const wF=()=>({tracks:[],cues:[]}),EF=e=>{let t=0;const n=[];return we.forEach(e,s=>{t!==s.startTime&&n.push({type:"blank",startTime:t,endTime:s.startTime}),n.push({...s,type:"real"}),t=s.endTime}),n.push({type:"blank",startTime:t,endTime:void 0}),n},OF=e=>{const t=[],n=[],s=[];we.forEach(e,a=>{a.type==="init-track"?t.push(a):a.type==="init-clip"?n.push(a):s.push(a)});const o=we.sortBy(t,a=>a.trackIndex),u=we.groupBy(n,a=>a.trackIndex);return{tracks:we.map(o,a=>{const f=we.get(u,a.trackIndex);return{name:a.name,color:a.color,clips:EF(f)}}),cues:s}},TF=e=>()=>[],IF=e=>ll(t=>{t.push(e)}),AF=e=>ll(t=>{t.push(e)}),RF=e=>ll(t=>{t.push(e)}),xF=e=>OF(e);var xb={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $o=Symbol.for("react.element"),kF=Symbol.for("react.portal"),CF=Symbol.for("react.fragment"),$F=Symbol.for("react.strict_mode"),PF=Symbol.for("react.profiler"),MF=Symbol.for("react.provider"),FF=Symbol.for("react.context"),NF=Symbol.for("react.forward_ref"),LF=Symbol.for("react.suspense"),DF=Symbol.for("react.memo"),UF=Symbol.for("react.lazy"),kb=Symbol.iterator;function KF(e){return e===null||typeof e!="object"?null:(e=kb&&e[kb]||e["@@iterator"],typeof e=="function"?e:null)}var Cb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$b=Object.assign,Pb={};function ys(e,t,n){this.props=e,this.context=t,this.refs=Pb,this.updater=n||Cb}ys.prototype.isReactComponent={},ys.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},ys.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Mb(){}Mb.prototype=ys.prototype;function Nh(e,t,n){this.props=e,this.context=t,this.refs=Pb,this.updater=n||Cb}var Lh=Nh.prototype=new Mb;Lh.constructor=Nh,$b(Lh,ys.prototype),Lh.isPureReactComponent=!0;var Fb=Array.isArray,Nb=Object.prototype.hasOwnProperty,Dh={current:null},Lb={key:!0,ref:!0,__self:!0,__source:!0};function Db(e,t,n){var s,o={},u=null,a=null;if(t!=null)for(s in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(u=""+t.key),t)Nb.call(t,s)&&!Lb.hasOwnProperty(s)&&(o[s]=t[s]);var f=arguments.length-2;if(f===1)o.children=n;else if(1<f){for(var d=Array(f),m=0;m<f;m++)d[m]=arguments[m+2];o.children=d}if(e&&e.defaultProps)for(s in f=e.defaultProps,f)o[s]===void 0&&(o[s]=f[s]);return{$$typeof:$o,type:e,key:u,ref:a,props:o,_owner:Dh.current}}function BF(e,t){return{$$typeof:$o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Uh(e){return typeof e=="object"&&e!==null&&e.$$typeof===$o}function jF(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ub=/\/+/g;function Kh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?jF(""+e.key):t.toString(36)}function Ju(e,t,n,s,o){var u=typeof e;(u==="undefined"||u==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(u){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case $o:case kF:a=!0}}if(a)return a=e,o=o(a),e=s===""?"."+Kh(a,0):s,Fb(o)?(n="",e!=null&&(n=e.replace(Ub,"$&/")+"/"),Ju(o,t,n,"",function(m){return m})):o!=null&&(Uh(o)&&(o=BF(o,n+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(Ub,"$&/")+"/")+e)),t.push(o)),1;if(a=0,s=s===""?".":s+":",Fb(e))for(var f=0;f<e.length;f++){u=e[f];var d=s+Kh(u,f);a+=Ju(u,t,n,d,o)}else if(d=KF(e),typeof d=="function")for(e=d.call(e),f=0;!(u=e.next()).done;)u=u.value,d=s+Kh(u,f++),a+=Ju(u,t,n,d,o);else if(u==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Gu(e,t,n){if(e==null)return e;var s=[],o=0;return Ju(e,s,"","",function(u){return t.call(n,u,o++)}),s}function WF(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var xt={current:null},Hu={transition:null},qF={ReactCurrentDispatcher:xt,ReactCurrentBatchConfig:Hu,ReactCurrentOwner:Dh};function Kb(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Gu,forEach:function(e,t,n){Gu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Gu(e,function(){t++}),t},toArray:function(e){return Gu(e,function(t){return t})||[]},only:function(e){if(!Uh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},me.Component=ys,me.Fragment=CF,me.Profiler=PF,me.PureComponent=Nh,me.StrictMode=$F,me.Suspense=LF,me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qF,me.act=Kb,me.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=$b({},e.props),o=e.key,u=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(u=t.ref,a=Dh.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var f=e.type.defaultProps;for(d in t)Nb.call(t,d)&&!Lb.hasOwnProperty(d)&&(s[d]=t[d]===void 0&&f!==void 0?f[d]:t[d])}var d=arguments.length-2;if(d===1)s.children=n;else if(1<d){f=Array(d);for(var m=0;m<d;m++)f[m]=arguments[m+2];s.children=f}return{$$typeof:$o,type:e.type,key:o,ref:u,props:s,_owner:a}},me.createContext=function(e){return e={$$typeof:FF,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:MF,_context:e},e.Consumer=e},me.createElement=Db,me.createFactory=function(e){var t=Db.bind(null,e);return t.type=e,t},me.createRef=function(){return{current:null}},me.forwardRef=function(e){return{$$typeof:NF,render:e}},me.isValidElement=Uh,me.lazy=function(e){return{$$typeof:UF,_payload:{_status:-1,_result:e},_init:WF}},me.memo=function(e,t){return{$$typeof:DF,type:e,compare:t===void 0?null:t}},me.startTransition=function(e){var t=Hu.transition;Hu.transition={};try{e()}finally{Hu.transition=t}},me.unstable_act=Kb,me.useCallback=function(e,t){return xt.current.useCallback(e,t)},me.useContext=function(e){return xt.current.useContext(e)},me.useDebugValue=function(){},me.useDeferredValue=function(e){return xt.current.useDeferredValue(e)},me.useEffect=function(e,t){return xt.current.useEffect(e,t)},me.useId=function(){return xt.current.useId()},me.useImperativeHandle=function(e,t,n){return xt.current.useImperativeHandle(e,t,n)},me.useInsertionEffect=function(e,t){return xt.current.useInsertionEffect(e,t)},me.useLayoutEffect=function(e,t){return xt.current.useLayoutEffect(e,t)},me.useMemo=function(e,t){return xt.current.useMemo(e,t)},me.useReducer=function(e,t,n){return xt.current.useReducer(e,t,n)},me.useRef=function(e){return xt.current.useRef(e)},me.useState=function(e){return xt.current.useState(e)},me.useSyncExternalStore=function(e,t,n){return xt.current.useSyncExternalStore(e,t,n)},me.useTransition=function(){return xt.current.useTransition()},me.version="18.3.1",xb.exports=me;var di=xb.exports,Bb=Ue(di);const Po={},jb=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,Wb=e=>"init"in e,Bh=e=>!!e.write,qb=e=>"v"in e||"e"in e,Vu=e=>{if("e"in e)throw e.e;if((Po?"production":void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},zu=new WeakMap,Jb=e=>{var t;return Yu(e)&&!!((t=zu.get(e))!=null&&t[0])},JF=e=>{const t=zu.get(e);t!=null&&t[0]&&(t[0]=!1,t[1].forEach(n=>n()))},Gb=(e,t)=>{let n=zu.get(e);if(!n){n=[!0,new Set],zu.set(e,n);const s=()=>{n[0]=!1};e.then(s,s)}n[1].add(t)},Yu=e=>typeof(e==null?void 0:e.then)=="function",Hb=(e,t,n)=>{n.p.has(e)||(n.p.add(e),t.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},jh=(e,t,n)=>{const s=n(e),o="v"in s,u=s.v;if(Yu(t))for(const a of s.d.keys())Hb(e,t,n(a));s.v=t,delete s.e,(!o||!Object.is(u,s.v))&&(++s.n,Yu(u)&&JF(u))},Vb=(e,t,n)=>{var s;const o=new Set;for(const u of((s=n.get(e))==null?void 0:s.t)||[])n.has(u)&&o.add(u);for(const u of t.p)o.add(u);return o},GF=()=>{const e=new Set,t=()=>{e.forEach(n=>n())};return t.add=n=>(e.add(n),()=>{e.delete(n)}),t},Wh=()=>{const e={},t=new WeakMap,n=s=>{var o,u;(o=t.get(e))==null||o.forEach(a=>a(s)),(u=t.get(s))==null||u.forEach(a=>a())};return n.add=(s,o)=>{const u=s||e,a=(t.has(u)?t:t.set(u,new Set)).get(u);return a.add(o),()=>{a==null||a.delete(o),a.size||t.delete(u)}},n},HF=e=>(e.c||(e.c=Wh()),e.m||(e.m=Wh()),e.u||(e.u=Wh()),e.f||(e.f=GF()),e),VF=Symbol(),zb=(e=new WeakMap,t=new WeakMap,n=new WeakMap,s=new Set,o=new Set,u=new Set,a={},f=(O,...I)=>O.read(...I),d=(O,...I)=>O.write(...I),m=(O,I)=>{var R;return(R=O.unstable_onInit)==null?void 0:R.call(O,I)},y=(O,I)=>{var R;return(R=O.onMount)==null?void 0:R.call(O,I)},...v)=>{const O=v[0]||(k=>{if((Po?"production":void 0)!=="production"&&!k)throw new Error("Atom is undefined or null");let F=e.get(k);return F||(F={d:new Map,p:new Set,n:0},e.set(k,F),m==null||m(k,G)),F}),I=v[1]||(()=>{const k=[],F=D=>{try{D()}catch(U){k.push(U)}};do{a.f&&F(a.f);const D=new Set,U=D.add.bind(D);s.forEach(N=>{var q;return(q=t.get(N))==null?void 0:q.l.forEach(U)}),s.clear(),u.forEach(U),u.clear(),o.forEach(U),o.clear(),D.forEach(F),s.size&&R()}while(s.size||u.size||o.size);if(k.length)throw new AggregateError(k)}),R=v[2]||(()=>{const k=[],F=new WeakSet,D=new WeakSet,U=Array.from(s);for(;U.length;){const N=U[U.length-1],q=O(N);if(D.has(N)){U.pop();continue}if(F.has(N)){if(n.get(N)===q.n)k.push([N,q]);else if((Po?"production":void 0)!=="production"&&n.has(N))throw new Error("[Bug] invalidated atom exists");D.add(N),U.pop();continue}F.add(N);for(const Te of Vb(N,q,t))F.has(Te)||U.push(Te)}for(let N=k.length-1;N>=0;--N){const[q,Te]=k[N];let Ie=!1;for(const ct of Te.d.keys())if(ct!==q&&s.has(ct)){Ie=!0;break}Ie&&(W(q),Y(q)),n.delete(q)}}),W=v[3]||(k=>{var F;const D=O(k);if(qb(D)&&(t.has(k)&&n.get(k)!==D.n||Array.from(D.d).every(([ne,Ve])=>W(ne).n===Ve)))return D;D.d.clear();let U=!0;const N=()=>{t.has(k)&&(Y(k),R(),I())},q=ne=>{var Ve;if(jb(k,ne)){const dr=O(ne);if(!qb(dr))if(Wb(ne))jh(ne,ne.init,O);else throw new Error("no atom init");return Vu(dr)}const Cn=W(ne);try{return Vu(Cn)}finally{D.d.set(ne,Cn.n),Jb(D.v)&&Hb(k,D.v,Cn),(Ve=t.get(ne))==null||Ve.t.add(k),U||N()}};let Te,Ie;const ct={get signal(){return Te||(Te=new AbortController),Te.signal},get setSelf(){return(Po?"production":void 0)!=="production"&&!Bh(k)&&console.warn("setSelf function cannot be used with read-only atom"),!Ie&&Bh(k)&&(Ie=(...ne)=>{if((Po?"production":void 0)!=="production"&&U&&console.warn("setSelf function cannot be called in sync"),!U)try{return K(k,...ne)}finally{R(),I()}}),Ie}},je=D.n;try{const ne=f(k,q,ct);return jh(k,ne,O),Yu(ne)&&(Gb(ne,()=>Te==null?void 0:Te.abort()),ne.then(N,N)),D}catch(ne){return delete D.v,D.e=ne,++D.n,D}finally{U=!1,je!==D.n&&n.get(k)===je&&(n.set(k,D.n),s.add(k),(F=a.c)==null||F.call(a,k))}}),L=v[4]||(k=>{const F=[k];for(;F.length;){const D=F.pop(),U=O(D);for(const N of Vb(D,U,t)){const q=O(N);n.set(N,q.n),F.push(N)}}}),K=v[5]||((k,...F)=>{let D=!0;const U=q=>Vu(W(q)),N=(q,...Te)=>{var Ie;const ct=O(q);try{if(jb(k,q)){if(!Wb(q))throw new Error("atom not writable");const je=ct.n,ne=Te[0];jh(q,ne,O),Y(q),je!==ct.n&&(s.add(q),(Ie=a.c)==null||Ie.call(a,q),L(q));return}else return K(q,...Te)}finally{D||(R(),I())}};try{return d(k,U,N,...F)}finally{D=!1}}),Y=v[6]||(k=>{var F;const D=O(k),U=t.get(k);if(U&&!Jb(D.v)){for(const[N,q]of D.d)if(!U.d.has(N)){const Te=O(N);j(N).t.add(k),U.d.add(N),q!==Te.n&&(s.add(N),(F=a.c)==null||F.call(a,N),L(N))}for(const N of U.d||[])if(!D.d.has(N)){U.d.delete(N);const q=H(N);q==null||q.t.delete(k)}}}),j=v[7]||(k=>{var F;const D=O(k);let U=t.get(k);if(!U){W(k);for(const N of D.d.keys())j(N).t.add(k);if(U={l:new Set,d:new Set(D.d.keys()),t:new Set},t.set(k,U),(F=a.m)==null||F.call(a,k),Bh(k)){const N=()=>{let q=!0;const Te=(...Ie)=>{try{return K(k,...Ie)}finally{q||(R(),I())}};try{const Ie=y(k,Te);Ie&&(U.u=()=>{q=!0;try{Ie()}finally{q=!1}})}finally{q=!1}};o.add(N)}}return U}),H=v[8]||(k=>{var F;const D=O(k);let U=t.get(k);if(U&&!U.l.size&&!Array.from(U.t).some(N=>{var q;return(q=t.get(N))==null?void 0:q.d.has(k)})){U.u&&u.add(U.u),U=void 0,t.delete(k),(F=a.u)==null||F.call(a,k);for(const N of D.d.keys()){const q=H(N);q==null||q.t.delete(k)}return}return U}),z=[e,t,n,s,o,u,a,f,d,m,y,O,I,R,W,L,K,Y,j,H],G={get:k=>Vu(W(k)),set:(k,...F)=>{try{return K(k,...F)}finally{R(),I()}},sub:(k,F)=>{const U=j(k).l;return U.add(F),I(),()=>{U.delete(F),H(k),I()}}};return Object.defineProperty(G,VF,{value:z}),G},zF=HF,Yb=Gb,qh={};let YF=0;function ln(e,t){const n=`atom${++YF}`,s={toString(){return(qh?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof e=="function"?s.read=e:(s.init=e,s.read=XF,s.write=ZF),t&&(s.write=t),s}function XF(e){return e(this)}function ZF(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}const QF=()=>{let e=0;const t=zF({}),n=new WeakMap,s=new WeakMap,o=zb(n,s,void 0,void 0,void 0,void 0,t,void 0,(f,d,m,...y)=>e?m(f,...y):f.write(d,m,...y)),u=new Set;return t.m.add(void 0,f=>{u.add(f);const d=n.get(f);d.m=s.get(f)}),t.u.add(void 0,f=>{u.delete(f);const d=n.get(f);delete d.m}),Object.assign(o,{dev4_get_internal_weak_map:()=>n,dev4_get_mounted_atoms:()=>u,dev4_restore_atoms:f=>{const d={read:()=>null,write:(m,y)=>{++e;try{for(const[v,O]of f)"init"in v&&y(v,O)}finally{--e}}};o.set(d)}})};function eN(){return(qh?"production":void 0)!=="production"?QF():zb()}let Mo;function Xb(){return Mo||(Mo=eN(),(qh?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=Mo),globalThis.__JOTAI_DEFAULT_STORE__!==Mo&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),Mo}const tN={},nN=di.createContext(void 0);function Zb(e){return di.useContext(nN)||Xb()}const Qb=e=>typeof(e==null?void 0:e.then)=="function",rN=e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},iN=Bb.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(rN(e),e)}),Jh=new WeakMap,sN=(e,t)=>{let n=Jh.get(e);return n||(n=new Promise((s,o)=>{let u=e;const a=m=>y=>{u===m&&s(y)},f=m=>y=>{u===m&&o(y)},d=()=>{try{const m=t();Qb(m)?(Jh.set(m,n),u=m,m.then(a(m),f(m)),Yb(m,d)):s(m)}catch(m){o(m)}};e.then(a(e),f(e)),Yb(e,d)}),Jh.set(e,n)),n};function oN(e,t){const n=Zb(),[[s,o,u],a]=di.useReducer(m=>{const y=n.get(e);return Object.is(m[0],y)&&m[1]===n&&m[2]===e?m:[y,n,e]},void 0,()=>[n.get(e),n,e]);let f=s;if((o!==n||u!==e)&&(a(),f=n.get(e)),di.useEffect(()=>{const m=n.sub(e,()=>{a()});return a(),m},[n,e,void 0]),di.useDebugValue(f),Qb(f)){const m=sN(f,()=>n.get(e));return iN(m)}return f}function cN(e,t){const n=Zb();return di.useCallback((...o)=>{if((tN?"production":void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return n.set(e,...o)},[n,e])}const Xu={},uN=Symbol((Xu?"production":void 0)!=="production"?"RESET":""),ev=(e,t,n)=>(t.has(n)?t:t.set(n,e())).get(n),aN=new WeakMap,lN=(e,t,n)=>{const s=ev(()=>new WeakMap,aN,t);return ev(e,s,n)},fN={},tv=e=>!!e.write,hN=e=>typeof e=="function";function dN(e,t){return lN(()=>{const n=new WeakMap,s=(a,f)=>{let d=n.get(a);if(d)return d;const m=f&&n.get(f),y=[],v=[];return a.forEach((O,I)=>{const R=I;v[I]=R;const W=m&&m.atomList[m.keyList.indexOf(R)];if(W){y[I]=W;return}const L=Y=>{const j=Y(o),H=Y(e),G=s(H,j==null?void 0:j.arr).keyList.indexOf(R);if(G<0||G>=H.length){const k=a[s(a).keyList.indexOf(R)];if(k)return k;throw new Error("splitAtom: index out of bounds for read")}return H[G]},K=(Y,j,H)=>{const z=Y(o),G=Y(e),F=s(G,z==null?void 0:z.arr).keyList.indexOf(R);if(F<0||F>=G.length)throw new Error("splitAtom: index out of bounds for write");const D=hN(H)?H(G[F]):H;Object.is(G[F],D)||j(e,[...G.slice(0,F),D,...G.slice(F+1)])};y[I]=tv(e)?ln(L,K):ln(L)}),m&&m.keyList.length===v.length&&m.keyList.every((O,I)=>O===v[I])?d=m:d={arr:a,atomList:y,keyList:v},n.set(a,d),d},o=ln(a=>{const f=a(o),d=a(e);return s(d,f==null?void 0:f.arr)});(Xu?"production":void 0)!=="production"&&(o.debugPrivate=!0),o.init=void 0;const u=tv(e)?ln(a=>a(o).atomList,(a,f,d)=>{switch(d.type){case"remove":{const m=a(u).indexOf(d.atom);if(m>=0){const y=a(e);f(e,[...y.slice(0,m),...y.slice(m+1)])}break}case"insert":{const m=d.before?a(u).indexOf(d.before):a(u).length;if(m>=0){const y=a(e);f(e,[...y.slice(0,m),d.value,...y.slice(m)])}break}case"move":{const m=a(u).indexOf(d.atom),y=d.before?a(u).indexOf(d.before):a(u).length;if(m>=0&&y>=0){const v=a(e);m<y?f(e,[...v.slice(0,m),...v.slice(m+1,y),v[m],...v.slice(y)]):f(e,[...v.slice(0,y),v[m],...v.slice(y,m),...v.slice(m+1)])}break}}}):ln(a=>a(o).atomList);return u},e,fN)}const pN=e=>typeof(e==null?void 0:e.then)=="function";function nv(e=()=>{try{return window.localStorage}catch(n){(Xu?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},t){var n;let s,o;const u={getItem:(d,m)=>{var y,v;const O=R=>{if(R=R||"",s!==R){try{o=JSON.parse(R,t==null?void 0:t.reviver)}catch{return m}s=R}return o},I=(v=(y=e())==null?void 0:y.getItem(d))!=null?v:null;return pN(I)?I.then(O):O(I)},setItem:(d,m)=>{var y;return(y=e())==null?void 0:y.setItem(d,JSON.stringify(m,void 0))},removeItem:d=>{var m;return(m=e())==null?void 0:m.removeItem(d)}},a=d=>(m,y,v)=>d(m,O=>{let I;try{I=JSON.parse(O||"")}catch{I=v}y(I)});let f;try{f=(n=e())==null?void 0:n.subscribe}catch{}return!f&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(f=(d,m)=>{if(!(e()instanceof window.Storage))return()=>{};const y=v=>{v.storageArea===e()&&v.key===d&&m(v.newValue)};return window.addEventListener("storage",y),()=>{window.removeEventListener("storage",y)}}),f&&(u.subscribe=a(f)),u}const gN=nv();function mN(e,t,n=gN,s){const o=s==null?void 0:s.getOnInit,u=ln(o?n.getItem(e,t):t);return(Xu?"production":void 0)!=="production"&&(u.debugPrivate=!0),u.onMount=f=>{f(n.getItem(e,t));let d;return n.subscribe&&(d=n.subscribe(e,f,t)),d},ln(f=>f(u),(f,d,m)=>{const y=typeof m=="function"?m(f(u)):m;return y===uN?(d(u,t),n.removeItem(e)):y instanceof Promise?y.then(v=>(d(u,v),n.setItem(e,v))):(d(u,y),n.setItem(e,y))})}const _N=()=>nv(),yN={atom:(e,t)=>mN(e,t,_N(),{getOnInit:!0})},rv=(e,t,n="mem")=>{const s=n==="mem",o=s?ln(t):yN.atom(e,t),u=new Set,a=new BroadcastChannel(e);let f=t;a.onmessage=y=>{const v=y;v.data.type==="update"?u.forEach(O=>O(v)):v.data.type==="init"&&a.postMessage({type:"update",value:f})};const d=ln(y=>y(o),(y,v,O)=>{v(o,O.value),O.isEvent||(f=y(o),a.postMessage({type:"update",value:f}))});return d.onMount=y=>{const v=O=>{O.data.type==="update"&&y({isEvent:!0,value:O.data.value})};return u.add(v),s&&a.postMessage({type:"init"}),()=>{u.delete(v)}},ln(y=>y(d),(y,v,O)=>{v(d,{isEvent:!1,value:O})})},fr=e=>e,Gh=e=>({_tag:"Left",value:e}),Zu=e=>({_tag:"Right",value:e}),bN=(e,t,n)=>n._tag==="Left"?e(n.value):t(n.value),iv={dimap:(e,t,n)=>s=>t(n(e(s))),first:e=>([t,n])=>[e(t),n],right:e=>t=>t._tag==="Left"?t:Zu(e(t.value)),wander:e=>t=>t.map(e)},vN={empty:()=>{},foldMap:(e,t)=>{for(let n=0;n<t.length;n++){const s=e(t[n]);if(s!=null)return s}}},SN={empty:()=>[],foldMap:(e,t)=>{let n=[];return t.forEach(s=>{n=n.concat(e(s))}),n}},Hh=e=>({dimap:(t,n,s)=>o=>s(t(o)),first:t=>([n,s])=>t(n),right:t=>n=>n._tag==="Left"?e.empty():t(n.value),wander:t=>n=>e.foldMap(t,n)}),Vh={Equivalence:{Equivalence:"Equivalence",Iso:"Iso",Lens:"Lens",Prism:"Prism",Traversal:"Traversal",Getter:"Getter",AffineFold:"AffineFold",Fold:"Fold",Setter:"Setter"},Iso:{Equivalence:"Iso",Iso:"Iso",Lens:"Lens",Prism:"Prism",Traversal:"Traversal",Getter:"Getter",AffineFold:"AffineFold",Fold:"Fold",Setter:"Setter"},Lens:{Equivalence:"Lens",Iso:"Lens",Lens:"Lens",Prism:"Prism",Traversal:"Traversal",Getter:"Getter",AffineFold:"AffineFold",Fold:"Fold",Setter:"Setter"},Prism:{Equivalence:"Prism",Iso:"Prism",Lens:"Prism",Prism:"Prism",Traversal:"Traversal",Getter:"AffineFold",AffineFold:"AffineFold",Fold:"Fold",Setter:"Setter"},Traversal:{Equivalence:"Traversal",Iso:"Traversal",Lens:"Traversal",Prism:"Traversal",Traversal:"Traversal",Getter:"Fold",AffineFold:"Fold",Fold:"Fold",Setter:"Setter"},Getter:{Equivalence:"Getter",Iso:"Getter",Lens:"Getter",Prism:"AffineFold",Traversal:"Fold",Getter:"Getter",AffineFold:"AffineFold",Fold:"Fold",Setter:void 0},AffineFold:{Equivalence:"AffineFold",Iso:"AffineFold",Lens:"AffineFold",Prism:"AffineFold",Traversal:"Fold",Getter:"AffineFold",AffineFold:"AffineFold",Fold:"Fold",Setter:void 0},Fold:{Equivalence:"Fold",Iso:"Fold",Lens:"Fold",Prism:"Fold",Traversal:"Fold",Getter:"Fold",AffineFold:"Fold",Fold:"Fold",Setter:void 0},Setter:{Equivalence:void 0,Iso:void 0,Lens:void 0,Prism:void 0,Traversal:void 0,Getter:void 0,AffineFold:void 0,Fold:void 0,Setter:void 0}},bs=(e,t)=>{const n=t;return n._tag=e,n},sv=e=>(e._removable=!0,e);function Ae(e,t,n){switch(arguments.length){case 2:{const s=(o,u)=>e(o,t(o,u));return s._tag=Vh[e._tag][t._tag],s._removable=t._removable||!1,s}default:{const s=Vh[e._tag][t._tag],o=(u,a)=>e(u,t(u,n(u,a)));return o._tag=Vh[s][n._tag],o._removable=n._removable||!1,o}}}const wN=bs("Equivalence",(e,t)=>t),Qu=(e,t)=>bs("Iso",(n,s)=>n.dimap(e,t,s)),Yt=(e,t)=>bs("Lens",(n,s)=>n.dimap(o=>[e(o),o],t,n.first(s))),zh=(e,t)=>bs("Prism",(n,s)=>n.dimap(e,o=>bN(fr,t,o),n.right(s))),Yh=bs("Traversal",(e,t)=>e.dimap(fr,fr,e.wander(t))),EN=e=>bs("Getter",(t,n)=>t.dimap(e,fr,n)),ov=(e,t,n)=>e(iv,t)(n),ON=(e,t,n)=>e(iv,()=>t)(n),TN=(e,t)=>e(Hh({}),fr)(t),IN=(e,t)=>e(Hh(vN),fr)(t),cv=(e,t)=>e(Hh(SN),n=>[n])(t),AN=Qu(e=>e.map((t,n)=>[n,t]),e=>{const t=[...e].sort((s,o)=>s[0]-o[0]),n=[];for(let s=0;s<t.length;++s)(s===t.length-1||t[s][0]!==t[s+1][0])&&n.push(t[s][1]);return n}),uv=e=>Yt(t=>t[e],([t,n])=>Object.assign(Object.assign({},n),{[e]:t})),RN=e=>Yt(t=>{const n={};for(const s of e)n[s]=t[s];return n},([t,n])=>{const s=Object.assign({},n);for(const o of e)delete s[o];return Object.assign(s,t)}),av=e=>Yt(t=>t[e],([t,n])=>{const s=n.slice();return s[e]=t,s}),Xh=av(0),Zh=e=>zh(t=>e(t)?Zu(t):Gh(t),fr),Fo=Symbol("__no_match__"),lv=Zh(e=>e!==Fo),fv=Symbol("__remove_me__"),Qh=e=>sv(Ae(Yt(t=>0<=e&&e<t.length?t[e]:Fo,([t,n])=>{if(t===Fo)return n;if(t===fv)return typeof n=="string"?n.substring(0,e)+n.substring(e+1):[...n.slice(0,e),...n.slice(e+1)];if(typeof n=="string")return e===0?t+n.substring(1):e===n.length?n.substring(0,e-1)+t:n.substring(0,e)+t+n.substring(e+1);{const s=n.slice();return s[e]=t,s}}),lv)),xN=zh(e=>e===void 0?Gh(void 0):Zu(e),fr),kN=e=>zh(t=>e(t)?Zu(t):Gh(t),fr),CN=e=>sv(Ae(Yt(t=>{const n=t.findIndex(e);return n===-1?[Fo,-1]:[t[n],n]},([[t,n],s])=>{if(t===Fo)return s;if(t===fv)return[...s.slice(0,n),...s.slice(n+1)];const o=s.slice();return o[n]=t,o}),Xh,lv)),$N=e=>Ae(Yt(t=>{const n=t.map((s,o)=>e(s)?o:null).filter(s=>s!=null);return[n.map(s=>t[s]),n]},([[t,n],s])=>{const o=s.length,u=t.length;let a=0,f=0,d=0;const m=[];for(;a<o;)n[f]===a?(++f,d<u&&(m.push(t[d]),++d)):m.push(s[a]),++a;for(;d<u;)m.push(t[d++]);return m}),Xh),PN=e=>Yt(t=>t===void 0?e:t,([t,n])=>t),MN=e=>Ae(Yt(t=>{const n=cv(e,t);return[n,n.length]},([[t,n],s])=>{if(t.length!==n)throw new Error("cannot add/remove elements through partsOf");let o=0;return ov(e,()=>t[o++],s)}),Xh),FN=e=>Yt(t=>e(t),([t,n])=>t),NN=e=>Yt(t=>t,([t,n])=>e(t)),LN=Yt(e=>{},([e,t])=>e===void 0?t:[e,...t]),DN=Yt(e=>{},([e,t])=>e===void 0?t:[...t,e]),UN=Ae(Qu(e=>e.split(""),e=>e.join("")),Yh),KN=Ae(Qu(e=>e.split(/\b/),e=>e.join("")),Yh,Zh(e=>!/\s+/.test(e)));class $e{constructor(t){this._ref=t}get _tag(){return this._ref._tag}get _removable(){return this._ref._removable}compose(t){return new $e(Ae(this._ref,t._ref))}iso(t,n){return new $e(Ae(this._ref,Qu(t,n)))}lens(t,n){return new $e(Ae(this._ref,Yt(t,([s,o])=>n(o,s))))}indexed(){return new $e(Ae(this._ref,AN))}prop(t){return new $e(Ae(this._ref,uv(t)))}path(...t){return t.length===1&&(t=t[0].split(".")),new $e(t.reduce((n,s)=>Ae(n,uv(s)),this._ref))}pick(t){return new $e(Ae(this._ref,RN(t)))}nth(t){return new $e(Ae(this._ref,av(t)))}filter(t){return new $e(Ae(this._ref,$N(t)))}valueOr(t){return new $e(Ae(this._ref,PN(t)))}partsOf(t){const n=typeof t=="function"?t(hv):t;return new $e(Ae(this._ref,MN(n._ref)))}reread(t){return new $e(Ae(this._ref,FN(t)))}rewrite(t){return new $e(Ae(this._ref,NN(t)))}optional(){return new $e(Ae(this._ref,xN))}guard_(){return t=>this.guard(t)}guard(t){return new $e(Ae(this._ref,kN(t)))}at(t){return new $e(Ae(this._ref,Qh(t)))}head(){return new $e(Ae(this._ref,Qh(0)))}index(t){return new $e(Ae(this._ref,Qh(t)))}find(t){return new $e(Ae(this._ref,CN(t)))}elems(){return new $e(Ae(this._ref,Yh))}to(t){return new $e(Ae(this._ref,EN(t)))}when(t){return new $e(Ae(this._ref,Zh(t)))}chars(){return new $e(Ae(this._ref,UN))}words(){return new $e(Ae(this._ref,KN))}prependTo(){return new $e(Ae(this._ref,LN))}appendTo(){return new $e(Ae(this._ref,DN))}}const hv=new $e(wN);function BN(){return hv}function jN(e){return t=>TN(e._ref,t)}function WN(e){return t=>IN(e._ref,t)}function qN(e){return t=>cv(e._ref,t)}function JN(e){return t=>n=>ov(e._ref,t,n)}function GN(e){return t=>n=>ON(e._ref,t,n)}const dv=(e,t,n)=>(t.has(n)?t:t.set(n,e())).get(n),HN=new WeakMap,VN=(e,t,n)=>{const s=dv(()=>new WeakMap,HN,t);return dv(e,s,n)},zN=e=>typeof e=="function";function YN(e,t){return VN(()=>{const n=t(BN());return ln(o=>{const u=o(e);return u instanceof Promise?u.then(a=>pv(n,a)):pv(n,u)},(o,u,a)=>{const f=zN(a)?JN(n)(a):GN(n)(a),d=o(e);return u(e,d instanceof Promise?d.then(f):f(d))})},e,t)}const pv=(e,t)=>e._tag==="Traversal"?qN(e)(t):e._tag==="Prism"?WN(e)(t):jN(e)(t),ea=Xb(),No=e=>{const t=()=>ea.get(e),n=v=>{ea.set(e,v)};let s;const o=v=>{ea.sub(e,()=>{s!==void 0&&s();const O=v(t());typeof O=="function"&&(s=O)})},u=()=>oN(e),a=()=>cN(e),f=()=>[u(),a()],d=v=>No(YN(e,v));return{get:t,set:n,sub:o,useValue:u,useSet:a,use:f,focus:d,useFocusMemo:v=>{const O=u();return Bb.useMemo(()=>d(v),[O])},array:()=>{const v=e;return ea.get(dN(v)).map(O=>No(O))}}},Dt={mem:(e,t)=>No(rv(e,t)),memSingle:(e,t)=>No(ln(t)),storage:(e,t)=>No(rv(e,t,"storage"))},gv=_s({label:ms,key:ms,abletonProject:hF(ms),style:_s({accent:_s({color1:ms,color2:ms})})});_s({projects:cF(gv)});const mv=()=>({label:"Default",key:"default",style:{accent:{color1:"#6a11cb",color2:"#2575fc"}}}),XN={Schema:gv,defaultProjectConfig:mv,defaultProjectsConfig:()=>({projects:[mv()]})},He={initArrangement:Dt.mem("init-arrangement",[]),importStatus:Dt.mem("import-status",{type:"none"}),project:{config:Dt.storage("projects-config",XN.defaultProjectsConfig()),active:Dt.storage("active-project","default"),abletonName:Dt.mem("ableton-name",void 0),arrangement:Dt.mem("arrangement",wF())},realTime:{beats:Dt.mem("real-time-beats",0),barBeats:Dt.mem("real-time-bar-beats",1),timeSignature:Dt.mem("real-time-time-signature",{noteCount:4,noteLength:4}),tempo:Dt.mem("real-time-tempo",0),isPlaying:Dt.mem("real-time-is-playing",!1),metronomeState:Dt.mem("real-time-metronome-state",!1),loopState:Dt.mem("real-time-loop-state",!1),halfBeat:Dt.mem("real-time-half-beat",!1)}},ZN=e=>{const t=n=>{if(n.type==="init-ack")He.importStatus.set({type:"ack",projectName:n.projectName}),He.project.abletonName.set(n.projectName);else if(n.type==="init-project")He.importStatus.set({type:"importing"}),He.initArrangement.set(TF());else if(n.type==="init-track")He.initArrangement.set(IF(n));else if(n.type==="init-clip")He.initArrangement.set(AF(n));else if(n.type==="init-cue")He.initArrangement.set(RF(n));else if(n.type==="init-done"){He.importStatus.set({type:"finalizing"});const s=xF(He.initArrangement.get());He.project.arrangement.set(s),He.importStatus.set({type:"done"})}else n.type==="beat"?He.realTime.beats.set(n.value):n.type==="sig"?He.realTime.timeSignature.set({noteCount:n.numer,noteLength:n.denom}):n.type==="bar-beat"?He.realTime.barBeats.set(n.value):n.type==="tempo"?He.realTime.tempo.set(n.value):n.type==="is-playing"?He.realTime.isPlaying.set(n.value):n.type==="metronome-state"?He.realTime.metronomeState.set(n.value):n.type==="loop-state"?He.realTime.loopState.set(n.value):n.type==="half-beat"&&He.realTime.halfBeat.set(n.isHalf)};e.on("sysex",n=>{const s=oE(n);s!==void 0&&t(s)})},QN=e=>{e.emit(bn.init()),He.importStatus.sub(t=>{t.type==="ack"&&e.emit(bn.initReady(["Songs","Parts","Chris Keyboard"]))})},eL={init:(e,t)=>{console.log("Project Main"),He.project.active.sub(n=>{console.log("active project",n)}),ZN(e),QN(t)}};console.log("Loading Project Worker Main");const _v=Mp(),yv=Mp();onmessage=e=>{we.isArray(e.data)&&e.data.length==2&&e.data[0]==="DAW_LISTENER"&&_v.emit(e.data[1])},yv.on("*",e=>postMessage(["DAW_EMITTER",e])),eL.init(_v,yv)})();
