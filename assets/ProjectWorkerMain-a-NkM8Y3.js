var Lj=Object.defineProperty;var U1=Pe=>{throw TypeError(Pe)};var Dj=(Pe,Ue,nt)=>Ue in Pe?Lj(Pe,Ue,{enumerable:!0,configurable:!0,writable:!0,value:nt}):Pe[Ue]=nt;var p=(Pe,Ue,nt)=>Dj(Pe,typeof Ue!="symbol"?Ue+"":Ue,nt),K1=(Pe,Ue,nt)=>Ue.has(Pe)||U1("Cannot "+nt);var B1=(Pe,Ue,nt)=>(K1(Pe,Ue,"read from private field"),nt?nt.call(Pe):Ue.get(Pe)),j1=(Pe,Ue,nt)=>Ue.has(Pe)?U1("Cannot add the same private member more than once"):Ue instanceof WeakSet?Ue.add(Pe):Ue.set(Pe,nt),W1=(Pe,Ue,nt,Qn)=>(K1(Pe,Ue,"write to private field"),Qn?Qn.call(Pe,nt):Ue.set(Pe,nt),nt);(function(){"use strict";var No,fr,_v,yv,bv,vv,Sv,wv,Ev,Ov,Tv,Iv,Av,Rv,xv,kv,Cv,$v,Pv,Mv,Fv,Nv,Lv,Dv,Uv,Kv,Bv,jv,Wv,qv,Jv,Gv,Hv,Vv,zv,Yv,Xv,Zv,Qv,eS,tS,nS,rS,iS,sS,oS,cS;var Pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ue(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var nt={exports:{}},Qn=typeof Reflect=="object"?Reflect:null,Op=Qn&&typeof Qn.apply=="function"?Qn.apply:function(t,n,s){return Function.prototype.apply.call(t,n,s)},sc;Qn&&typeof Qn.ownKeys=="function"?sc=Qn.ownKeys:Object.getOwnPropertySymbols?sc=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:sc=function(t){return Object.getOwnPropertyNames(t)};function J1(e){console&&console.warn&&console.warn(e)}var Tp=Number.isNaN||function(t){return t!==t};function Ce(){Ce.init.call(this)}nt.exports=Ce,nt.exports.once=z1,Ce.EventEmitter=Ce,Ce.prototype._events=void 0,Ce.prototype._eventsCount=0,Ce.prototype._maxListeners=void 0;var Ip=10;function oc(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Ce,"defaultMaxListeners",{enumerable:!0,get:function(){return Ip},set:function(e){if(typeof e!="number"||e<0||Tp(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Ip=e}}),Ce.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Ce.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Tp(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Ap(e){return e._maxListeners===void 0?Ce.defaultMaxListeners:e._maxListeners}Ce.prototype.getMaxListeners=function(){return Ap(this)},Ce.prototype.emit=function(t){for(var n=[],s=1;s<arguments.length;s++)n.push(arguments[s]);var o=t==="error",u=this._events;if(u!==void 0)o=o&&u.error===void 0;else if(!o)return!1;if(o){var l;if(n.length>0&&(l=n[0]),l instanceof Error)throw l;var h=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw h.context=l,h}var d=u[t];if(d===void 0)return!1;if(typeof d=="function")Op(d,this,n);else for(var _=d.length,b=$p(d,_),s=0;s<_;++s)Op(b[s],this,n);return!0};function Rp(e,t,n,s){var o,u,l;if(oc(n),u=e._events,u===void 0?(u=e._events=Object.create(null),e._eventsCount=0):(u.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),u=e._events),l=u[t]),l===void 0)l=u[t]=n,++e._eventsCount;else if(typeof l=="function"?l=u[t]=s?[n,l]:[l,n]:s?l.unshift(n):l.push(n),o=Ap(e),o>0&&l.length>o&&!l.warned){l.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=e,h.type=t,h.count=l.length,J1(h)}return e}Ce.prototype.addListener=function(t,n){return Rp(this,t,n,!1)},Ce.prototype.on=Ce.prototype.addListener,Ce.prototype.prependListener=function(t,n){return Rp(this,t,n,!0)};function G1(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function xp(e,t,n){var s={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=G1.bind(s);return o.listener=n,s.wrapFn=o,o}Ce.prototype.once=function(t,n){return oc(n),this.on(t,xp(this,t,n)),this},Ce.prototype.prependOnceListener=function(t,n){return oc(n),this.prependListener(t,xp(this,t,n)),this},Ce.prototype.removeListener=function(t,n){var s,o,u,l,h;if(oc(n),o=this._events,o===void 0)return this;if(s=o[t],s===void 0)return this;if(s===n||s.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete o[t],o.removeListener&&this.emit("removeListener",t,s.listener||n));else if(typeof s!="function"){for(u=-1,l=s.length-1;l>=0;l--)if(s[l]===n||s[l].listener===n){h=s[l].listener,u=l;break}if(u<0)return this;u===0?s.shift():H1(s,u),s.length===1&&(o[t]=s[0]),o.removeListener!==void 0&&this.emit("removeListener",t,h||n)}return this},Ce.prototype.off=Ce.prototype.removeListener,Ce.prototype.removeAllListeners=function(t){var n,s,o;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[t]),this;if(arguments.length===0){var u=Object.keys(s),l;for(o=0;o<u.length;++o)l=u[o],l!=="removeListener"&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=s[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(o=n.length-1;o>=0;o--)this.removeListener(t,n[o]);return this};function kp(e,t,n){var s=e._events;if(s===void 0)return[];var o=s[t];return o===void 0?[]:typeof o=="function"?n?[o.listener||o]:[o]:n?V1(o):$p(o,o.length)}Ce.prototype.listeners=function(t){return kp(this,t,!0)},Ce.prototype.rawListeners=function(t){return kp(this,t,!1)},Ce.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Cp.call(e,t)},Ce.prototype.listenerCount=Cp;function Cp(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Ce.prototype.eventNames=function(){return this._eventsCount>0?sc(this._events):[]};function $p(e,t){for(var n=new Array(t),s=0;s<t;++s)n[s]=e[s];return n}function H1(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function V1(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function z1(e,t){return new Promise(function(n,s){function o(l){e.removeListener(t,u),s(l)}function u(){typeof e.removeListener=="function"&&e.removeListener("error",o),n([].slice.call(arguments))}Pp(e,t,u,{once:!0}),t!=="error"&&Y1(e,o,{once:!0})})}function Y1(e,t,n){typeof e.on=="function"&&Pp(e,"error",t,n)}function Pp(e,t,n,s){if(typeof e.on=="function")s.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function o(u){s.once&&e.removeEventListener(t,o),n(u)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var X1=nt.exports;const Mp=()=>Z1(new X1.EventEmitter),Z1=e=>({on:(t,n)=>(e.on(t,n),()=>{e.off(t,n)}),emit:t=>{e.emit("*",t),e.emit(t.type,t)}});var cc={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */cc.exports,function(e,t){(function(){var n,s="4.17.21",o=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",h="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",_=500,b="__lodash_placeholder__",S=1,T=2,I=4,x=1,W=2,L=1,K=2,ee=4,q=8,H=16,V=32,Y=64,C=128,N=256,D=512,U=30,F="...",j=800,Te=16,Ie=1,ct=2,je=3,ne=1/0,He=9007199254740991,kn=17976931348623157e292,hr=NaN,Ot=4294967295,zN=Ot-1,YN=Ot>>>1,XN=[["ary",C],["bind",L],["bindKey",K],["curry",q],["curryRight",H],["flip",D],["partial",V],["partialRight",Y],["rearg",N]],vs="[object Arguments]",Qu="[object Array]",ZN="[object AsyncFunction]",Lo="[object Boolean]",Do="[object Date]",QN="[object DOMException]",ea="[object Error]",ta="[object Function]",uS="[object GeneratorFunction]",Cn="[object Map]",Uo="[object Number]",eL="[object Null]",dr="[object Object]",aS="[object Promise]",tL="[object Proxy]",Ko="[object RegExp]",$n="[object Set]",Bo="[object String]",na="[object Symbol]",nL="[object Undefined]",jo="[object WeakMap]",rL="[object WeakSet]",Wo="[object ArrayBuffer]",Ss="[object DataView]",rd="[object Float32Array]",id="[object Float64Array]",sd="[object Int8Array]",od="[object Int16Array]",cd="[object Int32Array]",ud="[object Uint8Array]",ad="[object Uint8ClampedArray]",ld="[object Uint16Array]",fd="[object Uint32Array]",iL=/\b__p \+= '';/g,sL=/\b(__p \+=) '' \+/g,oL=/(__e\(.*?\)|\b__t\)) \+\n'';/g,lS=/&(?:amp|lt|gt|quot|#39);/g,fS=/[&<>"']/g,cL=RegExp(lS.source),uL=RegExp(fS.source),aL=/<%-([\s\S]+?)%>/g,lL=/<%([\s\S]+?)%>/g,hS=/<%=([\s\S]+?)%>/g,fL=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,hL=/^\w*$/,dL=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hd=/[\\^$.*+?()[\]{}|]/g,pL=RegExp(hd.source),dd=/^\s+/,gL=/\s/,mL=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,_L=/\{\n\/\* \[wrapped with (.+)\] \*/,yL=/,? & /,bL=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,vL=/[()=,{}\[\]\/\s]/,SL=/\\(\\)?/g,wL=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dS=/\w*$/,EL=/^[-+]0x[0-9a-f]+$/i,OL=/^0b[01]+$/i,TL=/^\[object .+?Constructor\]$/,IL=/^0o[0-7]+$/i,AL=/^(?:0|[1-9]\d*)$/,RL=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ra=/($^)/,xL=/['\n\r\u2028\u2029\\]/g,ia="\\ud800-\\udfff",kL="\\u0300-\\u036f",CL="\\ufe20-\\ufe2f",$L="\\u20d0-\\u20ff",pS=kL+CL+$L,gS="\\u2700-\\u27bf",mS="a-z\\xdf-\\xf6\\xf8-\\xff",PL="\\xac\\xb1\\xd7\\xf7",ML="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",FL="\\u2000-\\u206f",NL=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",_S="A-Z\\xc0-\\xd6\\xd8-\\xde",yS="\\ufe0e\\ufe0f",bS=PL+ML+FL+NL,pd="['’]",LL="["+ia+"]",vS="["+bS+"]",sa="["+pS+"]",SS="\\d+",DL="["+gS+"]",wS="["+mS+"]",ES="[^"+ia+bS+SS+gS+mS+_S+"]",gd="\\ud83c[\\udffb-\\udfff]",UL="(?:"+sa+"|"+gd+")",OS="[^"+ia+"]",md="(?:\\ud83c[\\udde6-\\uddff]){2}",_d="[\\ud800-\\udbff][\\udc00-\\udfff]",ws="["+_S+"]",TS="\\u200d",IS="(?:"+wS+"|"+ES+")",KL="(?:"+ws+"|"+ES+")",AS="(?:"+pd+"(?:d|ll|m|re|s|t|ve))?",RS="(?:"+pd+"(?:D|LL|M|RE|S|T|VE))?",xS=UL+"?",kS="["+yS+"]?",BL="(?:"+TS+"(?:"+[OS,md,_d].join("|")+")"+kS+xS+")*",jL="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",WL="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",CS=kS+xS+BL,qL="(?:"+[DL,md,_d].join("|")+")"+CS,JL="(?:"+[OS+sa+"?",sa,md,_d,LL].join("|")+")",GL=RegExp(pd,"g"),HL=RegExp(sa,"g"),yd=RegExp(gd+"(?="+gd+")|"+JL+CS,"g"),VL=RegExp([ws+"?"+wS+"+"+AS+"(?="+[vS,ws,"$"].join("|")+")",KL+"+"+RS+"(?="+[vS,ws+IS,"$"].join("|")+")",ws+"?"+IS+"+"+AS,ws+"+"+RS,WL,jL,SS,qL].join("|"),"g"),zL=RegExp("["+TS+ia+pS+yS+"]"),YL=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,XL=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ZL=-1,Le={};Le[rd]=Le[id]=Le[sd]=Le[od]=Le[cd]=Le[ud]=Le[ad]=Le[ld]=Le[fd]=!0,Le[vs]=Le[Qu]=Le[Wo]=Le[Lo]=Le[Ss]=Le[Do]=Le[ea]=Le[ta]=Le[Cn]=Le[Uo]=Le[dr]=Le[Ko]=Le[$n]=Le[Bo]=Le[jo]=!1;var Fe={};Fe[vs]=Fe[Qu]=Fe[Wo]=Fe[Ss]=Fe[Lo]=Fe[Do]=Fe[rd]=Fe[id]=Fe[sd]=Fe[od]=Fe[cd]=Fe[Cn]=Fe[Uo]=Fe[dr]=Fe[Ko]=Fe[$n]=Fe[Bo]=Fe[na]=Fe[ud]=Fe[ad]=Fe[ld]=Fe[fd]=!0,Fe[ea]=Fe[ta]=Fe[jo]=!1;var QL={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},eD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tD={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},nD={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},rD=parseFloat,iD=parseInt,$S=typeof Pe=="object"&&Pe&&Pe.Object===Object&&Pe,sD=typeof self=="object"&&self&&self.Object===Object&&self,yt=$S||sD||Function("return this")(),bd=t&&!t.nodeType&&t,pi=bd&&!0&&e&&!e.nodeType&&e,PS=pi&&pi.exports===bd,vd=PS&&$S.process,ln=function(){try{var w=pi&&pi.require&&pi.require("util").types;return w||vd&&vd.binding&&vd.binding("util")}catch{}}(),MS=ln&&ln.isArrayBuffer,FS=ln&&ln.isDate,NS=ln&&ln.isMap,LS=ln&&ln.isRegExp,DS=ln&&ln.isSet,US=ln&&ln.isTypedArray;function Xt(w,R,A){switch(A.length){case 0:return w.call(R);case 1:return w.call(R,A[0]);case 2:return w.call(R,A[0],A[1]);case 3:return w.call(R,A[0],A[1],A[2])}return w.apply(R,A)}function oD(w,R,A,J){for(var ie=-1,Re=w==null?0:w.length;++ie<Re;){var ut=w[ie];R(J,ut,A(ut),w)}return J}function fn(w,R){for(var A=-1,J=w==null?0:w.length;++A<J&&R(w[A],A,w)!==!1;);return w}function cD(w,R){for(var A=w==null?0:w.length;A--&&R(w[A],A,w)!==!1;);return w}function KS(w,R){for(var A=-1,J=w==null?0:w.length;++A<J;)if(!R(w[A],A,w))return!1;return!0}function Cr(w,R){for(var A=-1,J=w==null?0:w.length,ie=0,Re=[];++A<J;){var ut=w[A];R(ut,A,w)&&(Re[ie++]=ut)}return Re}function oa(w,R){var A=w==null?0:w.length;return!!A&&Es(w,R,0)>-1}function Sd(w,R,A){for(var J=-1,ie=w==null?0:w.length;++J<ie;)if(A(R,w[J]))return!0;return!1}function De(w,R){for(var A=-1,J=w==null?0:w.length,ie=Array(J);++A<J;)ie[A]=R(w[A],A,w);return ie}function $r(w,R){for(var A=-1,J=R.length,ie=w.length;++A<J;)w[ie+A]=R[A];return w}function wd(w,R,A,J){var ie=-1,Re=w==null?0:w.length;for(J&&Re&&(A=w[++ie]);++ie<Re;)A=R(A,w[ie],ie,w);return A}function uD(w,R,A,J){var ie=w==null?0:w.length;for(J&&ie&&(A=w[--ie]);ie--;)A=R(A,w[ie],ie,w);return A}function Ed(w,R){for(var A=-1,J=w==null?0:w.length;++A<J;)if(R(w[A],A,w))return!0;return!1}var aD=Od("length");function lD(w){return w.split("")}function fD(w){return w.match(bL)||[]}function BS(w,R,A){var J;return A(w,function(ie,Re,ut){if(R(ie,Re,ut))return J=Re,!1}),J}function ca(w,R,A,J){for(var ie=w.length,Re=A+(J?1:-1);J?Re--:++Re<ie;)if(R(w[Re],Re,w))return Re;return-1}function Es(w,R,A){return R===R?ED(w,R,A):ca(w,jS,A)}function hD(w,R,A,J){for(var ie=A-1,Re=w.length;++ie<Re;)if(J(w[ie],R))return ie;return-1}function jS(w){return w!==w}function WS(w,R){var A=w==null?0:w.length;return A?Id(w,R)/A:hr}function Od(w){return function(R){return R==null?n:R[w]}}function Td(w){return function(R){return w==null?n:w[R]}}function qS(w,R,A,J,ie){return ie(w,function(Re,ut,Me){A=J?(J=!1,Re):R(A,Re,ut,Me)}),A}function dD(w,R){var A=w.length;for(w.sort(R);A--;)w[A]=w[A].value;return w}function Id(w,R){for(var A,J=-1,ie=w.length;++J<ie;){var Re=R(w[J]);Re!==n&&(A=A===n?Re:A+Re)}return A}function Ad(w,R){for(var A=-1,J=Array(w);++A<w;)J[A]=R(A);return J}function pD(w,R){return De(R,function(A){return[A,w[A]]})}function JS(w){return w&&w.slice(0,zS(w)+1).replace(dd,"")}function Zt(w){return function(R){return w(R)}}function Rd(w,R){return De(R,function(A){return w[A]})}function qo(w,R){return w.has(R)}function GS(w,R){for(var A=-1,J=w.length;++A<J&&Es(R,w[A],0)>-1;);return A}function HS(w,R){for(var A=w.length;A--&&Es(R,w[A],0)>-1;);return A}function gD(w,R){for(var A=w.length,J=0;A--;)w[A]===R&&++J;return J}var mD=Td(QL),_D=Td(eD);function yD(w){return"\\"+nD[w]}function bD(w,R){return w==null?n:w[R]}function Os(w){return zL.test(w)}function vD(w){return YL.test(w)}function SD(w){for(var R,A=[];!(R=w.next()).done;)A.push(R.value);return A}function xd(w){var R=-1,A=Array(w.size);return w.forEach(function(J,ie){A[++R]=[ie,J]}),A}function VS(w,R){return function(A){return w(R(A))}}function Pr(w,R){for(var A=-1,J=w.length,ie=0,Re=[];++A<J;){var ut=w[A];(ut===R||ut===b)&&(w[A]=b,Re[ie++]=A)}return Re}function ua(w){var R=-1,A=Array(w.size);return w.forEach(function(J){A[++R]=J}),A}function wD(w){var R=-1,A=Array(w.size);return w.forEach(function(J){A[++R]=[J,J]}),A}function ED(w,R,A){for(var J=A-1,ie=w.length;++J<ie;)if(w[J]===R)return J;return-1}function OD(w,R,A){for(var J=A+1;J--;)if(w[J]===R)return J;return J}function Ts(w){return Os(w)?ID(w):aD(w)}function Pn(w){return Os(w)?AD(w):lD(w)}function zS(w){for(var R=w.length;R--&&gL.test(w.charAt(R)););return R}var TD=Td(tD);function ID(w){for(var R=yd.lastIndex=0;yd.test(w);)++R;return R}function AD(w){return w.match(yd)||[]}function RD(w){return w.match(VL)||[]}var xD=function w(R){R=R==null?yt:Is.defaults(yt.Object(),R,Is.pick(yt,XL));var A=R.Array,J=R.Date,ie=R.Error,Re=R.Function,ut=R.Math,Me=R.Object,kd=R.RegExp,kD=R.String,hn=R.TypeError,aa=A.prototype,CD=Re.prototype,As=Me.prototype,la=R["__core-js_shared__"],fa=CD.toString,ke=As.hasOwnProperty,$D=0,YS=function(){var r=/[^.]+$/.exec(la&&la.keys&&la.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),ha=As.toString,PD=fa.call(Me),MD=yt._,FD=kd("^"+fa.call(ke).replace(hd,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),da=PS?R.Buffer:n,Mr=R.Symbol,pa=R.Uint8Array,XS=da?da.allocUnsafe:n,ga=VS(Me.getPrototypeOf,Me),ZS=Me.create,QS=As.propertyIsEnumerable,ma=aa.splice,ew=Mr?Mr.isConcatSpreadable:n,Jo=Mr?Mr.iterator:n,gi=Mr?Mr.toStringTag:n,_a=function(){try{var r=vi(Me,"defineProperty");return r({},"",{}),r}catch{}}(),ND=R.clearTimeout!==yt.clearTimeout&&R.clearTimeout,LD=J&&J.now!==yt.Date.now&&J.now,DD=R.setTimeout!==yt.setTimeout&&R.setTimeout,ya=ut.ceil,ba=ut.floor,Cd=Me.getOwnPropertySymbols,UD=da?da.isBuffer:n,tw=R.isFinite,KD=aa.join,BD=VS(Me.keys,Me),at=ut.max,Tt=ut.min,jD=J.now,WD=R.parseInt,nw=ut.random,qD=aa.reverse,$d=vi(R,"DataView"),Go=vi(R,"Map"),Pd=vi(R,"Promise"),Rs=vi(R,"Set"),Ho=vi(R,"WeakMap"),Vo=vi(Me,"create"),va=Ho&&new Ho,xs={},JD=Si($d),GD=Si(Go),HD=Si(Pd),VD=Si(Rs),zD=Si(Ho),Sa=Mr?Mr.prototype:n,zo=Sa?Sa.valueOf:n,rw=Sa?Sa.toString:n;function g(r){if(Je(r)&&!oe(r)&&!(r instanceof ye)){if(r instanceof dn)return r;if(ke.call(r,"__wrapped__"))return i1(r)}return new dn(r)}var ks=function(){function r(){}return function(i){if(!We(i))return{};if(ZS)return ZS(i);r.prototype=i;var c=new r;return r.prototype=n,c}}();function wa(){}function dn(r,i){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=n}g.templateSettings={escape:aL,evaluate:lL,interpolate:hS,variable:"",imports:{_:g}},g.prototype=wa.prototype,g.prototype.constructor=g,dn.prototype=ks(wa.prototype),dn.prototype.constructor=dn;function ye(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ot,this.__views__=[]}function YD(){var r=new ye(this.__wrapped__);return r.__actions__=Ut(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=Ut(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=Ut(this.__views__),r}function XD(){if(this.__filtered__){var r=new ye(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function ZD(){var r=this.__wrapped__.value(),i=this.__dir__,c=oe(r),a=i<0,f=c?r.length:0,m=lK(0,f,this.__views__),y=m.start,v=m.end,E=v-y,k=a?v:y-1,$=this.__iteratees__,M=$.length,B=0,G=Tt(E,this.__takeCount__);if(!c||!a&&f==E&&G==E)return Aw(r,this.__actions__);var Z=[];e:for(;E--&&B<G;){k+=i;for(var he=-1,Q=r[k];++he<M;){var _e=$[he],ve=_e.iteratee,tn=_e.type,$t=ve(Q);if(tn==ct)Q=$t;else if(!$t){if(tn==Ie)continue e;break e}}Z[B++]=Q}return Z}ye.prototype=ks(wa.prototype),ye.prototype.constructor=ye;function mi(r){var i=-1,c=r==null?0:r.length;for(this.clear();++i<c;){var a=r[i];this.set(a[0],a[1])}}function QD(){this.__data__=Vo?Vo(null):{},this.size=0}function eU(r){var i=this.has(r)&&delete this.__data__[r];return this.size-=i?1:0,i}function tU(r){var i=this.__data__;if(Vo){var c=i[r];return c===d?n:c}return ke.call(i,r)?i[r]:n}function nU(r){var i=this.__data__;return Vo?i[r]!==n:ke.call(i,r)}function rU(r,i){var c=this.__data__;return this.size+=this.has(r)?0:1,c[r]=Vo&&i===n?d:i,this}mi.prototype.clear=QD,mi.prototype.delete=eU,mi.prototype.get=tU,mi.prototype.has=nU,mi.prototype.set=rU;function pr(r){var i=-1,c=r==null?0:r.length;for(this.clear();++i<c;){var a=r[i];this.set(a[0],a[1])}}function iU(){this.__data__=[],this.size=0}function sU(r){var i=this.__data__,c=Ea(i,r);if(c<0)return!1;var a=i.length-1;return c==a?i.pop():ma.call(i,c,1),--this.size,!0}function oU(r){var i=this.__data__,c=Ea(i,r);return c<0?n:i[c][1]}function cU(r){return Ea(this.__data__,r)>-1}function uU(r,i){var c=this.__data__,a=Ea(c,r);return a<0?(++this.size,c.push([r,i])):c[a][1]=i,this}pr.prototype.clear=iU,pr.prototype.delete=sU,pr.prototype.get=oU,pr.prototype.has=cU,pr.prototype.set=uU;function gr(r){var i=-1,c=r==null?0:r.length;for(this.clear();++i<c;){var a=r[i];this.set(a[0],a[1])}}function aU(){this.size=0,this.__data__={hash:new mi,map:new(Go||pr),string:new mi}}function lU(r){var i=Fa(this,r).delete(r);return this.size-=i?1:0,i}function fU(r){return Fa(this,r).get(r)}function hU(r){return Fa(this,r).has(r)}function dU(r,i){var c=Fa(this,r),a=c.size;return c.set(r,i),this.size+=c.size==a?0:1,this}gr.prototype.clear=aU,gr.prototype.delete=lU,gr.prototype.get=fU,gr.prototype.has=hU,gr.prototype.set=dU;function _i(r){var i=-1,c=r==null?0:r.length;for(this.__data__=new gr;++i<c;)this.add(r[i])}function pU(r){return this.__data__.set(r,d),this}function gU(r){return this.__data__.has(r)}_i.prototype.add=_i.prototype.push=pU,_i.prototype.has=gU;function Mn(r){var i=this.__data__=new pr(r);this.size=i.size}function mU(){this.__data__=new pr,this.size=0}function _U(r){var i=this.__data__,c=i.delete(r);return this.size=i.size,c}function yU(r){return this.__data__.get(r)}function bU(r){return this.__data__.has(r)}function vU(r,i){var c=this.__data__;if(c instanceof pr){var a=c.__data__;if(!Go||a.length<o-1)return a.push([r,i]),this.size=++c.size,this;c=this.__data__=new gr(a)}return c.set(r,i),this.size=c.size,this}Mn.prototype.clear=mU,Mn.prototype.delete=_U,Mn.prototype.get=yU,Mn.prototype.has=bU,Mn.prototype.set=vU;function iw(r,i){var c=oe(r),a=!c&&wi(r),f=!c&&!a&&Ur(r),m=!c&&!a&&!f&&Ms(r),y=c||a||f||m,v=y?Ad(r.length,kD):[],E=v.length;for(var k in r)(i||ke.call(r,k))&&!(y&&(k=="length"||f&&(k=="offset"||k=="parent")||m&&(k=="buffer"||k=="byteLength"||k=="byteOffset")||br(k,E)))&&v.push(k);return v}function sw(r){var i=r.length;return i?r[qd(0,i-1)]:n}function SU(r,i){return Na(Ut(r),yi(i,0,r.length))}function wU(r){return Na(Ut(r))}function Md(r,i,c){(c!==n&&!Fn(r[i],c)||c===n&&!(i in r))&&mr(r,i,c)}function Yo(r,i,c){var a=r[i];(!(ke.call(r,i)&&Fn(a,c))||c===n&&!(i in r))&&mr(r,i,c)}function Ea(r,i){for(var c=r.length;c--;)if(Fn(r[c][0],i))return c;return-1}function EU(r,i,c,a){return Fr(r,function(f,m,y){i(a,f,c(f),y)}),a}function ow(r,i){return r&&Xn(i,dt(i),r)}function OU(r,i){return r&&Xn(i,Bt(i),r)}function mr(r,i,c){i=="__proto__"&&_a?_a(r,i,{configurable:!0,enumerable:!0,value:c,writable:!0}):r[i]=c}function Fd(r,i){for(var c=-1,a=i.length,f=A(a),m=r==null;++c<a;)f[c]=m?n:gp(r,i[c]);return f}function yi(r,i,c){return r===r&&(c!==n&&(r=r<=c?r:c),i!==n&&(r=r>=i?r:i)),r}function pn(r,i,c,a,f,m){var y,v=i&S,E=i&T,k=i&I;if(c&&(y=f?c(r,a,f,m):c(r)),y!==n)return y;if(!We(r))return r;var $=oe(r);if($){if(y=hK(r),!v)return Ut(r,y)}else{var M=It(r),B=M==ta||M==uS;if(Ur(r))return kw(r,v);if(M==dr||M==vs||B&&!f){if(y=E||B?{}:zw(r),!v)return E?tK(r,OU(y,r)):eK(r,ow(y,r))}else{if(!Fe[M])return f?r:{};y=dK(r,M,v)}}m||(m=new Mn);var G=m.get(r);if(G)return G;m.set(r,y),O1(r)?r.forEach(function(Q){y.add(pn(Q,i,c,Q,r,m))}):w1(r)&&r.forEach(function(Q,_e){y.set(_e,pn(Q,i,c,_e,r,m))});var Z=k?E?tp:ep:E?Bt:dt,he=$?n:Z(r);return fn(he||r,function(Q,_e){he&&(_e=Q,Q=r[_e]),Yo(y,_e,pn(Q,i,c,_e,r,m))}),y}function TU(r){var i=dt(r);return function(c){return cw(c,r,i)}}function cw(r,i,c){var a=c.length;if(r==null)return!a;for(r=Me(r);a--;){var f=c[a],m=i[f],y=r[f];if(y===n&&!(f in r)||!m(y))return!1}return!0}function uw(r,i,c){if(typeof r!="function")throw new hn(l);return rc(function(){r.apply(n,c)},i)}function Xo(r,i,c,a){var f=-1,m=oa,y=!0,v=r.length,E=[],k=i.length;if(!v)return E;c&&(i=De(i,Zt(c))),a?(m=Sd,y=!1):i.length>=o&&(m=qo,y=!1,i=new _i(i));e:for(;++f<v;){var $=r[f],M=c==null?$:c($);if($=a||$!==0?$:0,y&&M===M){for(var B=k;B--;)if(i[B]===M)continue e;E.push($)}else m(i,M,a)||E.push($)}return E}var Fr=Fw(Yn),aw=Fw(Ld,!0);function IU(r,i){var c=!0;return Fr(r,function(a,f,m){return c=!!i(a,f,m),c}),c}function Oa(r,i,c){for(var a=-1,f=r.length;++a<f;){var m=r[a],y=i(m);if(y!=null&&(v===n?y===y&&!en(y):c(y,v)))var v=y,E=m}return E}function AU(r,i,c,a){var f=r.length;for(c=ae(c),c<0&&(c=-c>f?0:f+c),a=a===n||a>f?f:ae(a),a<0&&(a+=f),a=c>a?0:I1(a);c<a;)r[c++]=i;return r}function lw(r,i){var c=[];return Fr(r,function(a,f,m){i(a,f,m)&&c.push(a)}),c}function bt(r,i,c,a,f){var m=-1,y=r.length;for(c||(c=gK),f||(f=[]);++m<y;){var v=r[m];i>0&&c(v)?i>1?bt(v,i-1,c,a,f):$r(f,v):a||(f[f.length]=v)}return f}var Nd=Nw(),fw=Nw(!0);function Yn(r,i){return r&&Nd(r,i,dt)}function Ld(r,i){return r&&fw(r,i,dt)}function Ta(r,i){return Cr(i,function(c){return vr(r[c])})}function bi(r,i){i=Lr(i,r);for(var c=0,a=i.length;r!=null&&c<a;)r=r[Zn(i[c++])];return c&&c==a?r:n}function hw(r,i,c){var a=i(r);return oe(r)?a:$r(a,c(r))}function kt(r){return r==null?r===n?nL:eL:gi&&gi in Me(r)?aK(r):wK(r)}function Dd(r,i){return r>i}function RU(r,i){return r!=null&&ke.call(r,i)}function xU(r,i){return r!=null&&i in Me(r)}function kU(r,i,c){return r>=Tt(i,c)&&r<at(i,c)}function Ud(r,i,c){for(var a=c?Sd:oa,f=r[0].length,m=r.length,y=m,v=A(m),E=1/0,k=[];y--;){var $=r[y];y&&i&&($=De($,Zt(i))),E=Tt($.length,E),v[y]=!c&&(i||f>=120&&$.length>=120)?new _i(y&&$):n}$=r[0];var M=-1,B=v[0];e:for(;++M<f&&k.length<E;){var G=$[M],Z=i?i(G):G;if(G=c||G!==0?G:0,!(B?qo(B,Z):a(k,Z,c))){for(y=m;--y;){var he=v[y];if(!(he?qo(he,Z):a(r[y],Z,c)))continue e}B&&B.push(Z),k.push(G)}}return k}function CU(r,i,c,a){return Yn(r,function(f,m,y){i(a,c(f),m,y)}),a}function Zo(r,i,c){i=Lr(i,r),r=Qw(r,i);var a=r==null?r:r[Zn(mn(i))];return a==null?n:Xt(a,r,c)}function dw(r){return Je(r)&&kt(r)==vs}function $U(r){return Je(r)&&kt(r)==Wo}function PU(r){return Je(r)&&kt(r)==Do}function Qo(r,i,c,a,f){return r===i?!0:r==null||i==null||!Je(r)&&!Je(i)?r!==r&&i!==i:MU(r,i,c,a,Qo,f)}function MU(r,i,c,a,f,m){var y=oe(r),v=oe(i),E=y?Qu:It(r),k=v?Qu:It(i);E=E==vs?dr:E,k=k==vs?dr:k;var $=E==dr,M=k==dr,B=E==k;if(B&&Ur(r)){if(!Ur(i))return!1;y=!0,$=!1}if(B&&!$)return m||(m=new Mn),y||Ms(r)?Gw(r,i,c,a,f,m):cK(r,i,E,c,a,f,m);if(!(c&x)){var G=$&&ke.call(r,"__wrapped__"),Z=M&&ke.call(i,"__wrapped__");if(G||Z){var he=G?r.value():r,Q=Z?i.value():i;return m||(m=new Mn),f(he,Q,c,a,m)}}return B?(m||(m=new Mn),uK(r,i,c,a,f,m)):!1}function FU(r){return Je(r)&&It(r)==Cn}function Kd(r,i,c,a){var f=c.length,m=f,y=!a;if(r==null)return!m;for(r=Me(r);f--;){var v=c[f];if(y&&v[2]?v[1]!==r[v[0]]:!(v[0]in r))return!1}for(;++f<m;){v=c[f];var E=v[0],k=r[E],$=v[1];if(y&&v[2]){if(k===n&&!(E in r))return!1}else{var M=new Mn;if(a)var B=a(k,$,E,r,i,M);if(!(B===n?Qo($,k,x|W,a,M):B))return!1}}return!0}function pw(r){if(!We(r)||_K(r))return!1;var i=vr(r)?FD:TL;return i.test(Si(r))}function NU(r){return Je(r)&&kt(r)==Ko}function LU(r){return Je(r)&&It(r)==$n}function DU(r){return Je(r)&&ja(r.length)&&!!Le[kt(r)]}function gw(r){return typeof r=="function"?r:r==null?jt:typeof r=="object"?oe(r)?yw(r[0],r[1]):_w(r):L1(r)}function Bd(r){if(!nc(r))return BD(r);var i=[];for(var c in Me(r))ke.call(r,c)&&c!="constructor"&&i.push(c);return i}function UU(r){if(!We(r))return SK(r);var i=nc(r),c=[];for(var a in r)a=="constructor"&&(i||!ke.call(r,a))||c.push(a);return c}function jd(r,i){return r<i}function mw(r,i){var c=-1,a=Kt(r)?A(r.length):[];return Fr(r,function(f,m,y){a[++c]=i(f,m,y)}),a}function _w(r){var i=rp(r);return i.length==1&&i[0][2]?Xw(i[0][0],i[0][1]):function(c){return c===r||Kd(c,r,i)}}function yw(r,i){return sp(r)&&Yw(i)?Xw(Zn(r),i):function(c){var a=gp(c,r);return a===n&&a===i?mp(c,r):Qo(i,a,x|W)}}function Ia(r,i,c,a,f){r!==i&&Nd(i,function(m,y){if(f||(f=new Mn),We(m))KU(r,i,y,c,Ia,a,f);else{var v=a?a(cp(r,y),m,y+"",r,i,f):n;v===n&&(v=m),Md(r,y,v)}},Bt)}function KU(r,i,c,a,f,m,y){var v=cp(r,c),E=cp(i,c),k=y.get(E);if(k){Md(r,c,k);return}var $=m?m(v,E,c+"",r,i,y):n,M=$===n;if(M){var B=oe(E),G=!B&&Ur(E),Z=!B&&!G&&Ms(E);$=E,B||G||Z?oe(v)?$=v:Ve(v)?$=Ut(v):G?(M=!1,$=kw(E,!0)):Z?(M=!1,$=Cw(E,!0)):$=[]:ic(E)||wi(E)?($=v,wi(v)?$=A1(v):(!We(v)||vr(v))&&($=zw(E))):M=!1}M&&(y.set(E,$),f($,E,a,m,y),y.delete(E)),Md(r,c,$)}function bw(r,i){var c=r.length;if(c)return i+=i<0?c:0,br(i,c)?r[i]:n}function vw(r,i,c){i.length?i=De(i,function(m){return oe(m)?function(y){return bi(y,m.length===1?m[0]:m)}:m}):i=[jt];var a=-1;i=De(i,Zt(X()));var f=mw(r,function(m,y,v){var E=De(i,function(k){return k(m)});return{criteria:E,index:++a,value:m}});return dD(f,function(m,y){return QU(m,y,c)})}function BU(r,i){return Sw(r,i,function(c,a){return mp(r,a)})}function Sw(r,i,c){for(var a=-1,f=i.length,m={};++a<f;){var y=i[a],v=bi(r,y);c(v,y)&&ec(m,Lr(y,r),v)}return m}function jU(r){return function(i){return bi(i,r)}}function Wd(r,i,c,a){var f=a?hD:Es,m=-1,y=i.length,v=r;for(r===i&&(i=Ut(i)),c&&(v=De(r,Zt(c)));++m<y;)for(var E=0,k=i[m],$=c?c(k):k;(E=f(v,$,E,a))>-1;)v!==r&&ma.call(v,E,1),ma.call(r,E,1);return r}function ww(r,i){for(var c=r?i.length:0,a=c-1;c--;){var f=i[c];if(c==a||f!==m){var m=f;br(f)?ma.call(r,f,1):Hd(r,f)}}return r}function qd(r,i){return r+ba(nw()*(i-r+1))}function WU(r,i,c,a){for(var f=-1,m=at(ya((i-r)/(c||1)),0),y=A(m);m--;)y[a?m:++f]=r,r+=c;return y}function Jd(r,i){var c="";if(!r||i<1||i>He)return c;do i%2&&(c+=r),i=ba(i/2),i&&(r+=r);while(i);return c}function pe(r,i){return up(Zw(r,i,jt),r+"")}function qU(r){return sw(Fs(r))}function JU(r,i){var c=Fs(r);return Na(c,yi(i,0,c.length))}function ec(r,i,c,a){if(!We(r))return r;i=Lr(i,r);for(var f=-1,m=i.length,y=m-1,v=r;v!=null&&++f<m;){var E=Zn(i[f]),k=c;if(E==="__proto__"||E==="constructor"||E==="prototype")return r;if(f!=y){var $=v[E];k=a?a($,E,v):n,k===n&&(k=We($)?$:br(i[f+1])?[]:{})}Yo(v,E,k),v=v[E]}return r}var Ew=va?function(r,i){return va.set(r,i),r}:jt,GU=_a?function(r,i){return _a(r,"toString",{configurable:!0,enumerable:!1,value:yp(i),writable:!0})}:jt;function HU(r){return Na(Fs(r))}function gn(r,i,c){var a=-1,f=r.length;i<0&&(i=-i>f?0:f+i),c=c>f?f:c,c<0&&(c+=f),f=i>c?0:c-i>>>0,i>>>=0;for(var m=A(f);++a<f;)m[a]=r[a+i];return m}function VU(r,i){var c;return Fr(r,function(a,f,m){return c=i(a,f,m),!c}),!!c}function Aa(r,i,c){var a=0,f=r==null?a:r.length;if(typeof i=="number"&&i===i&&f<=YN){for(;a<f;){var m=a+f>>>1,y=r[m];y!==null&&!en(y)&&(c?y<=i:y<i)?a=m+1:f=m}return f}return Gd(r,i,jt,c)}function Gd(r,i,c,a){var f=0,m=r==null?0:r.length;if(m===0)return 0;i=c(i);for(var y=i!==i,v=i===null,E=en(i),k=i===n;f<m;){var $=ba((f+m)/2),M=c(r[$]),B=M!==n,G=M===null,Z=M===M,he=en(M);if(y)var Q=a||Z;else k?Q=Z&&(a||B):v?Q=Z&&B&&(a||!G):E?Q=Z&&B&&!G&&(a||!he):G||he?Q=!1:Q=a?M<=i:M<i;Q?f=$+1:m=$}return Tt(m,zN)}function Ow(r,i){for(var c=-1,a=r.length,f=0,m=[];++c<a;){var y=r[c],v=i?i(y):y;if(!c||!Fn(v,E)){var E=v;m[f++]=y===0?0:y}}return m}function Tw(r){return typeof r=="number"?r:en(r)?hr:+r}function Qt(r){if(typeof r=="string")return r;if(oe(r))return De(r,Qt)+"";if(en(r))return rw?rw.call(r):"";var i=r+"";return i=="0"&&1/r==-1/0?"-0":i}function Nr(r,i,c){var a=-1,f=oa,m=r.length,y=!0,v=[],E=v;if(c)y=!1,f=Sd;else if(m>=o){var k=i?null:sK(r);if(k)return ua(k);y=!1,f=qo,E=new _i}else E=i?[]:v;e:for(;++a<m;){var $=r[a],M=i?i($):$;if($=c||$!==0?$:0,y&&M===M){for(var B=E.length;B--;)if(E[B]===M)continue e;i&&E.push(M),v.push($)}else f(E,M,c)||(E!==v&&E.push(M),v.push($))}return v}function Hd(r,i){return i=Lr(i,r),r=Qw(r,i),r==null||delete r[Zn(mn(i))]}function Iw(r,i,c,a){return ec(r,i,c(bi(r,i)),a)}function Ra(r,i,c,a){for(var f=r.length,m=a?f:-1;(a?m--:++m<f)&&i(r[m],m,r););return c?gn(r,a?0:m,a?m+1:f):gn(r,a?m+1:0,a?f:m)}function Aw(r,i){var c=r;return c instanceof ye&&(c=c.value()),wd(i,function(a,f){return f.func.apply(f.thisArg,$r([a],f.args))},c)}function Vd(r,i,c){var a=r.length;if(a<2)return a?Nr(r[0]):[];for(var f=-1,m=A(a);++f<a;)for(var y=r[f],v=-1;++v<a;)v!=f&&(m[f]=Xo(m[f]||y,r[v],i,c));return Nr(bt(m,1),i,c)}function Rw(r,i,c){for(var a=-1,f=r.length,m=i.length,y={};++a<f;){var v=a<m?i[a]:n;c(y,r[a],v)}return y}function zd(r){return Ve(r)?r:[]}function Yd(r){return typeof r=="function"?r:jt}function Lr(r,i){return oe(r)?r:sp(r,i)?[r]:r1(xe(r))}var zU=pe;function Dr(r,i,c){var a=r.length;return c=c===n?a:c,!i&&c>=a?r:gn(r,i,c)}var xw=ND||function(r){return yt.clearTimeout(r)};function kw(r,i){if(i)return r.slice();var c=r.length,a=XS?XS(c):new r.constructor(c);return r.copy(a),a}function Xd(r){var i=new r.constructor(r.byteLength);return new pa(i).set(new pa(r)),i}function YU(r,i){var c=i?Xd(r.buffer):r.buffer;return new r.constructor(c,r.byteOffset,r.byteLength)}function XU(r){var i=new r.constructor(r.source,dS.exec(r));return i.lastIndex=r.lastIndex,i}function ZU(r){return zo?Me(zo.call(r)):{}}function Cw(r,i){var c=i?Xd(r.buffer):r.buffer;return new r.constructor(c,r.byteOffset,r.length)}function $w(r,i){if(r!==i){var c=r!==n,a=r===null,f=r===r,m=en(r),y=i!==n,v=i===null,E=i===i,k=en(i);if(!v&&!k&&!m&&r>i||m&&y&&E&&!v&&!k||a&&y&&E||!c&&E||!f)return 1;if(!a&&!m&&!k&&r<i||k&&c&&f&&!a&&!m||v&&c&&f||!y&&f||!E)return-1}return 0}function QU(r,i,c){for(var a=-1,f=r.criteria,m=i.criteria,y=f.length,v=c.length;++a<y;){var E=$w(f[a],m[a]);if(E){if(a>=v)return E;var k=c[a];return E*(k=="desc"?-1:1)}}return r.index-i.index}function Pw(r,i,c,a){for(var f=-1,m=r.length,y=c.length,v=-1,E=i.length,k=at(m-y,0),$=A(E+k),M=!a;++v<E;)$[v]=i[v];for(;++f<y;)(M||f<m)&&($[c[f]]=r[f]);for(;k--;)$[v++]=r[f++];return $}function Mw(r,i,c,a){for(var f=-1,m=r.length,y=-1,v=c.length,E=-1,k=i.length,$=at(m-v,0),M=A($+k),B=!a;++f<$;)M[f]=r[f];for(var G=f;++E<k;)M[G+E]=i[E];for(;++y<v;)(B||f<m)&&(M[G+c[y]]=r[f++]);return M}function Ut(r,i){var c=-1,a=r.length;for(i||(i=A(a));++c<a;)i[c]=r[c];return i}function Xn(r,i,c,a){var f=!c;c||(c={});for(var m=-1,y=i.length;++m<y;){var v=i[m],E=a?a(c[v],r[v],v,c,r):n;E===n&&(E=r[v]),f?mr(c,v,E):Yo(c,v,E)}return c}function eK(r,i){return Xn(r,ip(r),i)}function tK(r,i){return Xn(r,Hw(r),i)}function xa(r,i){return function(c,a){var f=oe(c)?oD:EU,m=i?i():{};return f(c,r,X(a,2),m)}}function Cs(r){return pe(function(i,c){var a=-1,f=c.length,m=f>1?c[f-1]:n,y=f>2?c[2]:n;for(m=r.length>3&&typeof m=="function"?(f--,m):n,y&&Ct(c[0],c[1],y)&&(m=f<3?n:m,f=1),i=Me(i);++a<f;){var v=c[a];v&&r(i,v,a,m)}return i})}function Fw(r,i){return function(c,a){if(c==null)return c;if(!Kt(c))return r(c,a);for(var f=c.length,m=i?f:-1,y=Me(c);(i?m--:++m<f)&&a(y[m],m,y)!==!1;);return c}}function Nw(r){return function(i,c,a){for(var f=-1,m=Me(i),y=a(i),v=y.length;v--;){var E=y[r?v:++f];if(c(m[E],E,m)===!1)break}return i}}function nK(r,i,c){var a=i&L,f=tc(r);function m(){var y=this&&this!==yt&&this instanceof m?f:r;return y.apply(a?c:this,arguments)}return m}function Lw(r){return function(i){i=xe(i);var c=Os(i)?Pn(i):n,a=c?c[0]:i.charAt(0),f=c?Dr(c,1).join(""):i.slice(1);return a[r]()+f}}function $s(r){return function(i){return wd(F1(M1(i).replace(GL,"")),r,"")}}function tc(r){return function(){var i=arguments;switch(i.length){case 0:return new r;case 1:return new r(i[0]);case 2:return new r(i[0],i[1]);case 3:return new r(i[0],i[1],i[2]);case 4:return new r(i[0],i[1],i[2],i[3]);case 5:return new r(i[0],i[1],i[2],i[3],i[4]);case 6:return new r(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new r(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var c=ks(r.prototype),a=r.apply(c,i);return We(a)?a:c}}function rK(r,i,c){var a=tc(r);function f(){for(var m=arguments.length,y=A(m),v=m,E=Ps(f);v--;)y[v]=arguments[v];var k=m<3&&y[0]!==E&&y[m-1]!==E?[]:Pr(y,E);if(m-=k.length,m<c)return jw(r,i,ka,f.placeholder,n,y,k,n,n,c-m);var $=this&&this!==yt&&this instanceof f?a:r;return Xt($,this,y)}return f}function Dw(r){return function(i,c,a){var f=Me(i);if(!Kt(i)){var m=X(c,3);i=dt(i),c=function(v){return m(f[v],v,f)}}var y=r(i,c,a);return y>-1?f[m?i[y]:y]:n}}function Uw(r){return yr(function(i){var c=i.length,a=c,f=dn.prototype.thru;for(r&&i.reverse();a--;){var m=i[a];if(typeof m!="function")throw new hn(l);if(f&&!y&&Ma(m)=="wrapper")var y=new dn([],!0)}for(a=y?a:c;++a<c;){m=i[a];var v=Ma(m),E=v=="wrapper"?np(m):n;E&&op(E[0])&&E[1]==(C|q|V|N)&&!E[4].length&&E[9]==1?y=y[Ma(E[0])].apply(y,E[3]):y=m.length==1&&op(m)?y[v]():y.thru(m)}return function(){var k=arguments,$=k[0];if(y&&k.length==1&&oe($))return y.plant($).value();for(var M=0,B=c?i[M].apply(this,k):$;++M<c;)B=i[M].call(this,B);return B}})}function ka(r,i,c,a,f,m,y,v,E,k){var $=i&C,M=i&L,B=i&K,G=i&(q|H),Z=i&D,he=B?n:tc(r);function Q(){for(var _e=arguments.length,ve=A(_e),tn=_e;tn--;)ve[tn]=arguments[tn];if(G)var $t=Ps(Q),nn=gD(ve,$t);if(a&&(ve=Pw(ve,a,f,G)),m&&(ve=Mw(ve,m,y,G)),_e-=nn,G&&_e<k){var ze=Pr(ve,$t);return jw(r,i,ka,Q.placeholder,c,ve,ze,v,E,k-_e)}var Nn=M?c:this,wr=B?Nn[r]:r;return _e=ve.length,v?ve=EK(ve,v):Z&&_e>1&&ve.reverse(),$&&E<_e&&(ve.length=E),this&&this!==yt&&this instanceof Q&&(wr=he||tc(wr)),wr.apply(Nn,ve)}return Q}function Kw(r,i){return function(c,a){return CU(c,r,i(a),{})}}function Ca(r,i){return function(c,a){var f;if(c===n&&a===n)return i;if(c!==n&&(f=c),a!==n){if(f===n)return a;typeof c=="string"||typeof a=="string"?(c=Qt(c),a=Qt(a)):(c=Tw(c),a=Tw(a)),f=r(c,a)}return f}}function Zd(r){return yr(function(i){return i=De(i,Zt(X())),pe(function(c){var a=this;return r(i,function(f){return Xt(f,a,c)})})})}function $a(r,i){i=i===n?" ":Qt(i);var c=i.length;if(c<2)return c?Jd(i,r):i;var a=Jd(i,ya(r/Ts(i)));return Os(i)?Dr(Pn(a),0,r).join(""):a.slice(0,r)}function iK(r,i,c,a){var f=i&L,m=tc(r);function y(){for(var v=-1,E=arguments.length,k=-1,$=a.length,M=A($+E),B=this&&this!==yt&&this instanceof y?m:r;++k<$;)M[k]=a[k];for(;E--;)M[k++]=arguments[++v];return Xt(B,f?c:this,M)}return y}function Bw(r){return function(i,c,a){return a&&typeof a!="number"&&Ct(i,c,a)&&(c=a=n),i=Sr(i),c===n?(c=i,i=0):c=Sr(c),a=a===n?i<c?1:-1:Sr(a),WU(i,c,a,r)}}function Pa(r){return function(i,c){return typeof i=="string"&&typeof c=="string"||(i=_n(i),c=_n(c)),r(i,c)}}function jw(r,i,c,a,f,m,y,v,E,k){var $=i&q,M=$?y:n,B=$?n:y,G=$?m:n,Z=$?n:m;i|=$?V:Y,i&=~($?Y:V),i&ee||(i&=-4);var he=[r,i,f,G,M,Z,B,v,E,k],Q=c.apply(n,he);return op(r)&&e1(Q,he),Q.placeholder=a,t1(Q,r,i)}function Qd(r){var i=ut[r];return function(c,a){if(c=_n(c),a=a==null?0:Tt(ae(a),292),a&&tw(c)){var f=(xe(c)+"e").split("e"),m=i(f[0]+"e"+(+f[1]+a));return f=(xe(m)+"e").split("e"),+(f[0]+"e"+(+f[1]-a))}return i(c)}}var sK=Rs&&1/ua(new Rs([,-0]))[1]==ne?function(r){return new Rs(r)}:Sp;function Ww(r){return function(i){var c=It(i);return c==Cn?xd(i):c==$n?wD(i):pD(i,r(i))}}function _r(r,i,c,a,f,m,y,v){var E=i&K;if(!E&&typeof r!="function")throw new hn(l);var k=a?a.length:0;if(k||(i&=-97,a=f=n),y=y===n?y:at(ae(y),0),v=v===n?v:ae(v),k-=f?f.length:0,i&Y){var $=a,M=f;a=f=n}var B=E?n:np(r),G=[r,i,c,a,f,$,M,m,y,v];if(B&&vK(G,B),r=G[0],i=G[1],c=G[2],a=G[3],f=G[4],v=G[9]=G[9]===n?E?0:r.length:at(G[9]-k,0),!v&&i&(q|H)&&(i&=-25),!i||i==L)var Z=nK(r,i,c);else i==q||i==H?Z=rK(r,i,v):(i==V||i==(L|V))&&!f.length?Z=iK(r,i,c,a):Z=ka.apply(n,G);var he=B?Ew:e1;return t1(he(Z,G),r,i)}function qw(r,i,c,a){return r===n||Fn(r,As[c])&&!ke.call(a,c)?i:r}function Jw(r,i,c,a,f,m){return We(r)&&We(i)&&(m.set(i,r),Ia(r,i,n,Jw,m),m.delete(i)),r}function oK(r){return ic(r)?n:r}function Gw(r,i,c,a,f,m){var y=c&x,v=r.length,E=i.length;if(v!=E&&!(y&&E>v))return!1;var k=m.get(r),$=m.get(i);if(k&&$)return k==i&&$==r;var M=-1,B=!0,G=c&W?new _i:n;for(m.set(r,i),m.set(i,r);++M<v;){var Z=r[M],he=i[M];if(a)var Q=y?a(he,Z,M,i,r,m):a(Z,he,M,r,i,m);if(Q!==n){if(Q)continue;B=!1;break}if(G){if(!Ed(i,function(_e,ve){if(!qo(G,ve)&&(Z===_e||f(Z,_e,c,a,m)))return G.push(ve)})){B=!1;break}}else if(!(Z===he||f(Z,he,c,a,m))){B=!1;break}}return m.delete(r),m.delete(i),B}function cK(r,i,c,a,f,m,y){switch(c){case Ss:if(r.byteLength!=i.byteLength||r.byteOffset!=i.byteOffset)return!1;r=r.buffer,i=i.buffer;case Wo:return!(r.byteLength!=i.byteLength||!m(new pa(r),new pa(i)));case Lo:case Do:case Uo:return Fn(+r,+i);case ea:return r.name==i.name&&r.message==i.message;case Ko:case Bo:return r==i+"";case Cn:var v=xd;case $n:var E=a&x;if(v||(v=ua),r.size!=i.size&&!E)return!1;var k=y.get(r);if(k)return k==i;a|=W,y.set(r,i);var $=Gw(v(r),v(i),a,f,m,y);return y.delete(r),$;case na:if(zo)return zo.call(r)==zo.call(i)}return!1}function uK(r,i,c,a,f,m){var y=c&x,v=ep(r),E=v.length,k=ep(i),$=k.length;if(E!=$&&!y)return!1;for(var M=E;M--;){var B=v[M];if(!(y?B in i:ke.call(i,B)))return!1}var G=m.get(r),Z=m.get(i);if(G&&Z)return G==i&&Z==r;var he=!0;m.set(r,i),m.set(i,r);for(var Q=y;++M<E;){B=v[M];var _e=r[B],ve=i[B];if(a)var tn=y?a(ve,_e,B,i,r,m):a(_e,ve,B,r,i,m);if(!(tn===n?_e===ve||f(_e,ve,c,a,m):tn)){he=!1;break}Q||(Q=B=="constructor")}if(he&&!Q){var $t=r.constructor,nn=i.constructor;$t!=nn&&"constructor"in r&&"constructor"in i&&!(typeof $t=="function"&&$t instanceof $t&&typeof nn=="function"&&nn instanceof nn)&&(he=!1)}return m.delete(r),m.delete(i),he}function yr(r){return up(Zw(r,n,c1),r+"")}function ep(r){return hw(r,dt,ip)}function tp(r){return hw(r,Bt,Hw)}var np=va?function(r){return va.get(r)}:Sp;function Ma(r){for(var i=r.name+"",c=xs[i],a=ke.call(xs,i)?c.length:0;a--;){var f=c[a],m=f.func;if(m==null||m==r)return f.name}return i}function Ps(r){var i=ke.call(g,"placeholder")?g:r;return i.placeholder}function X(){var r=g.iteratee||bp;return r=r===bp?gw:r,arguments.length?r(arguments[0],arguments[1]):r}function Fa(r,i){var c=r.__data__;return mK(i)?c[typeof i=="string"?"string":"hash"]:c.map}function rp(r){for(var i=dt(r),c=i.length;c--;){var a=i[c],f=r[a];i[c]=[a,f,Yw(f)]}return i}function vi(r,i){var c=bD(r,i);return pw(c)?c:n}function aK(r){var i=ke.call(r,gi),c=r[gi];try{r[gi]=n;var a=!0}catch{}var f=ha.call(r);return a&&(i?r[gi]=c:delete r[gi]),f}var ip=Cd?function(r){return r==null?[]:(r=Me(r),Cr(Cd(r),function(i){return QS.call(r,i)}))}:wp,Hw=Cd?function(r){for(var i=[];r;)$r(i,ip(r)),r=ga(r);return i}:wp,It=kt;($d&&It(new $d(new ArrayBuffer(1)))!=Ss||Go&&It(new Go)!=Cn||Pd&&It(Pd.resolve())!=aS||Rs&&It(new Rs)!=$n||Ho&&It(new Ho)!=jo)&&(It=function(r){var i=kt(r),c=i==dr?r.constructor:n,a=c?Si(c):"";if(a)switch(a){case JD:return Ss;case GD:return Cn;case HD:return aS;case VD:return $n;case zD:return jo}return i});function lK(r,i,c){for(var a=-1,f=c.length;++a<f;){var m=c[a],y=m.size;switch(m.type){case"drop":r+=y;break;case"dropRight":i-=y;break;case"take":i=Tt(i,r+y);break;case"takeRight":r=at(r,i-y);break}}return{start:r,end:i}}function fK(r){var i=r.match(_L);return i?i[1].split(yL):[]}function Vw(r,i,c){i=Lr(i,r);for(var a=-1,f=i.length,m=!1;++a<f;){var y=Zn(i[a]);if(!(m=r!=null&&c(r,y)))break;r=r[y]}return m||++a!=f?m:(f=r==null?0:r.length,!!f&&ja(f)&&br(y,f)&&(oe(r)||wi(r)))}function hK(r){var i=r.length,c=new r.constructor(i);return i&&typeof r[0]=="string"&&ke.call(r,"index")&&(c.index=r.index,c.input=r.input),c}function zw(r){return typeof r.constructor=="function"&&!nc(r)?ks(ga(r)):{}}function dK(r,i,c){var a=r.constructor;switch(i){case Wo:return Xd(r);case Lo:case Do:return new a(+r);case Ss:return YU(r,c);case rd:case id:case sd:case od:case cd:case ud:case ad:case ld:case fd:return Cw(r,c);case Cn:return new a;case Uo:case Bo:return new a(r);case Ko:return XU(r);case $n:return new a;case na:return ZU(r)}}function pK(r,i){var c=i.length;if(!c)return r;var a=c-1;return i[a]=(c>1?"& ":"")+i[a],i=i.join(c>2?", ":" "),r.replace(mL,`{
/* [wrapped with `+i+`] */
`)}function gK(r){return oe(r)||wi(r)||!!(ew&&r&&r[ew])}function br(r,i){var c=typeof r;return i=i??He,!!i&&(c=="number"||c!="symbol"&&AL.test(r))&&r>-1&&r%1==0&&r<i}function Ct(r,i,c){if(!We(c))return!1;var a=typeof i;return(a=="number"?Kt(c)&&br(i,c.length):a=="string"&&i in c)?Fn(c[i],r):!1}function sp(r,i){if(oe(r))return!1;var c=typeof r;return c=="number"||c=="symbol"||c=="boolean"||r==null||en(r)?!0:hL.test(r)||!fL.test(r)||i!=null&&r in Me(i)}function mK(r){var i=typeof r;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?r!=="__proto__":r===null}function op(r){var i=Ma(r),c=g[i];if(typeof c!="function"||!(i in ye.prototype))return!1;if(r===c)return!0;var a=np(c);return!!a&&r===a[0]}function _K(r){return!!YS&&YS in r}var yK=la?vr:Ep;function nc(r){var i=r&&r.constructor,c=typeof i=="function"&&i.prototype||As;return r===c}function Yw(r){return r===r&&!We(r)}function Xw(r,i){return function(c){return c==null?!1:c[r]===i&&(i!==n||r in Me(c))}}function bK(r){var i=Ka(r,function(a){return c.size===_&&c.clear(),a}),c=i.cache;return i}function vK(r,i){var c=r[1],a=i[1],f=c|a,m=f<(L|K|C),y=a==C&&c==q||a==C&&c==N&&r[7].length<=i[8]||a==(C|N)&&i[7].length<=i[8]&&c==q;if(!(m||y))return r;a&L&&(r[2]=i[2],f|=c&L?0:ee);var v=i[3];if(v){var E=r[3];r[3]=E?Pw(E,v,i[4]):v,r[4]=E?Pr(r[3],b):i[4]}return v=i[5],v&&(E=r[5],r[5]=E?Mw(E,v,i[6]):v,r[6]=E?Pr(r[5],b):i[6]),v=i[7],v&&(r[7]=v),a&C&&(r[8]=r[8]==null?i[8]:Tt(r[8],i[8])),r[9]==null&&(r[9]=i[9]),r[0]=i[0],r[1]=f,r}function SK(r){var i=[];if(r!=null)for(var c in Me(r))i.push(c);return i}function wK(r){return ha.call(r)}function Zw(r,i,c){return i=at(i===n?r.length-1:i,0),function(){for(var a=arguments,f=-1,m=at(a.length-i,0),y=A(m);++f<m;)y[f]=a[i+f];f=-1;for(var v=A(i+1);++f<i;)v[f]=a[f];return v[i]=c(y),Xt(r,this,v)}}function Qw(r,i){return i.length<2?r:bi(r,gn(i,0,-1))}function EK(r,i){for(var c=r.length,a=Tt(i.length,c),f=Ut(r);a--;){var m=i[a];r[a]=br(m,c)?f[m]:n}return r}function cp(r,i){if(!(i==="constructor"&&typeof r[i]=="function")&&i!="__proto__")return r[i]}var e1=n1(Ew),rc=DD||function(r,i){return yt.setTimeout(r,i)},up=n1(GU);function t1(r,i,c){var a=i+"";return up(r,pK(a,OK(fK(a),c)))}function n1(r){var i=0,c=0;return function(){var a=jD(),f=Te-(a-c);if(c=a,f>0){if(++i>=j)return arguments[0]}else i=0;return r.apply(n,arguments)}}function Na(r,i){var c=-1,a=r.length,f=a-1;for(i=i===n?a:i;++c<i;){var m=qd(c,f),y=r[m];r[m]=r[c],r[c]=y}return r.length=i,r}var r1=bK(function(r){var i=[];return r.charCodeAt(0)===46&&i.push(""),r.replace(dL,function(c,a,f,m){i.push(f?m.replace(SL,"$1"):a||c)}),i});function Zn(r){if(typeof r=="string"||en(r))return r;var i=r+"";return i=="0"&&1/r==-1/0?"-0":i}function Si(r){if(r!=null){try{return fa.call(r)}catch{}try{return r+""}catch{}}return""}function OK(r,i){return fn(XN,function(c){var a="_."+c[0];i&c[1]&&!oa(r,a)&&r.push(a)}),r.sort()}function i1(r){if(r instanceof ye)return r.clone();var i=new dn(r.__wrapped__,r.__chain__);return i.__actions__=Ut(r.__actions__),i.__index__=r.__index__,i.__values__=r.__values__,i}function TK(r,i,c){(c?Ct(r,i,c):i===n)?i=1:i=at(ae(i),0);var a=r==null?0:r.length;if(!a||i<1)return[];for(var f=0,m=0,y=A(ya(a/i));f<a;)y[m++]=gn(r,f,f+=i);return y}function IK(r){for(var i=-1,c=r==null?0:r.length,a=0,f=[];++i<c;){var m=r[i];m&&(f[a++]=m)}return f}function AK(){var r=arguments.length;if(!r)return[];for(var i=A(r-1),c=arguments[0],a=r;a--;)i[a-1]=arguments[a];return $r(oe(c)?Ut(c):[c],bt(i,1))}var RK=pe(function(r,i){return Ve(r)?Xo(r,bt(i,1,Ve,!0)):[]}),xK=pe(function(r,i){var c=mn(i);return Ve(c)&&(c=n),Ve(r)?Xo(r,bt(i,1,Ve,!0),X(c,2)):[]}),kK=pe(function(r,i){var c=mn(i);return Ve(c)&&(c=n),Ve(r)?Xo(r,bt(i,1,Ve,!0),n,c):[]});function CK(r,i,c){var a=r==null?0:r.length;return a?(i=c||i===n?1:ae(i),gn(r,i<0?0:i,a)):[]}function $K(r,i,c){var a=r==null?0:r.length;return a?(i=c||i===n?1:ae(i),i=a-i,gn(r,0,i<0?0:i)):[]}function PK(r,i){return r&&r.length?Ra(r,X(i,3),!0,!0):[]}function MK(r,i){return r&&r.length?Ra(r,X(i,3),!0):[]}function FK(r,i,c,a){var f=r==null?0:r.length;return f?(c&&typeof c!="number"&&Ct(r,i,c)&&(c=0,a=f),AU(r,i,c,a)):[]}function s1(r,i,c){var a=r==null?0:r.length;if(!a)return-1;var f=c==null?0:ae(c);return f<0&&(f=at(a+f,0)),ca(r,X(i,3),f)}function o1(r,i,c){var a=r==null?0:r.length;if(!a)return-1;var f=a-1;return c!==n&&(f=ae(c),f=c<0?at(a+f,0):Tt(f,a-1)),ca(r,X(i,3),f,!0)}function c1(r){var i=r==null?0:r.length;return i?bt(r,1):[]}function NK(r){var i=r==null?0:r.length;return i?bt(r,ne):[]}function LK(r,i){var c=r==null?0:r.length;return c?(i=i===n?1:ae(i),bt(r,i)):[]}function DK(r){for(var i=-1,c=r==null?0:r.length,a={};++i<c;){var f=r[i];a[f[0]]=f[1]}return a}function u1(r){return r&&r.length?r[0]:n}function UK(r,i,c){var a=r==null?0:r.length;if(!a)return-1;var f=c==null?0:ae(c);return f<0&&(f=at(a+f,0)),Es(r,i,f)}function KK(r){var i=r==null?0:r.length;return i?gn(r,0,-1):[]}var BK=pe(function(r){var i=De(r,zd);return i.length&&i[0]===r[0]?Ud(i):[]}),jK=pe(function(r){var i=mn(r),c=De(r,zd);return i===mn(c)?i=n:c.pop(),c.length&&c[0]===r[0]?Ud(c,X(i,2)):[]}),WK=pe(function(r){var i=mn(r),c=De(r,zd);return i=typeof i=="function"?i:n,i&&c.pop(),c.length&&c[0]===r[0]?Ud(c,n,i):[]});function qK(r,i){return r==null?"":KD.call(r,i)}function mn(r){var i=r==null?0:r.length;return i?r[i-1]:n}function JK(r,i,c){var a=r==null?0:r.length;if(!a)return-1;var f=a;return c!==n&&(f=ae(c),f=f<0?at(a+f,0):Tt(f,a-1)),i===i?OD(r,i,f):ca(r,jS,f,!0)}function GK(r,i){return r&&r.length?bw(r,ae(i)):n}var HK=pe(a1);function a1(r,i){return r&&r.length&&i&&i.length?Wd(r,i):r}function VK(r,i,c){return r&&r.length&&i&&i.length?Wd(r,i,X(c,2)):r}function zK(r,i,c){return r&&r.length&&i&&i.length?Wd(r,i,n,c):r}var YK=yr(function(r,i){var c=r==null?0:r.length,a=Fd(r,i);return ww(r,De(i,function(f){return br(f,c)?+f:f}).sort($w)),a});function XK(r,i){var c=[];if(!(r&&r.length))return c;var a=-1,f=[],m=r.length;for(i=X(i,3);++a<m;){var y=r[a];i(y,a,r)&&(c.push(y),f.push(a))}return ww(r,f),c}function ap(r){return r==null?r:qD.call(r)}function ZK(r,i,c){var a=r==null?0:r.length;return a?(c&&typeof c!="number"&&Ct(r,i,c)?(i=0,c=a):(i=i==null?0:ae(i),c=c===n?a:ae(c)),gn(r,i,c)):[]}function QK(r,i){return Aa(r,i)}function eB(r,i,c){return Gd(r,i,X(c,2))}function tB(r,i){var c=r==null?0:r.length;if(c){var a=Aa(r,i);if(a<c&&Fn(r[a],i))return a}return-1}function nB(r,i){return Aa(r,i,!0)}function rB(r,i,c){return Gd(r,i,X(c,2),!0)}function iB(r,i){var c=r==null?0:r.length;if(c){var a=Aa(r,i,!0)-1;if(Fn(r[a],i))return a}return-1}function sB(r){return r&&r.length?Ow(r):[]}function oB(r,i){return r&&r.length?Ow(r,X(i,2)):[]}function cB(r){var i=r==null?0:r.length;return i?gn(r,1,i):[]}function uB(r,i,c){return r&&r.length?(i=c||i===n?1:ae(i),gn(r,0,i<0?0:i)):[]}function aB(r,i,c){var a=r==null?0:r.length;return a?(i=c||i===n?1:ae(i),i=a-i,gn(r,i<0?0:i,a)):[]}function lB(r,i){return r&&r.length?Ra(r,X(i,3),!1,!0):[]}function fB(r,i){return r&&r.length?Ra(r,X(i,3)):[]}var hB=pe(function(r){return Nr(bt(r,1,Ve,!0))}),dB=pe(function(r){var i=mn(r);return Ve(i)&&(i=n),Nr(bt(r,1,Ve,!0),X(i,2))}),pB=pe(function(r){var i=mn(r);return i=typeof i=="function"?i:n,Nr(bt(r,1,Ve,!0),n,i)});function gB(r){return r&&r.length?Nr(r):[]}function mB(r,i){return r&&r.length?Nr(r,X(i,2)):[]}function _B(r,i){return i=typeof i=="function"?i:n,r&&r.length?Nr(r,n,i):[]}function lp(r){if(!(r&&r.length))return[];var i=0;return r=Cr(r,function(c){if(Ve(c))return i=at(c.length,i),!0}),Ad(i,function(c){return De(r,Od(c))})}function l1(r,i){if(!(r&&r.length))return[];var c=lp(r);return i==null?c:De(c,function(a){return Xt(i,n,a)})}var yB=pe(function(r,i){return Ve(r)?Xo(r,i):[]}),bB=pe(function(r){return Vd(Cr(r,Ve))}),vB=pe(function(r){var i=mn(r);return Ve(i)&&(i=n),Vd(Cr(r,Ve),X(i,2))}),SB=pe(function(r){var i=mn(r);return i=typeof i=="function"?i:n,Vd(Cr(r,Ve),n,i)}),wB=pe(lp);function EB(r,i){return Rw(r||[],i||[],Yo)}function OB(r,i){return Rw(r||[],i||[],ec)}var TB=pe(function(r){var i=r.length,c=i>1?r[i-1]:n;return c=typeof c=="function"?(r.pop(),c):n,l1(r,c)});function f1(r){var i=g(r);return i.__chain__=!0,i}function IB(r,i){return i(r),r}function La(r,i){return i(r)}var AB=yr(function(r){var i=r.length,c=i?r[0]:0,a=this.__wrapped__,f=function(m){return Fd(m,r)};return i>1||this.__actions__.length||!(a instanceof ye)||!br(c)?this.thru(f):(a=a.slice(c,+c+(i?1:0)),a.__actions__.push({func:La,args:[f],thisArg:n}),new dn(a,this.__chain__).thru(function(m){return i&&!m.length&&m.push(n),m}))});function RB(){return f1(this)}function xB(){return new dn(this.value(),this.__chain__)}function kB(){this.__values__===n&&(this.__values__=T1(this.value()));var r=this.__index__>=this.__values__.length,i=r?n:this.__values__[this.__index__++];return{done:r,value:i}}function CB(){return this}function $B(r){for(var i,c=this;c instanceof wa;){var a=i1(c);a.__index__=0,a.__values__=n,i?f.__wrapped__=a:i=a;var f=a;c=c.__wrapped__}return f.__wrapped__=r,i}function PB(){var r=this.__wrapped__;if(r instanceof ye){var i=r;return this.__actions__.length&&(i=new ye(this)),i=i.reverse(),i.__actions__.push({func:La,args:[ap],thisArg:n}),new dn(i,this.__chain__)}return this.thru(ap)}function MB(){return Aw(this.__wrapped__,this.__actions__)}var FB=xa(function(r,i,c){ke.call(r,c)?++r[c]:mr(r,c,1)});function NB(r,i,c){var a=oe(r)?KS:IU;return c&&Ct(r,i,c)&&(i=n),a(r,X(i,3))}function LB(r,i){var c=oe(r)?Cr:lw;return c(r,X(i,3))}var DB=Dw(s1),UB=Dw(o1);function KB(r,i){return bt(Da(r,i),1)}function BB(r,i){return bt(Da(r,i),ne)}function jB(r,i,c){return c=c===n?1:ae(c),bt(Da(r,i),c)}function h1(r,i){var c=oe(r)?fn:Fr;return c(r,X(i,3))}function d1(r,i){var c=oe(r)?cD:aw;return c(r,X(i,3))}var WB=xa(function(r,i,c){ke.call(r,c)?r[c].push(i):mr(r,c,[i])});function qB(r,i,c,a){r=Kt(r)?r:Fs(r),c=c&&!a?ae(c):0;var f=r.length;return c<0&&(c=at(f+c,0)),Wa(r)?c<=f&&r.indexOf(i,c)>-1:!!f&&Es(r,i,c)>-1}var JB=pe(function(r,i,c){var a=-1,f=typeof i=="function",m=Kt(r)?A(r.length):[];return Fr(r,function(y){m[++a]=f?Xt(i,y,c):Zo(y,i,c)}),m}),GB=xa(function(r,i,c){mr(r,c,i)});function Da(r,i){var c=oe(r)?De:mw;return c(r,X(i,3))}function HB(r,i,c,a){return r==null?[]:(oe(i)||(i=i==null?[]:[i]),c=a?n:c,oe(c)||(c=c==null?[]:[c]),vw(r,i,c))}var VB=xa(function(r,i,c){r[c?0:1].push(i)},function(){return[[],[]]});function zB(r,i,c){var a=oe(r)?wd:qS,f=arguments.length<3;return a(r,X(i,4),c,f,Fr)}function YB(r,i,c){var a=oe(r)?uD:qS,f=arguments.length<3;return a(r,X(i,4),c,f,aw)}function XB(r,i){var c=oe(r)?Cr:lw;return c(r,Ba(X(i,3)))}function ZB(r){var i=oe(r)?sw:qU;return i(r)}function QB(r,i,c){(c?Ct(r,i,c):i===n)?i=1:i=ae(i);var a=oe(r)?SU:JU;return a(r,i)}function e3(r){var i=oe(r)?wU:HU;return i(r)}function t3(r){if(r==null)return 0;if(Kt(r))return Wa(r)?Ts(r):r.length;var i=It(r);return i==Cn||i==$n?r.size:Bd(r).length}function n3(r,i,c){var a=oe(r)?Ed:VU;return c&&Ct(r,i,c)&&(i=n),a(r,X(i,3))}var r3=pe(function(r,i){if(r==null)return[];var c=i.length;return c>1&&Ct(r,i[0],i[1])?i=[]:c>2&&Ct(i[0],i[1],i[2])&&(i=[i[0]]),vw(r,bt(i,1),[])}),Ua=LD||function(){return yt.Date.now()};function i3(r,i){if(typeof i!="function")throw new hn(l);return r=ae(r),function(){if(--r<1)return i.apply(this,arguments)}}function p1(r,i,c){return i=c?n:i,i=r&&i==null?r.length:i,_r(r,C,n,n,n,n,i)}function g1(r,i){var c;if(typeof i!="function")throw new hn(l);return r=ae(r),function(){return--r>0&&(c=i.apply(this,arguments)),r<=1&&(i=n),c}}var fp=pe(function(r,i,c){var a=L;if(c.length){var f=Pr(c,Ps(fp));a|=V}return _r(r,a,i,c,f)}),m1=pe(function(r,i,c){var a=L|K;if(c.length){var f=Pr(c,Ps(m1));a|=V}return _r(i,a,r,c,f)});function _1(r,i,c){i=c?n:i;var a=_r(r,q,n,n,n,n,n,i);return a.placeholder=_1.placeholder,a}function y1(r,i,c){i=c?n:i;var a=_r(r,H,n,n,n,n,n,i);return a.placeholder=y1.placeholder,a}function b1(r,i,c){var a,f,m,y,v,E,k=0,$=!1,M=!1,B=!0;if(typeof r!="function")throw new hn(l);i=_n(i)||0,We(c)&&($=!!c.leading,M="maxWait"in c,m=M?at(_n(c.maxWait)||0,i):m,B="trailing"in c?!!c.trailing:B);function G(ze){var Nn=a,wr=f;return a=f=n,k=ze,y=r.apply(wr,Nn),y}function Z(ze){return k=ze,v=rc(_e,i),$?G(ze):y}function he(ze){var Nn=ze-E,wr=ze-k,D1=i-Nn;return M?Tt(D1,m-wr):D1}function Q(ze){var Nn=ze-E,wr=ze-k;return E===n||Nn>=i||Nn<0||M&&wr>=m}function _e(){var ze=Ua();if(Q(ze))return ve(ze);v=rc(_e,he(ze))}function ve(ze){return v=n,B&&a?G(ze):(a=f=n,y)}function tn(){v!==n&&xw(v),k=0,a=E=f=v=n}function $t(){return v===n?y:ve(Ua())}function nn(){var ze=Ua(),Nn=Q(ze);if(a=arguments,f=this,E=ze,Nn){if(v===n)return Z(E);if(M)return xw(v),v=rc(_e,i),G(E)}return v===n&&(v=rc(_e,i)),y}return nn.cancel=tn,nn.flush=$t,nn}var s3=pe(function(r,i){return uw(r,1,i)}),o3=pe(function(r,i,c){return uw(r,_n(i)||0,c)});function c3(r){return _r(r,D)}function Ka(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new hn(l);var c=function(){var a=arguments,f=i?i.apply(this,a):a[0],m=c.cache;if(m.has(f))return m.get(f);var y=r.apply(this,a);return c.cache=m.set(f,y)||m,y};return c.cache=new(Ka.Cache||gr),c}Ka.Cache=gr;function Ba(r){if(typeof r!="function")throw new hn(l);return function(){var i=arguments;switch(i.length){case 0:return!r.call(this);case 1:return!r.call(this,i[0]);case 2:return!r.call(this,i[0],i[1]);case 3:return!r.call(this,i[0],i[1],i[2])}return!r.apply(this,i)}}function u3(r){return g1(2,r)}var a3=zU(function(r,i){i=i.length==1&&oe(i[0])?De(i[0],Zt(X())):De(bt(i,1),Zt(X()));var c=i.length;return pe(function(a){for(var f=-1,m=Tt(a.length,c);++f<m;)a[f]=i[f].call(this,a[f]);return Xt(r,this,a)})}),hp=pe(function(r,i){var c=Pr(i,Ps(hp));return _r(r,V,n,i,c)}),v1=pe(function(r,i){var c=Pr(i,Ps(v1));return _r(r,Y,n,i,c)}),l3=yr(function(r,i){return _r(r,N,n,n,n,i)});function f3(r,i){if(typeof r!="function")throw new hn(l);return i=i===n?i:ae(i),pe(r,i)}function h3(r,i){if(typeof r!="function")throw new hn(l);return i=i==null?0:at(ae(i),0),pe(function(c){var a=c[i],f=Dr(c,0,i);return a&&$r(f,a),Xt(r,this,f)})}function d3(r,i,c){var a=!0,f=!0;if(typeof r!="function")throw new hn(l);return We(c)&&(a="leading"in c?!!c.leading:a,f="trailing"in c?!!c.trailing:f),b1(r,i,{leading:a,maxWait:i,trailing:f})}function p3(r){return p1(r,1)}function g3(r,i){return hp(Yd(i),r)}function m3(){if(!arguments.length)return[];var r=arguments[0];return oe(r)?r:[r]}function _3(r){return pn(r,I)}function y3(r,i){return i=typeof i=="function"?i:n,pn(r,I,i)}function b3(r){return pn(r,S|I)}function v3(r,i){return i=typeof i=="function"?i:n,pn(r,S|I,i)}function S3(r,i){return i==null||cw(r,i,dt(i))}function Fn(r,i){return r===i||r!==r&&i!==i}var w3=Pa(Dd),E3=Pa(function(r,i){return r>=i}),wi=dw(function(){return arguments}())?dw:function(r){return Je(r)&&ke.call(r,"callee")&&!QS.call(r,"callee")},oe=A.isArray,O3=MS?Zt(MS):$U;function Kt(r){return r!=null&&ja(r.length)&&!vr(r)}function Ve(r){return Je(r)&&Kt(r)}function T3(r){return r===!0||r===!1||Je(r)&&kt(r)==Lo}var Ur=UD||Ep,I3=FS?Zt(FS):PU;function A3(r){return Je(r)&&r.nodeType===1&&!ic(r)}function R3(r){if(r==null)return!0;if(Kt(r)&&(oe(r)||typeof r=="string"||typeof r.splice=="function"||Ur(r)||Ms(r)||wi(r)))return!r.length;var i=It(r);if(i==Cn||i==$n)return!r.size;if(nc(r))return!Bd(r).length;for(var c in r)if(ke.call(r,c))return!1;return!0}function x3(r,i){return Qo(r,i)}function k3(r,i,c){c=typeof c=="function"?c:n;var a=c?c(r,i):n;return a===n?Qo(r,i,n,c):!!a}function dp(r){if(!Je(r))return!1;var i=kt(r);return i==ea||i==QN||typeof r.message=="string"&&typeof r.name=="string"&&!ic(r)}function C3(r){return typeof r=="number"&&tw(r)}function vr(r){if(!We(r))return!1;var i=kt(r);return i==ta||i==uS||i==ZN||i==tL}function S1(r){return typeof r=="number"&&r==ae(r)}function ja(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=He}function We(r){var i=typeof r;return r!=null&&(i=="object"||i=="function")}function Je(r){return r!=null&&typeof r=="object"}var w1=NS?Zt(NS):FU;function $3(r,i){return r===i||Kd(r,i,rp(i))}function P3(r,i,c){return c=typeof c=="function"?c:n,Kd(r,i,rp(i),c)}function M3(r){return E1(r)&&r!=+r}function F3(r){if(yK(r))throw new ie(u);return pw(r)}function N3(r){return r===null}function L3(r){return r==null}function E1(r){return typeof r=="number"||Je(r)&&kt(r)==Uo}function ic(r){if(!Je(r)||kt(r)!=dr)return!1;var i=ga(r);if(i===null)return!0;var c=ke.call(i,"constructor")&&i.constructor;return typeof c=="function"&&c instanceof c&&fa.call(c)==PD}var pp=LS?Zt(LS):NU;function D3(r){return S1(r)&&r>=-9007199254740991&&r<=He}var O1=DS?Zt(DS):LU;function Wa(r){return typeof r=="string"||!oe(r)&&Je(r)&&kt(r)==Bo}function en(r){return typeof r=="symbol"||Je(r)&&kt(r)==na}var Ms=US?Zt(US):DU;function U3(r){return r===n}function K3(r){return Je(r)&&It(r)==jo}function B3(r){return Je(r)&&kt(r)==rL}var j3=Pa(jd),W3=Pa(function(r,i){return r<=i});function T1(r){if(!r)return[];if(Kt(r))return Wa(r)?Pn(r):Ut(r);if(Jo&&r[Jo])return SD(r[Jo]());var i=It(r),c=i==Cn?xd:i==$n?ua:Fs;return c(r)}function Sr(r){if(!r)return r===0?r:0;if(r=_n(r),r===ne||r===-1/0){var i=r<0?-1:1;return i*kn}return r===r?r:0}function ae(r){var i=Sr(r),c=i%1;return i===i?c?i-c:i:0}function I1(r){return r?yi(ae(r),0,Ot):0}function _n(r){if(typeof r=="number")return r;if(en(r))return hr;if(We(r)){var i=typeof r.valueOf=="function"?r.valueOf():r;r=We(i)?i+"":i}if(typeof r!="string")return r===0?r:+r;r=JS(r);var c=OL.test(r);return c||IL.test(r)?iD(r.slice(2),c?2:8):EL.test(r)?hr:+r}function A1(r){return Xn(r,Bt(r))}function q3(r){return r?yi(ae(r),-9007199254740991,He):r===0?r:0}function xe(r){return r==null?"":Qt(r)}var J3=Cs(function(r,i){if(nc(i)||Kt(i)){Xn(i,dt(i),r);return}for(var c in i)ke.call(i,c)&&Yo(r,c,i[c])}),R1=Cs(function(r,i){Xn(i,Bt(i),r)}),qa=Cs(function(r,i,c,a){Xn(i,Bt(i),r,a)}),G3=Cs(function(r,i,c,a){Xn(i,dt(i),r,a)}),H3=yr(Fd);function V3(r,i){var c=ks(r);return i==null?c:ow(c,i)}var z3=pe(function(r,i){r=Me(r);var c=-1,a=i.length,f=a>2?i[2]:n;for(f&&Ct(i[0],i[1],f)&&(a=1);++c<a;)for(var m=i[c],y=Bt(m),v=-1,E=y.length;++v<E;){var k=y[v],$=r[k];($===n||Fn($,As[k])&&!ke.call(r,k))&&(r[k]=m[k])}return r}),Y3=pe(function(r){return r.push(n,Jw),Xt(x1,n,r)});function X3(r,i){return BS(r,X(i,3),Yn)}function Z3(r,i){return BS(r,X(i,3),Ld)}function Q3(r,i){return r==null?r:Nd(r,X(i,3),Bt)}function e2(r,i){return r==null?r:fw(r,X(i,3),Bt)}function t2(r,i){return r&&Yn(r,X(i,3))}function n2(r,i){return r&&Ld(r,X(i,3))}function r2(r){return r==null?[]:Ta(r,dt(r))}function i2(r){return r==null?[]:Ta(r,Bt(r))}function gp(r,i,c){var a=r==null?n:bi(r,i);return a===n?c:a}function s2(r,i){return r!=null&&Vw(r,i,RU)}function mp(r,i){return r!=null&&Vw(r,i,xU)}var o2=Kw(function(r,i,c){i!=null&&typeof i.toString!="function"&&(i=ha.call(i)),r[i]=c},yp(jt)),c2=Kw(function(r,i,c){i!=null&&typeof i.toString!="function"&&(i=ha.call(i)),ke.call(r,i)?r[i].push(c):r[i]=[c]},X),u2=pe(Zo);function dt(r){return Kt(r)?iw(r):Bd(r)}function Bt(r){return Kt(r)?iw(r,!0):UU(r)}function a2(r,i){var c={};return i=X(i,3),Yn(r,function(a,f,m){mr(c,i(a,f,m),a)}),c}function l2(r,i){var c={};return i=X(i,3),Yn(r,function(a,f,m){mr(c,f,i(a,f,m))}),c}var f2=Cs(function(r,i,c){Ia(r,i,c)}),x1=Cs(function(r,i,c,a){Ia(r,i,c,a)}),h2=yr(function(r,i){var c={};if(r==null)return c;var a=!1;i=De(i,function(m){return m=Lr(m,r),a||(a=m.length>1),m}),Xn(r,tp(r),c),a&&(c=pn(c,S|T|I,oK));for(var f=i.length;f--;)Hd(c,i[f]);return c});function d2(r,i){return k1(r,Ba(X(i)))}var p2=yr(function(r,i){return r==null?{}:BU(r,i)});function k1(r,i){if(r==null)return{};var c=De(tp(r),function(a){return[a]});return i=X(i),Sw(r,c,function(a,f){return i(a,f[0])})}function g2(r,i,c){i=Lr(i,r);var a=-1,f=i.length;for(f||(f=1,r=n);++a<f;){var m=r==null?n:r[Zn(i[a])];m===n&&(a=f,m=c),r=vr(m)?m.call(r):m}return r}function m2(r,i,c){return r==null?r:ec(r,i,c)}function _2(r,i,c,a){return a=typeof a=="function"?a:n,r==null?r:ec(r,i,c,a)}var C1=Ww(dt),$1=Ww(Bt);function y2(r,i,c){var a=oe(r),f=a||Ur(r)||Ms(r);if(i=X(i,4),c==null){var m=r&&r.constructor;f?c=a?new m:[]:We(r)?c=vr(m)?ks(ga(r)):{}:c={}}return(f?fn:Yn)(r,function(y,v,E){return i(c,y,v,E)}),c}function b2(r,i){return r==null?!0:Hd(r,i)}function v2(r,i,c){return r==null?r:Iw(r,i,Yd(c))}function S2(r,i,c,a){return a=typeof a=="function"?a:n,r==null?r:Iw(r,i,Yd(c),a)}function Fs(r){return r==null?[]:Rd(r,dt(r))}function w2(r){return r==null?[]:Rd(r,Bt(r))}function E2(r,i,c){return c===n&&(c=i,i=n),c!==n&&(c=_n(c),c=c===c?c:0),i!==n&&(i=_n(i),i=i===i?i:0),yi(_n(r),i,c)}function O2(r,i,c){return i=Sr(i),c===n?(c=i,i=0):c=Sr(c),r=_n(r),kU(r,i,c)}function T2(r,i,c){if(c&&typeof c!="boolean"&&Ct(r,i,c)&&(i=c=n),c===n&&(typeof i=="boolean"?(c=i,i=n):typeof r=="boolean"&&(c=r,r=n)),r===n&&i===n?(r=0,i=1):(r=Sr(r),i===n?(i=r,r=0):i=Sr(i)),r>i){var a=r;r=i,i=a}if(c||r%1||i%1){var f=nw();return Tt(r+f*(i-r+rD("1e-"+((f+"").length-1))),i)}return qd(r,i)}var I2=$s(function(r,i,c){return i=i.toLowerCase(),r+(c?P1(i):i)});function P1(r){return _p(xe(r).toLowerCase())}function M1(r){return r=xe(r),r&&r.replace(RL,mD).replace(HL,"")}function A2(r,i,c){r=xe(r),i=Qt(i);var a=r.length;c=c===n?a:yi(ae(c),0,a);var f=c;return c-=i.length,c>=0&&r.slice(c,f)==i}function R2(r){return r=xe(r),r&&uL.test(r)?r.replace(fS,_D):r}function x2(r){return r=xe(r),r&&pL.test(r)?r.replace(hd,"\\$&"):r}var k2=$s(function(r,i,c){return r+(c?"-":"")+i.toLowerCase()}),C2=$s(function(r,i,c){return r+(c?" ":"")+i.toLowerCase()}),$2=Lw("toLowerCase");function P2(r,i,c){r=xe(r),i=ae(i);var a=i?Ts(r):0;if(!i||a>=i)return r;var f=(i-a)/2;return $a(ba(f),c)+r+$a(ya(f),c)}function M2(r,i,c){r=xe(r),i=ae(i);var a=i?Ts(r):0;return i&&a<i?r+$a(i-a,c):r}function F2(r,i,c){r=xe(r),i=ae(i);var a=i?Ts(r):0;return i&&a<i?$a(i-a,c)+r:r}function N2(r,i,c){return c||i==null?i=0:i&&(i=+i),WD(xe(r).replace(dd,""),i||0)}function L2(r,i,c){return(c?Ct(r,i,c):i===n)?i=1:i=ae(i),Jd(xe(r),i)}function D2(){var r=arguments,i=xe(r[0]);return r.length<3?i:i.replace(r[1],r[2])}var U2=$s(function(r,i,c){return r+(c?"_":"")+i.toLowerCase()});function K2(r,i,c){return c&&typeof c!="number"&&Ct(r,i,c)&&(i=c=n),c=c===n?Ot:c>>>0,c?(r=xe(r),r&&(typeof i=="string"||i!=null&&!pp(i))&&(i=Qt(i),!i&&Os(r))?Dr(Pn(r),0,c):r.split(i,c)):[]}var B2=$s(function(r,i,c){return r+(c?" ":"")+_p(i)});function j2(r,i,c){return r=xe(r),c=c==null?0:yi(ae(c),0,r.length),i=Qt(i),r.slice(c,c+i.length)==i}function W2(r,i,c){var a=g.templateSettings;c&&Ct(r,i,c)&&(i=n),r=xe(r),i=qa({},i,a,qw);var f=qa({},i.imports,a.imports,qw),m=dt(f),y=Rd(f,m),v,E,k=0,$=i.interpolate||ra,M="__p += '",B=kd((i.escape||ra).source+"|"+$.source+"|"+($===hS?wL:ra).source+"|"+(i.evaluate||ra).source+"|$","g"),G="//# sourceURL="+(ke.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ZL+"]")+`
`;r.replace(B,function(Q,_e,ve,tn,$t,nn){return ve||(ve=tn),M+=r.slice(k,nn).replace(xL,yD),_e&&(v=!0,M+=`' +
__e(`+_e+`) +
'`),$t&&(E=!0,M+=`';
`+$t+`;
__p += '`),ve&&(M+=`' +
((__t = (`+ve+`)) == null ? '' : __t) +
'`),k=nn+Q.length,Q}),M+=`';
`;var Z=ke.call(i,"variable")&&i.variable;if(!Z)M=`with (obj) {
`+M+`
}
`;else if(vL.test(Z))throw new ie(h);M=(E?M.replace(iL,""):M).replace(sL,"$1").replace(oL,"$1;"),M="function("+(Z||"obj")+`) {
`+(Z?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(v?", __e = _.escape":"")+(E?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+M+`return __p
}`;var he=N1(function(){return Re(m,G+"return "+M).apply(n,y)});if(he.source=M,dp(he))throw he;return he}function q2(r){return xe(r).toLowerCase()}function J2(r){return xe(r).toUpperCase()}function G2(r,i,c){if(r=xe(r),r&&(c||i===n))return JS(r);if(!r||!(i=Qt(i)))return r;var a=Pn(r),f=Pn(i),m=GS(a,f),y=HS(a,f)+1;return Dr(a,m,y).join("")}function H2(r,i,c){if(r=xe(r),r&&(c||i===n))return r.slice(0,zS(r)+1);if(!r||!(i=Qt(i)))return r;var a=Pn(r),f=HS(a,Pn(i))+1;return Dr(a,0,f).join("")}function V2(r,i,c){if(r=xe(r),r&&(c||i===n))return r.replace(dd,"");if(!r||!(i=Qt(i)))return r;var a=Pn(r),f=GS(a,Pn(i));return Dr(a,f).join("")}function z2(r,i){var c=U,a=F;if(We(i)){var f="separator"in i?i.separator:f;c="length"in i?ae(i.length):c,a="omission"in i?Qt(i.omission):a}r=xe(r);var m=r.length;if(Os(r)){var y=Pn(r);m=y.length}if(c>=m)return r;var v=c-Ts(a);if(v<1)return a;var E=y?Dr(y,0,v).join(""):r.slice(0,v);if(f===n)return E+a;if(y&&(v+=E.length-v),pp(f)){if(r.slice(v).search(f)){var k,$=E;for(f.global||(f=kd(f.source,xe(dS.exec(f))+"g")),f.lastIndex=0;k=f.exec($);)var M=k.index;E=E.slice(0,M===n?v:M)}}else if(r.indexOf(Qt(f),v)!=v){var B=E.lastIndexOf(f);B>-1&&(E=E.slice(0,B))}return E+a}function Y2(r){return r=xe(r),r&&cL.test(r)?r.replace(lS,TD):r}var X2=$s(function(r,i,c){return r+(c?" ":"")+i.toUpperCase()}),_p=Lw("toUpperCase");function F1(r,i,c){return r=xe(r),i=c?n:i,i===n?vD(r)?RD(r):fD(r):r.match(i)||[]}var N1=pe(function(r,i){try{return Xt(r,n,i)}catch(c){return dp(c)?c:new ie(c)}}),Z2=yr(function(r,i){return fn(i,function(c){c=Zn(c),mr(r,c,fp(r[c],r))}),r});function Q2(r){var i=r==null?0:r.length,c=X();return r=i?De(r,function(a){if(typeof a[1]!="function")throw new hn(l);return[c(a[0]),a[1]]}):[],pe(function(a){for(var f=-1;++f<i;){var m=r[f];if(Xt(m[0],this,a))return Xt(m[1],this,a)}})}function ej(r){return TU(pn(r,S))}function yp(r){return function(){return r}}function tj(r,i){return r==null||r!==r?i:r}var nj=Uw(),rj=Uw(!0);function jt(r){return r}function bp(r){return gw(typeof r=="function"?r:pn(r,S))}function ij(r){return _w(pn(r,S))}function sj(r,i){return yw(r,pn(i,S))}var oj=pe(function(r,i){return function(c){return Zo(c,r,i)}}),cj=pe(function(r,i){return function(c){return Zo(r,c,i)}});function vp(r,i,c){var a=dt(i),f=Ta(i,a);c==null&&!(We(i)&&(f.length||!a.length))&&(c=i,i=r,r=this,f=Ta(i,dt(i)));var m=!(We(c)&&"chain"in c)||!!c.chain,y=vr(r);return fn(f,function(v){var E=i[v];r[v]=E,y&&(r.prototype[v]=function(){var k=this.__chain__;if(m||k){var $=r(this.__wrapped__),M=$.__actions__=Ut(this.__actions__);return M.push({func:E,args:arguments,thisArg:r}),$.__chain__=k,$}return E.apply(r,$r([this.value()],arguments))})}),r}function uj(){return yt._===this&&(yt._=MD),this}function Sp(){}function aj(r){return r=ae(r),pe(function(i){return bw(i,r)})}var lj=Zd(De),fj=Zd(KS),hj=Zd(Ed);function L1(r){return sp(r)?Od(Zn(r)):jU(r)}function dj(r){return function(i){return r==null?n:bi(r,i)}}var pj=Bw(),gj=Bw(!0);function wp(){return[]}function Ep(){return!1}function mj(){return{}}function _j(){return""}function yj(){return!0}function bj(r,i){if(r=ae(r),r<1||r>He)return[];var c=Ot,a=Tt(r,Ot);i=X(i),r-=Ot;for(var f=Ad(a,i);++c<r;)i(c);return f}function vj(r){return oe(r)?De(r,Zn):en(r)?[r]:Ut(r1(xe(r)))}function Sj(r){var i=++$D;return xe(r)+i}var wj=Ca(function(r,i){return r+i},0),Ej=Qd("ceil"),Oj=Ca(function(r,i){return r/i},1),Tj=Qd("floor");function Ij(r){return r&&r.length?Oa(r,jt,Dd):n}function Aj(r,i){return r&&r.length?Oa(r,X(i,2),Dd):n}function Rj(r){return WS(r,jt)}function xj(r,i){return WS(r,X(i,2))}function kj(r){return r&&r.length?Oa(r,jt,jd):n}function Cj(r,i){return r&&r.length?Oa(r,X(i,2),jd):n}var $j=Ca(function(r,i){return r*i},1),Pj=Qd("round"),Mj=Ca(function(r,i){return r-i},0);function Fj(r){return r&&r.length?Id(r,jt):0}function Nj(r,i){return r&&r.length?Id(r,X(i,2)):0}return g.after=i3,g.ary=p1,g.assign=J3,g.assignIn=R1,g.assignInWith=qa,g.assignWith=G3,g.at=H3,g.before=g1,g.bind=fp,g.bindAll=Z2,g.bindKey=m1,g.castArray=m3,g.chain=f1,g.chunk=TK,g.compact=IK,g.concat=AK,g.cond=Q2,g.conforms=ej,g.constant=yp,g.countBy=FB,g.create=V3,g.curry=_1,g.curryRight=y1,g.debounce=b1,g.defaults=z3,g.defaultsDeep=Y3,g.defer=s3,g.delay=o3,g.difference=RK,g.differenceBy=xK,g.differenceWith=kK,g.drop=CK,g.dropRight=$K,g.dropRightWhile=PK,g.dropWhile=MK,g.fill=FK,g.filter=LB,g.flatMap=KB,g.flatMapDeep=BB,g.flatMapDepth=jB,g.flatten=c1,g.flattenDeep=NK,g.flattenDepth=LK,g.flip=c3,g.flow=nj,g.flowRight=rj,g.fromPairs=DK,g.functions=r2,g.functionsIn=i2,g.groupBy=WB,g.initial=KK,g.intersection=BK,g.intersectionBy=jK,g.intersectionWith=WK,g.invert=o2,g.invertBy=c2,g.invokeMap=JB,g.iteratee=bp,g.keyBy=GB,g.keys=dt,g.keysIn=Bt,g.map=Da,g.mapKeys=a2,g.mapValues=l2,g.matches=ij,g.matchesProperty=sj,g.memoize=Ka,g.merge=f2,g.mergeWith=x1,g.method=oj,g.methodOf=cj,g.mixin=vp,g.negate=Ba,g.nthArg=aj,g.omit=h2,g.omitBy=d2,g.once=u3,g.orderBy=HB,g.over=lj,g.overArgs=a3,g.overEvery=fj,g.overSome=hj,g.partial=hp,g.partialRight=v1,g.partition=VB,g.pick=p2,g.pickBy=k1,g.property=L1,g.propertyOf=dj,g.pull=HK,g.pullAll=a1,g.pullAllBy=VK,g.pullAllWith=zK,g.pullAt=YK,g.range=pj,g.rangeRight=gj,g.rearg=l3,g.reject=XB,g.remove=XK,g.rest=f3,g.reverse=ap,g.sampleSize=QB,g.set=m2,g.setWith=_2,g.shuffle=e3,g.slice=ZK,g.sortBy=r3,g.sortedUniq=sB,g.sortedUniqBy=oB,g.split=K2,g.spread=h3,g.tail=cB,g.take=uB,g.takeRight=aB,g.takeRightWhile=lB,g.takeWhile=fB,g.tap=IB,g.throttle=d3,g.thru=La,g.toArray=T1,g.toPairs=C1,g.toPairsIn=$1,g.toPath=vj,g.toPlainObject=A1,g.transform=y2,g.unary=p3,g.union=hB,g.unionBy=dB,g.unionWith=pB,g.uniq=gB,g.uniqBy=mB,g.uniqWith=_B,g.unset=b2,g.unzip=lp,g.unzipWith=l1,g.update=v2,g.updateWith=S2,g.values=Fs,g.valuesIn=w2,g.without=yB,g.words=F1,g.wrap=g3,g.xor=bB,g.xorBy=vB,g.xorWith=SB,g.zip=wB,g.zipObject=EB,g.zipObjectDeep=OB,g.zipWith=TB,g.entries=C1,g.entriesIn=$1,g.extend=R1,g.extendWith=qa,vp(g,g),g.add=wj,g.attempt=N1,g.camelCase=I2,g.capitalize=P1,g.ceil=Ej,g.clamp=E2,g.clone=_3,g.cloneDeep=b3,g.cloneDeepWith=v3,g.cloneWith=y3,g.conformsTo=S3,g.deburr=M1,g.defaultTo=tj,g.divide=Oj,g.endsWith=A2,g.eq=Fn,g.escape=R2,g.escapeRegExp=x2,g.every=NB,g.find=DB,g.findIndex=s1,g.findKey=X3,g.findLast=UB,g.findLastIndex=o1,g.findLastKey=Z3,g.floor=Tj,g.forEach=h1,g.forEachRight=d1,g.forIn=Q3,g.forInRight=e2,g.forOwn=t2,g.forOwnRight=n2,g.get=gp,g.gt=w3,g.gte=E3,g.has=s2,g.hasIn=mp,g.head=u1,g.identity=jt,g.includes=qB,g.indexOf=UK,g.inRange=O2,g.invoke=u2,g.isArguments=wi,g.isArray=oe,g.isArrayBuffer=O3,g.isArrayLike=Kt,g.isArrayLikeObject=Ve,g.isBoolean=T3,g.isBuffer=Ur,g.isDate=I3,g.isElement=A3,g.isEmpty=R3,g.isEqual=x3,g.isEqualWith=k3,g.isError=dp,g.isFinite=C3,g.isFunction=vr,g.isInteger=S1,g.isLength=ja,g.isMap=w1,g.isMatch=$3,g.isMatchWith=P3,g.isNaN=M3,g.isNative=F3,g.isNil=L3,g.isNull=N3,g.isNumber=E1,g.isObject=We,g.isObjectLike=Je,g.isPlainObject=ic,g.isRegExp=pp,g.isSafeInteger=D3,g.isSet=O1,g.isString=Wa,g.isSymbol=en,g.isTypedArray=Ms,g.isUndefined=U3,g.isWeakMap=K3,g.isWeakSet=B3,g.join=qK,g.kebabCase=k2,g.last=mn,g.lastIndexOf=JK,g.lowerCase=C2,g.lowerFirst=$2,g.lt=j3,g.lte=W3,g.max=Ij,g.maxBy=Aj,g.mean=Rj,g.meanBy=xj,g.min=kj,g.minBy=Cj,g.stubArray=wp,g.stubFalse=Ep,g.stubObject=mj,g.stubString=_j,g.stubTrue=yj,g.multiply=$j,g.nth=GK,g.noConflict=uj,g.noop=Sp,g.now=Ua,g.pad=P2,g.padEnd=M2,g.padStart=F2,g.parseInt=N2,g.random=T2,g.reduce=zB,g.reduceRight=YB,g.repeat=L2,g.replace=D2,g.result=g2,g.round=Pj,g.runInContext=w,g.sample=ZB,g.size=t3,g.snakeCase=U2,g.some=n3,g.sortedIndex=QK,g.sortedIndexBy=eB,g.sortedIndexOf=tB,g.sortedLastIndex=nB,g.sortedLastIndexBy=rB,g.sortedLastIndexOf=iB,g.startCase=B2,g.startsWith=j2,g.subtract=Mj,g.sum=Fj,g.sumBy=Nj,g.template=W2,g.times=bj,g.toFinite=Sr,g.toInteger=ae,g.toLength=I1,g.toLower=q2,g.toNumber=_n,g.toSafeInteger=q3,g.toString=xe,g.toUpper=J2,g.trim=G2,g.trimEnd=H2,g.trimStart=V2,g.truncate=z2,g.unescape=Y2,g.uniqueId=Sj,g.upperCase=X2,g.upperFirst=_p,g.each=h1,g.eachRight=d1,g.first=u1,vp(g,function(){var r={};return Yn(g,function(i,c){ke.call(g.prototype,c)||(r[c]=i)}),r}(),{chain:!1}),g.VERSION=s,fn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){g[r].placeholder=g}),fn(["drop","take"],function(r,i){ye.prototype[r]=function(c){c=c===n?1:at(ae(c),0);var a=this.__filtered__&&!i?new ye(this):this.clone();return a.__filtered__?a.__takeCount__=Tt(c,a.__takeCount__):a.__views__.push({size:Tt(c,Ot),type:r+(a.__dir__<0?"Right":"")}),a},ye.prototype[r+"Right"]=function(c){return this.reverse()[r](c).reverse()}}),fn(["filter","map","takeWhile"],function(r,i){var c=i+1,a=c==Ie||c==je;ye.prototype[r]=function(f){var m=this.clone();return m.__iteratees__.push({iteratee:X(f,3),type:c}),m.__filtered__=m.__filtered__||a,m}}),fn(["head","last"],function(r,i){var c="take"+(i?"Right":"");ye.prototype[r]=function(){return this[c](1).value()[0]}}),fn(["initial","tail"],function(r,i){var c="drop"+(i?"":"Right");ye.prototype[r]=function(){return this.__filtered__?new ye(this):this[c](1)}}),ye.prototype.compact=function(){return this.filter(jt)},ye.prototype.find=function(r){return this.filter(r).head()},ye.prototype.findLast=function(r){return this.reverse().find(r)},ye.prototype.invokeMap=pe(function(r,i){return typeof r=="function"?new ye(this):this.map(function(c){return Zo(c,r,i)})}),ye.prototype.reject=function(r){return this.filter(Ba(X(r)))},ye.prototype.slice=function(r,i){r=ae(r);var c=this;return c.__filtered__&&(r>0||i<0)?new ye(c):(r<0?c=c.takeRight(-r):r&&(c=c.drop(r)),i!==n&&(i=ae(i),c=i<0?c.dropRight(-i):c.take(i-r)),c)},ye.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},ye.prototype.toArray=function(){return this.take(Ot)},Yn(ye.prototype,function(r,i){var c=/^(?:filter|find|map|reject)|While$/.test(i),a=/^(?:head|last)$/.test(i),f=g[a?"take"+(i=="last"?"Right":""):i],m=a||/^find/.test(i);f&&(g.prototype[i]=function(){var y=this.__wrapped__,v=a?[1]:arguments,E=y instanceof ye,k=v[0],$=E||oe(y),M=function(_e){var ve=f.apply(g,$r([_e],v));return a&&B?ve[0]:ve};$&&c&&typeof k=="function"&&k.length!=1&&(E=$=!1);var B=this.__chain__,G=!!this.__actions__.length,Z=m&&!B,he=E&&!G;if(!m&&$){y=he?y:new ye(this);var Q=r.apply(y,v);return Q.__actions__.push({func:La,args:[M],thisArg:n}),new dn(Q,B)}return Z&&he?r.apply(this,v):(Q=this.thru(M),Z?a?Q.value()[0]:Q.value():Q)})}),fn(["pop","push","shift","sort","splice","unshift"],function(r){var i=aa[r],c=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",a=/^(?:pop|shift)$/.test(r);g.prototype[r]=function(){var f=arguments;if(a&&!this.__chain__){var m=this.value();return i.apply(oe(m)?m:[],f)}return this[c](function(y){return i.apply(oe(y)?y:[],f)})}}),Yn(ye.prototype,function(r,i){var c=g[i];if(c){var a=c.name+"";ke.call(xs,a)||(xs[a]=[]),xs[a].push({name:i,func:c})}}),xs[ka(n,K).name]=[{name:"wrapper",func:n}],ye.prototype.clone=YD,ye.prototype.reverse=XD,ye.prototype.value=ZD,g.prototype.at=AB,g.prototype.chain=RB,g.prototype.commit=xB,g.prototype.next=kB,g.prototype.plant=$B,g.prototype.reverse=PB,g.prototype.toJSON=g.prototype.valueOf=g.prototype.value=MB,g.prototype.first=g.prototype.head,Jo&&(g.prototype[Jo]=CB),g},Is=xD();pi?((pi.exports=Is)._=Is,bd._=Is):yt._=Is}).call(Pe)}(cc,cc.exports);var Q1=cc.exports,we=Ue(Q1);const eE=1,Ja=2,tE={INIT_ACK:{statusByte:2,parse:e=>({type:"init-ack",projectName:e[0]})},INIT:{statusByte:3,parse:e=>({type:"init-project",tracksCount:e[0]})},DONE:{statusByte:4,parse:e=>({type:"init-done"})},TRACK:{statusByte:5,parse:e=>({type:"init-track",name:e[0],trackIndex:we.toNumber(e[1]),color:we.toNumber(e[2])})},CLIP:{statusByte:6,parse:e=>({type:"init-clip",name:e[0],trackIndex:we.toNumber(e[1]),clipIndex:we.toNumber(e[2]),color:we.toNumber(e[3]),startTime:we.toNumber(e[4]),endTime:we.toNumber(e[5])})},BEAT:{statusByte:7,parse:e=>({type:"beat",value:we.toNumber(e[0])})},BAR_BEAT:{statusByte:8,parse:e=>({type:"bar-beat",value:we.toNumber(e[0])})},SIG:{statusByte:9,parse:e=>({type:"sig",numer:we.toNumber(e[0]),denom:we.toNumber(e[1])})},TEMPO:{statusByte:10,parse:e=>({type:"tempo",value:we.toNumber(e[0])})},IS_PLAYING:{statusByte:11,parse:e=>({type:"is-playing",value:we.toNumber(e[0])===1})},CUE:{statusByte:12,parse:e=>({type:"init-cue",id:we.toNumber(e[0]),name:e[1],time:we.toNumber(e[2]),index:we.toNumber(e[3])})},METRONOME_STATE:{statusByte:13,parse:e=>({type:"metronome-state",value:we.toNumber(e[0])===1})},LOOP_STATE:{statusByte:14,parse:e=>({type:"loop-state",value:we.toNumber(e[0])===1})},HALF_BEAT:{statusByte:15,parse:e=>({type:"half-beat",isHalf:we.toNumber(e[0])===1})}},nE=we.fromPairs(we.map(tE,e=>[e.statusByte,e])),rE=e=>{const t=we.join(we.map(e,s=>String.fromCharCode(s)),""),n=we.split(t,String.fromCharCode(eE));return[we.toNumber(n[0]),n.splice(1)]},iE=e=>{try{if(e.manufacturer===Ja){const[t,n]=rE(e.body),s=nE[t];if(s!==void 0)return s.parse(n);console.warn("Did not find parser for message",e)}}catch(t){console.error("Got error parsing message",t)}},Fp=e=>{const t=[];return we.forEach(e,(n,s)=>{t.push(e.charCodeAt(s))}),t},yn={base:(e,t)=>({type:"sysex",manufacturer:Ja,body:[e,...Fp(t.toString())]}),baseJSON:(e,t)=>({type:"sysex",manufacturer:Ja,body:[e,...Fp(JSON.stringify(t))]}),init:()=>yn.base(64,1),initReady:e=>yn.baseJSON(65,{tracks:e}),play:()=>yn.base(80,1),stop:()=>yn.base(81,1),jumpToCue:e=>yn.base(82,e),jumpBy:e=>yn.base(84,e),record:()=>yn.base(85,1),metronome:e=>yn.base(86,e?1:0),loop:e=>yn.base(87,e?1:0)};function bn(e){for(var t=arguments.length,n=Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Ei(e){return!!e&&!!e[Wt]}function Kr(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var s=Object.getPrototypeOf(n);if(s===null)return!0;var o=Object.hasOwnProperty.call(s,"constructor")&&s.constructor;return o===Object||typeof o=="function"&&Function.toString.call(o)===hE}(e)||Array.isArray(e)||!!e[Jp]||!!(!((t=e.constructor)===null||t===void 0)&&t[Jp])||Ha(e)||Va(e))}function Ns(e,t,n){n===void 0&&(n=!1),Oi(e)===0?(n?Object.keys:ol)(e).forEach(function(s){n&&typeof s=="symbol"||t(s,e[s],e)}):e.forEach(function(s,o){return t(o,s,e)})}function Oi(e){var t=e[Wt];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Ha(e)?2:Va(e)?3:0}function Ga(e,t){return Oi(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function sE(e,t){return Oi(e)===2?e.get(t):e[t]}function Np(e,t,n){var s=Oi(e);s===2?e.set(t,n):s===3?e.add(n):e[t]=n}function oE(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Ha(e){return lE&&e instanceof Map}function Va(e){return fE&&e instanceof Set}function Br(e){return e.o||e.t}function za(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=dE(e);delete t[Wt];for(var n=ol(t),s=0;s<n.length;s++){var o=n[s],u=t[o];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(t[o]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function Ya(e,t){return t===void 0&&(t=!1),Xa(e)||Ei(e)||!Kr(e)||(Oi(e)>1&&(e.set=e.add=e.clear=e.delete=cE),Object.freeze(e),t&&Ns(e,function(n,s){return Ya(s,!0)},!0)),e}function cE(){bn(2)}function Xa(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Ln(e){var t=pE[e];return t||bn(18,e),t}function Lp(){return Ls}function Za(e,t){t&&(Ln("Patches"),e.u=[],e.s=[],e.v=t)}function uc(e){Qa(e),e.p.forEach(uE),e.p=null}function Qa(e){e===Ls&&(Ls=e.l)}function Dp(e){return Ls={p:[],l:Ls,h:e,m:!0,_:0}}function uE(e){var t=e[Wt];t.i===0||t.i===1?t.j():t.g=!0}function el(e,t){t._=t.p.length;var n=t.p[0],s=e!==void 0&&e!==n;return t.h.O||Ln("ES5").S(t,e,s),s?(n[Wt].P&&(uc(t),bn(4)),Kr(e)&&(e=ac(t,e),t.l||lc(t,e)),t.u&&Ln("Patches").M(n[Wt].t,e,t.u,t.s)):e=ac(t,n,[]),uc(t),t.u&&t.v(t.u,t.s),e!==qp?e:void 0}function ac(e,t,n){if(Xa(t))return t;var s=t[Wt];if(!s)return Ns(t,function(h,d){return Up(e,s,t,h,d,n)},!0),t;if(s.A!==e)return t;if(!s.P)return lc(e,s.t,!0),s.t;if(!s.I){s.I=!0,s.A._--;var o=s.i===4||s.i===5?s.o=za(s.k):s.o,u=o,l=!1;s.i===3&&(u=new Set(o),o.clear(),l=!0),Ns(u,function(h,d){return Up(e,s,o,h,d,n,l)}),lc(e,o,!1),n&&e.u&&Ln("Patches").N(s,n,e.u,e.s)}return s.o}function Up(e,t,n,s,o,u,l){if(Ei(o)){var h=ac(e,o,u&&t&&t.i!==3&&!Ga(t.R,s)?u.concat(s):void 0);if(Np(n,s,h),!Ei(h))return;e.m=!1}else l&&n.add(o);if(Kr(o)&&!Xa(o)){if(!e.h.D&&e._<1)return;ac(e,o),t&&t.A.l||lc(e,o)}}function lc(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&Ya(t,n)}function tl(e,t){var n=e[Wt];return(n?Br(n):e)[t]}function Kp(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var s=Object.getOwnPropertyDescriptor(n,t);if(s)return s;n=Object.getPrototypeOf(n)}}function nl(e){e.P||(e.P=!0,e.l&&nl(e.l))}function rl(e){e.o||(e.o=za(e.t))}function il(e,t,n){var s=Ha(t)?Ln("MapSet").F(t,n):Va(t)?Ln("MapSet").T(t,n):e.O?function(o,u){var l=Array.isArray(o),h={i:l?1:0,A:u?u.A:Lp(),P:!1,I:!1,R:{},l:u,t:o,k:null,o:null,j:null,C:!1},d=h,_=cl;l&&(d=[h],_=Ds);var b=Proxy.revocable(d,_),S=b.revoke,T=b.proxy;return h.k=T,h.j=S,T}(t,n):Ln("ES5").J(t,n);return(n?n.A:Lp()).p.push(s),s}function aE(e){return Ei(e)||bn(22,e),function t(n){if(!Kr(n))return n;var s,o=n[Wt],u=Oi(n);if(o){if(!o.P&&(o.i<4||!Ln("ES5").K(o)))return o.t;o.I=!0,s=Bp(n,u),o.I=!1}else s=Bp(n,u);return Ns(s,function(l,h){o&&sE(o.t,l)===h||Np(s,l,t(h))}),u===3?new Set(s):s}(e)}function Bp(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return za(e)}var jp,Ls,sl=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",lE=typeof Map<"u",fE=typeof Set<"u",Wp=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",qp=sl?Symbol.for("immer-nothing"):((jp={})["immer-nothing"]=!0,jp),Jp=sl?Symbol.for("immer-draftable"):"__$immer_draftable",Wt=sl?Symbol.for("immer-state"):"__$immer_state",hE=""+Object.prototype.constructor,ol=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,dE=Object.getOwnPropertyDescriptors||function(e){var t={};return ol(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},pE={},cl={get:function(e,t){if(t===Wt)return e;var n=Br(e);if(!Ga(n,t))return function(o,u,l){var h,d=Kp(u,l);return d?"value"in d?d.value:(h=d.get)===null||h===void 0?void 0:h.call(o.k):void 0}(e,n,t);var s=n[t];return e.I||!Kr(s)?s:s===tl(e.t,t)?(rl(e),e.o[t]=il(e.A.h,s,e)):s},has:function(e,t){return t in Br(e)},ownKeys:function(e){return Reflect.ownKeys(Br(e))},set:function(e,t,n){var s=Kp(Br(e),t);if(s!=null&&s.set)return s.set.call(e.k,n),!0;if(!e.P){var o=tl(Br(e),t),u=o==null?void 0:o[Wt];if(u&&u.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(oE(n,o)&&(n!==void 0||Ga(e.t,t)))return!0;rl(e),nl(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return tl(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,rl(e),nl(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Br(e),s=Reflect.getOwnPropertyDescriptor(n,t);return s&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:s.enumerable,value:n[t]}},defineProperty:function(){bn(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){bn(12)}},Ds={};Ns(cl,function(e,t){Ds[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Ds.deleteProperty=function(e,t){return Ds.set.call(this,e,t,void 0)},Ds.set=function(e,t,n){return cl.set.call(this,e[0],t,n,e[0])};var gE=function(){function e(n){var s=this;this.O=Wp,this.D=!0,this.produce=function(o,u,l){if(typeof o=="function"&&typeof u!="function"){var h=u;u=o;var d=s;return function(W){var L=this;W===void 0&&(W=h);for(var K=arguments.length,ee=Array(K>1?K-1:0),q=1;q<K;q++)ee[q-1]=arguments[q];return d.produce(W,function(H){var V;return(V=u).call.apply(V,[L,H].concat(ee))})}}var _;if(typeof u!="function"&&bn(6),l!==void 0&&typeof l!="function"&&bn(7),Kr(o)){var b=Dp(s),S=il(s,o,void 0),T=!0;try{_=u(S),T=!1}finally{T?uc(b):Qa(b)}return typeof Promise<"u"&&_ instanceof Promise?_.then(function(W){return Za(b,l),el(W,b)},function(W){throw uc(b),W}):(Za(b,l),el(_,b))}if(!o||typeof o!="object"){if((_=u(o))===void 0&&(_=o),_===qp&&(_=void 0),s.D&&Ya(_,!0),l){var I=[],x=[];Ln("Patches").M(o,_,I,x),l(I,x)}return _}bn(21,o)},this.produceWithPatches=function(o,u){if(typeof o=="function")return function(_){for(var b=arguments.length,S=Array(b>1?b-1:0),T=1;T<b;T++)S[T-1]=arguments[T];return s.produceWithPatches(_,function(I){return o.apply(void 0,[I].concat(S))})};var l,h,d=s.produce(o,u,function(_,b){l=_,h=b});return typeof Promise<"u"&&d instanceof Promise?d.then(function(_){return[_,l,h]}):[d,l,h]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Kr(n)||bn(8),Ei(n)&&(n=aE(n));var s=Dp(this),o=il(this,n,void 0);return o[Wt].C=!0,Qa(s),o},t.finishDraft=function(n,s){var o=n&&n[Wt],u=o.A;return Za(u,s),el(void 0,u)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!Wp&&bn(20),this.O=n},t.applyPatches=function(n,s){var o;for(o=s.length-1;o>=0;o--){var u=s[o];if(u.path.length===0&&u.op==="replace"){n=u.value;break}}o>-1&&(s=s.slice(o+1));var l=Ln("Patches").$;return Ei(n)?l(n,s):this.produce(n,function(h){return l(h,s)})},e}(),qt=new gE,ul=qt.produce;qt.produceWithPatches.bind(qt),qt.setAutoFreeze.bind(qt),qt.setUseProxies.bind(qt),qt.applyPatches.bind(qt),qt.createDraft.bind(qt),qt.finishDraft.bind(qt);const mE=e=>typeof e=="function",O=function(e,t){if(typeof e=="function")return function(){return e(arguments)?t.apply(this,arguments):n=>t(n,...arguments)};switch(e){case 0:case 1:throw new RangeError(`Invalid arity ${e}`);case 2:return function(n,s){return arguments.length>=2?t(n,s):function(o){return t(o,n)}};case 3:return function(n,s,o){return arguments.length>=3?t(n,s,o):function(u){return t(u,n,s)}};case 4:return function(n,s,o,u){return arguments.length>=4?t(n,s,o,u):function(l){return t(l,n,s,o)}};case 5:return function(n,s,o,u,l){return arguments.length>=5?t(n,s,o,u,l):function(h){return t(h,n,s,o,u)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);const n=arguments;return function(s){return t(s,...n)}}}},Ye=e=>e,fc=e=>()=>e,Gp=fc(!0),al=fc(!1),Hp=fc(void 0),_E=Hp;function P(e,t,n,s,o,u,l,h,d){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return s(n(t(e)));case 5:return o(s(n(t(e))));case 6:return u(o(s(n(t(e)))));case 7:return l(u(o(s(n(t(e))))));case 8:return h(l(u(o(s(n(t(e)))))));case 9:return d(h(l(u(o(s(n(t(e))))))));default:{let _=arguments[0];for(let b=1;b<arguments.length;b++)_=arguments[b](_);return _}}}const ll=e=>(t,n)=>t===n||e(t,n),yE=O(2,(e,t)=>ll((n,s)=>e(t(n),t(s)))),bE=e=>ll((t,n)=>{if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(!e(t[s],n[s]))return!1;return!0});let vE="3.13.12";const hc=()=>vE,dc=`effect/GlobalValue/globalStoreId/${hc()}`;let Us;const Ee=(e,t)=>(Us||(globalThis[dc]??(globalThis[dc]=new Map),Us=globalThis[dc]),Us.has(e)||Us.set(e,t()),Us.get(e)),Dn=e=>typeof e=="string",jr=e=>typeof e=="number",fl=e=>typeof e=="boolean",pc=e=>typeof e=="bigint",hl=e=>typeof e=="symbol",Ks=mE,SE=e=>e===void 0,wE=e=>!1,dl=e=>typeof e=="object"&&e!==null,Er=e=>dl(e)||Ks(e),ue=O(2,(e,t)=>Er(e)&&t in e),Vp=O(2,(e,t)=>ue(e,"_tag")&&e._tag===t),Ti=e=>e==null,EE=e=>e!=null,OE=e=>e instanceof Date,zp=e=>ue(e,Symbol.iterator),TE=e=>dl(e)&&!Array.isArray(e),IE=e=>ue(e,"then")&&Ks(e.then),gc=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;let Yp=class q1{constructor(t){p(this,"self");p(this,"called",!1);this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new q1(this.self)}};const AE=335903614,RE=4150755663,xE=1481765933,kE=1284865837,CE=9007199254740992,$E=134217728;class PE{constructor(t,n,s,o){p(this,"_state");return Ti(n)&&Ti(t)?(n=Math.random()*4294967295>>>0,t=0):Ti(n)&&(n=t,t=0),Ti(o)&&Ti(s)?(o=this._state?this._state[3]:RE,s=this._state?this._state[2]:AE):Ti(o)&&(o=s,s=0),this._state=new Int32Array([0,0,s>>>0,((o||0)|1)>>>0]),this._next(),Xp(this._state,this._state[0],this._state[1],t>>>0,n>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(t){this._state[0]=t[0],this._state[1]=t[1],this._state[2]=t[2],this._state[3]=t[3]|1}integer(t){return Math.round(this.number()*Number.MAX_SAFE_INTEGER)%t}number(){const t=(this._next()&67108863)*1,n=(this._next()&134217727)*1;return(t*$E+n)/CE}_next(){const t=this._state[0]>>>0,n=this._state[1]>>>0;ME(this._state,t,n,xE,kE),Xp(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let s=t>>>18,o=(n>>>18|t<<14)>>>0;s=(s^t)>>>0,o=(o^n)>>>0;const u=(o>>>27|s<<5)>>>0,l=t>>>27,h=(-l>>>0&31)>>>0;return(u>>>l|u<<h)>>>0}}function ME(e,t,n,s,o){let u=(n>>>16)*(o&65535)>>>0,l=(n&65535)*(o>>>16)>>>0,h=(n&65535)*(o&65535)>>>0,d=(n>>>16)*(o>>>16)+((l>>>16)+(u>>>16))>>>0;l=l<<16>>>0,h=h+l>>>0,h>>>0<l>>>0&&(d=d+1>>>0),u=u<<16>>>0,h=h+u>>>0,h>>>0<u>>>0&&(d=d+1>>>0),d=d+Math.imul(n,s)>>>0,d=d+Math.imul(t,o)>>>0,e[0]=d,e[1]=h}function Xp(e,t,n,s,o){let u=t+s>>>0;const l=n+o>>>0;l>>>0<n>>>0&&(u=u+1|0),e[0]=u,e[1]=l}const pl=Symbol.for("effect/Utils/YieldWrap");class Bs{constructor(t){j1(this,No);W1(this,No,t)}[pl](){return B1(this,No)}}No=new WeakMap;function FE(e){if(typeof e=="object"&&e!==null&&pl in e)return e[pl]();throw new Error(gc("yieldWrapGet"))}const rn=Ee("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0})),At=(e=>{const t={[e](n){return n()}};return function(n){return t[e](n)}})("effect_internal_function"),gl=Ee(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),de=Symbol.for("effect/Hash"),z=e=>{if(rn.enabled===!0)return 0;switch(typeof e){case"number":return _l(e);case"bigint":return Xe(e.toString(10));case"boolean":return Xe(String(e));case"symbol":return Xe(String(e));case"string":return Xe(e);case"undefined":return Xe("undefined");case"function":case"object":return e===null?Xe("null"):e instanceof Date?z(e.toISOString()):NE(e)?e[de]():ml(e);default:throw new Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},ml=e=>(gl.has(e)||gl.set(e,_l(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),gl.get(e)),Se=e=>t=>t*53^e,mc=e=>e&3221225471|e>>>1&1073741824,NE=e=>ue(e,de),_l=e=>{if(e!==e||e===1/0)return 0;let t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)t^=e/=4294967295;return mc(t)},Xe=e=>{let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return mc(t)},LE=(e,t)=>{let n=12289;for(let s=0;s<t.length;s++)n^=P(Xe(t[s]),Se(z(e[t[s]])));return mc(n)},Zp=e=>LE(e,Object.keys(e)),js=e=>{let t=6151;for(let n=0;n<e.length;n++)t=P(t,Se(z(e[n])));return mc(t)},qe=function(){if(arguments.length===1){const n=arguments[0];return function(s){return Object.defineProperty(n,de,{value(){return s},enumerable:!1}),s}}const e=arguments[0],t=arguments[1];return Object.defineProperty(e,de,{value(){return t},enumerable:!1}),t},le=Symbol.for("effect/Equal");function fe(){return arguments.length===1?e=>_c(e,arguments[0]):_c(arguments[0],arguments[1])}function _c(e,t){if(e===t)return!0;const n=typeof e;if(n!==typeof t)return!1;if(n==="object"||n==="function"){if(e!==null&&t!==null){if(yc(e)&&yc(t))return z(e)===z(t)&&e[le](t)?!0:rn.enabled&&rn.tester?rn.tester(e,t):!1;if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString()}if(rn.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((s,o)=>_c(s,t[o]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){const s=Object.keys(e),o=Object.keys(t);if(s.length===o.length){for(const u of s)if(!(u in t&&_c(e[u],t[u])))return rn.tester?rn.tester(e,t):!1;return!0}}return rn.tester?rn.tester(e,t):!1}}return rn.enabled&&rn.tester?rn.tester(e,t):!1}const yc=e=>ue(e,le),yl=()=>fe,Ke=Symbol.for("nodejs.util.inspect.custom"),rt=e=>{try{if(ue(e,"toJSON")&&Ks(e.toJSON)&&e.toJSON.length===0)return e.toJSON();if(Array.isArray(e))return e.map(rt)}catch{return{}}return UE(e)},lt=e=>JSON.stringify(e,null,2),Ii=(e,t=2)=>{if(typeof e=="string")return e;try{return typeof e=="object"?Qp(e,t):String(e)}catch{return String(e)}},Qp=(e,t)=>{let n=[];const s=JSON.stringify(e,(o,u)=>typeof u=="object"&&u!==null?n.includes(u)?void 0:n.push(u)&&(Wr.fiberRefs!==void 0&&eg(u)?u[bl](Wr.fiberRefs):u):u,t);return n=void 0,s},bl=Symbol.for("effect/Inspectable/Redactable"),eg=e=>typeof e=="object"&&e!==null&&bl in e,Wr=Ee("effect/Inspectable/redactableState",()=>({fiberRefs:void 0})),DE=(e,t)=>{const n=Wr.fiberRefs;Wr.fiberRefs=e;try{return t()}finally{Wr.fiberRefs=n}},UE=e=>eg(e)&&Wr.fiberRefs!==void 0?e[bl](Wr.fiberRefs):e,re=(e,t)=>{switch(t.length){case 0:return e;case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let n=e;for(let s=0,o=t.length;s<o;s++)n=t[s](n);return n}}},Ws="Async",bc="Commit",vn="Failure",vl="OnFailure",vc="OnSuccess",Sc="OnSuccessAndFailure",Sn="Success",tg="Sync",KE="Tag",qs="UpdateRuntimeFlags",wc="While",Ec="Iterator",ng="WithRuntime",Oc="Yield",Sl="RevertFlags",BE=Symbol.for("effect/Effect"),jE=Symbol.for("effect/Stream"),WE=Symbol.for("effect/Sink"),qE=Symbol.for("effect/Channel"),Ai={_R:e=>e,_E:e=>e,_A:e=>e,_V:hc()},JE={_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},GE={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},Js={[BE]:Ai,[jE]:Ai,[WE]:JE,[qE]:GE,[le](e){return this===e},[de](){return qe(this,ml(this))},[Symbol.iterator](){return new Yp(new Bs(this))},pipe(){return re(this,arguments)}},wl={[de](){return qe(this,Zp(this))},[le](e){const t=Object.keys(this),n=Object.keys(e);if(t.length!==n.length)return!1;for(const s of t)if(!(s in e&&fe(this[s],e[s])))return!1;return!0}},Gs={...Js,_op:bc},HE={...Gs,...wl},VE=function(){function e(){}return e.prototype=Gs,e}(),rg=Symbol.for("effect/Option"),ig={...Js,[rg]:{_A:e=>e},[Ke](){return this.toJSON()},toString(){return lt(this.toJSON())}},zE=Object.assign(Object.create(ig),{_tag:"Some",_op:"Some",[le](e){return sg(e)&&cg(e)&&fe(this.value,e.value)},[de](){return qe(this,Se(z(this._tag))(z(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:rt(this.value)}}}),YE=z("None"),XE=Object.assign(Object.create(ig),{_tag:"None",_op:"None",[le](e){return sg(e)&&og(e)},[de](){return YE},toJSON(){return{_id:"Option",_tag:this._tag}}}),sg=e=>ue(e,rg),og=e=>e._tag==="None",cg=e=>e._tag==="Some",ug=Object.create(XE),El=e=>{const t=Object.create(zE);return t.value=e,t},ag=Symbol.for("effect/Either"),lg={...Js,[ag]:{_R:e=>e},[Ke](){return this.toJSON()},toString(){return lt(this.toJSON())}},ZE=Object.assign(Object.create(lg),{_tag:"Right",_op:"Right",[le](e){return Ol(e)&&hg(e)&&fe(this.right,e.right)},[de](){return Se(z(this._tag))(z(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:rt(this.right)}}}),QE=Object.assign(Object.create(lg),{_tag:"Left",_op:"Left",[le](e){return Ol(e)&&fg(e)&&fe(this.left,e.left)},[de](){return Se(z(this._tag))(z(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:rt(this.left)}}}),Ol=e=>ue(e,ag),fg=e=>e._tag==="Left",hg=e=>e._tag==="Right",eO=e=>{const t=Object.create(QE);return t.left=e,t},Oe=e=>{const t=Object.create(ZE);return t.right=e,t},ge=eO,tO=Ol,pt=fg,er=hg,nO=O(2,(e,t)=>pt(e)?ge(t(e.left)):Oe(e.right)),rO=O(2,(e,t)=>er(e)?Oe(t(e.right)):ge(e.left)),Tl=O(2,(e,{onLeft:t,onRight:n})=>pt(e)?t(e.left):n(e.right)),iO=Tl({onLeft:Ye,onRight:Ye}),dg=O(2,(e,t)=>{if(er(e))return e.right;throw t(e.left)}),sO=dg(()=>new Error("getOrThrow called on a Left")),pg=e=>e.length>0,gg=e=>(t,n)=>t===n?0:e(t,n),oO=gg((e,t)=>e<t?-1:1),mg=O(2,(e,t)=>gg((n,s)=>e(t(n),t(s)))),cO=e=>O(2,(t,n)=>e(t,n)===1),te=()=>ug,be=El,gt=og,vt=cg,Jt=O(2,(e,{onNone:t,onSome:n})=>gt(e)?t():n(e.value)),ft=O(2,(e,t)=>gt(e)?t():e.value),Or=O(2,(e,t)=>gt(e)?t():e),uO=O(2,(e,t)=>gt(e)?be(t()):e),Tc=e=>e==null?te():be(e),Un=ft(Hp),aO=e=>(...t)=>{try{return be(e(...t))}catch{return te()}},_g=O(2,(e,t)=>gt(e)?te():be(t(e.value))),Ic=O(2,(e,t)=>gt(e)?te():t(e.value)),lO=O(2,(e,t)=>gt(e)?te():Tc(t(e.value))),fO=(e=>O(2,(t,n)=>gt(t)?!1:e(t.value,n)))(yl()),hO=O(2,(e,t)=>gt(e)?!1:t(e.value)),dO=(...e)=>e,Ac=e=>new Array(e),pO=O(2,(e,t)=>{const n=Math.max(1,Math.floor(e)),s=new Array(n);for(let o=0;o<n;o++)s[o]=t(o);return s}),Ze=e=>Array.isArray(e)?e:Array.from(e),gO=e=>Array.isArray(e)?e:[e],mO=O(2,(e,{onEmpty:t,onNonEmpty:n})=>mt(e)?n(Pt(e),qr(e)):t()),Rc=O(2,(e,t)=>[t,...e]),_O=O(2,(e,t)=>[...e,t]),yg=O(2,(e,t)=>Ze(e).concat(Ze(t))),yO=Array.isArray,bO=e=>e.length===0,xc=pg,mt=pg,bg=(e,t)=>e<0||e>=t.length,vO=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length)),SO=O(2,(e,t)=>{const n=Math.floor(t);return bg(n,e)?te():be(e[n])}),vg=O(2,(e,t)=>{const n=Math.floor(t);if(bg(n,e))throw new Error(`Index ${n} out of bounds`);return e[n]}),Hs=SO(0),Pt=vg(0),wO=e=>mt(e)?be(Sg(e)):te(),Sg=e=>e[e.length-1],qr=e=>e.slice(1),EO=(e,t)=>{let n=0;for(const s of e){if(!t(s,n))break;n++}return n},OO=O(2,(e,t)=>RO(e,EO(e,t))),TO=O(2,(e,t)=>{const n=Ze(e);return n.slice(vO(t,n),n.length)}),wg=e=>Array.from(e).reverse(),Vs=O(2,(e,t)=>{const n=Array.from(e);return n.sort(t),n}),Eg=O(2,(e,t)=>IO(e,t,dO)),IO=O(3,(e,t,n)=>{const s=Ze(e),o=Ze(t);if(mt(s)&&mt(o)){const u=[n(Pt(s),Pt(o))],l=Math.min(s.length,o.length);for(let h=1;h<l;h++)u[h]=n(s[h],o[h]);return u}return[]}),AO=yl(),RO=O(2,(e,t)=>{const n=Array.from(e),s=Math.floor(t);return mt(n)?s>=1?xO(n,s):[[],n]:[n,[]]}),xO=O(2,(e,t)=>{const n=Math.max(1,Math.floor(t));return n>=e.length?[zs(e),[]]:[Rc(e.slice(1,n),Pt(e)),e.slice(n)]}),zs=e=>e.slice(),kO=O(3,(e,t,n)=>{const s=Ze(e),o=Ze(t);return mt(s)?mt(o)?Ag(n)(yg(s,o)):s:o}),kc=O(2,(e,t)=>kO(e,t,AO)),Ri=()=>[],wn=e=>[e],xi=O(2,(e,t)=>e.map(t)),Og=O(2,(e,t)=>{if(bO(e))return[];const n=[];for(let s=0;s<e.length;s++){const o=t(e[s],s);for(let u=0;u<o.length;u++)n.push(o[u])}return n}),CO=Og(Ye),Tg=O(3,(e,t,n)=>Ze(e).reduce((s,o,u)=>n(s,o,u),t)),Ig=(e,t)=>{const n=[];let s=e,o;for(;vt(o=t(s));){const[u,l]=o.value;n.push(u),s=l}return n},Il=bE,Ag=O(2,(e,t)=>{const n=Ze(e);if(mt(n)){const s=[Pt(n)],o=qr(n);for(const u of o)s.every(l=>!t(u,l))&&s.push(u);return s}return[]}),$O=e=>Ag(e,yl()),ki=O(2,(e,t)=>Ze(e).join(t)),Rg=(e,t)=>{switch(t._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(e);case"SymbolKeyword":return Object.getOwnPropertySymbols(e);case"Refinement":return Rg(e,t.from)}},Ci=e=>Object.keys(e).concat(Object.getOwnPropertySymbols(e)),xg=e=>{let t=!1,n;return()=>(t||(n=e(),t=!0),n)},PO=e=>{try{return e.toISOString()}catch{return String(e)}},Kn=(e,t=!0)=>{if(Array.isArray(e))return`[${e.map(n=>Kn(n,t)).join(",")}]`;if(OE(e))return PO(e);if(ue(e,"toString")&&Ks(e.toString)&&e.toString!==Object.prototype.toString)return e.toString();if(Dn(e))return JSON.stringify(e);if(jr(e)||e==null||fl(e)||hl(e))return String(e);if(pc(e))return String(e)+"n";if(zp(e))return`${e.constructor.name}(${Kn(Array.from(e),t)})`;try{t&&JSON.stringify(e);const n=`{${Ci(e).map(o=>`${Dn(o)?JSON.stringify(o):String(o)}:${Kn(e[o],!1)}`).join(",")}}`,s=e.constructor.name;return e.constructor!==Object.prototype.constructor?`${s}(${n})`:n}catch{return"<circular structure>"}},MO=e=>typeof e=="string"?JSON.stringify(e):String(e),kg=e=>Array.isArray(e),Cg=e=>`[${MO(e)}]`,FO=e=>kg(e)?e.map(Cg).join(""):Cg(e),Jr=(e,t,n,s)=>{let o=e;return t!==void 0&&(o+=`
details: ${t}`),s&&(o+=`
schema (${s._tag}): ${s}`),o},NO=e=>Jr("Unsupported key schema",void 0,void 0,e),LO=e=>Jr("Unsupported literal",`literal value: ${Kn(e)}`),$g=e=>Jr("Duplicate index signature",`${e} index signature`),DO=Jr("Unsupported index signature parameter","An index signature parameter type must be `string`, `symbol`, a template literal type or a refinement of the previous types"),UO=Jr("Invalid element","A required element cannot follow an optional element. ts(1257)"),Pg=e=>Jr("Duplicate property signature transformation",`Duplicate key ${Kn(e)}`),KO=e=>Jr("Duplicate property signature",`Duplicate key ${Kn(e)}`),$i=oO,Cc=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&"),BO=Symbol.for("effect/annotation/Brand"),jO=Symbol.for("effect/annotation/SchemaId"),Mg=Symbol.for("effect/annotation/Message"),Al=Symbol.for("effect/annotation/MissingMessage"),Fg=Symbol.for("effect/annotation/Identifier"),Tr=Symbol.for("effect/annotation/Title"),Rl=Symbol.for("effect/annotation/AutoTitle"),$c=Symbol.for("effect/annotation/Description"),Ng=Symbol.for("effect/annotation/Examples"),Lg=Symbol.for("effect/annotation/Default"),Dg=Symbol.for("effect/annotation/JSONSchema"),Ug=Symbol.for("effect/annotation/Arbitrary"),Kg=Symbol.for("effect/annotation/Pretty"),Bg=Symbol.for("effect/annotation/Equivalence"),WO=Symbol.for("effect/annotation/Documentation"),jg=Symbol.for("effect/annotation/Concurrency"),Wg=Symbol.for("effect/annotation/Batching"),qg=Symbol.for("effect/annotation/ParseIssueTitle"),Jg=Symbol.for("effect/annotation/ParseOptions"),Gg=Symbol.for("effect/annotation/DecodingFallback"),Hg=Symbol.for("effect/annotation/Surrogate"),qO=Symbol.for("effect/annotation/StableFilter"),St=O(2,(e,t)=>Object.prototype.hasOwnProperty.call(e.annotations,t)?be(e.annotations[t]):te()),JO=St(BO),GO=St(Mg),HO=St(Al),Vg=St(Tr),zg=St(Rl),Pc=St(Fg),Yg=St($c),VO=St(jg),zO=St(Wg),YO=St(qg),XO=St(Jg),ZO=St(Gg),Xg=St(Hg),QO=St(qO),eT=e=>hO(QO(e),t=>t===!0),Zg=Symbol.for("effect/annotation/JSONIdentifier"),tT=St(Zg),nT=e=>Or(tT(e),()=>Pc(e));class Qg{constructor(t,n,s,o={}){p(this,"typeParameters");p(this,"decodeUnknown");p(this,"encodeUnknown");p(this,"annotations");p(this,"_tag","Declaration");this.typeParameters=t,this.decodeUnknown=n,this.encodeUnknown=s,this.annotations=o}toString(){return ft(jn(this),()=>"<declaration schema>")}toJSON(){return{_tag:this._tag,typeParameters:this.typeParameters.map(t=>t.toJSON()),annotations:ht(this.annotations)}}}const Ys=e=>t=>t._tag===e;class rT{constructor(t,n={}){p(this,"literal");p(this,"annotations");p(this,"_tag","Literal");this.literal=t,this.annotations=n}toString(){return ft(jn(this),()=>Kn(this.literal))}toJSON(){return{_tag:this._tag,literal:pc(this.literal)?String(this.literal):this.literal,annotations:ht(this.annotations)}}}const em=Ys("Literal");class iT{constructor(t,n={}){p(this,"symbol");p(this,"annotations");p(this,"_tag","UniqueSymbol");this.symbol=t,this.annotations=n}toString(){return ft(jn(this),()=>Kn(this.symbol))}toJSON(){return{_tag:this._tag,symbol:String(this.symbol),annotations:ht(this.annotations)}}}class sT{constructor(t={}){p(this,"annotations");p(this,"_tag","UndefinedKeyword");this.annotations=t}toString(){return Fi(this)}toJSON(){return{_tag:this._tag,annotations:ht(this.annotations)}}}const xl=new sT({[Tr]:"undefined"});class oT{constructor(t={}){p(this,"annotations");p(this,"_tag","NeverKeyword");this.annotations=t}toString(){return Fi(this)}toJSON(){return{_tag:this._tag,annotations:ht(this.annotations)}}}const kl=new oT({[Tr]:"never"});class cT{constructor(t={}){p(this,"annotations");p(this,"_tag","UnknownKeyword");this.annotations=t}toString(){return Fi(this)}toJSON(){return{_tag:this._tag,annotations:ht(this.annotations)}}}const uT=new cT({[Tr]:"unknown"});class aT{constructor(t={}){p(this,"annotations");p(this,"_tag","AnyKeyword");this.annotations=t}toString(){return Fi(this)}toJSON(){return{_tag:this._tag,annotations:ht(this.annotations)}}}const lT=new aT({[Tr]:"any"});class fT{constructor(t={}){p(this,"annotations");p(this,"_tag","StringKeyword");this.annotations=t}toString(){return Fi(this)}toJSON(){return{_tag:this._tag,annotations:ht(this.annotations)}}}const hT=new fT({[Tr]:"string",[$c]:"a string"}),dT=Ys("StringKeyword");class pT{constructor(t={}){p(this,"annotations");p(this,"_tag","NumberKeyword");this.annotations=t}toString(){return Fi(this)}toJSON(){return{_tag:this._tag,annotations:ht(this.annotations)}}}const gT=new pT({[Tr]:"number",[$c]:"a number"}),mT=Ys("SymbolKeyword");let Mc=class{constructor(t,n={}){p(this,"type");p(this,"annotations");this.type=t,this.annotations=n}toJSON(){return{type:this.type.toJSON(),annotations:ht(this.annotations)}}toString(){return String(this.type)}};class Gr extends Mc{constructor(n,s,o={}){super(n,o);p(this,"isOptional");this.isOptional=s}toJSON(){return{type:this.type.toJSON(),isOptional:this.isOptional,annotations:ht(this.annotations)}}toString(){return String(this.type)+(this.isOptional?"?":"")}}const tm=e=>e.map(t=>t.type);class Cl{constructor(t,n,s,o={}){p(this,"elements");p(this,"rest");p(this,"isReadonly");p(this,"annotations");p(this,"_tag","TupleType");this.elements=t,this.rest=n,this.isReadonly=s,this.annotations=o;let u=!1,l=!1;for(const h of t)if(h.isOptional)u=!0;else if(u){l=!0;break}if(l||u&&n.length>1)throw new Error(UO)}toString(){return ft(jn(this),()=>_T(this))}toJSON(){return{_tag:this._tag,elements:this.elements.map(t=>t.toJSON()),rest:this.rest.map(t=>t.toJSON()),isReadonly:this.isReadonly,annotations:ht(this.annotations)}}}const _T=e=>{const t=e.elements.map(String).join(", ");return mO(e.rest,{onEmpty:()=>`readonly [${t}]`,onNonEmpty:(n,s)=>{const o=String(n),u=o.includes(" | ")?`(${o})`:o;if(s.length>0){const l=s.map(String).join(", ");return e.elements.length>0?`readonly [${t}, ...${u}[], ${l}]`:`readonly [...${u}[], ${l}]`}else return e.elements.length>0?`readonly [${t}, ...${u}[]]`:`ReadonlyArray<${o}>`}})};class wt extends Gr{constructor(n,s,o,u,l){super(s,o,l);p(this,"name");p(this,"isReadonly");this.name=n,this.isReadonly=u}toString(){return(this.isReadonly?"readonly ":"")+String(this.name)+(this.isOptional?"?":"")+": "+this.type}toJSON(){return{name:String(this.name),type:this.type.toJSON(),isOptional:this.isOptional,isReadonly:this.isReadonly,annotations:ht(this.annotations)}}}const nm=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return nm(e.from)}return!1};class Fc{constructor(t,n,s){p(this,"type");p(this,"isReadonly");p(this,"parameter");if(this.type=n,this.isReadonly=s,nm(t))this.parameter=t;else throw new Error(DO)}toString(){return(this.isReadonly?"readonly ":"")+`[x: ${this.parameter}]: ${this.type}`}toJSON(){return{parameter:this.parameter.toJSON(),type:this.type.toJSON(),isReadonly:this.isReadonly}}}class Hr{constructor(t,n,s={}){p(this,"annotations");p(this,"_tag","TypeLiteral");p(this,"propertySignatures");p(this,"indexSignatures");this.annotations=s;const o={};for(let l=0;l<t.length;l++){const h=t[l].name;if(Object.prototype.hasOwnProperty.call(o,h))throw new Error(KO(h));o[h]=null}const u={string:!1,symbol:!1};for(let l=0;l<n.length;l++){const h=gm(n[l].parameter);if(dT(h)){if(u.string)throw new Error($g("string"));u.string=!0}else if(mT(h)){if(u.symbol)throw new Error($g("symbol"));u.symbol=!0}}this.propertySignatures=t,this.indexSignatures=n}toString(){return ft(jn(this),()=>yT(this))}toJSON(){return{_tag:this._tag,propertySignatures:this.propertySignatures.map(t=>t.toJSON()),indexSignatures:this.indexSignatures.map(t=>t.toJSON()),annotations:ht(this.annotations)}}}const rm=e=>e.map(String).join("; "),yT=e=>{if(e.propertySignatures.length>0){const t=e.propertySignatures.map(String).join("; ");return e.indexSignatures.length>0?`{ ${t}; ${rm(e.indexSignatures)} }`:`{ ${t} }`}else return e.indexSignatures.length>0?`{ ${rm(e.indexSignatures)} }`:"{}"},bT=Vs(mg($i,e=>{switch(e._tag){case"AnyKeyword":return 0;case"UnknownKeyword":return 1;case"ObjectKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3}return 4})),vT={string:"StringKeyword",number:"NumberKeyword",boolean:"BooleanKeyword",bigint:"BigIntKeyword"},im=e=>Og(e,t=>om(t)?im(t.types):[t]),ST=e=>{const t=bT(e),n=[],s={},o=[];for(const u of t)switch(u._tag){case"NeverKeyword":break;case"AnyKeyword":return[lT];case"UnknownKeyword":return[uT];case"ObjectKeyword":case"UndefinedKeyword":case"VoidKeyword":case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":{s[u._tag]||(s[u._tag]=u,n.push(u));break}case"Literal":{const l=typeof u.literal;switch(l){case"string":case"number":case"bigint":case"boolean":{const h=vT[l];!s[h]&&!o.includes(u.literal)&&(o.push(u.literal),n.push(u));break}case"object":{o.includes(u.literal)||(o.push(u.literal),n.push(u));break}}break}case"UniqueSymbol":{!s.SymbolKeyword&&!o.includes(u.symbol)&&(o.push(u.symbol),n.push(u));break}case"TupleType":{s.ObjectKeyword||n.push(u);break}case"TypeLiteral":{u.propertySignatures.length===0&&u.indexSignatures.length===0?s["{}"]||(s["{}"]=u,n.push(u)):s.ObjectKeyword||n.push(u);break}default:n.push(u)}return n};let tr=(fr=class{constructor(t,n={}){p(this,"types");p(this,"annotations");p(this,"_tag","Union");this.types=t,this.annotations=n}toString(){return ft(jn(this),()=>this.types.map(String).join(" | "))}toJSON(){return{_tag:this._tag,types:this.types.map(t=>t.toJSON()),annotations:ht(this.annotations)}}},p(fr,"make",(t,n)=>sm(t)?new fr(t,n):t.length===1?t[0]:kl),p(fr,"unify",(t,n)=>fr.make(ST(im(t)),n)),fr);const sm=e=>e.length>1,om=Ys("Union"),$l=Ee(Symbol.for("effect/Schema/AST/toJSONMemoMap"),()=>new WeakMap);class cm{constructor(t,n={}){p(this,"f");p(this,"annotations");p(this,"_tag","Suspend");this.f=t,this.annotations=n,this.f=xg(t)}toString(){return jn(this).pipe(Or(()=>Ic(aO(this.f)(),t=>jn(t))),ft(()=>"<suspended schema>"))}toJSON(){const t=this.f();let n=$l.get(t);return n||($l.set(t,{_tag:this._tag}),n={_tag:this._tag,ast:t.toJSON(),annotations:ht(this.annotations)},$l.set(t,n),n)}}let wT=class{constructor(t,n,s={}){p(this,"from");p(this,"filter");p(this,"annotations");p(this,"_tag","Refinement");this.from=t,this.filter=n,this.annotations=s}toString(){return Pc(this).pipe(ft(()=>Jt(mm(this),{onNone:()=>`{ ${this.from} | filter }`,onSome:t=>um(this.from)?String(this.from)+" & "+t:t})))}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),annotations:ht(this.annotations)}}};const um=Ys("Refinement"),Pl={};let am=class{constructor(t,n,s,o={}){p(this,"from");p(this,"to");p(this,"transformation");p(this,"annotations");p(this,"_tag","Transformation");this.from=t,this.to=n,this.transformation=s,this.annotations=o}toString(){return ft(jn(this),()=>`(${String(this.from)} <-> ${String(this.to)})`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),to:this.to.toJSON(),annotations:ht(this.annotations)}}};class ET{constructor(t,n){p(this,"decode");p(this,"encode");p(this,"_tag","FinalTransformation");this.decode=t,this.encode=n}}let OT=class{constructor(t,n,s,o){p(this,"from");p(this,"to");p(this,"decode");p(this,"encode");this.from=t,this.to=n,this.decode=s,this.encode=o}};class TT{constructor(t){p(this,"propertySignatureTransformations");p(this,"_tag","TypeLiteralTransformation");this.propertySignatureTransformations=t;const n={},s={};for(const o of t){const u=o.from;if(n[u])throw new Error(Pg(u));n[u]=!0;const l=o.to;if(s[l])throw new Error(Pg(l));s[l]=!0}}}const Pi=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={...e.annotations,...t},o=Xg(e);return vt(o)&&(s[Hg]=Pi(o.value,t)),n.annotations.value=s,Object.create(Object.getPrototypeOf(e),n)},IT="[\\s\\S]*",AT="[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?",lm=(e,t)=>{switch(e._tag){case"Literal":return Cc(String(e.literal));case"StringKeyword":return IT;case"NumberKeyword":return AT;case"TemplateLiteral":return fm(e);case"Union":return e.types.map(n=>lm(n)).join("|")}},RT=(e,t,n,s)=>om(e)?`(${t})`:t,fm=(e,t,n)=>{let s="";if(e.head!==""){const o=Cc(e.head);s+=o}for(const o of e.spans){const u=lm(o.type);if(s+=RT(o.type,u),o.literal!==""){const l=Cc(o.literal);s+=l}}return s},xT=e=>new RegExp(`^${fm(e)}$`),hm=(e,t)=>{const n=[],s=[],o=u=>{switch(u._tag){case"NeverKeyword":break;case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":case"Refinement":s.push(new Fc(u,t,!0));break;case"Literal":if(Dn(u.literal)||jr(u.literal))n.push(new wt(u.literal,t,!1,!0));else throw new Error(LO(u.literal));break;case"Enums":{for(const[l,h]of u.enums)n.push(new wt(h,t,!1,!0));break}case"UniqueSymbol":n.push(new wt(u.symbol,t,!1,!0));break;case"Union":u.types.forEach(o);break;default:throw new Error(NO(u))}};return o(e),{propertySignatures:n,indexSignatures:s}},dm=e=>t=>{let n;for(const s of e)Object.prototype.hasOwnProperty.call(t.annotations,s)&&(n===void 0&&(n={}),n[s]=t.annotations[s]);return n},kT=dm([Ng,Lg,Dg,Ug,Kg,Bg]),Mt=e=>{switch(e._tag){case"Declaration":{const t=sn(e.typeParameters,Mt);return t===e.typeParameters?e:new Qg(t,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{const t=sn(e.elements,o=>{const u=Mt(o.type);return u===o.type?o:new Gr(u,o.isOptional)}),n=tm(e.rest),s=sn(n,Mt);return t===e.elements&&s===n?e:new Cl(t,s.map(o=>new Mc(o)),e.isReadonly,e.annotations)}case"TypeLiteral":{const t=sn(e.propertySignatures,s=>{const o=Mt(s.type);return o===s.type?s:new wt(s.name,o,s.isOptional,s.isReadonly)}),n=sn(e.indexSignatures,s=>{const o=Mt(s.type);return o===s.type?s:new Fc(s.parameter,o,s.isReadonly)});return t===e.propertySignatures&&n===e.indexSignatures?e:new Hr(t,n,e.annotations)}case"Union":{const t=sn(e.types,Mt);return t===e.types?e:tr.make(t,e.annotations)}case"Suspend":return new cm(()=>Mt(e.f()),e.annotations);case"Refinement":{const t=Mt(e.from);return t===e.from?e:new wT(t,e.filter,e.annotations)}case"Transformation":{const t=kT(e);return Mt(t!==void 0?Pi(e.to,t):e.to)}}return e},Mi=e=>Jt(nT(e),{onNone:()=>{},onSome:t=>({[Zg]:t})});function sn(e,t){let n=!1;const s=Ac(e.length);for(let o=0;o<e.length;o++){const u=e[o],l=t(u);l!==u&&(n=!0),s[o]=l}return n?s:e}const Bn=(e,t)=>{switch(e._tag){case"Declaration":{const n=sn(e.typeParameters,s=>Bn(s));return n===e.typeParameters?e:new Qg(n,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{const n=sn(e.elements,u=>{const l=Bn(u.type);return l===u.type?u:new Gr(l,u.isOptional)}),s=tm(e.rest),o=sn(s,u=>Bn(u));return n===e.elements&&o===s?e:new Cl(n,o.map(u=>new Mc(u)),e.isReadonly,Mi(e))}case"TypeLiteral":{const n=sn(e.propertySignatures,o=>{const u=Bn(o.type);return u===o.type?o:new wt(o.name,u,o.isOptional,o.isReadonly)}),s=sn(e.indexSignatures,o=>{const u=Bn(o.type);return u===o.type?o:new Fc(o.parameter,u,o.isReadonly)});return n===e.propertySignatures&&s===e.indexSignatures?e:new Hr(n,s,Mi(e))}case"Union":{const n=sn(e.types,s=>Bn(s));return n===e.types?e:tr.make(n,Mi(e))}case"Suspend":return new cm(()=>Bn(e.f()),Mi(e));case"Refinement":{const n=Bn(e.from),s=Mi(e);return s?Pi(n,s):n}case"Transformation":{const n=Mi(e);return Bn(n?Pi(e.from,n):e.from)}}return e},pm=e=>Bn(e),ht=e=>{const t={};for(const n of Object.getOwnPropertySymbols(e))t[String(n)]=e[n];return t},gm=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return e;case"Refinement":return gm(e.from)}},Fi=e=>ft(jn(e),()=>e._tag);function CT(e){return Jt(JO(e),{onNone:()=>"",onSome:t=>t.map(n=>` & Brand<${Kn(n)}>`).join("")})}const mm=e=>Vg(e).pipe(Or(()=>Yg(e)),Or(()=>zg(e)),_g(t=>t+CT(e))),jn=e=>Or(Pc(e),()=>mm(e)),$T=Symbol.for("effect/Context/Tag"),Nc=Symbol.for("effect/Context/Reference"),_m={...Js,_op:"Tag",[Symbol.for("effect/STM")]:Ai,[$T]:{_Service:e=>e,_Identifier:e=>e},toString(){return lt(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[Ke](){return this.toJSON()},of(e){return e},context(e){return bm(this,e)}},PT={..._m,[Nc]:Nc},MT=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;Error.stackTraceLimit=t;const s=Object.create(_m);return Object.defineProperty(s,"stack",{get(){return n.stack}}),s.key=e,s},FT=()=>(e,t)=>{const n=Error.stackTraceLimit;Error.stackTraceLimit=2;const s=new Error;Error.stackTraceLimit=n;function o(){}return Object.setPrototypeOf(o,PT),o.key=e,o.defaultValue=t.defaultValue,Object.defineProperty(o,"stack",{get(){return s.stack}}),o},ym=Symbol.for("effect/Context"),NT={[ym]:{_Services:e=>e},[le](e){if(DT(e)&&this.unsafeMap.size===e.unsafeMap.size){for(const t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!fe(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[de](){return qe(this,_l(this.unsafeMap.size))},pipe(){return re(this,arguments)},toString(){return lt(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(rt)}},[Ke](){return this.toJSON()}},Ni=e=>{const t=Object.create(NT);return t.unsafeMap=e,t},LT=e=>{const t=new Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){const n=e.stack.split(`
`);if(n.length>2){const s=n[2].match(/at (.*)/);s&&(t.message=t.message+` (defined at ${s[1]})`)}}if(t.stack){const n=t.stack.split(`
`);n.splice(1,3),t.stack=n.join(`
`)}return t},DT=e=>ue(e,ym),UT=e=>ue(e,Nc),KT=Ni(new Map),BT=()=>KT,bm=(e,t)=>Ni(new Map([[e.key,t]])),jT=O(3,(e,t,n)=>{const s=new Map(e.unsafeMap);return s.set(t.key,n),Ni(s)}),Ml=Ee("effect/Context/defaultValueCache",()=>new Map),Fl=e=>{if(Ml.has(e.key))return Ml.get(e.key);const t=e.defaultValue();return Ml.set(e.key,t),t},WT=(e,t)=>e.unsafeMap.has(t.key)?e.unsafeMap.get(t.key):Fl(t),vm=O(2,(e,t)=>{if(!e.unsafeMap.has(t.key)){if(Nc in t)return Fl(t);throw LT(t)}return e.unsafeMap.get(t.key)}),qT=vm,JT=O(2,(e,t)=>e.unsafeMap.has(t.key)?El(e.unsafeMap.get(t.key)):UT(t)?El(Fl(t)):ug),GT=O(2,(e,t)=>{const n=new Map(e.unsafeMap);for(const[s,o]of t.unsafeMap)n.set(s,o);return Ni(n)}),Vr=MT,Nl=BT,HT=bm,Xs=jT,Sm=qT,wm=vm,Zs=JT,Em=GT,Om=FT,Tm=Symbol.for("effect/Chunk");function VT(e,t,n,s,o){for(let u=t;u<Math.min(e.length,t+o);u++)n[s+u-t]=e[u];return n}const Im=[],zT=(e=>ll((t,n)=>t.length===n.length&&zr(t).every((s,o)=>e(s,Di(n,o)))))(fe),YT={[Tm]:{_A:e=>e},toString(){return lt(this.toJSON())},toJSON(){return{_id:"Chunk",values:zr(this).map(rt)}},[Ke](){return this.toJSON()},[le](e){return Am(e)&&zT(this,e)},[de](){return qe(this,js(zr(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return Im[Symbol.iterator]();default:return zr(this)[Symbol.iterator]()}},pipe(){return re(this,arguments)}},it=e=>{const t=Object.create(YT);switch(t.backing=e,e._tag){case"IEmpty":{t.length=0,t.depth=0,t.left=t,t.right=t;break}case"IConcat":{t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break}case"IArray":{t.length=e.array.length,t.depth=0,t.left=Wn,t.right=Wn;break}case"ISingleton":{t.length=1,t.depth=0,t.left=Wn,t.right=Wn;break}case"ISlice":{t.length=e.length,t.depth=e.chunk.depth+1,t.left=Wn,t.right=Wn;break}}return t},Am=e=>ue(e,Tm),Wn=it({_tag:"IEmpty"}),nr=()=>Wn,Ll=(...e)=>XT(e),Gt=e=>it({_tag:"ISingleton",a:e}),Rm=e=>Am(e)?e:Lc(Ze(e)),Dl=(e,t,n)=>{switch(e.backing._tag){case"IArray":{VT(e.backing.array,0,t,n,e.length);break}case"IConcat":{Dl(e.left,t,n),Dl(e.right,t,n+e.left.length);break}case"ISingleton":{t[n]=e.backing.a;break}case"ISlice":{let s=0,o=n;for(;s<e.length;)t[o]=Di(e,s),s+=1,o+=1;break}}},zr=e=>{switch(e.backing._tag){case"IEmpty":return Im;case"IArray":return e.backing.array;default:{const t=new Array(e.length);return Dl(e,t,0),e.backing={_tag:"IArray",array:t},e.left=Wn,e.right=Wn,e.depth=0,t}}},Li=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return it({_tag:"IArray",array:wg(e.backing.array)});case"IConcat":return it({_tag:"IConcat",left:Li(e.backing.right),right:Li(e.backing.left)});case"ISlice":return Lc(wg(zr(e)))}},Lc=e=>e.length===0?nr():e.length===1?Gt(e[0]):it({_tag:"IArray",array:e}),XT=e=>Lc(e),Di=O(2,(e,t)=>{switch(e.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":{if(t!==0)throw new Error("Index out of bounds");return e.backing.a}case"IArray":{if(t>=e.length||t<0)throw new Error("Index out of bounds");return e.backing.array[t]}case"IConcat":return t<e.left.length?Di(e.left,t):Di(e.right,t-e.left.length);case"ISlice":return Di(e.backing.chunk,t+e.backing.offset)}}),ZT=O(2,(e,t)=>On(e,Gt(t))),En=O(2,(e,t)=>On(Gt(t),e)),Ul=O(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return Wn;switch(e.backing._tag){case"ISlice":return it({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":return t>e.left.length?Ul(e.right,t-e.left.length):it({_tag:"IConcat",left:Ul(e.left,t),right:e.right});default:return it({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}}),On=O(2,(e,t)=>{if(e.backing._tag==="IEmpty")return t;if(t.backing._tag==="IEmpty")return e;const n=t.depth-e.depth;if(Math.abs(n)<=1)return it({_tag:"IConcat",left:e,right:t});if(n<-1)if(e.left.depth>=e.right.depth){const s=On(e.right,t);return it({_tag:"IConcat",left:e.left,right:s})}else{const s=On(e.right.right,t);if(s.depth===e.depth-3){const o=it({_tag:"IConcat",left:e.right.left,right:s});return it({_tag:"IConcat",left:e.left,right:o})}else{const o=it({_tag:"IConcat",left:e.left,right:e.right.left});return it({_tag:"IConcat",left:o,right:s})}}else if(t.right.depth>=t.left.depth){const s=On(e,t.left);return it({_tag:"IConcat",left:s,right:t.right})}else{const s=On(e,t.left.left);if(s.depth===t.depth-3){const o=it({_tag:"IConcat",left:s,right:t.left.right});return it({_tag:"IConcat",left:o,right:t.right})}else{const o=it({_tag:"IConcat",left:t.left.right,right:t.right});return it({_tag:"IConcat",left:s,right:o})}}}),QT=e=>e.length===0,Ui=e=>e.length>0,xm=e=>Di(e,0),Ki=xm,Yr=e=>Ul(e,1),Kl=Symbol.for("effect/Duration"),km=BigInt(0),Cm=BigInt(24),Dc=BigInt(60),Bl=BigInt(1e3),$m=BigInt(1e6),Pm=BigInt(1e9),eI=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,rr=e=>{if(Fm(e))return e;if(jr(e))return Wl(e);if(pc(e))return jl(e);if(Array.isArray(e)&&e.length===2&&e.every(jr))return e[0]===-1/0||e[1]===-1/0||Number.isNaN(e[0])||Number.isNaN(e[1])?Nm:e[0]===1/0||e[1]===1/0?iI:jl(BigInt(Math.round(e[0]*1e9))+BigInt(Math.round(e[1])));if(Dn(e)){const t=eI.exec(e);if(t){const[n,s,o]=t,u=Number(s);switch(o){case"nano":case"nanos":return jl(BigInt(s));case"micro":case"micros":return sI(BigInt(s));case"milli":case"millis":return Wl(u);case"second":case"seconds":return oI(u);case"minute":case"minutes":return cI(u);case"hour":case"hours":return uI(u);case"day":case"days":return aI(u);case"week":case"weeks":return lI(u)}}}throw new Error("Invalid DurationInput")},Mm={_tag:"Millis",millis:0},tI={_tag:"Infinity"},nI={[Kl]:Kl,[de](){return qe(this,Zp(this.value))},[le](e){return Fm(e)&&mI(this,e)},toString(){return`Duration(${yI(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:hI(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[Ke](){return this.toJSON()},pipe(){return re(this,arguments)}},qn=e=>{const t=Object.create(nI);return jr(e)?isNaN(e)||e<=0?t.value=Mm:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(e*1e6))}:t.value=tI:e<=km?t.value=Mm:t.value={_tag:"Nanos",nanos:e},t},Fm=e=>ue(e,Kl),rI=e=>{switch(e.value._tag){case"Millis":return e.value.millis===0;case"Nanos":return e.value.nanos===km;case"Infinity":return!1}},Nm=qn(0),iI=qn(1/0),jl=e=>qn(e),sI=e=>qn(e*Bl),Wl=e=>qn(e),oI=e=>qn(e*1e3),cI=e=>qn(e*6e4),uI=e=>qn(e*36e5),aI=e=>qn(e*864e5),lI=e=>qn(e*6048e5),ql=e=>dI(e,{onMillis:t=>t,onNanos:t=>Number(t)/1e6}),fI=e=>{const t=rr(e);switch(t.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return t.value.nanos;case"Millis":return BigInt(Math.round(t.value.millis*1e6))}},hI=e=>{const t=rr(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/Pm),Number(t.value.nanos%Pm)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}},dI=O(2,(e,t)=>{const n=rr(e);switch(n.value._tag){case"Nanos":return t.onNanos(n.value.nanos);case"Infinity":return t.onMillis(1/0);case"Millis":return t.onMillis(n.value.millis)}}),Lm=O(3,(e,t,n)=>{const s=rr(e),o=rr(t);if(s.value._tag==="Infinity"||o.value._tag==="Infinity")return n.onMillis(ql(s),ql(o));if(s.value._tag==="Nanos"||o.value._tag==="Nanos"){const u=s.value._tag==="Nanos"?s.value.nanos:BigInt(Math.round(s.value.millis*1e6)),l=o.value._tag==="Nanos"?o.value.nanos:BigInt(Math.round(o.value.millis*1e6));return n.onNanos(u,l)}return n.onMillis(s.value.millis,o.value.millis)}),pI=(e,t)=>Lm(e,t,{onMillis:(n,s)=>n===s,onNanos:(n,s)=>n===s}),gI=O(2,(e,t)=>Lm(e,t,{onMillis:(n,s)=>n>=s,onNanos:(n,s)=>n>=s})),mI=O(2,(e,t)=>pI(rr(e),rr(t))),_I=e=>{const t=rr(e);if(t.value._tag==="Infinity")return{days:1/0,hours:1/0,minutes:1/0,seconds:1/0,millis:1/0,nanos:1/0};const n=fI(t),s=n/$m,o=s/Bl,u=o/Dc,l=u/Dc,h=l/Cm;return{days:Number(h),hours:Number(l%Cm),minutes:Number(u%Dc),seconds:Number(o%Dc),millis:Number(s%Bl),nanos:Number(n%$m)}},yI=e=>{const t=rr(e);if(t.value._tag==="Infinity")return"Infinity";if(rI(t))return"0";const n=_I(t),s=[];return n.days!==0&&s.push(`${n.days}d`),n.hours!==0&&s.push(`${n.hours}h`),n.minutes!==0&&s.push(`${n.minutes}m`),n.seconds!==0&&s.push(`${n.seconds}s`),n.millis!==0&&s.push(`${n.millis}ms`),n.nanos!==0&&s.push(`${n.nanos}ns`),s.join(" ")},Xr=5,Jl=Math.pow(2,Xr),bI=Jl-1,vI=Jl/2,SI=Jl/4;function wI(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Bi(e,t){return t>>>e&bI}function ji(e){return 1<<e}function Dm(e,t){return wI(e&t-1)}const EI=(e,t)=>({value:e,previous:t});function Wi(e,t,n,s){let o=s;if(!e){const u=s.length;o=new Array(u);for(let l=0;l<u;++l)o[l]=s[l]}return o[t]=n,o}function Um(e,t,n){const s=n.length-1;let o=0,u=0,l=n;if(e)o=u=t;else for(l=new Array(s);o<t;)l[u++]=n[o++];for(++o;o<=s;)l[u++]=n[o++];return e&&(l.length=s),l}function OI(e,t,n,s){const o=s.length;if(e){let d=o;for(;d>=t;)s[d--]=s[d];return s[t]=n,s}let u=0,l=0;const h=new Array(o+1);for(;u<t;)h[l++]=s[u++];for(h[t]=n;u<o;)h[++l]=s[u++];return h}class Ir{constructor(){p(this,"_tag","EmptyNode")}modify(t,n,s,o,u,l){const h=s(te());return gt(h)?new Ir:(++l.value,new Zr(t,o,u,h))}}function Tn(e){return Vp(e,"EmptyNode")}function TI(e){return Tn(e)||e._tag==="LeafNode"||e._tag==="CollisionNode"}function Uc(e,t){return Tn(e)?!1:t===e.edit}class Zr{constructor(t,n,s,o){p(this,"edit");p(this,"hash");p(this,"key");p(this,"value");p(this,"_tag","LeafNode");this.edit=t,this.hash=n,this.key=s,this.value=o}modify(t,n,s,o,u,l){if(fe(u,this.key)){const d=s(this.value);return d===this.value?this:gt(d)?(--l.value,new Ir):Uc(this,t)?(this.value=d,this):new Zr(t,o,u,d)}const h=s(te());return gt(h)?this:(++l.value,Km(t,n,this.hash,this,o,new Zr(t,o,u,h)))}}class Gl{constructor(t,n,s){p(this,"edit");p(this,"hash");p(this,"children");p(this,"_tag","CollisionNode");this.edit=t,this.hash=n,this.children=s}modify(t,n,s,o,u,l){if(o===this.hash){const d=Uc(this,t),_=this.updateCollisionList(d,t,this.hash,this.children,s,u,l);return _===this.children?this:_.length>1?new Gl(t,this.hash,_):_[0]}const h=s(te());return gt(h)?this:(++l.value,Km(t,n,this.hash,this,o,new Zr(t,o,u,h)))}updateCollisionList(t,n,s,o,u,l,h){const d=o.length;for(let b=0;b<d;++b){const S=o[b];if("key"in S&&fe(l,S.key)){const T=S.value,I=u(T);return I===T?o:gt(I)?(--h.value,Um(t,b,o)):Wi(t,b,new Zr(n,s,l,I),o)}}const _=u(te());return gt(_)?o:(++h.value,Wi(t,d,new Zr(n,s,l,_),o))}}class qi{constructor(t,n,s){p(this,"edit");p(this,"mask");p(this,"children");p(this,"_tag","IndexedNode");this.edit=t,this.mask=n,this.children=s}modify(t,n,s,o,u,l){const h=this.mask,d=this.children,_=Bi(n,o),b=ji(_),S=Dm(h,b),T=h&b,I=Uc(this,t);if(!T){const ee=new Ir().modify(t,n+Xr,s,o,u,l);return ee?d.length>=vI?AI(t,_,ee,h,d):new qi(t,h|b,OI(I,S,ee,d)):this}const x=d[S],W=x.modify(t,n+Xr,s,o,u,l);if(x===W)return this;let L=h,K;if(Tn(W)){if(L&=~b,!L)return new Ir;if(d.length<=2&&TI(d[S^1]))return d[S^1];K=Um(I,S,d)}else K=Wi(I,S,W,d);return I?(this.mask=L,this.children=K,this):new qi(t,L,K)}}class Hl{constructor(t,n,s){p(this,"edit");p(this,"size");p(this,"children");p(this,"_tag","ArrayNode");this.edit=t,this.size=n,this.children=s}modify(t,n,s,o,u,l){let h=this.size;const d=this.children,_=Bi(n,o),b=d[_],S=(b||new Ir).modify(t,n+Xr,s,o,u,l);if(b===S)return this;const T=Uc(this,t);let I;if(Tn(b)&&!Tn(S))++h,I=Wi(T,_,S,d);else if(!Tn(b)&&Tn(S)){if(--h,h<=SI)return II(t,h,_,d);I=Wi(T,_,new Ir,d)}else I=Wi(T,_,S,d);return T?(this.size=h,this.children=I,this):new Hl(t,h,I)}}function II(e,t,n,s){const o=new Array(t-1);let u=0,l=0;for(let h=0,d=s.length;h<d;++h)if(h!==n){const _=s[h];_&&!Tn(_)&&(o[u++]=_,l|=1<<h)}return new qi(e,l,o)}function AI(e,t,n,s,o){const u=[];let l=s,h=0;for(let d=0;l;++d)l&1&&(u[d]=o[h++]),l>>>=1;return u[t]=n,new Hl(e,h+1,u)}function RI(e,t,n,s,o,u){if(n===o)return new Gl(e,n,[u,s]);const l=Bi(t,n),h=Bi(t,o);if(l===h)return d=>new qi(e,ji(l)|ji(h),[d]);{const d=l<h?[s,u]:[u,s];return new qi(e,ji(l)|ji(h),d)}}function Km(e,t,n,s,o,u){let l,h=t;for(;;){const d=RI(e,h,n,s,o,u);if(typeof d=="function")l=EI(d,l),h=h+Xr;else{let _=d;for(;l!=null;)_=l.value(_),l=l.previous;return _}}}const Bm="effect/HashMap",Vl=Symbol.for(Bm),xI={[Vl]:Vl,[Symbol.iterator](){return new Kc(this,(e,t)=>[e,t])},[de](){let e=z(Bm);for(const t of this)e^=P(z(t[0]),Se(z(t[1])));return qe(this,e)},[le](e){if($I(e)){if(e._size!==this._size)return!1;for(const t of this){const n=P(e,Yl(t[0],z(t[0])));if(gt(n))return!1;if(!fe(t[1],n.value))return!1}return!0}return!1},toString(){return lt(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(rt)}},[Ke](){return this.toJSON()},pipe(){return re(this,arguments)}},zl=(e,t,n,s)=>{const o=Object.create(xI);return o._editable=e,o._edit=t,o._root=n,o._size=s,o};class Kc{constructor(t,n){p(this,"map");p(this,"f");p(this,"v");this.map=t,this.f=n,this.v=jm(this.map._root,this.f,void 0)}next(){if(gt(this.v))return{done:!0,value:void 0};const t=this.v.value;return this.v=Bc(t.cont),{done:!1,value:t.value}}[Symbol.iterator](){return new Kc(this.map,this.f)}}const Bc=e=>e?Wm(e[0],e[1],e[2],e[3],e[4]):te(),jm=(e,t,n=void 0)=>{switch(e._tag){case"LeafNode":return vt(e.value)?be({value:t(e.key,e.value.value),cont:n}):Bc(n);case"CollisionNode":case"ArrayNode":case"IndexedNode":{const s=e.children;return Wm(s.length,s,0,t,n)}default:return Bc(n)}},Wm=(e,t,n,s,o)=>{for(;n<e;){const u=t[n++];if(u&&!Tn(u))return jm(u,s,[e,t,n,s,o])}return Bc(o)},kI=zl(!1,0,new Ir,0),jc=()=>kI,CI=e=>{const t=Jm(jc());for(const n of e)Qs(t,n[0],n[1]);return LI(t)},$I=e=>ue(e,Vl),PI=e=>e&&Tn(e._root),MI=O(2,(e,t)=>Yl(e,t,z(t))),Yl=O(3,(e,t,n)=>{let s=e._root,o=0;for(;;)switch(s._tag){case"LeafNode":return fe(t,s.key)?s.value:te();case"CollisionNode":{if(n===s.hash){const u=s.children;for(let l=0,h=u.length;l<h;++l){const d=u[l];if("key"in d&&fe(t,d.key))return d.value}}return te()}case"IndexedNode":{const u=Bi(o,n),l=ji(u);if(s.mask&l){s=s.children[Dm(s.mask,l)],o+=Xr;break}return te()}case"ArrayNode":{if(s=s.children[Bi(o,n)],s){o+=Xr;break}return te()}default:return te()}}),FI=O(2,(e,t)=>vt(Yl(e,t,z(t)))),Qs=O(3,(e,t,n)=>Zl(e,t,()=>be(n))),NI=O(3,(e,t,n)=>e._editable?(e._root=t,e._size=n,e):t===e._root?e:zl(e._editable,e._edit,t,n)),qm=e=>new Kc(e,t=>t),Xl=e=>e._size,Jm=e=>zl(!0,e._edit+1,e._root,e._size),LI=e=>(e._editable=!1,e),Zl=O(3,(e,t,n)=>DI(e,t,z(t),n)),DI=O(4,(e,t,n,s)=>{const o={value:e._size},u=e._root.modify(e._editable?e._edit:NaN,0,s,n,t,o);return P(e,NI(u,o.value))}),Gm=O(2,(e,t)=>Zl(e,t,te)),UI=O(2,(e,t)=>Wc(e,jc(),(n,s,o)=>Qs(n,o,t(s,o)))),KI=O(2,(e,t)=>Wc(e,void 0,(n,s,o)=>t(s,o))),Wc=O(3,(e,t,n)=>{const s=e._root;if(s._tag==="LeafNode")return vt(s.value)?n(t,s.value.value,s.key):t;if(s._tag==="EmptyNode")return t;const o=[s.children];let u;for(;u=o.pop();)for(let l=0,h=u.length;l<h;){const d=u[l++];d&&!Tn(d)&&(d._tag==="LeafNode"?vt(d.value)&&(t=n(t,d.value.value,d.key)):o.push(d.children))}return t}),Hm="effect/HashSet",Ql=Symbol.for(Hm),BI={[Ql]:Ql,[Symbol.iterator](){return qm(this._keyMap)},[de](){return qe(this,Se(z(this._keyMap))(z(Hm)))},[le](e){return jI(e)?Xl(this._keyMap)===Xl(e._keyMap)&&fe(this._keyMap,e._keyMap):!1},toString(){return lt(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(rt)}},[Ke](){return this.toJSON()},pipe(){return re(this,arguments)}},qc=e=>{const t=Object.create(BI);return t._keyMap=e,t},jI=e=>ue(e,Ql),WI=qc(jc()),Jc=()=>WI,qI=e=>{const t=ef(Jc());for(const n of e)eo(t,n);return tf(t)},JI=(...e)=>{const t=ef(Jc());for(const n of e)eo(t,n);return tf(t)},GI=O(2,(e,t)=>FI(e._keyMap,t)),HI=e=>Xl(e._keyMap),ef=e=>qc(Jm(e._keyMap)),tf=e=>(e._keyMap._editable=!1,e),Vm=O(2,(e,t)=>{const n=ef(e);return t(n),tf(n)}),eo=O(2,(e,t)=>e._keyMap._editable?(Qs(t,!0)(e._keyMap),e):qc(Qs(t,!0)(e._keyMap))),zm=O(2,(e,t)=>e._keyMap._editable?(Gm(t)(e._keyMap),e):qc(Gm(t)(e._keyMap))),VI=O(2,(e,t)=>Vm(e,n=>{for(const s of t)zm(n,s)})),zI=O(2,(e,t)=>Vm(Jc(),n=>{YI(e,s=>eo(n,s));for(const s of t)eo(n,s)})),YI=O(2,(e,t)=>KI(e._keyMap,(n,s)=>t(s))),XI=O(3,(e,t,n)=>Wc(e._keyMap,t,(s,o,u)=>n(s,u))),Qr=Jc,ZI=qI,nf=JI,QI=GI,Ym=HI,to=eo,Xm=zm,Zm=VI,no=zI,Gc=XI,Qm=Symbol.for("effect/MutableRef"),eA={[Qm]:Qm,toString(){return lt(this.toJSON())},toJSON(){return{_id:"MutableRef",current:rt(this.current)}},[Ke](){return this.toJSON()},pipe(){return re(this,arguments)}},e_=e=>{const t=Object.create(eA);return t.current=e,t},Hc=e=>e.current,t_=O(2,(e,t)=>(e.current=t,e)),rf="effect/FiberId",ro=Symbol.for(rf),Vc="None",sf="Runtime",tA="Composite",nA=Xe(`${rf}-${Vc}`);let rA=class{constructor(){p(this,_v,ro);p(this,"_tag",Vc);p(this,"id",-1);p(this,"startTimeMillis",-1)}[(_v=ro,de)](){return nA}[le](t){return n_(t)&&t._tag===Vc}toString(){return lt(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[Ke](){return this.toJSON()}};class iA{constructor(t,n){p(this,"id");p(this,"startTimeMillis");p(this,yv,ro);p(this,"_tag",sf);this.id=t,this.startTimeMillis=n}[(yv=ro,de)](){return qe(this,Xe(`${rf}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[le](t){return n_(t)&&t._tag===sf&&this.id===t.id&&this.startTimeMillis===t.startTimeMillis}toString(){return lt(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[Ke](){return this.toJSON()}}const sA=new rA,n_=e=>ue(e,ro),of=e=>{switch(e._tag){case Vc:return Qr();case sf:return nf(e.id);case tA:return P(of(e.left),no(of(e.right)))}},r_=Ee(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>e_(0)),i_=e=>Array.from(of(e)).map(n=>`#${n}`).join(","),oA=()=>{const e=Hc(r_);return P(r_,t_(e+1)),new iA(e,Date.now())},Ji=sA,cA=i_,s_=oA,cf=jc,uA=CI,aA=PI,o_=MI,c_=Qs,u_=qm,lA=Zl,fA=UI,a_=Wc,io=Symbol.for("effect/List"),uf=e=>Ze(e),hA=(e=>yE(Il(e),uf))(fe),dA={[io]:io,_tag:"Cons",toString(){return lt(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:uf(this).map(rt)}},[Ke](){return this.toJSON()},[le](e){return f_(e)&&this._tag===e._tag&&hA(this,e)},[de](){return qe(this,js(uf(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if(t._tag==="Nil")return e=!0,this.return();const n=t.head;return t=t.tail,{done:e,value:n}},return(n){return e||(e=!0),{done:!0,value:n}}}},pipe(){return re(this,arguments)}},zc=(e,t)=>{const n=Object.create(dA);return n.head=e,n.tail=t,n},pA=Xe("Nil"),gA={[io]:io,_tag:"Nil",toString(){return lt(this.toJSON())},toJSON(){return{_id:"List",_tag:"Nil"}},[Ke](){return this.toJSON()},[de](){return pA},[le](e){return f_(e)&&this._tag===e._tag},[Symbol.iterator](){return{next(){return{done:!0,value:void 0}}}},pipe(){return re(this,arguments)}},l_=Object.create(gA),f_=e=>ue(e,io),ir=e=>e._tag==="Nil",mA=e=>e._tag==="Cons",_A=()=>l_,ei=(e,t)=>zc(e,t),Gi=_A,af=e=>zc(e,l_),yA=O(2,(e,t)=>vA(t,e)),bA=O(2,(e,t)=>ei(t,e)),vA=O(2,(e,t)=>{if(ir(e))return t;if(ir(t))return e;{const n=zc(t.head,e);let s=n,o=t.tail;for(;!ir(o);){const u=zc(o.head,e);s.tail=u,s=u,o=o.tail}return n}}),SA=O(3,(e,t,n)=>{let s=t,o=e;for(;!ir(o);)s=n(s,o.head),o=o.tail;return s}),wA=e=>{let t=Gi(),n=e;for(;!ir(n);)t=bA(t,n.head),n=n.tail;return t},lf=function(){function e(t){t&&Object.assign(this,t)}return e.prototype=wl,e}(),EA=Symbol.for("effect/DifferContextPatch");function h_(e){return e}const so={...lf.prototype,[EA]:{_Value:h_,_Patch:h_}},OA=Object.create(Object.assign(Object.create(so),{_tag:"Empty"})),d_=()=>OA,TA=Object.assign(Object.create(so),{_tag:"AndThen"}),IA=(e,t)=>{const n=Object.create(TA);return n.first=e,n.second=t,n},AA=Object.assign(Object.create(so),{_tag:"AddService"}),RA=(e,t)=>{const n=Object.create(AA);return n.key=e,n.service=t,n},xA=Object.assign(Object.create(so),{_tag:"RemoveService"}),kA=e=>{const t=Object.create(xA);return t.key=e,t},CA=Object.assign(Object.create(so),{_tag:"UpdateService"}),$A=(e,t)=>{const n=Object.create(CA);return n.key=e,n.update=t,n},PA=(e,t)=>{const n=new Map(e.unsafeMap);let s=d_();for(const[o,u]of t.unsafeMap.entries())if(n.has(o)){const l=n.get(o);n.delete(o),fe(l,u)||(s=Yc($A(o,()=>u))(s))}else n.delete(o),s=Yc(RA(o,u))(s);for(const[o]of n.entries())s=Yc(kA(o))(s);return s},Yc=O(2,(e,t)=>IA(e,t)),MA=O(2,(e,t)=>{if(e._tag==="Empty")return t;let n=!1,s=Gt(e);const o=new Map(t.unsafeMap);for(;Ui(s);){const l=Ki(s),h=Yr(s);switch(l._tag){case"Empty":{s=h;break}case"AddService":{o.set(l.key,l.service),s=h;break}case"AndThen":{s=En(En(h,l.second),l.first);break}case"RemoveService":{o.delete(l.key),s=h;break}case"UpdateService":{o.set(l.key,l.update(o.get(l.key))),n=!0,s=h;break}}}if(!n)return Ni(o);const u=new Map;for(const[l]of t.unsafeMap)o.has(l)&&(u.set(l,o.get(l)),o.delete(l));for(const[l,h]of o)u.set(l,h);return Ni(u)}),FA=Symbol.for("effect/DifferHashSetPatch");function ff(e){return e}const Xc={...lf.prototype,[FA]:{_Value:ff,_Key:ff,_Patch:ff}},NA=Object.create(Object.assign(Object.create(Xc),{_tag:"Empty"})),p_=()=>NA,LA=Object.assign(Object.create(Xc),{_tag:"AndThen"}),DA=(e,t)=>{const n=Object.create(LA);return n.first=e,n.second=t,n},UA=Object.assign(Object.create(Xc),{_tag:"Add"}),KA=e=>{const t=Object.create(UA);return t.value=e,t},BA=Object.assign(Object.create(Xc),{_tag:"Remove"}),jA=e=>{const t=Object.create(BA);return t.value=e,t},WA=(e,t)=>{const[n,s]=Gc([e,p_()],([o,u],l)=>QI(l)(o)?[Xm(l)(o),u]:[o,hf(KA(l))(u)])(t);return Gc(s,(o,u)=>hf(jA(u))(o))(n)},hf=O(2,(e,t)=>DA(e,t)),qA=O(2,(e,t)=>{if(e._tag==="Empty")return t;let n=t,s=Gt(e);for(;Ui(s);){const o=Ki(s),u=Yr(s);switch(o._tag){case"Empty":{s=u;break}case"AndThen":{s=En(o.first)(En(o.second)(u));break}case"Add":{n=to(o.value)(n),s=u;break}case"Remove":n=Xm(o.value)(n),s=u}}return n}),JA=Symbol.for("effect/DifferReadonlyArrayPatch");function g_(e){return e}const oo={...lf.prototype,[JA]:{_Value:g_,_Patch:g_}},GA=Object.create(Object.assign(Object.create(oo),{_tag:"Empty"})),m_=()=>GA,HA=Object.assign(Object.create(oo),{_tag:"AndThen"}),VA=(e,t)=>{const n=Object.create(HA);return n.first=e,n.second=t,n},zA=Object.assign(Object.create(oo),{_tag:"Append"}),YA=e=>{const t=Object.create(zA);return t.values=e,t},XA=Object.assign(Object.create(oo),{_tag:"Slice"}),ZA=(e,t)=>{const n=Object.create(XA);return n.from=e,n.until=t,n},QA=Object.assign(Object.create(oo),{_tag:"Update"}),eR=(e,t)=>{const n=Object.create(QA);return n.index=e,n.patch=t,n},tR=e=>{let t=0,n=m_();for(;t<e.oldValue.length&&t<e.newValue.length;){const s=e.oldValue[t],o=e.newValue[t],u=e.differ.diff(s,o);fe(u,e.differ.empty)||(n=Zc(n,eR(t,u))),t=t+1}return t<e.oldValue.length&&(n=Zc(n,ZA(0,t))),t<e.newValue.length&&(n=Zc(n,YA(TO(t)(e.newValue)))),n},Zc=O(2,(e,t)=>VA(e,t)),nR=O(3,(e,t,n)=>{if(e._tag==="Empty")return t;let s=t.slice(),o=wn(e);for(;xc(o);){const u=Pt(o),l=qr(o);switch(u._tag){case"Empty":{o=l;break}case"AndThen":{l.unshift(u.first,u.second),o=l;break}case"Append":{for(const h of u.values)s.push(h);o=l;break}case"Slice":{s=s.slice(u.from,u.until),o=l;break}case"Update":{s[u.index]=n.patch(u.patch,s[u.index]),o=l;break}}}return s}),rR={[Symbol.for("effect/Differ")]:{_P:Ye,_V:Ye},pipe(){return re(this,arguments)}},Hi=e=>{const t=Object.create(rR);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},iR=()=>Hi({empty:d_(),combine:(e,t)=>Yc(t)(e),diff:(e,t)=>PA(e,t),patch:(e,t)=>MA(t)(e)}),sR=()=>Hi({empty:p_(),combine:(e,t)=>hf(t)(e),diff:(e,t)=>WA(e,t),patch:(e,t)=>qA(t)(e)}),oR=e=>Hi({empty:m_(),combine:(t,n)=>Zc(t,n),diff:(t,n)=>tR({oldValue:t,newValue:n,differ:e}),patch:(t,n)=>nR(t,n,e)}),__=()=>cR((e,t)=>t),cR=e=>Hi({empty:Ye,combine:(t,n)=>t===Ye?n:n===Ye?t:s=>n(t(s)),diff:(t,n)=>fe(t,n)?Ye:fc(n),patch:(t,n)=>e(n,t(n))}),co=255,y_=8,df=e=>e&co,pf=e=>e>>y_&co,uo=(e,t)=>(e&co)+((t&e&co)<<y_),uR=uo(0,0),aR=e=>uo(e,e),lR=e=>uo(e,0),fR=O(2,(e,t)=>uo(df(e)&~t,pf(e))),hR=O(2,(e,t)=>e|t),dR=e=>~e>>>0&co,pR=0,Vi=1,gR=2,b_=4,gf=16,v_=32,mR=e=>Qc(e,v_),_R=O(2,(e,t)=>e|t),Ar=e=>S_(e)&&!bR(e),S_=e=>Qc(e,Vi),Qc=O(2,(e,t)=>(e&t)!==0),w_=(...e)=>e.reduce((t,n)=>t|n,0),yR=w_(pR),E_=e=>Qc(e,b_),bR=e=>Qc(e,gf),eu=O(2,(e,t)=>uo(e^t,t)),tu=O(2,(e,t)=>e&(dR(df(t))|pf(t))|df(t)&pf(t)),O_=Hi({empty:uR,diff:(e,t)=>eu(e,t),combine:(e,t)=>hR(t)(e),patch:(e,t)=>tu(t,e)}),vR=aR,T_=lR,I_=fR,A_=(e,t)=>({_tag:"Par",left:e,right:t}),nu=(e,t)=>({_tag:"Seq",left:e,right:t}),SR=e=>{let t=af(e),n=Gi();for(;;){const[s,o]=SA(t,[R_(),Gi()],([u,l],h)=>{const[d,_]=wR(h);return[AR(u,d),yA(l,_)]});if(n=ER(n,s),ir(o))return wA(n);t=o}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},wR=e=>{let t=e,n=R_(),s=Gi(),o=Gi();for(;;)switch(t._tag){case"Empty":{if(ir(s))return[n,o];t=s.head,s=s.tail;break}case"Par":{s=ei(t.right,s),t=t.left;break}case"Seq":{const u=t.left,l=t.right;switch(u._tag){case"Empty":{t=l;break}case"Par":{const h=u.left,d=u.right;t=A_(nu(h,l),nu(d,l));break}case"Seq":{const h=u.left,d=u.right;t=nu(h,nu(d,l));break}case"Single":{t=u,o=ei(l,o);break}}break}case"Single":{if(n=IR(n,t),ir(s))return[n,o];t=s.head,s=s.tail;break}}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},ER=(e,t)=>{if(ir(e))return af(_f(t));if(RR(t))return e;const n=MR(e.head),s=xR(t);return n.length===1&&s.length===1&&fe(n[0],s[0])?ei(PR(e.head,_f(t)),e.tail):ei(_f(t),e)},OR=Symbol.for("effect/RequestBlock/RequestBlockParallel"),TR={_R:e=>e};bv=OR;class mf{constructor(t){p(this,"map");p(this,bv,TR);this.map=t}}const R_=()=>new mf(cf()),IR=(e,t)=>new mf(lA(e.map,t.dataSource,n=>uO(_g(n,ZT(t.blockedRequest)),()=>Gt(t.blockedRequest)))),AR=(e,t)=>new mf(a_(e.map,t.map,(n,s,o)=>c_(n,o,Jt(o_(n,o),{onNone:()=>s,onSome:u=>On(s,u)})))),RR=e=>aA(e.map),xR=e=>Array.from(u_(e.map)),_f=e=>$R(fA(e.map,t=>Gt(t))),kR=Symbol.for("effect/RequestBlock/RequestBlockSequential"),CR={_R:e=>e};vv=kR;class x_{constructor(t){p(this,"map");p(this,vv,CR);this.map=t}}const $R=e=>new x_(e),PR=(e,t)=>new x_(a_(t.map,e.map,(n,s,o)=>c_(n,o,Jt(o_(n,o),{onNone:()=>nr(),onSome:u=>On(u,s)})))),MR=e=>Array.from(u_(e.map)),FR=e=>Array.from(e.map),ao="Die",ti="Empty",ni="Fail",zi="Interrupt",Yi="Parallel",Xi="Sequential",k_="effect/Cause",C_=Symbol.for(k_),NR={_E:e=>e},Zi={[C_]:NR,[de](){return P(z(k_),Se(z(YR(this))),qe(this))},[le](e){return LR(e)&&zR(this,e)},pipe(){return re(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:rt(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:rt(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:rt(this.left),right:rt(this.right)}}},toString(){return es(this)},[Ke](){return this.toJSON()}},lo=(()=>{const e=Object.create(Zi);return e._tag=ti,e})(),ru=e=>{const t=Object.create(Zi);return t._tag=ni,t.error=e,t},Jn=e=>{const t=Object.create(Zi);return t._tag=ao,t.defect=e,t},Rr=e=>{const t=Object.create(Zi);return t._tag=zi,t.fiberId=e,t},iu=(e,t)=>{const n=Object.create(Zi);return n._tag=Yi,n.left=e,n.right=t,n},on=(e,t)=>{const n=Object.create(Zi);return n._tag=Xi,n.left=e,n.right=t,n},LR=e=>ue(e,C_),DR=e=>e._tag===ti,UR=e=>e._tag===ni,KR=e=>e._tag===ti?!0:Qi(e,!0,(t,n)=>{switch(n._tag){case ti:return be(t);case ao:case ni:case zi:return be(!1);default:return te()}}),BR=e=>vt(HR(e)),yf=e=>vf(void 0,ZR)(e),jR=e=>Li(Qi(e,nr(),(t,n)=>n._tag===ni?be(P(t,En(n.error))):te())),WR=e=>Li(Qi(e,nr(),(t,n)=>n._tag===ao?be(P(t,En(n.defect))):te())),qR=e=>Qi(e,Qr(),(t,n)=>n._tag===zi?be(P(t,to(n.fiberId))):te()),JR=e=>P_(e,t=>t._tag===ni?be(t.error):te()),GR=e=>{const t=JR(e);switch(t._tag){case"None":return Oe(e);case"Some":return ge(t.value)}},HR=e=>P_(e,t=>t._tag===zi?be(t.fiberId):te()),$_=e=>N_(e,{onEmpty:lo,onFail:()=>lo,onDie:Jn,onInterrupt:Rr,onSequential:on,onParallel:iu}),VR=e=>N_(e,{onEmpty:lo,onFail:Jn,onDie:Jn,onInterrupt:Rr,onSequential:on,onParallel:iu}),zR=(e,t)=>{let n=Gt(e),s=Gt(t);for(;Ui(n)&&Ui(s);){const[o,u]=P(Ki(n),Qi([Qr(),nr()],([d,_],b)=>{const[S,T]=bf(b);return be([P(d,no(S)),P(_,On(T))])})),[l,h]=P(Ki(s),Qi([Qr(),nr()],([d,_],b)=>{const[S,T]=bf(b);return be([P(d,no(S)),P(_,On(T))])}));if(!fe(o,l))return!1;n=u,s=h}return!0},YR=e=>XR(Gt(e),nr()),XR=(e,t)=>{for(;;){const[n,s]=P(e,Tg([Qr(),nr()],([u,l],h)=>{const[d,_]=bf(h);return[P(u,no(d)),P(l,On(_))]})),o=Ym(n)>0?P(t,En(n)):t;if(QT(s))return Li(o);e=s,t=o}throw new Error(gc("Cause.flattenCauseLoop"))},P_=O(2,(e,t)=>{const n=[e];for(;n.length>0;){const s=n.pop(),o=t(s);switch(o._tag){case"None":{switch(s._tag){case Xi:case Yi:{n.push(s.right),n.push(s.left);break}}break}case"Some":return o}}return te()}),bf=e=>{let t=e;const n=[];let s=Qr(),o=nr();for(;t!==void 0;)switch(t._tag){case ti:{if(n.length===0)return[s,o];t=n.pop();break}case ni:{if(s=to(s,Ll(t._tag,t.error)),n.length===0)return[s,o];t=n.pop();break}case ao:{if(s=to(s,Ll(t._tag,t.defect)),n.length===0)return[s,o];t=n.pop();break}case zi:{if(s=to(s,Ll(t._tag,t.fiberId)),n.length===0)return[s,o];t=n.pop();break}case Xi:{switch(t.left._tag){case ti:{t=t.right;break}case Xi:{t=on(t.left.left,on(t.left.right,t.right));break}case Yi:{t=iu(on(t.left.left,t.right),on(t.left.right,t.right));break}default:{o=En(o,t.right),t=t.left;break}}break}case Yi:{n.push(t.right),t=t.left;break}}throw new Error(gc("Cause.evaluateCauseLoop"))},ZR={emptyCase:Gp,failCase:al,dieCase:al,interruptCase:Gp,sequentialCase:(e,t,n)=>t&&n,parallelCase:(e,t,n)=>t&&n},M_="SequentialCase",F_="ParallelCase",N_=O(2,(e,{onDie:t,onEmpty:n,onFail:s,onInterrupt:o,onParallel:u,onSequential:l})=>vf(e,void 0,{emptyCase:()=>n,failCase:(h,d)=>s(d),dieCase:(h,d)=>t(d),interruptCase:(h,d)=>o(d),sequentialCase:(h,d,_)=>l(d,_),parallelCase:(h,d,_)=>u(d,_)})),Qi=O(3,(e,t,n)=>{let s=t,o=e;const u=[];for(;o!==void 0;){const l=n(s,o);switch(s=vt(l)?l.value:s,o._tag){case Xi:{u.push(o.right),o=o.left;break}case Yi:{u.push(o.right),o=o.left;break}default:{o=void 0;break}}o===void 0&&u.length>0&&(o=u.pop())}return s}),vf=O(3,(e,t,n)=>{const s=[e],o=[];for(;s.length>0;){const l=s.pop();switch(l._tag){case ti:{o.push(Oe(n.emptyCase(t)));break}case ni:{o.push(Oe(n.failCase(t,l.error)));break}case ao:{o.push(Oe(n.dieCase(t,l.defect)));break}case zi:{o.push(Oe(n.interruptCase(t,l.fiberId)));break}case Xi:{s.push(l.right),s.push(l.left),o.push(ge({_tag:M_}));break}case Yi:{s.push(l.right),s.push(l.left),o.push(ge({_tag:F_}));break}}}const u=[];for(;o.length>0;){const l=o.pop();switch(l._tag){case"Left":{switch(l.left._tag){case M_:{const h=u.pop(),d=u.pop(),_=n.sequentialCase(t,h,d);u.push(_);break}case F_:{const h=u.pop(),d=u.pop(),_=n.parallelCase(t,h,d);u.push(_);break}}break}case"Right":{u.push(l.right);break}}}if(u.length===0)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return u.pop()}),es=(e,t)=>yf(e)?"All fibers interrupted without errors.":D_(e).map(function(n){return(t==null?void 0:t.renderErrorCause)!==!0||n.cause===void 0?n.stack:`${n.stack} {
${L_(n.cause,"  ")}
}`}).join(`
`),L_=(e,t)=>{const n=e.stack.split(`
`);let s=`${t}[cause]: ${n[0]}`;for(let o=1,u=n.length;o<u;o++)s+=`
${t}${n[o]}`;return e.cause&&(s+=` {
${L_(e.cause,`${t}  `)}
${t}}`),s};class su extends globalThis.Error{constructor(n){const s=typeof n=="object"&&n!==null,o=Error.stackTraceLimit;Error.stackTraceLimit=1;super(QR(n),s&&"cause"in n&&typeof n.cause<"u"?{cause:new su(n.cause)}:void 0);p(this,"span");this.message===""&&(this.message="An error has occurred"),Error.stackTraceLimit=o,this.name=n instanceof Error?n.name:"Error",s&&(ts in n&&(this.span=n[ts]),Object.keys(n).forEach(u=>{u in this||(this[u]=n[u])})),this.stack=nx(`${this.name}: ${this.message}`,n instanceof Error&&n.stack?n.stack:"",this.span)}}const QR=e=>{if(typeof e=="string")return e;if(typeof e=="object"&&e!==null&&e instanceof Error)return e.message;try{if(ue(e,"toString")&&Ks(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return Qp(e)},ex=/\((.*)\)/g,tx=Ee("effect/Tracer/spanToTrace",()=>new WeakMap),nx=(e,t,n)=>{const s=[e],o=t.startsWith(e)?t.slice(e.length).split(`
`):t.split(`
`);for(let u=1;u<o.length&&!o[u].includes("Generator.next");u++){if(o[u].includes("effect_internal_function")){s.pop();break}s.push(o[u].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(n){let u=n,l=0;for(;u&&u._tag==="Span"&&l<10;){const h=tx.get(u);if(typeof h=="function"){const d=h();if(typeof d=="string"){const _=d.matchAll(ex);let b=!1;for(const[,S]of _)b=!0,s.push(`    at ${u.name} (${S})`);b||s.push(`    at ${u.name} (${d.replace(/^at /,"")})`)}else s.push(`    at ${u.name}`)}else s.push(`    at ${u.name}`);u=Un(u.parent),l++}}return s.join(`
`)},ts=Symbol.for("effect/SpanAnnotation"),D_=e=>vf(e,void 0,{emptyCase:()=>[],dieCase:(t,n)=>[new su(n)],failCase:(t,n)=>[new su(n)],interruptCase:()=>[],parallelCase:(t,n,s)=>[...n,...s],sequentialCase:(t,n,s)=>[...n,...s]}),ou="Pending",U_="Done",rx=Symbol.for("effect/Deferred"),ix={_E:e=>e,_A:e=>e},sx=e=>({_tag:ou,joiners:e}),ox=e=>({_tag:U_,effect:e});class fo{constructor(t){p(this,"self");p(this,"called",!1);this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new fo(this.self)}}const K_=(e,t)=>{const n=new _t("Blocked");return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n},cx=e=>{const t=new _t("RunBlocked");return t.effect_instruction_i0=e,t},ns=Symbol.for("effect/Effect");class ux{constructor(t,n){p(this,"patch");p(this,"op");p(this,"_op",Sl);this.patch=t,this.op=n}}class _t{constructor(t){p(this,"_op");p(this,"effect_instruction_i0");p(this,"effect_instruction_i1");p(this,"effect_instruction_i2");p(this,"trace");p(this,Sv,Ai);this._op=t}[(Sv=ns,le)](t){return this===t}[de](){return qe(this,ml(this))}pipe(){return re(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:rt(this.effect_instruction_i0),effect_instruction_i1:rt(this.effect_instruction_i1),effect_instruction_i2:rt(this.effect_instruction_i2)}}toString(){return lt(this.toJSON())}[Ke](){return this.toJSON()}[Symbol.iterator](){return new fo(new Bs(this))}}class B_{constructor(t){p(this,"_op");p(this,"effect_instruction_i0");p(this,"effect_instruction_i1");p(this,"effect_instruction_i2");p(this,"trace");p(this,wv,Ai);this._op=t,this._tag=t}[(wv=ns,le)](t){return $f(t)&&t._op==="Failure"&&fe(this.effect_instruction_i0,t.effect_instruction_i0)}[de](){return P(Xe(this._tag),Se(z(this.effect_instruction_i0)),qe(this))}get cause(){return this.effect_instruction_i0}pipe(){return re(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return lt(this.toJSON())}[Ke](){return this.toJSON()}[Symbol.iterator](){return new fo(new Bs(this))}}class j_{constructor(t){p(this,"_op");p(this,"effect_instruction_i0");p(this,"effect_instruction_i1");p(this,"effect_instruction_i2");p(this,"trace");p(this,Ev,Ai);this._op=t,this._tag=t}[(Ev=ns,le)](t){return $f(t)&&t._op==="Success"&&fe(this.effect_instruction_i0,t.effect_instruction_i0)}[de](){return P(Xe(this._tag),Se(z(this.effect_instruction_i0)),qe(this))}get value(){return this.effect_instruction_i0}pipe(){return re(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:rt(this.value)}}toString(){return lt(this.toJSON())}[Ke](){return this.toJSON()}[Symbol.iterator](){return new fo(new Bs(this))}}const cu=e=>ue(e,ns),Ht=e=>{const t=new _t(ng);return t.effect_instruction_i0=e,t},ax=O(3,(e,t,n)=>hu(s=>se(e,o=>se(H_(st(()=>s(t(o)))),u=>st(()=>n(o,u)).pipe(rs({onFailure:l=>{switch(u._tag){case vn:return In(on(u.effect_instruction_i0,l));case Sn:return In(l)}},onSuccess:()=>u})))))),ho=O(2,(e,t)=>se(e,()=>Be(t))),po=e=>ho(e,void 0),W_=function(){const e=new _t(bc);switch(arguments.length){case 2:{e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break}case 3:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break}case 4:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break}default:throw new Error(gc("you're not supposed to end up here"))}return e},uu=(e,t=Ji)=>{const n=new _t(Ws);let s;return n.effect_instruction_i0=o=>{s=e(o)},n.effect_instruction_i1=t,Q_(n,o=>cu(s)?s:An)},lx=(e,t=Ji)=>st(()=>uu(e,t)),go=(e,t=Ji)=>W_(e,function(){let n,s;function o(d){n?n(d):s===void 0&&(s=d)}const u=new _t(Ws);u.effect_instruction_i0=d=>{n=d,s&&d(s)},u.effect_instruction_i1=t;let l,h;return this.effect_instruction_i0.length!==1?(h=new AbortController,l=At(()=>this.effect_instruction_i0(o,h.signal))):l=At(()=>this.effect_instruction_i0(o)),l||h?Q_(u,d=>(h&&h.abort(),l??An)):u}),Sf=O(2,(e,t)=>Ef(e,{onFailure:t,onSuccess:Be})),q_=Symbol.for("effect/OriginalAnnotation"),wf=(e,t)=>vt(t)?new Proxy(e,{has(n,s){return s===ts||s===q_||s in n},get(n,s){return s===ts?t.value:s===q_?e:n[s]}}):e,J_=e=>Er(e)&&!(ts in e)?Ht(t=>In(Jn(wf(e,Mf(t))))):In(Jn(e)),G_=e=>fx(()=>Jn(new Kx(e))),au=e=>Ef(e,{onFailure:t=>Be(ge(t)),onSuccess:t=>Be(Oe(t))}),H_=e=>px(e,{onFailure:Ne,onSuccess:Qe}),Ft=e=>Er(e)&&!(ts in e)?Ht(t=>In(ru(wf(e,Mf(t))))):In(ru(e)),V_=e=>se(ce(e),Ft),In=e=>{const t=new B_(vn);return t.effect_instruction_i0=e,t},fx=e=>se(ce(e),In),hx=Ht(e=>Be(e.id())),z_=e=>Ht(t=>e(t.id())),se=O(2,(e,t)=>{const n=new _t(vc);return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n}),dx=e=>{const t=new _t("OnStep");return t.effect_instruction_i0=e,t},Y_=e=>se(e,Ye),px=O(2,(e,t)=>rs(e,{onFailure:n=>Be(t.onFailure(n)),onSuccess:n=>Be(t.onSuccess(n))})),rs=O(2,(e,t)=>{const n=new _t(Sc);return n.effect_instruction_i0=e,n.effect_instruction_i1=t.onFailure,n.effect_instruction_i2=t.onSuccess,n}),Ef=O(2,(e,t)=>rs(e,{onFailure:n=>{if(WR(n).length>0)return In(VR(n));const o=jR(n);return o.length>0?t.onFailure(xm(o)):In(n)},onSuccess:t.onSuccess})),xr=O(2,(e,t)=>st(()=>{const n=Ze(e),s=Ac(n.length);let o=0;return ho(Tf({while:()=>o<n.length,body:()=>t(n[o],o),step:u=>{s[o++]=u}}),s)})),lu=O(2,(e,t)=>st(()=>{const n=Ze(e);let s=0;return Tf({while:()=>s<n.length,body:()=>t(n[s],s),step:()=>{s++}})})),X_=e=>{const t=new _t(qs);return t.effect_instruction_i0=vR(Vi),t.effect_instruction_i1=()=>e,t},Nt=O(2,(e,t)=>se(e,n=>ce(()=>t(n)))),Z_=O(2,(e,t)=>Ef(e,{onFailure:n=>V_(()=>t.onFailure(n)),onSuccess:n=>ce(()=>t.onSuccess(n))})),fu=O(2,(e,t)=>rs(e,{onFailure:n=>{const s=GR(n);switch(s._tag){case"Left":return V_(()=>t(s.left));case"Right":return In(s.right)}},onSuccess:Be})),Of=O(2,(e,t)=>hu(n=>rs(n(e),{onFailure:s=>{const o=Ne(s);return rs(t(o),{onFailure:u=>Ne(on(s,u)),onSuccess:()=>o})},onSuccess:s=>{const o=Qe(s);return du(t(o),o)}}))),Q_=O(2,(e,t)=>Of(e,my({onFailure:n=>yf(n)?po(t(qR(n))):An,onSuccess:()=>An}))),Be=e=>{const t=new j_(Sn);return t.effect_instruction_i0=e,t},st=e=>{const t=new _t(bc);return t.commit=e,t},ce=e=>{const t=new _t(tg);return t.effect_instruction_i0=e,t},gx=O(e=>e.length===3||e.length===2&&!(Er(e[1])&&"onlyEffect"in e[1]),(e,t)=>se(e,n=>{const s=typeof t=="function"?t(n):t;return cu(s)?ho(s,n):IE(s)?uu(o=>{s.then(u=>o(Be(n)),u=>o(Ft(new Wx(u,"An unknown error occurred in Effect.tap"))))}):Be(n)})),mx=e=>Ht(t=>{const n=t.getFiberRef(kf),s=P(n,ft(()=>t.scope()));return e(pu(kf,be(s)))}),ey=e=>{const t=new _t(qs);return t.effect_instruction_i0=T_(Vi),t.effect_instruction_i1=()=>e,t},hu=e=>W_(e,function(){const t=new _t(qs);return t.effect_instruction_i0=T_(Vi),t.effect_instruction_i1=n=>S_(n)?At(()=>this.effect_instruction_i0(X_)):At(()=>this.effect_instruction_i0(ey)),t}),An=Be(void 0),_x=e=>{const t=new _t(qs);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},Tf=e=>{const t=new _t(wc);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},If=e=>{const t=new _t(Oc);return typeof(e==null?void 0:e.priority)<"u"?Mx(t,e.priority):t},ty=O(2,(e,t)=>se(e,n=>Nt(t,s=>[n,s]))),ny=O(2,(e,t)=>se(e,n=>ho(t,n))),du=O(2,(e,t)=>se(e,()=>t)),yx=e=>se(hx,t=>P(e,ry(t))),ry=O(2,(e,t)=>se(e.interruptAsFork(t),()=>e.await)),bx={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return re(this,arguments)}},vx={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return re(this,arguments)}},Sx={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return re(this,arguments)}},wx={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return re(this,arguments)}},iy={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return re(this,arguments)}},sy={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return re(this,arguments)}},Ex={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return re(this,arguments)}},Ox={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return re(this,arguments)}},Tx=Symbol.for("effect/FiberRef"),Ix={_A:e=>e},Af=e=>Ht(t=>Qe(t.getFiberRef(e))),Rf=O(2,(e,t)=>se(Af(e),t)),oy=O(2,(e,t)=>Ax(e,()=>[void 0,t])),Ax=O(2,(e,t)=>Ht(n=>{const[s,o]=t(n.getFiberRef(e));return n.setFiberRef(e,o),Be(s)})),pu=O(3,(e,t,n)=>ax(ny(Af(t),oy(t,n)),()=>e,s=>oy(t,s))),Vt=(e,t)=>is(e,{differ:__(),fork:(t==null?void 0:t.fork)??Ye,join:t==null?void 0:t.join}),Rx=e=>{const t=sR();return is(e,{differ:t,fork:t.empty})},xx=e=>{const t=oR(__());return is(e,{differ:t,fork:t.empty})},cy=e=>{const t=iR();return is(e,{differ:t,fork:t.empty})},is=(e,t)=>({...Gs,[Tx]:Ix,initial:e,commit(){return Af(this)},diff:(s,o)=>t.differ.diff(s,o),combine:(s,o)=>t.differ.combine(s,o),patch:s=>o=>t.differ.patch(s,o),fork:t.fork,join:t.join??((s,o)=>o)}),kx=e=>is(e,{differ:O_,fork:O_.empty}),mo=Ee(Symbol.for("effect/FiberRef/currentContext"),()=>cy(Nl())),gu=Ee(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>Vt(0)),uy=Ee(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>Vt(2048)),Cx=Ee(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>Vt(cf())),$x=Ee(Symbol.for("effect/FiberRef/currentLogLevel"),()=>Vt(iy)),Px=Ee(Symbol.for("effect/FiberRef/currentLogSpan"),()=>Vt(Gi())),Mx=O(2,(e,t)=>pu(e,gu,t)),Fx=Ee(Symbol.for("effect/FiberRef/currentConcurrency"),()=>Vt("unbounded")),Nx=Ee(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>Vt(!0)),Lx=Ee(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>Vt(be(sy))),xf=Ee(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>xx(Ri())),kf=Ee(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>Vt(te(),{fork:()=>te(),join:(e,t)=>e})),mu=Ee(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>Vt(lo,{fork:()=>lo,join:(e,t)=>e})),Dx=(e,t)=>e.addFinalizer(()=>po(t)),Ux=(e,t)=>e.close(t),_u=(e,t)=>e.fork(t),Cf=function(){class e extends globalThis.Error{commit(){return Ft(this)}toJSON(){const n={...this};return this.message&&(n.message=this.message),this.cause&&(n.cause=this.cause),n}[Ke](){return this.toString!==globalThis.Error.prototype.toString?this.stack?`${this.toString()}
${this.stack.split(`
`).slice(1).join(`
`)}`:this.toString():"Bun"in globalThis?es(ru(this),{renderErrorCause:!0}):this}}return Object.assign(e.prototype,HE),e}(),ay=(e,t)=>{class n extends Cf{constructor(){super(...arguments);p(this,"_tag",t)}}return Object.assign(n.prototype,e),n.prototype.name=t,n},ly=Symbol.for("effect/Cause/errors/RuntimeException"),Kx=ay({[ly]:ly},"RuntimeException"),Bx=Symbol.for("effect/Cause/errors/InterruptedException"),jx=e=>ue(e,Bx),fy=Symbol.for("effect/Cause/errors/NoSuchElement"),hy=ay({[fy]:fy},"NoSuchElementException"),dy=Symbol.for("effect/Cause/errors/UnknownException"),Wx=function(){class e extends Cf{constructor(s,o){super(o??"An unknown error occurred",{cause:s});p(this,"_tag","UnknownException");p(this,"error");this.error=s}}return Object.assign(e.prototype,{[dy]:dy,name:"UnknownException"}),e}(),$f=e=>cu(e)&&"_tag"in e&&(e._tag==="Success"||e._tag==="Failure"),qx=e=>e._tag==="Success",py=(e,t)=>Vx(e,t!=null&&t.parallel?iu:on),Jx=e=>Ne(Jn(e)),gy=e=>Ne(ru(e)),Ne=e=>{const t=new B_(vn);return t.effect_instruction_i0=e,t},Gx=e=>Ne(Rr(e)),Pf=O(2,(e,t)=>{switch(e._tag){case vn:return Ne(e.effect_instruction_i0);case Sn:return Qe(t(e.effect_instruction_i0))}}),my=O(2,(e,{onFailure:t,onSuccess:n})=>{switch(e._tag){case vn:return t(e.effect_instruction_i0);case Sn:return n(e.effect_instruction_i0)}}),Qe=e=>{const t=new j_(Sn);return t.effect_instruction_i0=e,t},ri=Qe(void 0),Hx=O(3,(e,t,{onFailure:n,onSuccess:s})=>{switch(e._tag){case vn:switch(t._tag){case Sn:return Ne(e.effect_instruction_i0);case vn:return Ne(n(e.effect_instruction_i0,t.effect_instruction_i0))}case Sn:switch(t._tag){case Sn:return Qe(s(e.effect_instruction_i0,t.effect_instruction_i0));case vn:return Ne(t.effect_instruction_i0)}}}),Vx=(e,t)=>{const n=Rm(e);return Ui(n)?P(Yr(n),Tg(P(Ki(n),Pf(Gt)),(s,o)=>P(s,Hx(o,{onSuccess:(u,l)=>P(u,En(l)),onFailure:t}))),Pf(Li),Pf(s=>zr(s)),be):te()},zx=e=>({...Gs,[rx]:ix,state:e_(sx([])),commit(){return _y(this)},blockingOn:e}),_y=e=>lx(t=>{const n=Hc(e.state);switch(n._tag){case U_:return t(n.effect);case ou:return n.joiners.push(t),Yx(e,t)}},e.blockingOn),yy=(e,t)=>{const n=Hc(e.state);if(n._tag===ou){t_(e.state,ox(t));for(let s=0,o=n.joiners.length;s<o;s++)n.joiners[s](t)}},Yx=(e,t)=>ce(()=>{const n=Hc(e.state);if(n._tag===ou){const s=n.joiners.indexOf(t);s>=0&&n.joiners.splice(s,1)}}),Xx=Ht(e=>Qe(e.currentContext)),Zx=()=>Xx,_o=e=>se(Zx(),e),Qx=O(2,(e,t)=>pu(mo,t)(e)),ek=O(2,(e,t)=>_o(n=>Qx(e,t(n)))),Mf=e=>{const t=e.currentSpan;return t!==void 0&&t._tag==="Span"?be(t):te()},tk=qx,by=Symbol.for("effect/MutableHashMap"),nk={[by]:by,[Symbol.iterator](){return new Ff(this)},toString(){return lt(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(rt)}},[Ke](){return this.toJSON()},pipe(){return re(this,arguments)}};class Ff{constructor(t){p(this,"self");p(this,"referentialIterator");p(this,"bucketIterator");this.self=t,this.referentialIterator=t.referential[Symbol.iterator]()}next(){if(this.bucketIterator!==void 0)return this.bucketIterator.next();const t=this.referentialIterator.next();return t.done?(this.bucketIterator=new rk(this.self.buckets.values()),this.next()):t}[Symbol.iterator](){return new Ff(this.self)}}class rk{constructor(t){p(this,"backing");p(this,"currentBucket");this.backing=t}next(){if(this.currentBucket===void 0){const n=this.backing.next();if(n.done)return n;this.currentBucket=n.value[Symbol.iterator]()}const t=this.currentBucket.next();return t.done?(this.currentBucket=void 0,this.next()):t}}const ik=()=>{const e=Object.create(nk);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e},ii=O(2,(e,t)=>{if(yc(t)===!1)return e.referential.has(t)?be(e.referential.get(t)):te();const n=t[de](),s=e.buckets.get(n);return s===void 0?te():sk(e,s,t)}),sk=(e,t,n,s=!1)=>{for(let o=0,u=t.length;o<u;o++)if(n[le](t[o][0])){const l=t[o][1];return s&&(t.splice(o,1),e.bucketsSize--),be(l)}return te()},yo=O(2,(e,t)=>vt(ii(e,t))),bo=O(3,(e,t,n)=>{if(yc(t)===!1)return e.referential.set(t,n),e;const s=t[de](),o=e.buckets.get(s);return o===void 0?(e.buckets.set(s,[[t,n]]),e.bucketsSize++,e):(ok(e,o,t),o.push([t,n]),e.bucketsSize++,e)}),ok=(e,t,n)=>{for(let s=0,o=t.length;s<o;s++)if(n[le](t[s][0])){t.splice(s,1),e.bucketsSize--;return}};function ck(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var vy={exports:{}},Ge=vy.exports={},Gn,Hn;function Nf(){throw new Error("setTimeout has not been defined")}function Lf(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Gn=setTimeout:Gn=Nf}catch{Gn=Nf}try{typeof clearTimeout=="function"?Hn=clearTimeout:Hn=Lf}catch{Hn=Lf}})();function Sy(e){if(Gn===setTimeout)return setTimeout(e,0);if((Gn===Nf||!Gn)&&setTimeout)return Gn=setTimeout,setTimeout(e,0);try{return Gn(e,0)}catch{try{return Gn.call(null,e,0)}catch{return Gn.call(this,e,0)}}}function uk(e){if(Hn===clearTimeout)return clearTimeout(e);if((Hn===Lf||!Hn)&&clearTimeout)return Hn=clearTimeout,clearTimeout(e);try{return Hn(e)}catch{try{return Hn.call(null,e)}catch{return Hn.call(this,e)}}}var sr=[],ss=!1,si,yu=-1;function ak(){!ss||!si||(ss=!1,si.length?sr=si.concat(sr):yu=-1,sr.length&&wy())}function wy(){if(!ss){var e=Sy(ak);ss=!0;for(var t=sr.length;t;){for(si=sr,sr=[];++yu<t;)si&&si[yu].run();yu=-1,t=sr.length}si=null,ss=!1,uk(e)}}Ge.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];sr.push(new Ey(e,t)),sr.length===1&&!ss&&Sy(wy)};function Ey(e,t){this.fun=e,this.array=t}Ey.prototype.run=function(){this.fun.apply(null,this.array)},Ge.title="browser",Ge.browser=!0,Ge.env={},Ge.argv=[],Ge.version="",Ge.versions={};function or(){}Ge.on=or,Ge.addListener=or,Ge.once=or,Ge.off=or,Ge.removeListener=or,Ge.removeAllListeners=or,Ge.emit=or,Ge.prependListener=or,Ge.prependOnceListener=or,Ge.listeners=function(e){return[]},Ge.binding=function(e){throw new Error("process.binding is not supported")},Ge.cwd=function(){return"/"},Ge.chdir=function(e){throw new Error("process.chdir is not supported")},Ge.umask=function(){return 0};var lk=vy.exports;const Rn=ck(lk),Oy=Symbol.for("effect/Clock"),Df=Vr("effect/Clock"),fk=2**31-1,Ty={unsafeSchedule(e,t){const n=ql(t);if(n>fk)return al;let s=!1;const o=setTimeout(()=>{s=!0,e()},n);return()=>(clearTimeout(o),!s)}},Iy=function(){const e=BigInt(1e6);if(typeof performance>"u")return()=>BigInt(Date.now())*e;if(typeof performance.timeOrigin=="number"&&performance.timeOrigin===0)return()=>BigInt(Math.round(performance.now()*1e6));const t=BigInt(Date.now())*e-BigInt(Math.round(performance.now()*1e6));return()=>t+BigInt(Math.round(performance.now()*1e6))}(),hk=function(){const e=typeof Rn=="object"&&"hrtime"in Rn&&typeof Rn.hrtime.bigint=="function"?Rn.hrtime:void 0;if(!e)return Iy;const t=Iy()-e.bigint();return()=>t+e.bigint()}();Ov=Oy;class dk{constructor(){p(this,Ov,Oy);p(this,"currentTimeMillis",ce(()=>this.unsafeCurrentTimeMillis()));p(this,"currentTimeNanos",ce(()=>this.unsafeCurrentTimeNanos()))}unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return hk()}scheduler(){return Be(Ty)}sleep(t){return go(n=>{const s=Ty.unsafeSchedule(()=>n(An),t);return po(ce(s))})}}const pk=()=>new dk,Ay="And",Ry="Or",xy="InvalidData",ky="MissingData",Cy="SourceUnavailable",$y="Unsupported",Py=Symbol.for("effect/ConfigError"),os={_tag:"ConfigError",[Py]:Py},My=(e,t)=>{const n=Object.create(os);return n._op=Ay,n.left=e,n.right=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),n},Fy=(e,t)=>{const n=Object.create(os);return n._op=Ry,n.left=e,n.right=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),n},gk=(e,t,n={pathDelim:"."})=>{const s=Object.create(os);return s._op=xy,s.path=e,s.message=t,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`(Invalid data at ${P(this.path,ki(n.pathDelim))}: "${this.message}")`}}),s},oi=(e,t,n={pathDelim:"."})=>{const s=Object.create(os);return s._op=ky,s.path=e,s.message=t,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`(Missing data at ${P(this.path,ki(n.pathDelim))}: "${this.message}")`}}),s},mk=(e,t,n,s={pathDelim:"."})=>{const o=Object.create(os);return o._op=Cy,o.path=e,o.message=t,o.cause=n,Object.defineProperty(o,"toString",{enumerable:!1,value(){return`(Source unavailable at ${P(this.path,ki(s.pathDelim))}: "${this.message}")`}}),o},_k=(e,t,n={pathDelim:"."})=>{const s=Object.create(os);return s._op=$y,s.path=e,s.message=t,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${P(this.path,ki(n.pathDelim))}: "${this.message}")`}}),s},ci=O(2,(e,t)=>{switch(e._op){case Ay:return My(ci(e.left,t),ci(e.right,t));case Ry:return Fy(ci(e.left,t),ci(e.right,t));case xy:return gk([...t,...e.path],e.message);case ky:return oi([...t,...e.path],e.message);case Cy:return mk([...t,...e.path],e.message,e.cause);case $y:return _k([...t,...e.path],e.message)}}),yk={_tag:"Empty"},Uf=O(2,(e,t)=>{let n=af(t),s=e;for(;mA(n);){const o=n.head;switch(o._tag){case"Empty":{n=n.tail;break}case"AndThen":{n=ei(o.first,ei(o.second,n.tail));break}case"MapName":{s=xi(s,o.f),n=n.tail;break}case"Nested":{s=Rc(s,o.name),n=n.tail;break}case"Unnested":{if(P(Hs(s),fO(o.name)))s=qr(s),n=n.tail;else return ge(oi(s,`Expected ${o.name} to be in path in ConfigProvider#unnested`));break}}}return Oe(s)}),bk="Constant",vk="Fail",Sk="Fallback",wk="Described",Ek="Lazy",Ok="MapOrFail",Tk="Nested",Ik="Primitive",Ak="Sequence",Rk="HashMap",xk="ZipWith";var Ny={};const bu=(e,t)=>[...e,...t],Ly=Symbol.for("effect/ConfigProvider"),kk=Vr("effect/ConfigProvider"),Dy=Symbol.for("effect/ConfigProviderFlat"),Ck=e=>({[Ly]:Ly,pipe(){return re(this,arguments)},...e}),$k=e=>({[Dy]:Dy,patch:e.patch,load:(t,n,s=!0)=>e.load(t,n,s),enumerateChildren:e.enumerateChildren}),Pk=e=>Ck({load:t=>se(cn(e,Ri(),t,!1),n=>Jt(Hs(n),{onNone:()=>Ft(oi(Ri(),`Expected a single value having structure: ${t}`)),onSome:Be})),flattened:e}),Mk=e=>{const{pathDelim:t,seqDelim:n}=Object.assign({},{pathDelim:"_",seqDelim:","},e),s=d=>P(d,ki(t)),o=d=>d.split(t),u=()=>typeof Rn<"u"&&"env"in Rn&&typeof Ny=="object"?Ny:{};return Pk($k({load:(d,_,b=!0)=>{const S=s(d),T=u(),I=S in T?be(T[S]):te();return P(I,fu(()=>oi(d,`Expected ${S} to exist in the process context`)),se(x=>Uk(x,d,_,n,b)))},enumerateChildren:d=>ce(()=>{const _=u(),T=Object.keys(_).map(I=>o(I.toUpperCase())).filter(I=>{for(let x=0;x<d.length;x++){const W=P(d,vg(x)),L=I[x];if(L===void 0||W!==L)return!1}return!0}).flatMap(I=>I.slice(d.length,d.length+1));return ZI(T)}),patch:yk}))},Fk=(e,t,n,s)=>{const o=Ig(n.length,d=>d>=s.length?te():be([e(d),d+1])),u=Ig(s.length,d=>d>=n.length?te():be([t(d),d+1])),l=bu(n,o),h=bu(s,u);return[l,h]},Nk=(e,t)=>{let n=t;if(n._tag==="Nested"){const s=e.slice();for(;n._tag==="Nested";)s.push(n.name),n=n.config;return s}return e},cn=(e,t,n,s)=>{const o=n;switch(o._tag){case bk:return Be(wn(o.value));case wk:return st(()=>cn(e,t,o.config,s));case vk:return Ft(oi(t,o.message));case Sk:return P(st(()=>cn(e,t,o.first,s)),Sf(u=>o.condition(u)?P(cn(e,t,o.second,s),Sf(l=>Ft(Fy(u,l)))):Ft(u)));case Ek:return st(()=>cn(e,t,o.config(),s));case Ok:return st(()=>P(cn(e,t,o.original,s),se(xr(u=>P(o.mapOrFail(u),fu(ci(Nk(t,o.original))))))));case Tk:return st(()=>cn(e,bu(t,wn(o.name)),o.config,s));case Ik:return P(Uf(t,e.patch),se(u=>P(e.load(u,o,s),se(l=>{if(l.length===0){const h=P(wO(u),ft(()=>"<n/a>"));return Ft(oi([],`Expected ${o.description} with name ${h}`))}return Be(l)}))));case Ak:return P(Uf(t,e.patch),se(u=>P(e.enumerateChildren(u),se(Bk),se(l=>l.length===0?st(()=>Nt(cn(e,t,o.config,!0),wn)):P(xr(l,h=>cn(e,_O(t,`[${h}]`),o.config,!0)),Nt(h=>{const d=CO(h);return d.length===0?wn(Ri()):wn(d)}))))));case Rk:return st(()=>P(Uf(t,e.patch),se(u=>P(e.enumerateChildren(u),se(l=>P(l,xr(h=>cn(e,bu(u,wn(h)),o.valueConfig,s)),Nt(h=>h.length===0?wn(cf()):P(Kk(h),xi(d=>uA(Eg(Ze(l),d)))))))))));case xk:return st(()=>P(cn(e,t,o.left,s),au,se(u=>P(cn(e,t,o.right,s),au,se(l=>{if(pt(u)&&pt(l))return Ft(My(u.left,l.left));if(pt(u)&&er(l))return Ft(u.left);if(er(u)&&pt(l))return Ft(l.left);if(er(u)&&er(l)){const h=P(t,ki(".")),d=Lk(t,h),[_,b]=Fk(d,d,P(u.right,xi(Oe)),P(l.right,xi(Oe)));return P(_,Eg(b),xr(([S,T])=>P(ty(S,T),Nt(([I,x])=>o.zip(I,x)))))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},Lk=(e,t)=>n=>ge(oi(e,`The element at index ${n} in a sequence at path "${t}" was missing`)),Dk=(e,t)=>e.split(new RegExp(`\\s*${Cc(t)}\\s*`)),Uk=(e,t,n,s,o)=>o?P(Dk(e,s),xr(u=>n.parse(u.trim())),fu(ci(t))):P(n.parse(e),Z_({onFailure:ci(t),onSuccess:wn})),Kk=e=>Object.keys(e[0]).map(t=>e.map(n=>n[t])),Bk=e=>P(xr(e,Wk),Z_({onFailure:()=>Ri(),onSuccess:Vs($i)}),au,Nt(iO)),jk=/^(\[(\d+)\])$/,Wk=e=>{const t=e.match(jk);if(t!==null){const n=t[2];return P(n!==void 0&&n.length>0?be(n):te(),Ic(qk))}return te()},qk=e=>{const t=Number.parseInt(e);return Number.isNaN(t)?te():be(t)},Uy=Symbol.for("effect/Console"),Ky=Vr("effect/Console"),Jk={[Uy]:Uy,assert(e,...t){return ce(()=>{console.assert(e,...t)})},clear:ce(()=>{console.clear()}),count(e){return ce(()=>{console.count(e)})},countReset(e){return ce(()=>{console.countReset(e)})},debug(...e){return ce(()=>{console.debug(...e)})},dir(e,t){return ce(()=>{console.dir(e,t)})},dirxml(...e){return ce(()=>{console.dirxml(...e)})},error(...e){return ce(()=>{console.error(...e)})},group(e){return e!=null&&e.collapsed?ce(()=>console.groupCollapsed(e==null?void 0:e.label)):ce(()=>console.group(e==null?void 0:e.label))},groupEnd:ce(()=>{console.groupEnd()}),info(...e){return ce(()=>{console.info(...e)})},log(...e){return ce(()=>{console.log(...e)})},table(e,t){return ce(()=>{console.table(e,t)})},time(e){return ce(()=>console.time(e))},timeEnd(e){return ce(()=>console.timeEnd(e))},timeLog(e,...t){return ce(()=>{console.timeLog(e,...t)})},trace(...e){return ce(()=>{console.trace(...e)})},warn(...e){return ce(()=>{console.warn(...e)})},unsafe:console},By=Symbol.for("effect/Random"),Gk=Vr("effect/Random");Tv=By;class Hk{constructor(t){p(this,"seed");p(this,Tv,By);p(this,"PRNG");this.seed=t,this.PRNG=new PE(t)}get next(){return ce(()=>this.PRNG.number())}get nextBoolean(){return Nt(this.next,t=>t>.5)}get nextInt(){return ce(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(t,n){return Nt(this.next,s=>(n-t)*s+t)}nextIntBetween(t,n){return ce(()=>this.PRNG.integer(n-t)+t)}shuffle(t){return Vk(t,n=>this.nextIntBetween(0,n))}}const Vk=(e,t)=>st(()=>P(ce(()=>Array.from(e)),se(n=>{const s=[];for(let o=n.length;o>=2;o=o-1)s.push(o);return P(s,lu(o=>P(t(o),Nt(u=>zk(n,o-1,u)))),ho(Rm(n)))}))),zk=(e,t,n)=>{const s=e[t];return e[t]=e[n],e[n]=s,e},Yk=e=>new Hk(z(e)),jy=Symbol.for("effect/Tracer"),Xk=e=>({[jy]:jy,...e}),Wy=Vr("effect/Tracer"),qy=Vr("effect/ParentSpan"),Jy=function(){const e="abcdef0123456789",t=e.length;return function(n){let s="";for(let o=0;o<n;o++)s+=e.charAt(Math.floor(Math.random()*t));return s}}();class Zk{constructor(t,n,s,o,u,l){p(this,"name");p(this,"parent");p(this,"context");p(this,"links");p(this,"startTime");p(this,"kind");p(this,"_tag","Span");p(this,"spanId");p(this,"traceId","native");p(this,"sampled",!0);p(this,"status");p(this,"attributes");p(this,"events",[]);this.name=t,this.parent=n,this.context=s,this.links=o,this.startTime=u,this.kind=l,this.status={_tag:"Started",startTime:u},this.attributes=new Map,this.traceId=n._tag==="Some"?n.value.traceId:Jy(32),this.spanId=Jy(16)}end(t,n){this.status={_tag:"Ended",endTime:t,exit:n,startTime:this.status.startTime}}attribute(t,n){this.attributes.set(t,n)}event(t,n,s){this.events.push([t,n,s??{}])}}const Qk=P(Nl(),Xs(Df,pk()),Xs(Ky,Jk),Xs(Gk,Yk(Math.random())),Xs(kk,Mk()),Xs(Wy,Xk({span:(e,t,n,s,o,u)=>new Zk(e,t,n,s,o,u),context:e=>e()}))),vu=Ee(Symbol.for("effect/DefaultServices/currentServices"),()=>cy(Qk));function eC(e){return new kr(e)}function tC(){return eC(new Map)}const Gy=Symbol.for("effect/FiberRefs");Iv=Gy;class kr{constructor(t){p(this,"locals");p(this,Iv,Gy);this.locals=t}pipe(){return re(this,arguments)}}const nC=(e,t,n,s=!1)=>{const o=e;let u=t,l=n,h=s,d;for(;d===void 0;)if(mt(u)&&mt(l)){const _=Pt(u)[0],b=qr(u),S=Pt(l)[0],T=Pt(l)[1],I=qr(l);_.startTimeMillis<S.startTimeMillis?(l=I,h=!0):_.startTimeMillis>S.startTimeMillis?u=b:_.id<S.id?(l=I,h=!0):_.id>S.id?u=b:d=[T,h]}else d=[o.initial,!0];return d},rC=O(3,(e,t,n)=>{const s=new Map(e.locals);return n.locals.forEach((o,u)=>{const l=o[0][1];if(!o[0][0][le](t)){if(!s.has(u)){if(fe(l,u.initial))return;s.set(u,[[t,u.join(u.initial,l)]]);return}const h=s.get(u),[d,_]=nC(u,h,o);if(_){const b=u.diff(d,l),S=h[0][1],T=u.join(S,u.patch(b)(S));if(!fe(S,T)){let I;const x=h[0][0];x[le](t)?I=[[x,T],...h.slice(1)]:I=[[t,T],...h],s.set(u,I)}}}}),new kr(s)}),iC=O(2,(e,t)=>{const n=new Map;return Hy(e,n,t),new kr(n)}),Hy=(e,t,n)=>{e.locals.forEach((s,o)=>{const u=s[0][1],l=o.patch(o.fork)(u);fe(u,l)?t.set(o,s):t.set(o,[[n,l],...s])})},Vy=O(2,(e,t)=>{const n=new Map(e.locals);return n.delete(t),new kr(n)}),sC=O(2,(e,t)=>e.locals.has(t)?be(Pt(e.locals.get(t))[1]):te()),vo=O(2,(e,t)=>P(sC(e,t),ft(()=>t.initial))),Kf=O(2,(e,{fiberId:t,fiberRef:n,value:s})=>{if(e.locals.size===0)return new kr(new Map([[n,[[t,s]]]]));const o=new Map(e.locals);return Bf(o,t,n,s),new kr(o)}),Bf=(e,t,n,s)=>{const o=e.get(n)??[];let u;if(mt(o)){const[l,h]=Pt(o);if(l[le](t)){if(fe(h,s))return;u=[[t,s],...o.slice(1)]}else u=[[t,s],...o]}else u=[[t,s]];e.set(n,u)},oC=O(2,(e,{entries:t,forkAs:n})=>{if(e.locals.size===0)return new kr(new Map(t));const s=new Map(e.locals);return n!==void 0&&Hy(e,s,n),t.forEach(([o,u])=>{u.length===1?Bf(s,u[0][0],o,u[0][1]):u.forEach(([l,h])=>{Bf(s,l,o,h)})}),new kr(s)}),cC=vo,uC=oC,aC=tC,lC=bx,fC=vx,hC=Sx,dC=wx,pC=iy,gC=sy,mC=Ex,_C=Ox,yC=cO(P($i,mg(e=>e.ordinal))),bC=e=>{switch(e){case"All":return lC;case"Debug":return gC;case"Error":return hC;case"Fatal":return fC;case"Info":return pC;case"Trace":return mC;case"None":return _C;case"Warning":return dC}},zy=e=>e.replace(/[\s="]/g,"_"),vC=e=>t=>`${zy(t.label)}=${e-t.startTime}ms`,SC=Js,wC=VE;class EC extends wC{}const Yy="Empty",Xy="Add",Zy="Remove",Qy="Update",eb="AndThen",OC={_tag:Yy},TC=(e,t)=>{const n=new Map(e.locals);let s=OC;for(const[o,u]of t.locals.entries()){const l=Pt(u)[1],h=n.get(o);if(h!==void 0){const d=Pt(h)[1];fe(d,l)||(s=jf({_tag:Qy,fiberRef:o,patch:o.diff(d,l)})(s))}else s=jf({_tag:Xy,fiberRef:o,value:l})(s);n.delete(o)}for(const[o]of n.entries())s=jf({_tag:Zy,fiberRef:o})(s);return s},jf=O(2,(e,t)=>({_tag:eb,first:e,second:t})),IC=O(3,(e,t,n)=>{let s=n,o=wn(e);for(;mt(o);){const u=Pt(o),l=qr(o);switch(u._tag){case Yy:{o=l;break}case Xy:{s=Kf(s,{fiberId:t,fiberRef:u.fiberRef,value:u.value}),o=l;break}case Zy:{s=Vy(s,u.fiberRef),o=l;break}case Qy:{const h=vo(s,u.fiberRef);s=Kf(s,{fiberId:t,fiberRef:u.fiberRef,value:u.fiberRef.patch(u.patch)(h)}),o=l;break}case eb:{o=Rc(u.first)(Rc(u.second)(l));break}}}return s}),tb="effect/MetricLabel",Wf=Symbol.for(tb);class AC{constructor(t,n){p(this,"key");p(this,"value");p(this,Av,Wf);p(this,"_hash");this.key=t,this.value=n,this._hash=Xe(tb+this.key+this.value)}[(Av=Wf,de)](){return this._hash}[le](t){return xC(t)&&this.key===t.key&&this.value===t.value}pipe(){return re(this,arguments)}}const RC=(e,t)=>new AC(e,t),xC=e=>ue(e,Wf),kC="Sequential",CC="Parallel",$C="ParallelN",nb={_tag:kC},PC={_tag:CC},MC=e=>({_tag:$C,parallelism:e}),qf=nb,Jf=PC,Gf=MC,FC=TC,NC=IC,Su="effect/FiberStatus",ui=Symbol.for(Su),wu="Done",rb="Running",ib="Suspended",LC=Xe(`${Su}-${wu}`);class DC{constructor(){p(this,Rv,ui);p(this,"_tag",wu)}[(Rv=ui,de)](){return LC}[le](t){return Hf(t)&&t._tag===wu}}class UC{constructor(t){p(this,"runtimeFlags");p(this,xv,ui);p(this,"_tag",rb);this.runtimeFlags=t}[(xv=ui,de)](){return P(z(Su),Se(z(this._tag)),Se(z(this.runtimeFlags)),qe(this))}[le](t){return Hf(t)&&t._tag===rb&&this.runtimeFlags===t.runtimeFlags}}class KC{constructor(t,n){p(this,"runtimeFlags");p(this,"blockingOn");p(this,kv,ui);p(this,"_tag",ib);this.runtimeFlags=t,this.blockingOn=n}[(kv=ui,de)](){return P(z(Su),Se(z(this._tag)),Se(z(this.runtimeFlags)),Se(z(this.blockingOn)),qe(this))}[le](t){return Hf(t)&&t._tag===ib&&this.runtimeFlags===t.runtimeFlags&&fe(this.blockingOn,t.blockingOn)}}const BC=new DC,jC=e=>new UC(e),WC=(e,t)=>new KC(e,t),Hf=e=>ue(e,ui),qC=e=>e._tag===wu,JC=BC,sb=jC,GC=WC,HC=qC,VC=Symbol.for("effect/Micro"),Eu=Symbol.for("effect/Micro/MicroExit"),ob=Symbol.for("effect/Micro/MicroCause"),zC={_E:Ye};class cb extends globalThis.Error{constructor(n,s,o){const u=`MicroCause.${n}`;let l,h,d;if(s instanceof globalThis.Error){l=`(${u}) ${s.name}`,h=s.message;const _=h.split(`
`).length;d=s.stack?`(${u}) ${s.stack.split(`
`).slice(0,_+3).join(`
`)}`:`${l}: ${h}`}else l=u,h=Ii(s,0),d=`${l}: ${h}`;o.length>0&&(d+=`
    ${o.join(`
    `)}`);super(h);p(this,"_tag");p(this,"traces");p(this,Cv);this._tag=n,this.traces=o,this[ob]=zC,this.name=l,this.stack=d}pipe(){return re(this,arguments)}toString(){return this.stack}[(Cv=ob,Ke)](){return this.stack}}class YC extends cb{constructor(n,s=[]){super("Die",n,s);p(this,"defect");this.defect=n}}const XC=(e,t=[])=>new YC(e,t);class ZC extends cb{constructor(t=[]){super("Interrupt","interrupted",t)}}const QC=(e=[])=>new ZC(e),e$=e=>e._tag==="Interrupt",ub=Symbol.for("effect/Micro/MicroFiber"),t$={_A:Ye,_E:Ye};$v=ub;class n${constructor(t,n=!0){p(this,"context");p(this,"interruptible");p(this,$v);p(this,"_stack",[]);p(this,"_observers",[]);p(this,"_exit");p(this,"_children");p(this,"currentOpCount",0);p(this,"_interrupted",!1);p(this,"_yielded");this.context=t,this.interruptible=n,this[ub]=t$}getRef(t){return WT(this.context,t)}addObserver(t){return this._exit?(t(this._exit),_E):(this._observers.push(t),()=>{const n=this._observers.indexOf(t);n>=0&&this._observers.splice(n,1)})}unsafeInterrupt(){this._exit||(this._interrupted=!0,this.interruptible&&this.evaluate(Qf))}unsafePoll(){return this._exit}evaluate(t){if(this._exit)return;if(this._yielded!==void 0){const o=this._yielded;this._yielded=void 0,o()}const n=this.runLoop(t);if(n===Tu)return;const s=ab.interruptChildren&&ab.interruptChildren(this);if(s!==void 0)return this.evaluate(Au(s,()=>n));this._exit=n;for(let o=0;o<this._observers.length;o++)this._observers[o](n);this._observers.length=0}runLoop(t){let n=!1,s=t;this.currentOpCount=0;try{for(;;){if(this.currentOpCount++,!n&&this.getRef(th).shouldYield(this)){n=!0;const o=s;s=Au(o$,()=>o)}if(s=s[Vf](this),s===Tu){const o=this._yielded;return Eu in o?(this._yielded=void 0,o):Tu}}}catch(o){return ue(s,Vf)?eh(o):eh(`MicroFiber.runLoop: Not a valid effect: ${String(s)}`)}}getCont(t){for(;;){const n=this._stack.pop();if(!n)return;const s=n[Ou]&&n[Ou](this);if(s)return{[t]:s};if(n[t])return n}}yieldWith(t){return this._yielded=t,Tu}children(){return this._children??(this._children=new Set)}}const ab=Ee("effect/Micro/fiberMiddleware",()=>({interruptChildren:void 0})),lb=Symbol.for("effect/Micro/identifier"),ot=Symbol.for("effect/Micro/args"),Vf=Symbol.for("effect/Micro/evaluate"),cs=Symbol.for("effect/Micro/successCont"),us=Symbol.for("effect/Micro/failureCont"),Ou=Symbol.for("effect/Micro/ensureCont"),Tu=Symbol.for("effect/Micro/Yield"),r$={_A:Ye,_E:Ye,_R:Ye},i$={...SC,_op:"Micro",[VC]:r$,pipe(){return re(this,arguments)},[Symbol.iterator](){return new Yp(new Bs(this))},toJSON(){return{_id:"Micro",op:this[lb],...ot in this?{args:this[ot]}:void 0}},toString(){return lt(this)},[Ke](){return lt(this)}};function s$(e){return eh("Micro.evaluate: Not implemented")}const Iu=e=>({...i$,[lb]:e.op,[Vf]:e.eval??s$,[cs]:e.contA,[us]:e.contE,[Ou]:e.ensure}),zf=e=>{const t=Iu(e);return function(){const n=Object.create(t);return n[ot]=e.single===!1?arguments:arguments[0],n}},fb=e=>{const t={...Iu(e),[Eu]:Eu,_tag:e.op,get[e.prop](){return this[ot]},toJSON(){return{_id:"MicroExit",_tag:e.op,[e.prop]:this[ot]}},[le](n){return a$(n)&&n._tag===e.op&&fe(this[ot],n[ot])},[de](){return qe(this,Se(Xe(e.op))(z(this[ot])))}};return function(n){const s=Object.create(t);return s[ot]=n,s[cs]=void 0,s[us]=void 0,s[Ou]=void 0,s}},Yf=fb({op:"Success",prop:"value",eval(e){const t=e.getCont(cs);return t?t[cs](this[ot],e):e.yieldWith(this)}}),hb=fb({op:"Failure",prop:"cause",eval(e){let t=e.getCont(us);for(;e$(this[ot])&&t&&e.interruptible;)t=e.getCont(us);return t?t[us](this[ot],e):e.yieldWith(this)}}),o$=zf({op:"Yield",eval(e){let t=!1;return e.getRef(th).scheduleTask(()=>{t||e.evaluate(l$)},this[ot]??0),e.yieldWith(()=>{t=!0})}})(0),c$=Yf(void 0),Xf=zf({op:"WithMicroFiber",eval(e){return this[ot](e)}}),Au=O(2,(e,t)=>{const n=Object.create(u$);return n[ot]=e,n[cs]=t,n}),u$=Iu({op:"OnSuccess",eval(e){return e._stack.push(this),this[ot]}}),a$=e=>ue(e,Eu),db=Yf,Zf=hb,Qf=Zf(QC()),eh=e=>Zf(XC(e)),l$=db(void 0),f$="setImmediate"in globalThis?globalThis.setImmediate:e=>setTimeout(e,0);class pb{constructor(){p(this,"tasks",[]);p(this,"running",!1);p(this,"afterScheduled",()=>{this.running=!1,this.runTasks()})}scheduleTask(t,n){this.tasks.push(t),this.running||(this.running=!0,f$(this.afterScheduled))}runTasks(){const t=this.tasks;this.tasks=[];for(let n=0,s=t.length;n<s;n++)t[n]()}shouldYield(t){return t.currentOpCount>=t.getRef(p$)}flush(){for(;this.tasks.length>0;)this.runTasks()}}const h$=O(2,(e,t)=>Xf(n=>{const s=n.context;return n.context=t(s),_$(e,()=>(n.context=s,c$))})),d$=O(2,(e,t)=>h$(e,Em(t)));class p$ extends Om()("effect/Micro/currentMaxOpsBeforeYield",{defaultValue:()=>2048}){}class th extends Om()("effect/Micro/currentScheduler",{defaultValue:()=>new pb}){}const g$=O(2,(e,t)=>{const n=Object.create(m$);return n[ot]=e,n[cs]=t.onSuccess,n[us]=t.onFailure,n}),m$=Iu({op:"OnSuccessAndFailure",eval(e){return e._stack.push(this),this[ot]}}),_$=O(2,(e,t)=>b$(n=>g$(n(e),{onFailure:s=>Au(t(Zf(s)),()=>hb(s)),onSuccess:s=>Au(t(db(s)),()=>Yf(s))}))),gb=zf({op:"SetInterruptible",ensure(e){if(e.interruptible=this[ot],e._interrupted&&e.interruptible)return()=>Qf}}),y$=e=>Xf(t=>t.interruptible?e:(t.interruptible=!0,t._stack.push(gb(!1)),t._interrupted?Qf:e)),b$=e=>Xf(t=>t.interruptible?(t.interruptible=!1,t._stack.push(gb(!0)),e(y$)):e(Ye)),v$=(e,t)=>{const n=new n$(th.context(new pb));return n.evaluate(e),n};class mb{constructor(){p(this,"buckets",[])}scheduleTask(t,n){const s=this.buckets.length;let o,u=0;for(;u<s&&this.buckets[u][0]<=n;u++)o=this.buckets[u];o&&o[0]===n?o[1].push(t):u===s?this.buckets.push([n,[t]]):this.buckets.splice(u,0,[n,[t]])}}class S${constructor(t){p(this,"maxNextTickBeforeTimer");p(this,"running",!1);p(this,"tasks",new mb);this.maxNextTickBeforeTimer=t}starveInternal(t){const n=this.tasks.buckets;this.tasks.buckets=[];for(const[s,o]of n)for(let u=0;u<o.length;u++)o[u]();this.tasks.buckets.length===0?this.running=!1:this.starve(t)}starve(t=0){t>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(t+1))}shouldYield(t){return t.currentOpCount>t.getFiberRef(uy)?t.getFiberRef(gu):!1}scheduleTask(t,n){this.tasks.scheduleTask(t,n),this.running||(this.running=!0,this.starve())}}const _b=Ee(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new S$(2048));class yb{constructor(){p(this,"tasks",new mb);p(this,"deferred",!1)}scheduleTask(t,n){this.deferred?_b.scheduleTask(t,n):this.tasks.scheduleTask(t,n)}shouldYield(t){return t.currentOpCount>t.getFiberRef(uy)?t.getFiberRef(gu):!1}flush(){for(;this.tasks.buckets.length>0;){const t=this.tasks.buckets;this.tasks.buckets=[];for(const[n,s]of t)for(let o=0;o<s.length;o++)s[o]()}this.deferred=!0}}const bb=Ee(Symbol.for("effect/FiberRef/currentScheduler"),()=>Vt(_b)),vb=Ee(Symbol.for("effect/FiberRef/currentRequestMap"),()=>Vt(new Map)),Sb=(e,t,n,s)=>{switch(e){case void 0:return t();case"unbounded":return n();case"inherit":return Rf(Fx,o=>o==="unbounded"?n():o>1?s(o):t());default:return e>1?s(e):t()}},nh="InterruptSignal",rh="Stateful",ih="Resume",sh="YieldNow",oh=e=>({_tag:nh,cause:e}),Ru=e=>({_tag:rh,onFiber:e}),as=e=>({_tag:ih,effect:e}),w$=()=>({_tag:sh}),xu=Symbol.for("effect/FiberScope");Pv=xu;class E${constructor(){p(this,Pv,xu);p(this,"fiberId",Ji);p(this,"roots",new Set)}add(t,n){this.roots.add(n),n.addObserver(()=>{this.roots.delete(n)})}}Mv=xu;class O${constructor(t,n){p(this,"fiberId");p(this,"parent");p(this,Mv,xu);this.fiberId=t,this.parent=n}add(t,n){this.parent.tell(Ru(s=>{s.addChild(n),n.addObserver(()=>{s.removeChild(n)})}))}}const T$=e=>new O$(e.id(),e),ch=Ee(Symbol.for("effect/FiberScope/Global"),()=>new E$),I$=Symbol.for("effect/Fiber"),A$={_E:e=>e,_A:e=>e},R$=Symbol.for("effect/Fiber"),wb=e=>ny(Y_(e.await),e.inheritAll);({...Gs});const ai="effect/FiberCurrent",x$=Symbol.for("effect/Logger"),k$={_Message:e=>e,_Output:e=>e},uh=e=>({[x$]:k$,log:e,pipe(){return re(this,arguments)}}),C$=/^[^\s"=]*$/,$$=uh(((e,t)=>({annotations:n,cause:s,date:o,fiberId:u,logLevel:l,message:h,spans:d})=>{const _=x=>x.match(C$)?x:e(x),b=(x,W)=>`${zy(x)}=${_(W)}`,S=(x,W)=>" "+b(x,W);let T=b("timestamp",o.toISOString());T+=S("level",l.label),T+=S("fiber",i_(u));const I=gO(h);for(let x=0;x<I.length;x++)T+=S("message",Ii(I[x],t));DR(s)||(T+=S("cause",es(s,{renderErrorCause:!0})));for(const x of d)T+=" "+vC(o.getTime())(x);for(const[x,W]of n)T+=S(x,Ii(W,t));return T})(e=>`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`));typeof Rn=="object"&&Rn!==null&&typeof Rn.stdout=="object"&&Rn.stdout!==null&&Rn.stdout.isTTY;const Eb="effect/MetricBoundaries",ah=Symbol.for(Eb);class P${constructor(t){p(this,"values");p(this,Fv,ah);p(this,"_hash");this.values=t,this._hash=P(Xe(Eb),Se(js(this.values)))}[(Fv=ah,de)](){return this._hash}[le](t){return M$(t)&&fe(this.values,t.values)}pipe(){return re(this,arguments)}}const M$=e=>ue(e,ah),F$=e=>{const t=P(e,yg(Gt(Number.POSITIVE_INFINITY)),$O);return new P$(t)},N$=e=>P(pO(e.count-1,t=>e.start*Math.pow(e.factor,t)),Lc,F$),Ob=Symbol.for("effect/MetricKeyType"),Tb="effect/MetricKeyType/Counter",lh=Symbol.for(Tb),L$=Symbol.for("effect/MetricKeyType/Frequency"),D$=Symbol.for("effect/MetricKeyType/Gauge"),Ib="effect/MetricKeyType/Histogram",fh=Symbol.for(Ib),U$=Symbol.for("effect/MetricKeyType/Summary"),Ab={_In:e=>e,_Out:e=>e};class K${constructor(t,n){p(this,"incremental");p(this,"bigint");p(this,Lv,Ab);p(this,Nv,lh);p(this,"_hash");this.incremental=t,this.bigint=n,this._hash=Xe(Tb)}[(Lv=Ob,Nv=lh,de)](){return this._hash}[le](t){return Rb(t)}pipe(){return re(this,arguments)}}class B${constructor(t){p(this,"boundaries");p(this,Uv,Ab);p(this,Dv,fh);p(this,"_hash");this.boundaries=t,this._hash=P(Xe(Ib),Se(z(this.boundaries)))}[(Uv=Ob,Dv=fh,de)](){return this._hash}[le](t){return xb(t)&&fe(this.boundaries,t.boundaries)}pipe(){return re(this,arguments)}}const j$=e=>new K$((e==null?void 0:e.incremental)??!1,(e==null?void 0:e.bigint)??!1),W$=e=>new B$(e),Rb=e=>ue(e,lh),q$=e=>ue(e,L$),J$=e=>ue(e,D$),xb=e=>ue(e,fh),G$=e=>ue(e,U$),kb=Symbol.for("effect/MetricKey"),H$={_Type:e=>e},V$=Il(fe);class hh{constructor(t,n,s,o=[]){p(this,"name");p(this,"keyType");p(this,"description");p(this,"tags");p(this,Kv,H$);p(this,"_hash");this.name=t,this.keyType=n,this.description=s,this.tags=o,this._hash=P(Xe(this.name+this.description),Se(z(this.keyType)),Se(js(this.tags)))}[(Kv=kb,de)](){return this._hash}[le](t){return z$(t)&&this.name===t.name&&fe(this.keyType,t.keyType)&&fe(this.description,t.description)&&V$(this.tags,t.tags)}pipe(){return re(this,arguments)}}const z$=e=>ue(e,kb),Y$=(e,t)=>new hh(e,j$(t),Tc(t==null?void 0:t.description)),X$=(e,t,n)=>new hh(e,W$(t),Tc(n)),Z$=O(2,(e,t)=>t.length===0?e:new hh(e.name,e.keyType,e.description,kc(e.tags,t))),So=Symbol.for("effect/MetricState"),Cb="effect/MetricState/Counter",dh=Symbol.for(Cb),$b="effect/MetricState/Frequency",ph=Symbol.for($b),Pb="effect/MetricState/Gauge",gh=Symbol.for(Pb),Mb="effect/MetricState/Histogram",mh=Symbol.for(Mb),Fb="effect/MetricState/Summary",_h=Symbol.for(Fb),wo={_A:e=>e};class Q${constructor(t){p(this,"count");p(this,jv,wo);p(this,Bv,dh);this.count=t}[(jv=So,Bv=dh,de)](){return P(z(Cb),Se(z(this.count)),qe(this))}[le](t){return lP(t)&&this.count===t.count}pipe(){return re(this,arguments)}}const eP=Il(fe);class tP{constructor(t){p(this,"occurrences");p(this,qv,wo);p(this,Wv,ph);p(this,"_hash");this.occurrences=t}[(qv=So,Wv=ph,de)](){return P(Xe($b),Se(js(Ze(this.occurrences.entries()))),qe(this))}[le](t){return fP(t)&&eP(Ze(this.occurrences.entries()),Ze(t.occurrences.entries()))}pipe(){return re(this,arguments)}}class nP{constructor(t){p(this,"value");p(this,Gv,wo);p(this,Jv,gh);this.value=t}[(Gv=So,Jv=gh,de)](){return P(z(Pb),Se(z(this.value)),qe(this))}[le](t){return hP(t)&&this.value===t.value}pipe(){return re(this,arguments)}}class rP{constructor(t,n,s,o,u){p(this,"buckets");p(this,"count");p(this,"min");p(this,"max");p(this,"sum");p(this,Vv,wo);p(this,Hv,mh);this.buckets=t,this.count=n,this.min=s,this.max=o,this.sum=u}[(Vv=So,Hv=mh,de)](){return P(z(Mb),Se(z(this.buckets)),Se(z(this.count)),Se(z(this.min)),Se(z(this.max)),Se(z(this.sum)),qe(this))}[le](t){return dP(t)&&fe(this.buckets,t.buckets)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return re(this,arguments)}}class iP{constructor(t,n,s,o,u,l){p(this,"error");p(this,"quantiles");p(this,"count");p(this,"min");p(this,"max");p(this,"sum");p(this,Yv,wo);p(this,zv,_h);this.error=t,this.quantiles=n,this.count=s,this.min=o,this.max=u,this.sum=l}[(Yv=So,zv=_h,de)](){return P(z(Fb),Se(z(this.error)),Se(z(this.quantiles)),Se(z(this.count)),Se(z(this.min)),Se(z(this.max)),Se(z(this.sum)),qe(this))}[le](t){return pP(t)&&this.error===t.error&&fe(this.quantiles,t.quantiles)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return re(this,arguments)}}const sP=e=>new Q$(e),oP=e=>new tP(e),cP=e=>new nP(e),uP=e=>new rP(e.buckets,e.count,e.min,e.max,e.sum),aP=e=>new iP(e.error,e.quantiles,e.count,e.min,e.max,e.sum),lP=e=>ue(e,dh),fP=e=>ue(e,ph),hP=e=>ue(e,gh),dP=e=>ue(e,mh),pP=e=>ue(e,_h),gP=Symbol.for("effect/MetricHook"),mP={_In:e=>e,_Out:e=>e},Eo=e=>({[gP]:mP,pipe(){return re(this,arguments)},...e}),Nb=BigInt(0),_P=e=>{let t=e.keyType.bigint?Nb:0;const n=e.keyType.incremental?e.keyType.bigint?o=>o>=Nb:o=>o>=0:o=>!0,s=o=>{n(o)&&(t=t+o)};return Eo({get:()=>sP(t),update:s,modify:s})},yP=e=>{const t=new Map;for(const s of e.keyType.preregisteredWords)t.set(s,0);const n=s=>{const o=t.get(s)??0;t.set(s,o+1)};return Eo({get:()=>oP(t),update:n,modify:n})},bP=(e,t)=>{let n=t;return Eo({get:()=>cP(n),update:s=>{n=s},modify:s=>{n=n+s}})},vP=e=>{const t=e.keyType.boundaries.values,n=t.length,s=new Uint32Array(n+1),o=new Float32Array(n);let u=0,l=0,h=Number.MAX_VALUE,d=Number.MIN_VALUE;P(t,Vs($i),xi((S,T)=>{o[T]=S}));const _=S=>{let T=0,I=n;for(;T!==I;){const x=Math.floor(T+(I-T)/2),W=o[x];S<=W?I=x:T=x,I===T+1&&(S<=o[T]?I=T:T=I)}s[T]=s[T]+1,u=u+1,l=l+S,S<h&&(h=S),S>d&&(d=S)},b=()=>{const S=Ac(n);let T=0;for(let I=0;I<n;I++){const x=o[I],W=s[I];T=T+W,S[I]=[x,T]}return S};return Eo({get:()=>uP({buckets:b(),count:u,min:h,max:d,sum:l}),update:_,modify:_})},SP=e=>{const{error:t,maxAge:n,maxSize:s,quantiles:o}=e.keyType,u=P(o,Vs($i)),l=Ac(s);let h=0,d=0,_=0,b=Number.MAX_VALUE,S=Number.MIN_VALUE;const T=x=>{const W=[];let L=0;for(;L!==s-1;){const K=l[L];if(K!=null){const[ee,q]=K,H=Wl(x-ee);gI(H,Nm)&&H<=n&&W.push(q)}L=L+1}return wP(t,u,Vs(W,$i))},I=(x,W)=>{if(s>0){h=h+1;const L=h%s;l[L]=[W,x]}d=d+1,_=_+x,x<b&&(b=x),x>S&&(S=x)};return Eo({get:()=>aP({error:t,quantiles:T(Date.now()),count:d,min:b,max:S,sum:_}),update:([x,W])=>I(x,W),modify:([x,W])=>I(x,W)})},wP=(e,t,n)=>{const s=n.length;if(!mt(t))return Ri();const o=t[0],u=t.slice(1),l=Lb(e,s,te(),0,o,n),h=wn(l);return u.forEach(d=>{h.push(Lb(e,s,l.value,l.consumed,d,l.rest))}),xi(h,d=>[d.quantile,d.value])},Lb=(e,t,n,s,o,u)=>{let l=e,h=t,d=n,_=s,b=o,S=u,T=e,I=t,x=n,W=s,L=o,K=u;for(;;){if(!mt(S))return{quantile:b,value:te(),consumed:_,rest:[]};if(b===1)return{quantile:b,value:be(Sg(S)),consumed:_+S.length,rest:[]};const ee=OO(S,C=>C<=S[0]),q=b*h,H=l/2*q,V=_+ee[0].length,Y=Math.abs(V-q);if(V<q-H){T=l,I=h,x=Hs(S),W=V,L=b,K=ee[1],l=T,h=I,d=x,_=W,b=L,S=K;continue}if(V>q+H)return{quantile:b,value:d,consumed:_,rest:S};switch(d._tag){case"None":{T=l,I=h,x=Hs(S),W=V,L=b,K=ee[1],l=T,h=I,d=x,_=W,b=L,S=K;continue}case"Some":{const C=Math.abs(q-d.value);if(Y<C){T=l,I=h,x=Hs(S),W=V,L=b,K=ee[1],l=T,h=I,d=x,_=W,b=L,S=K;continue}return{quantile:b,value:be(d.value),consumed:_,rest:S}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},EP=Symbol.for("effect/MetricPair"),OP={_Type:e=>e},TP=(e,t)=>({[EP]:OP,metricKey:e,metricState:t,pipe(){return re(this,arguments)}}),Db=Symbol.for("effect/MetricRegistry");Xv=Db;class IP{constructor(){p(this,Xv,Db);p(this,"map",ik())}snapshot(){const t=[];for(const[n,s]of this.map)t.push(TP(n,s.get()));return t}get(t){const n=P(this.map,ii(t),Un);if(n==null){if(Rb(t.keyType))return this.getCounter(t);if(J$(t.keyType))return this.getGauge(t);if(q$(t.keyType))return this.getFrequency(t);if(xb(t.keyType))return this.getHistogram(t);if(G$(t.keyType))return this.getSummary(t);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}else return n}getCounter(t){let n=P(this.map,ii(t),Un);if(n==null){const s=_P(t);P(this.map,yo(t))||P(this.map,bo(t,s)),n=s}return n}getFrequency(t){let n=P(this.map,ii(t),Un);if(n==null){const s=yP(t);P(this.map,yo(t))||P(this.map,bo(t,s)),n=s}return n}getGauge(t){let n=P(this.map,ii(t),Un);if(n==null){const s=bP(t,t.keyType.bigint?BigInt(0):0);P(this.map,yo(t))||P(this.map,bo(t,s)),n=s}return n}getHistogram(t){let n=P(this.map,ii(t),Un);if(n==null){const s=vP(t);P(this.map,yo(t))||P(this.map,bo(t,s)),n=s}return n}getSummary(t){let n=P(this.map,ii(t),Un);if(n==null){const s=SP(t);P(this.map,yo(t))||P(this.map,bo(t,s)),n=s}return n}}const AP=()=>new IP,RP=Symbol.for("effect/Metric"),xP={_Type:e=>e,_In:e=>e,_Out:e=>e},Ub=Ee(Symbol.for("effect/Metric/globalMetricRegistry"),()=>AP()),Kb=function(e,t,n,s){const o=Object.assign(u=>gx(u,l=>PP(o,l)),{[RP]:xP,keyType:e,unsafeUpdate:t,unsafeValue:n,unsafeModify:s,register(){return this.unsafeValue([]),this},pipe(){return re(this,arguments)}});return o},ku=(e,t)=>Bb(Y$(e,t)),Bb=e=>{let t;const n=new WeakMap,s=o=>{if(o.length===0)return t!==void 0||(t=Ub.get(e)),t;let u=n.get(o);return u!==void 0||(u=Ub.get(Z$(e,o)),n.set(o,u)),u};return Kb(e.keyType,(o,u)=>s(u).update(o),o=>s(o).get(),(o,u)=>s(u).modify(o))},kP=(e,t,n)=>Bb(X$(e,t,n)),CP=O(3,(e,t,n)=>$P(e,[RC(t,n)])),$P=O(2,(e,t)=>Kb(e.keyType,(n,s)=>e.unsafeUpdate(n,kc(t,s)),n=>e.unsafeValue(kc(t,n)),(n,s)=>e.unsafeModify(n,kc(t,s)))),PP=O(2,(e,t)=>Rf(xf,n=>ce(()=>e.unsafeUpdate(t,n))));({...wl});const MP=O(2,(e,t)=>Rf(vb,n=>ce(()=>{if(n.has(e)){const s=n.get(e);s.state.completed||(s.state.completed=!0,yy(s.result,t))}}))),Cu=Symbol.for("effect/Supervisor"),yh={_T:e=>e};Zv=Cu;const ed=class ed{constructor(t,n){p(this,"underlying");p(this,"value0");p(this,Zv,yh);this.underlying=t,this.value0=n}get value(){return this.value0}onStart(t,n,s,o){this.underlying.onStart(t,n,s,o)}onEnd(t,n){this.underlying.onEnd(t,n)}onEffect(t,n){this.underlying.onEffect(t,n)}onSuspend(t){this.underlying.onSuspend(t)}onResume(t){this.underlying.onResume(t)}map(t){return new ed(this,P(this.value,Nt(t)))}zip(t){return new Pu(this,t)}};let $u=ed;Qv=Cu;const td=class td{constructor(t,n){p(this,"left");p(this,"right");p(this,"_tag","Zip");p(this,Qv,yh);this.left=t,this.right=n}get value(){return ty(this.left.value,this.right.value)}onStart(t,n,s,o){this.left.onStart(t,n,s,o),this.right.onStart(t,n,s,o)}onEnd(t,n){this.left.onEnd(t,n),this.right.onEnd(t,n)}onEffect(t,n){this.left.onEffect(t,n),this.right.onEffect(t,n)}onSuspend(t){this.left.onSuspend(t),this.right.onSuspend(t)}onResume(t){this.left.onResume(t),this.right.onResume(t)}map(t){return new $u(this,P(this.value,Nt(t)))}zip(t){return new td(this,t)}};let Pu=td;const jb=e=>ue(e,Cu)&&Vp(e,"Zip");eS=Cu;class FP{constructor(t){p(this,"effect");p(this,eS,yh);this.effect=t}get value(){return this.effect}onStart(t,n,s,o){}onEnd(t,n){}onEffect(t,n){}onSuspend(t){}onResume(t){}map(t){return new $u(this,P(this.value,Nt(t)))}zip(t){return new Pu(this,t)}onRun(t,n){return t()}}const NP=e=>new FP(e),Mu=Ee("effect/Supervisor/none",()=>NP(An)),LP=Hi,Wb="Empty",qb="AddSupervisor",Jb="RemoveSupervisor",Gb="AndThen",Oo={_tag:Wb},Fu=(e,t)=>({_tag:Gb,first:e,second:t}),DP=(e,t)=>UP(t,Gt(e)),UP=(e,t)=>{let n=e,s=t;for(;Ui(s);){const o=Ki(s);switch(o._tag){case Wb:{s=Yr(s);break}case qb:{n=n.zip(o.supervisor),s=Yr(s);break}case Jb:{n=bh(n,o.supervisor),s=Yr(s);break}case Gb:{s=En(o.first)(En(o.second)(Yr(s)));break}}}return n},bh=(e,t)=>fe(e,t)?Mu:jb(e)?bh(e.left,t).zip(bh(e.right,t)):e,Nu=e=>fe(e,Mu)?Qr():jb(e)?P(Nu(e.left),no(Nu(e.right))):nf(e),KP=LP({empty:Oo,patch:DP,combine:Fu,diff:(e,t)=>{if(fe(e,t))return Oo;const n=Nu(e),s=Nu(t),o=P(s,Zm(n),Gc(Oo,(l,h)=>Fu(l,{_tag:qb,supervisor:h}))),u=P(n,Zm(s),Gc(Oo,(l,h)=>Fu(l,{_tag:Jb,supervisor:h})));return Fu(o,u)}}),BP=ku("effect_fiber_started",{incremental:!0}),Hb=ku("effect_fiber_active"),jP=ku("effect_fiber_successes",{incremental:!0}),WP=ku("effect_fiber_failures",{incremental:!0}),qP=CP(kP("effect_fiber_lifetimes",N$({start:.5,factor:2,count:35})),"time_unit","milliseconds"),To="Continue",JP="Done",Vb="Yield",GP={_E:e=>e,_A:e=>e},Lu=e=>{throw new Error(`BUG: FiberRuntime - ${Ii(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},cr=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),ur=Ee("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),Io={[vc]:(e,t,n)=>At(()=>t.effect_instruction_i1(n)),OnStep:(e,t,n)=>Qe(Qe(n)),[Sc]:(e,t,n)=>At(()=>t.effect_instruction_i2(n)),[Sl]:(e,t,n)=>(e.patchRuntimeFlags(e.currentRuntimeFlags,t.patch),Ar(e.currentRuntimeFlags)&&e.isInterrupted()?Ne(e.getInterruptedCause()):Qe(n)),[wc]:(e,t,n)=>(At(()=>t.effect_instruction_i2(n)),At(()=>t.effect_instruction_i0())?(e.pushStack(t),At(()=>t.effect_instruction_i1())):An),[Ec]:(e,t,n)=>{const s=At(()=>t.effect_instruction_i0.next(n));return s.done?Qe(s.value):(e.pushStack(t),FE(s.value))}},HP={[nh]:(e,t,n,s)=>(e.processNewInterruptSignal(s.cause),Ar(t)?Ne(s.cause):n),[ih]:(e,t,n,s)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[rh]:(e,t,n,s)=>(s.onFiber(e,sb(t)),n),[sh]:(e,t,n,s)=>se(If(),()=>n)},VP=e=>lu(SR(e),t=>li(FR(t),([n,s])=>{const o=new Map,u=[];for(const h of s){u.push(zr(h));for(const d of h)o.set(d.request,d)}const l=u.flat();return pu(uM(n.runAll(u),l,()=>l.forEach(h=>{h.listeners.interrupted=!0})),vb,o)},!1,!1)),zP=hc();class zb extends EC{constructor(n,s,o){super();p(this,nS,A$);p(this,tS,GP);p(this,"_fiberRefs");p(this,"_fiberId");p(this,"_queue",new Array);p(this,"_children",null);p(this,"_observers",new Array);p(this,"_running",!1);p(this,"_stack",[]);p(this,"_asyncInterruptor",null);p(this,"_asyncBlockingOn",null);p(this,"_exitValue",null);p(this,"_steps",[]);p(this,"_isYielding",!1);p(this,"currentRuntimeFlags");p(this,"currentOpCount",0);p(this,"currentSupervisor");p(this,"currentScheduler");p(this,"currentTracer");p(this,"currentSpan");p(this,"currentContext");p(this,"currentDefaultServices");p(this,"run",()=>{this.drainQueueOnCurrentThread()});if(this.currentRuntimeFlags=o,this._fiberId=n,this._fiberRefs=s,E_(o)){const u=this.getFiberRef(xf);BP.unsafeUpdate(1,u),Hb.unsafeUpdate(1,u)}this.refreshRefCache()}commit(){return wb(this)}id(){return this._fiberId}resume(n){this.tell(as(n))}get status(){return this.ask((n,s)=>s)}get runtimeFlags(){return this.ask((n,s)=>HC(s)?n.currentRuntimeFlags:s.runtimeFlags)}scope(){return T$(this)}get children(){return this.ask(n=>Array.from(n.getChildren()))}getChildren(){return this._children===null&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(mu)}fiberRefs(){return this.ask(n=>n.getFiberRefs())}ask(n){return st(()=>{const s=zx(this._fiberId);return this.tell(Ru((o,u)=>{yy(s,ce(()=>n(o,u)))})),_y(s)})}tell(n){this._queue.push(n),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return go(n=>{const s=o=>n(Be(o));return this.tell(Ru((o,u)=>{o._exitValue!==null?s(this._exitValue):o.addObserver(s)})),ce(()=>this.tell(Ru((o,u)=>{o.removeObserver(s)})))},this.id())}get inheritAll(){return Ht((n,s)=>{const o=n.id(),u=n.getFiberRefs(),l=s.runtimeFlags,h=this.getFiberRefs(),d=rC(u,o,h);n.setFiberRefs(d);const _=n.getFiberRef(n0),b=P(eu(l,_),I_(Vi),I_(gf));return _x(b)})}get poll(){return ce(()=>Tc(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(n){return ce(()=>this.tell(oh(Rr(n))))}unsafeInterruptAsFork(n){this.tell(oh(Rr(n)))}addObserver(n){this._exitValue!==null?n(this._exitValue):this._observers.push(n)}removeObserver(n){this._observers=this._observers.filter(s=>s!==n)}getFiberRefs(){return this.setFiberRef(n0,this.currentRuntimeFlags),this._fiberRefs}unsafeDeleteFiberRef(n){this._fiberRefs=Vy(this._fiberRefs,n)}getFiberRef(n){return this._fiberRefs.locals.has(n)?this._fiberRefs.locals.get(n)[0][1]:n.initial}setFiberRef(n,s){this._fiberRefs=Kf(this._fiberRefs,{fiberId:this._fiberId,fiberRef:n,value:s}),this.refreshRefCache()}refreshRefCache(){this.currentDefaultServices=this.getFiberRef(vu),this.currentTracer=this.currentDefaultServices.unsafeMap.get(Wy.key),this.currentSupervisor=this.getFiberRef(cM),this.currentScheduler=this.getFiberRef(bb),this.currentContext=this.getFiberRef(mo),this.currentSpan=this.currentContext.unsafeMap.get(qy.key)}setFiberRefs(n){this._fiberRefs=n,this.refreshRefCache()}addChild(n){this.getChildren().add(n)}removeChild(n){this.getChildren().delete(n)}transferChildren(n){const s=this._children;if(this._children=null,s!==null&&s.size>0)for(const o of s)o._exitValue===null&&n.add(this.currentRuntimeFlags,o)}drainQueueOnCurrentThread(){let n=!0;for(;n;){let s=To;const o=globalThis[ai];globalThis[ai]=this;try{for(;s===To;)s=this._queue.length===0?JP:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[ai]=o}this._queue.length>0&&!this._running?(this._running=!0,s===Vb?(this.drainQueueLaterOnExecutor(),n=!1):n=!0):n=!1}}drainQueueLaterOnExecutor(){this.currentScheduler.scheduleTask(this.run,this.getFiberRef(gu))}drainQueueWhileRunning(n,s){let o=s;for(;this._queue.length>0;){const u=this._queue.splice(0,1)[0];o=HP[u._tag](this,n,o,u)}return o}isInterrupted(){return!KR(this.getFiberRef(mu))}addInterruptedCause(n){const s=this.getFiberRef(mu);this.setFiberRef(mu,on(s,n))}processNewInterruptSignal(n){this.addInterruptedCause(n),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(this._children===null||this._children.size===0)return!1;let n=!1;for(const s of this._children)s.tell(oh(Rr(this.id()))),n=!0;return n}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){const n=this._children.values();this._children=null;let s=!1;return Tf({while:()=>!s,body:()=>{const u=n.next();return u.done?ce(()=>{s=!0}):po(u.value.await)},step:()=>{}})}return null}reportExitValue(n){if(E_(this.currentRuntimeFlags)){const s=this.getFiberRef(xf),o=this.id().startTimeMillis,u=Date.now();switch(qP.unsafeUpdate(u-o,s),Hb.unsafeUpdate(-1,s),n._tag){case Sn:{jP.unsafeUpdate(1,s);break}case vn:{WP.unsafeUpdate(1,s);break}}}if(n._tag==="Failure"){const s=this.getFiberRef(Lx);!yf(n.cause)&&s._tag==="Some"&&this.log("Fiber terminated with an unhandled error",n.cause,s)}}setExitValue(n){this._exitValue=n,this.reportExitValue(n);for(let s=this._observers.length-1;s>=0;s--)this._observers[s](n);this._observers=[]}getLoggers(){return this.getFiberRef(eM)}log(n,s,o){const u=vt(o)?o.value:this.getFiberRef($x),l=this.getFiberRef(YP);if(yC(l,u))return;const h=this.getFiberRef(Px),d=this.getFiberRef(Cx),_=this.getLoggers(),b=this.getFiberRefs();if(Ym(_)>0){const S=Sm(this.getFiberRef(vu),Df),T=new Date(S.unsafeCurrentTimeMillis());DE(b,()=>{for(const I of _)I.log({fiberId:this.id(),logLevel:u,message:n,cause:s,context:b,spans:h,annotations:d,date:T})})}}evaluateMessageWhileSuspended(n){switch(n._tag){case sh:return Vb;case nh:return this.processNewInterruptSignal(n.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(Ne(n.cause)),this._asyncInterruptor=null),To;case ih:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(n.effect),To;case rh:return n.onFiber(this,this._exitValue!==null?JC:GC(this.currentRuntimeFlags,this._asyncBlockingOn)),To;default:return Lu(n)}}evaluateEffect(n){this.currentSupervisor.onResume(this);try{let s=Ar(this.currentRuntimeFlags)&&this.isInterrupted()?Ne(this.getInterruptedCause()):n;for(;s!==null;){const o=s,u=this.runLoop(o);if(u===cr){const l=ur.currentOp;ur.currentOp=null,l._op===Oc?mR(this.currentRuntimeFlags)?(this.tell(w$()),this.tell(as(ri)),s=null):s=ri:l._op===Ws&&(s=null)}else{this.currentRuntimeFlags=P(this.currentRuntimeFlags,_R(gf));const l=this.interruptAllChildren();l!==null?s=se(l,()=>u):(this._queue.length===0?this.setExitValue(u):this.tell(as(u)),s=null)}}}finally{this.currentSupervisor.onSuspend(this)}}start(n){if(this._running)this.tell(as(n));else{this._running=!0;const s=globalThis[ai];globalThis[ai]=this;try{this.evaluateEffect(n)}finally{this._running=!1,globalThis[ai]=s,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(n){this.tell(as(n))}patchRuntimeFlags(n,s){const o=tu(n,s);return globalThis[ai]=this,this.currentRuntimeFlags=o,o}initiateAsync(n,s){let o=!1;const u=l=>{o||(o=!0,this.tell(as(l)))};Ar(n)&&(this._asyncInterruptor=u);try{s(u)}catch(l){u(In(Jn(l)))}}pushStack(n){this._stack.push(n),n._op==="OnStep"&&this._steps.push({refs:this.getFiberRefs(),flags:this.currentRuntimeFlags})}popStack(){const n=this._stack.pop();if(n)return n._op==="OnStep"&&this._steps.pop(),n}getNextSuccessCont(){let n=this.popStack();for(;n;){if(n._op!==vl)return n;n=this.popStack()}}getNextFailCont(){let n=this.popStack();for(;n;){if(n._op!==vc&&n._op!==wc&&n._op!==Ec)return n;n=this.popStack()}}[(nS=I$,tS=R$,KE)](n){return ce(()=>wm(this.currentContext,n))}Left(n){return Ft(n.left)}None(n){return Ft(new hy)}Right(n){return Qe(n.right)}Some(n){return Qe(n.value)}Micro(n){return uu(s=>{let o=s;const u=v$(d$(n,this.currentContext));return u.addObserver(l=>{if(l._tag==="Success")return o(Qe(l.value));switch(l.cause._tag){case"Interrupt":return o(Ne(Rr(Ji)));case"Fail":return o(Ft(l.cause.error));case"Die":return o(J_(l.cause.defect))}}),uu(l=>{o=h=>{l(An)},u.unsafeInterrupt()})})}[tg](n){const s=At(()=>n.effect_instruction_i0()),o=this.getNextSuccessCont();return o!==void 0?(o._op in Io||Lu(o),Io[o._op](this,o,s)):(ur.currentOp=Qe(s),cr)}[Sn](n){const s=n,o=this.getNextSuccessCont();return o!==void 0?(o._op in Io||Lu(o),Io[o._op](this,o,s.effect_instruction_i0)):(ur.currentOp=s,cr)}[vn](n){const s=n.effect_instruction_i0,o=this.getNextFailCont();if(o!==void 0)switch(o._op){case vl:case Sc:return Ar(this.currentRuntimeFlags)&&this.isInterrupted()?Ne($_(s)):At(()=>o.effect_instruction_i1(s));case"OnStep":return Ar(this.currentRuntimeFlags)&&this.isInterrupted()?Ne($_(s)):Qe(Ne(s));case Sl:return this.patchRuntimeFlags(this.currentRuntimeFlags,o.patch),Ar(this.currentRuntimeFlags)&&this.isInterrupted()?Ne(on(s,this.getInterruptedCause())):Ne(s);default:Lu(o)}else return ur.currentOp=Ne(s),cr}[ng](n){return At(()=>n.effect_instruction_i0(this,sb(this.currentRuntimeFlags)))}Blocked(n){const s=this.getFiberRefs(),o=this.currentRuntimeFlags;if(this._steps.length>0){const u=[],l=this._steps[this._steps.length-1];let h=this.popStack();for(;h&&h._op!=="OnStep";)u.push(h),h=this.popStack();this.setFiberRefs(l.refs),this.currentRuntimeFlags=l.flags;const d=FC(l.refs,s),_=eu(l.flags,o);return Qe(K_(n.effect_instruction_i0,Ht(b=>{for(;u.length>0;)b.pushStack(u.pop());return b.setFiberRefs(NC(b.id(),b.getFiberRefs())(d)),b.currentRuntimeFlags=tu(_)(b.currentRuntimeFlags),n.effect_instruction_i1})))}return hu(u=>se(Xb(cx(n.effect_instruction_i0)),()=>u(n.effect_instruction_i1)))}RunBlocked(n){return VP(n.effect_instruction_i0)}[qs](n){const s=n.effect_instruction_i0,o=this.currentRuntimeFlags,u=tu(o,s);if(Ar(u)&&this.isInterrupted())return Ne(this.getInterruptedCause());if(this.patchRuntimeFlags(this.currentRuntimeFlags,s),n.effect_instruction_i1){const l=eu(u,o);return this.pushStack(new ux(l,n)),At(()=>n.effect_instruction_i1(o))}else return ri}[vc](n){return this.pushStack(n),n.effect_instruction_i0}OnStep(n){return this.pushStack(n),n.effect_instruction_i0}[vl](n){return this.pushStack(n),n.effect_instruction_i0}[Sc](n){return this.pushStack(n),n.effect_instruction_i0}[Ws](n){return this._asyncBlockingOn=n.effect_instruction_i1,this.initiateAsync(this.currentRuntimeFlags,n.effect_instruction_i0),ur.currentOp=n,cr}[Oc](n){return this._isYielding=!1,ur.currentOp=n,cr}[wc](n){const s=n.effect_instruction_i0,o=n.effect_instruction_i1;return s()?(this.pushStack(n),o()):ri}[Ec](n){return Io[Ec](this,n,void 0)}[bc](n){return At(()=>n.commit())}runLoop(n){let s=n;for(this.currentOpCount=0;;){if(this.currentRuntimeFlags&gR&&this.currentSupervisor.onEffect(this,s),this._queue.length>0&&(s=this.drainQueueWhileRunning(this.currentRuntimeFlags,s)),!this._isYielding){this.currentOpCount+=1;const o=this.currentScheduler.shouldYield(this);if(o!==!1){this._isYielding=!0,this.currentOpCount=0;const u=s;s=se(If({priority:o}),()=>u)}}try{if(s=this.currentTracer.context(()=>zP!==s[ns]._V?G_(`Cannot execute an Effect versioned ${s[ns]._V} with a Runtime of version ${hc()}`):this[s._op](s),this),s===cr){const o=ur.currentOp;return o._op===Oc||o._op===Ws?cr:(ur.currentOp=null,o._op===Sn||o._op===vn?o:Ne(Jn(o)))}}catch(o){s!==cr&&!ue(s,"_op")||!(s._op in this)?s=G_(`Not a valid effect: ${Ii(s)}`):jx(o)?s=Ne(on(Jn(o),Rr(Ji))):s=J_(o)}}}}const YP=Ee("effect/FiberRef/currentMinimumLogLevel",()=>Vt(bC("Info"))),XP=e=>uh(t=>{const n=cC(t.context,vu);Sm(n,Ky).unsafe.log(e.log(t))}),ZP=Ee(Symbol.for("effect/Logger/defaultLogger"),()=>XP($$)),QP=Ee(Symbol.for("effect/Logger/tracerLogger"),()=>uh(({annotations:e,cause:t,context:n,fiberId:s,logLevel:o,message:u})=>{const l=Zs(vo(n,mo),qy);if(l._tag==="None"||l.value._tag==="ExternalSpan")return;const h=wm(vo(n,vu),Df),d={};for(const[_,b]of e)d[_]=b;d["effect.fiberId"]=cA(s),d["effect.logLevel"]=o.label,t!==null&&t._tag!=="Empty"&&(d["effect.cause"]=es(t,{renderErrorCause:!0})),l.value.event(Ii(Array.isArray(u)?u[0]:u),h.unsafeCurrentTimeNanos(),d)})),eM=Ee(Symbol.for("effect/FiberRef/currentLoggers"),()=>Rx(nf(ZP,QP))),tM=O(e=>zp(e[0]),(e,t,n)=>Ht(s=>{const o=(n==null?void 0:n.batching)===!0||(n==null?void 0:n.batching)==="inherit"&&s.getFiberRef(Nx);return n!=null&&n.discard?Sb(n.concurrency,()=>ls(qf,n==null?void 0:n.concurrentFinalizers)(u=>o?li(e,(l,h)=>u(t(l,h)),!0,!1,1):lu(e,(l,h)=>u(t(l,h)))),()=>ls(Jf,n==null?void 0:n.concurrentFinalizers)(u=>li(e,(l,h)=>u(t(l,h)),o,!1)),u=>ls(Gf(u),n==null?void 0:n.concurrentFinalizers)(l=>li(e,(h,d)=>l(t(h,d)),o,!1,u))):Sb(n==null?void 0:n.concurrency,()=>ls(qf,n==null?void 0:n.concurrentFinalizers)(u=>o?Yb(e,1,(l,h)=>u(t(l,h)),!0):xr(e,(l,h)=>u(t(l,h)))),()=>ls(Jf,n==null?void 0:n.concurrentFinalizers)(u=>nM(e,(l,h)=>u(t(l,h)),o)),u=>ls(Gf(u),n==null?void 0:n.concurrentFinalizers)(l=>Yb(e,u,(h,d)=>l(t(h,d)),o)))})),nM=(e,t,n)=>st(()=>{const s=Ze(e),o=new Array(s.length);return du(li(s,(l,h)=>se(t(l,h),d=>ce(()=>o[h]=d)),n,!1),Be(o))}),li=(e,t,n,s,o)=>hu(u=>mx(l=>Ht(h=>{let d=Array.from(e).reverse(),_=d.length;if(_===0)return An;let b=0,S=!1;const T=o?Math.min(d.length,o):d.length,I=new Set,x=new Array,W=()=>I.forEach(N=>{N.currentScheduler.scheduleTask(()=>{N.unsafeInterruptAsFork(h.id())},0)}),L=new Array,K=new Array,ee=new Array,q=()=>{const N=x.filter(({exit:D})=>D._tag==="Failure").sort((D,U)=>D.index<U.index?-1:D.index===U.index?0:1).map(({exit:D})=>D);return N.length===0&&N.push(ri),N},H=(N,D=!1)=>{const U=ey(l(N)),F=iM(U,h,h.currentRuntimeFlags,ch);return h.currentScheduler.scheduleTask(()=>{D&&F.unsafeInterruptAsFork(h.id()),F.resume(U)},0),F},V=()=>{s||(_-=d.length,d=[]),S=!0,W()},Y=n?dx:H_,C=H(go(N=>{const D=(F,j)=>{F._op==="Blocked"?ee.push(F):(x.push({index:j,exit:F}),F._op==="Failure"&&!S&&V())},U=()=>{if(d.length>0){const F=d.pop();let j=b++;const Te=()=>{const ne=d.pop();return j=b++,se(If(),()=>se(Y(u(t(ne,j))),Ie))},Ie=ne=>d.length>0&&(D(ne,j),d.length>0)?Te():Be(ne),ct=se(Y(u(t(F,j))),Ie),je=H(ct);L.push(je),I.add(je),S&&je.currentScheduler.scheduleTask(()=>{je.unsafeInterruptAsFork(h.id())},0),je.addObserver(ne=>{let He;if(ne._op==="Failure"?He=ne:He=ne.effect_instruction_i0,K.push(je),I.delete(je),D(He,j),x.length===_)N(Be(ft(py(q(),{parallel:!0}),()=>ri)));else if(ee.length+x.length===_){const kn=q(),hr=ee.map(Ot=>Ot.effect_instruction_i0).reduce(A_);N(Be(K_(hr,li([ft(py(kn,{parallel:!0}),()=>ri),...ee.map(Ot=>Ot.effect_instruction_i1)],Ot=>Ot,n,!0,o))))}else U()})}};for(let F=0;F<T;F++)U()}));return po(Of(Y_(u(wb(C))),my({onFailure:N=>{V();const D=ee.length+1,U=Math.min(typeof o=="number"?o:ee.length,ee.length),F=Array.from(ee);return go(j=>{let Te=0,Ie=0;const ct=(ne,He)=>kn=>{Te++,Te===D&&j(Qe(Ne(N))),F.length>0&&He&&je()},je=()=>{H(F.pop(),!0).addObserver(ct(Ie,!0)),Ie++};C.addObserver(ct(Ie,!1)),Ie++;for(let ne=0;ne<U;ne++)je()})},onSuccess:()=>xr(K,N=>N.inheritAll)})))}))),Yb=(e,t,n,s)=>st(()=>{const o=Ze(e),u=new Array(o.length);return du(li(o,(h,d)=>Nt(n(h,d),_=>u[d]=_),s,!1,t),Be(u))}),Xb=e=>sM(e,ch),rM=(e,t,n,s=null)=>{const o=Zb(e,t,n,s);return o.resume(e),o},iM=(e,t,n,s=null)=>Zb(e,t,n,s),Zb=(e,t,n,s=null)=>{const o=s_(),u=t.getFiberRefs(),l=iC(u,o),h=new zb(o,l,n),d=vo(l,mo),_=h.currentSupervisor;return _.onStart(d,e,be(t),h),h.addObserver(S=>_.onEnd(S,h)),(s!==null?s:P(t.getFiberRef(kf),ft(()=>t.scope()))).add(n,h),h},sM=(e,t)=>Ht((n,s)=>Be(rM(e,n,s.runtimeFlags,t))),Qb=e=>_o(t=>Jt(Zs(t,Ao),{onNone:()=>e,onSome:n=>{switch(n.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return se(_u(n,Jf),s=>vh(e,s))}}})),e0=e=>t=>_o(n=>Jt(Zs(n,Ao),{onNone:()=>t,onSome:s=>s.strategy._tag==="ParallelN"&&s.strategy.parallelism===e?t:se(_u(s,Gf(e)),o=>vh(t,o))})),ls=(e,t)=>n=>_o(s=>Jt(Zs(s,Ao),{onNone:()=>n(Ye),onSome:o=>{if(t===!0){const u=e._tag==="Parallel"?Qb:e._tag==="Sequential"?t0:e0(e.parallelism);switch(o.strategy._tag){case"Parallel":return u(n(Qb));case"Sequential":return u(n(t0));case"ParallelN":return u(n(e0(o.strategy.parallelism)))}}else return n(Ye)}})),t0=e=>_o(t=>Jt(Zs(t,Ao),{onNone:()=>e,onSome:n=>{switch(n.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return se(_u(n,qf),s=>vh(e,s))}}})),Ao=Vr("effect/Scope"),vh=O(2,(e,t)=>ek(e,Em(HT(Ao,t)))),oM=e=>is(e,{differ:KP,fork:Oo}),n0=kx(yR),cM=oM(Mu),uM=(e,t,n)=>z_(s=>se(se(Xb(X_(e)),o=>go(u=>{const l=t.map(_=>_.listeners.count),h=()=>{l.every(_=>_===0)&&t.every(_=>_.result.state.current._tag==="Pending"?!0:!!(_.result.state.current._tag==="Done"&&$f(_.result.state.current.effect)&&_.result.state.current.effect._tag==="Failure"&&BR(_.result.state.current.effect.cause)))&&(d.forEach(_=>_()),n==null||n(),u(yx(o)))};o.addObserver(_=>{d.forEach(b=>b()),u(_)});const d=t.map((_,b)=>{const S=T=>{l[b]=T,h()};return _.listeners.addObserver(S),()=>_.listeners.removeObserver(S)});return h(),ce(()=>{d.forEach(_=>_())})})),()=>st(()=>{const o=t.flatMap(u=>u.state.completed?[]:[u]);return lu(o,u=>MP(u.request,Gx(s)))}))),aM=UR,lM=es,fM=Ux,hM=_u,dM=function(){const e=Symbol.for("effect/Data/Error/plainArgs");return class extends Cf{constructor(n){super(n==null?void 0:n.message,n!=null&&n.cause?{cause:n.cause}:void 0),n&&(Object.assign(this,n),Object.defineProperty(this,e,{value:n,enumerable:!1}))}toJSON(){return{...this[e],...this}}}}(),pM=e=>{class t extends dM{constructor(){super(...arguments);p(this,"_tag",e)}}return t.prototype.name=e,t},r0=e=>(t,n)=>{const s=s_(),o=[[mo,[[s,e.context]]]];n!=null&&n.scheduler&&o.push([bb,[[s,n.scheduler]]]);let u=uC(e.fiberRefs,{entries:o,forkAs:s});n!=null&&n.updateRefs&&(u=n.updateRefs(u,s));const l=new zb(s,u,e.runtimeFlags);let h=t;n!=null&&n.scope&&(h=se(hM(n.scope,nb),_=>du(Dx(_,z_(b=>fe(b,l.id())?An:ry(l,b))),Of(t,b=>fM(_,b)))));const d=l.currentSupervisor;return d!==Mu&&(d.onStart(e.context,h,te(),l),l.addObserver(_=>d.onEnd(_,l))),ch.add(e.runtimeFlags,l),(n==null?void 0:n.immediate)===!1?l.resume(h):l.start(h),l},gM=e=>t=>{const n=SM(e)(t);if(n._tag==="Failure")throw bM(n.effect_instruction_i0);return n.effect_instruction_i0};class mM extends Error{constructor(n){super(`Fiber #${n.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`);p(this,"fiber");p(this,"_tag","AsyncFiberException");this.fiber=n,this.name=this._tag,this.stack=this.message}}const _M=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new mM(e);return Error.stackTraceLimit=t,n},Sh=Symbol.for("effect/Runtime/FiberFailure"),Du=Symbol.for("effect/Runtime/FiberFailure/Cause");class yM extends Error{constructor(n){const s=D_(n)[0];super((s==null?void 0:s.message)||"An error has occurred");p(this,iS);p(this,rS);this[Sh]=Sh,this[Du]=n,this.name=s?`(FiberFailure) ${s.name}`:"FiberFailure",s!=null&&s.stack&&(this.stack=s.stack)}toJSON(){return{_id:"FiberFailure",cause:this[Du].toJSON()}}toString(){return"(FiberFailure) "+es(this[Du],{renderErrorCause:!0})}[(iS=Sh,rS=Du,Ke)](){return this.toString()}}const bM=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new yM(e);return Error.stackTraceLimit=t,n},vM=e=>{const t=e;switch(t._op){case"Failure":case"Success":return t;case"Left":return gy(t.left);case"Right":return Qe(t.right);case"Some":return Qe(t.value);case"None":return gy(hy())}},SM=e=>t=>{const n=vM(t);if(n)return n;const s=new yb,o=r0(e)(t,{scheduler:s});s.flush();const u=o.unsafePoll();return u||Jx(wf(_M(o),Mf(o)))};class wM{constructor(t,n,s){p(this,"context");p(this,"runtimeFlags");p(this,"fiberRefs");this.context=t,this.runtimeFlags=n,this.fiberRefs=s}pipe(){return re(this,arguments)}}const i0=(e=>new wM(e.context,e.runtimeFlags,e.fiberRefs))({context:Nl(),runtimeFlags:w_(Vi,v_,b_),fiberRefs:aC()}),EM=r0(i0),OM=gM(i0),TM=cu,Uu=tM,Ku=st,un=An,IM=Sf,wh=Nt,AM=fu,fs=au,Vn=se,RM=EM,xM=OM;class Et{constructor(t,n,s){p(this,"path");p(this,"actual");p(this,"issue");p(this,"_tag","Pointer");this.path=t,this.actual=n,this.issue=s}}class s0{constructor(t,n){p(this,"actual");p(this,"message");p(this,"_tag","Unexpected");this.actual=t,this.message=n}}class Ro{constructor(t,n){p(this,"ast");p(this,"message");p(this,"_tag","Missing");p(this,"actual");this.ast=t,this.message=n}}class et{constructor(t,n,s,o){p(this,"ast");p(this,"actual");p(this,"issues");p(this,"output");p(this,"_tag","Composite");this.ast=t,this.actual=n,this.issues=s,this.output=o}}class Eh{constructor(t,n,s,o){p(this,"ast");p(this,"actual");p(this,"kind");p(this,"issue");p(this,"_tag","Refinement");this.ast=t,this.actual=n,this.kind=s,this.issue=o}}class Oh{constructor(t,n,s,o){p(this,"ast");p(this,"actual");p(this,"kind");p(this,"issue");p(this,"_tag","Transformation");this.ast=t,this.actual=n,this.kind=s,this.issue=o}}class hs{constructor(t,n,s){p(this,"ast");p(this,"actual");p(this,"message");p(this,"_tag","Type");this.ast=t,this.actual=n,this.message=s}}class o0{constructor(t,n,s){p(this,"ast");p(this,"actual");p(this,"message");p(this,"_tag","Forbidden");this.ast=t,this.actual=n,this.message=s}}const c0=Symbol.for("effect/Schema/ParseErrorTypeId");class kM extends pM("ParseError"){constructor(){super(...arguments);p(this,sS,c0)}get message(){return this.toString()}toString(){return ju.formatIssueSync(this.issue)}toJSON(){return{_id:"ParseError",message:this.toString()}}[(sS=c0,Ke)](){return this.toJSON()}}const CM=e=>new kM({issue:e}),u0=Oe,Lt=tO,fi=O(2,(e,t)=>Lt(e)?Tl(e,{onLeft:ge,onRight:t}):Vn(e,t)),zn=O(2,(e,t)=>Lt(e)?rO(e,t):wh(e,t)),Th=O(2,(e,t)=>Lt(e)?nO(e,t):AM(e,t)),a0=O(2,(e,t)=>Lt(e)?Tl(e,{onLeft:t,onRight:Oe}):IM(e,t)),l0=(e,t)=>t===void 0||jr(t)?e:e===void 0?t:{...e,...t},$M=(e,t,n)=>{const s=an(e);return(o,u)=>s(o,l0(n,u))},PM=(e,t,n)=>{const s=$M(e,t,n);return(o,u)=>dg(s(o,u),CM)},MM=(e,t)=>PM(Mt(e.ast),!0,t),FM=Ee(Symbol.for("effect/ParseResult/decodeMemoMap"),()=>new WeakMap),an=(e,t)=>{const n=FM,s=n.get(e);if(s)return s;const o=NM(e),u=XO(e),l=vt(u)?(_,b)=>o(_,l0(b,u.value)):o,h=ZO(e),d=vt(h)?(_,b)=>Bu(a0(l(_,b),h.value),e,_,b):l;return n.set(e,d),d},Ih=e=>Un(VO(e)),Ah=e=>Un(zO(e)),NM=(e,t)=>{switch(e._tag){case"Refinement":{const n=an(e.from);return(s,o)=>{o=o??Pl;const u=(o==null?void 0:o.errors)==="all",l=fi(a0(n(s,o),h=>{const d=new Eh(e,s,"From",h);return u&&eT(e)&&d0(h)?Jt(e.filter(s,o,e),{onNone:()=>ge(d),onSome:_=>ge(new et(e,s,[d,new Eh(e,s,"Predicate",_)]))}):ge(d)}),h=>Jt(e.filter(h,o,e),{onNone:()=>Oe(h),onSome:d=>ge(new Eh(e,s,"Predicate",d))}));return Bu(l,e,s,o)}}case"Transformation":{const n=UM(e.transformation),s=an(e.from),o=an(e.to);return(u,l)=>Bu(fi(Th(s(u,l),h=>new Oh(e,u,"Encoded",h)),h=>fi(Th(n(h,l??Pl,e,u),d=>new Oh(e,u,"Transformation",d)),d=>Th(o(d,l),_=>new Oh(e,u,"Type",_)))),e,u,l)}case"Declaration":{const n=e.decodeUnknown(...e.typeParameters);return(s,o)=>Bu(n(s,o??Pl,e),e,s,o)}case"Literal":return zt(e,n=>n===e.literal);case"UniqueSymbol":return zt(e,n=>n===e.symbol);case"UndefinedKeyword":return zt(e,SE);case"NeverKeyword":return zt(e,wE);case"UnknownKeyword":case"AnyKeyword":case"VoidKeyword":return Oe;case"StringKeyword":return zt(e,Dn);case"NumberKeyword":return zt(e,jr);case"BooleanKeyword":return zt(e,fl);case"BigIntKeyword":return zt(e,pc);case"SymbolKeyword":return zt(e,hl);case"ObjectKeyword":return zt(e,Er);case"Enums":return zt(e,n=>e.enums.some(([s,o])=>o===n));case"TemplateLiteral":{const n=xT(e);return zt(e,s=>Dn(s)&&n.test(s))}case"TupleType":{const n=e.elements.map(_=>an(_.type)),s=e.rest.map(_=>an(_.type));let o=e.elements.filter(_=>!_.isOptional);e.rest.length>0&&(o=o.concat(e.rest.slice(1)));const u=o.length,l=e.elements.length>0?e.elements.map((_,b)=>b).join(" | "):"never",h=Ih(e),d=Ah(e);return(_,b)=>{if(!yO(_))return ge(new hs(e,_));const S=(b==null?void 0:b.errors)==="all",T=[];let I=0;const x=[],W=_.length;for(let q=W;q<=u-1;q++){const H=new Et(q,_,new Ro(o[q-W]));if(S){T.push([I++,H]);continue}else return ge(new et(e,_,H,x))}if(e.rest.length===0)for(let q=e.elements.length;q<=W-1;q++){const H=new Et(q,_,new s0(_[q],`is unexpected, expected: ${l}`));if(S){T.push([I++,H]);continue}else return ge(new et(e,_,H,x))}let L=0,K;for(;L<n.length;L++)if(W<L+1){if(e.elements[L].isOptional)continue}else{const q=n[L],H=q(_[L],b);if(Lt(H)){if(pt(H)){const V=new Et(L,_,H.left);if(S){T.push([I++,V]);continue}else return ge(new et(e,_,V,xn(x)))}x.push([I++,H.right])}else{const V=I++,Y=L;K||(K=[]),K.push(({es:C,output:N})=>Vn(fs(H),D=>{if(pt(D)){const U=new Et(Y,_,D.left);return S?(C.push([V,U]),un):ge(new et(e,_,U,xn(N)))}return N.push([V,D.right]),un}))}}if(mt(s)){const[q,...H]=s;for(;L<W-H.length;L++){const V=q(_[L],b);if(Lt(V))if(pt(V)){const Y=new Et(L,_,V.left);if(S){T.push([I++,Y]);continue}else return ge(new et(e,_,Y,xn(x)))}else x.push([I++,V.right]);else{const Y=I++,C=L;K||(K=[]),K.push(({es:N,output:D})=>Vn(fs(V),U=>{if(pt(U)){const F=new Et(C,_,U.left);return S?(N.push([Y,F]),un):ge(new et(e,_,F,xn(D)))}else return D.push([Y,U.right]),un}))}}for(let V=0;V<H.length;V++)if(L+=V,!(W<L+1)){const Y=H[V](_[L],b);if(Lt(Y)){if(pt(Y)){const C=new Et(L,_,Y.left);if(S){T.push([I++,C]);continue}else return ge(new et(e,_,C,xn(x)))}x.push([I++,Y.right])}else{const C=I++,N=L;K||(K=[]),K.push(({es:D,output:U})=>Vn(fs(Y),F=>{if(pt(F)){const j=new Et(N,_,F.left);return S?(D.push([C,j]),un):ge(new et(e,_,j,xn(U)))}return U.push([C,F.right]),un}))}}}const ee=({es:q,output:H})=>xc(q)?ge(new et(e,_,xn(q),xn(H))):Oe(xn(H));if(K&&K.length>0){const q=K;return Ku(()=>{const H={es:zs(T),output:zs(x)};return Vn(Uu(q,V=>V(H),{concurrency:h,batching:d,discard:!0}),()=>ee(H))})}return ee({output:x,es:T})}}case"TypeLiteral":{if(e.propertySignatures.length===0&&e.indexSignatures.length===0)return zt(e,EE);const n=[],s={},o=[];for(const b of e.propertySignatures)n.push([an(b.type),b]),s[b.name]=null,o.push(b.name);const u=e.indexSignatures.map(b=>[an(b.parameter),an(b.type),b.parameter]),l=tr.make(e.indexSignatures.map(b=>b.parameter).concat(o.map(b=>hl(b)?new iT(b):new rT(b)))),h=an(l),d=Ih(e),_=Ah(e);return(b,S)=>{if(!TE(b))return ge(new hs(e,b));const T=(S==null?void 0:S.errors)==="all",I=[];let x=0;const W=(S==null?void 0:S.onExcessProperty)==="error",L=(S==null?void 0:S.onExcessProperty)==="preserve",K={};let ee;if(W||L){ee=Ci(b);for(const Y of ee){const C=h(Y,S);if(Lt(C)&&pt(C))if(W){const N=new Et(Y,b,new s0(b[Y],`is unexpected, expected: ${String(l)}`));if(T){I.push([x++,N]);continue}else return ge(new et(e,b,N,K))}else K[Y]=b[Y]}}let q;const H=(S==null?void 0:S.exact)===!0;for(let Y=0;Y<n.length;Y++){const C=n[Y][1],N=C.name,D=Object.prototype.hasOwnProperty.call(b,N);if(!D){if(C.isOptional)continue;if(H){const j=new Et(N,b,new Ro(C));if(T){I.push([x++,j]);continue}else return ge(new et(e,b,j,K))}}const U=n[Y][0],F=U(b[N],S);if(Lt(F)){if(pt(F)){const j=new Et(N,b,D?F.left:new Ro(C));if(T){I.push([x++,j]);continue}else return ge(new et(e,b,j,K))}K[N]=F.right}else{const j=x++,Te=N;q||(q=[]),q.push(({es:Ie,output:ct})=>Vn(fs(F),je=>{if(pt(je)){const ne=new Et(Te,b,D?je.left:new Ro(C));return T?(Ie.push([j,ne]),un):ge(new et(e,b,ne,ct))}return ct[Te]=je.right,un}))}}for(let Y=0;Y<u.length;Y++){const C=u[Y],N=C[0],D=C[1],U=Rg(b,C[2]);for(const F of U){const j=N(F,S);if(Lt(j)&&er(j)){const Te=D(b[F],S);if(Lt(Te))if(pt(Te)){const Ie=new Et(F,b,Te.left);if(T){I.push([x++,Ie]);continue}else return ge(new et(e,b,Ie,K))}else Object.prototype.hasOwnProperty.call(s,F)||(K[F]=Te.right);else{const Ie=x++,ct=F;q||(q=[]),q.push(({es:je,output:ne})=>Vn(fs(Te),He=>{if(pt(He)){const kn=new Et(ct,b,He.left);return T?(je.push([Ie,kn]),un):ge(new et(e,b,kn,ne))}else return Object.prototype.hasOwnProperty.call(s,F)||(ne[F]=He.right),un}))}}}}const V=({es:Y,output:C})=>{if(xc(Y))return ge(new et(e,b,xn(Y),C));if((S==null?void 0:S.propertyOrder)==="original"){const N=ee||Ci(b);for(const U of o)N.indexOf(U)===-1&&N.push(U);const D={};for(const U of N)Object.prototype.hasOwnProperty.call(C,U)&&(D[U]=C[U]);return Oe(D)}return Oe(C)};if(q&&q.length>0){const Y=q;return Ku(()=>{const C={es:zs(I),output:Object.assign({},K)};return Vn(Uu(Y,N=>N(C),{concurrency:d,batching:_,discard:!0}),()=>V(C))})}return V({es:I,output:K})}}case"Union":{const n=LM(e.types),s=Ci(n.keys),o=s.length,u=e.types.length,l=new Map;for(let _=0;_<u;_++)l.set(e.types[_],an(e.types[_]));const h=Ih(e)??1,d=Ah(e);return(_,b)=>{const S=[];let T=0,I=[];if(o>0)if(dl(_))for(let L=0;L<o;L++){const K=s[L],ee=n.keys[K].buckets;if(Object.prototype.hasOwnProperty.call(_,K)){const q=String(_[K]);if(Object.prototype.hasOwnProperty.call(ee,q))I=I.concat(ee[q]);else{const{candidates:H,literals:V}=n.keys[K],Y=tr.make(V),C=H.length===u?new Hr([new wt(K,Y,!1,!0)],[]):tr.make(H);S.push([T++,new et(C,_,new Et(K,_,new hs(Y,_[K])))])}}else{const{candidates:q,literals:H}=n.keys[K],V=new wt(K,tr.make(H),!1,!0),Y=q.length===u?new Hr([V],[]):tr.make(q);S.push([T++,new et(Y,_,new Et(K,_,new Ro(V)))])}}else{const L=n.candidates.length===u?e:tr.make(n.candidates);S.push([T++,new hs(L,_)])}n.otherwise.length>0&&(I=I.concat(n.otherwise));let x;for(let L=0;L<I.length;L++){const K=I[L],ee=l.get(K)(_,b);if(Lt(ee)&&(!x||x.length===0)){if(er(ee))return ee;S.push([T++,ee.left])}else{const q=T++;x||(x=[]),x.push(H=>Ku(()=>"finalResult"in H?un:Vn(fs(ee),V=>(er(V)?H.finalResult=V:H.es.push([q,V.left]),un))))}}const W=L=>xc(L)?L.length===1&&L[0][1]._tag==="Type"?ge(L[0][1]):ge(new et(e,_,xn(L))):ge(new hs(e,_));if(x&&x.length>0){const L=x;return Ku(()=>{const K={es:zs(S)};return Vn(Uu(L,ee=>ee(K),{concurrency:h,batching:d,discard:!0}),()=>"finalResult"in K?K.finalResult:W(K.es))})}return W(S)}}case"Suspend":{const n=xg(()=>an(Pi(e.f(),e.annotations)));return(s,o)=>n()(s,o)}}},zt=(e,t)=>n=>t(n)?Oe(n):ge(new hs(e,n)),xo=(e,t)=>{switch(e._tag){case"Declaration":{const n=Xg(e);if(vt(n))return xo(n.value);break}case"TypeLiteral":{const n=[];for(let s=0;s<e.propertySignatures.length;s++){const o=e.propertySignatures[s],u=pm(o.type);em(u)&&!o.isOptional&&n.push([o.name,u])}return n}case"TupleType":{const n=[];for(let s=0;s<e.elements.length;s++){const o=e.elements[s],u=pm(o.type);em(u)&&!o.isOptional&&n.push([s,u])}return n}case"Refinement":return xo(e.from);case"Suspend":return xo(e.f());case"Transformation":return xo(e.from)}return[]},LM=(e,t)=>{const n={},s=[],o=[];for(let u=0;u<e.length;u++){const l=e[u],h=xo(l);if(h.length>0){o.push(l);for(let d=0;d<h.length;d++){const[_,b]=h[d],S=String(b.literal);n[_]=n[_]||{buckets:{},literals:[],candidates:[]};const T=n[_].buckets;if(Object.prototype.hasOwnProperty.call(T,S)){if(d<h.length-1)continue;T[S].push(l),n[_].literals.push(b),n[_].candidates.push(l)}else{T[S]=[l],n[_].literals.push(b),n[_].candidates.push(l);break}}}else s.push(l)}return{keys:n,otherwise:s,candidates:o}},Bu=(e,t,n,s)=>{if((s==null?void 0:s.isEffectAllowed)===!0||Lt(e))return e;const o=new yb,u=RM(e,{scheduler:o});o.flush();const l=u.unsafePoll();if(l){if(tk(l))return Oe(l.value);const h=l.cause;return aM(h)?ge(h.error):ge(new o0(t,n,lM(h)))}return ge(new o0(t,n,"cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work"))},DM=([e],[t])=>e>t?1:e<t?-1:0;function xn(e){return e.sort(DM).map(t=>t[1])}const UM=(e,t)=>{switch(e._tag){case"FinalTransformation":return e.decode;case"ComposeTransformation":return Oe;case"TypeLiteralTransformation":return n=>{let s=Oe(n);for(const o of e.propertySignatureTransformations){const[u,l]=[o.from,o.to],h=o.decode;s=zn(s,_=>{const b=h(Object.prototype.hasOwnProperty.call(_,u)?be(_[u]):te());return delete _[u],vt(b)&&(_[l]=b.value),_})}return s}}},Rt=(e,t=[])=>({value:e,forest:t}),ju={formatIssue:e=>zn(ds(e),KM),formatIssueSync:e=>{const t=ju.formatIssue(e);return Lt(t)?sO(t):xM(t)},formatError:e=>ju.formatIssue(e.issue),formatErrorSync:e=>ju.formatIssueSync(e.issue)},KM=e=>e.value+f0(`
`,e.forest),f0=(e,t)=>{let n="";const s=t.length;let o;for(let u=0;u<s;u++){o=t[u];const l=u===s-1;n+=e+(l?"└":"├")+"─ "+o.value,n+=f0(e+(s>1&&!l?"│  ":"   "),o.forest)}return n},BM=e=>{switch(e){case"Encoded":return"Encoded side transformation failure";case"Transformation":return"Transformation process failure";case"Type":return"Type side transformation failure"}},jM=e=>{switch(e){case"From":return"From side refinement failure";case"Predicate":return"Predicate refinement failure"}},h0=e=>"ast"in e?be(e.ast):te(),Rh=Oe(void 0),WM=e=>h0(e).pipe(Ic(GO),Jt({onNone:()=>Rh,onSome:t=>{const n=t(e);return Dn(n)?Oe({message:n,override:!1}):TM(n)?wh(n,s=>({message:s,override:!1})):Dn(n.message)?Oe({message:n.message,override:n.override}):wh(n.message,s=>({message:s,override:n.override}))}})),xh=e=>t=>t._tag===e,d0=xh("Composite"),p0=xh("Refinement"),g0=xh("Transformation"),ko=e=>fi(WM(e),t=>t!==void 0?!t.override&&(d0(e)||p0(e)&&e.kind==="From"||g0(e)&&e.kind!=="Transformation")?g0(e)||p0(e)?ko(e.issue):Rh:Oe(t.message):Rh),m0=e=>h0(e).pipe(Ic(YO),lO(t=>t(e)),Un);function qM(e){return Yg(e).pipe(Or(()=>Vg(e)),Or(()=>zg(e)),Or(()=>Pc(e)),ft(()=>`{ ${e.from} | filter }`))}function JM(e){return e.message!==void 0?e.message:`Expected ${um(e.ast)?qM(e.ast):String(e.ast)}, actual ${Kn(e.actual)}`}const GM=e=>zn(ko(e),t=>t??m0(e)??JM(e)),Wu=e=>m0(e)??String(e.ast),HM=e=>e.message??"is forbidden",VM=e=>e.message??"is unexpected",zM=e=>{const t=HO(e.ast);if(vt(t)){const n=t.value();return Dn(n)?Oe(n):n}return Oe(e.message??"is missing")},ds=e=>{switch(e._tag){case"Type":return zn(GM(e),Rt);case"Forbidden":return Oe(Rt(Wu(e),[Rt(HM(e))]));case"Unexpected":return Oe(Rt(VM(e)));case"Missing":return zn(zM(e),Rt);case"Transformation":return fi(ko(e),t=>t!==void 0?Oe(Rt(t)):zn(ds(e.issue),n=>Rt(Wu(e),[Rt(BM(e.kind),[n])])));case"Refinement":return fi(ko(e),t=>t!==void 0?Oe(Rt(t)):zn(ds(e.issue),n=>Rt(Wu(e),[Rt(jM(e.kind),[n])])));case"Pointer":return zn(ds(e.issue),t=>Rt(FO(e.path),[t]));case"Composite":return fi(ko(e),t=>{if(t!==void 0)return Oe(Rt(t));const n=Wu(e);return kg(e.issues)?zn(Uu(e.issues,ds),s=>Rt(n,s)):zn(ds(e.issues),s=>Rt(n,[s]))})}},YM=O(e=>Er(e[0]),(e,...t)=>{const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}),XM=O(e=>Er(e[0]),(e,...t)=>{const n={...e};for(const s of t)delete n[s];return n}),Co=Symbol.for("effect/Schema");function ar(e){var t,n,s;return n=Co,t=Co,s=class{constructor(){p(this,n,_0)}static annotations(u){return ar(ps(this.ast,u))}static pipe(){return re(this,arguments)}static toString(){return String(e)}},p(s,"ast",e),p(s,"Type"),p(s,"Encoded"),p(s,"Context"),p(s,t,_0),s}const _0={_A:e=>e,_I:e=>e,_R:e=>e},y0={schemaId:jO,message:Mg,missingMessage:Al,identifier:Fg,title:Tr,description:$c,examples:Ng,default:Lg,documentation:WO,jsonSchema:Dg,arbitrary:Ug,pretty:Kg,equivalence:Bg,concurrency:jg,batching:Wg,parseIssueTitle:qg,parseOptions:Jg,decodingFallback:Gg},kh=e=>{if(!e)return{};const t={...e};for(const n in y0)if(n in e){const s=y0[n];t[s]=e[n],delete t[n]}return t},ps=(e,t)=>Pi(e,kh(t)),gs=e=>ue(e,Co)&&Er(e[Co]);class ZM extends ar(xl){}class QM extends ar(kl){}class ms extends ar(hT){}class eF extends ar(gT){}const tF=e=>tr.make(e.map(t=>t.ast));function b0(e,t=tF(e)){var n;return n=class extends ar(t){static annotations(o){return b0(this.members,ps(this.ast,o))}},p(n,"members",[...e]),n}function nF(...e){return sm(e)?b0(e):mt(e)?e[0]:QM}const rF=e=>nF(e,ZM),iF=(e,t)=>new Cl(e.map(n=>gs(n)?new Gr(n.ast,!1):n.ast),t.map(n=>gs(n)?new Mc(n.ast):n.ast),!0);function v0(e,t,n=iF(e,t)){var s;return s=class extends ar(n){static annotations(u){return v0(this.elements,this.rest,ps(this.ast,u))}},p(s,"elements",[...e]),p(s,"rest",[...t]),s}function S0(e,t){var n;return n=class extends v0([],[e],t){static annotations(o){return S0(this.value,ps(this.ast,o))}},p(n,"value",e),n}const sF=e=>S0(e),Ch=e=>e?'"?:"':'":"';class w0 extends Gr{constructor(n,s,o,u,l){super(n,s,u);p(this,"isReadonly");p(this,"defaultValue");p(this,"_tag","PropertySignatureDeclaration");this.isReadonly=o,this.defaultValue=l}toString(){const n=Ch(this.isOptional),s=String(this.type);return`PropertySignature<${n}, ${s}, never, ${n}, ${s}>`}}class oF extends Gr{constructor(n,s,o,u,l){super(n,s,u);p(this,"isReadonly");p(this,"fromKey");this.isReadonly=o,this.fromKey=l}}class cF extends Gr{constructor(n,s,o,u,l){super(n,s,u);p(this,"isReadonly");p(this,"defaultValue");this.isReadonly=o,this.defaultValue=l}}const uF=e=>e===void 0?"never":Dn(e)?JSON.stringify(e):String(e);class aF{constructor(t,n,s,o){p(this,"from");p(this,"to");p(this,"decode");p(this,"encode");p(this,"_tag","PropertySignatureTransformation");this.from=t,this.to=n,this.decode=s,this.encode=o}toString(){return`PropertySignature<${Ch(this.to.isOptional)}, ${this.to.type}, ${uF(this.from.fromKey)}, ${Ch(this.from.isOptional)}, ${this.from.type}>`}}const E0=(e,t)=>{switch(e._tag){case"PropertySignatureDeclaration":return new w0(e.type,e.isOptional,e.isReadonly,{...e.annotations,...t},e.defaultValue);case"PropertySignatureTransformation":return new aF(new oF(e.from.type,e.from.isOptional,e.from.isReadonly,e.from.annotations),new cF(e.to.type,e.to.isOptional,e.to.isReadonly,{...e.to.annotations,...t},e.to.defaultValue),e.decode,e.encode)}},O0=Symbol.for("effect/PropertySignature"),T0=e=>ue(e,O0);cS=Co,oS=O0;const nd=class nd{constructor(t){p(this,"ast");p(this,cS);p(this,oS,null);p(this,"_TypeToken");p(this,"_Key");p(this,"_EncodedToken");p(this,"_HasDefault");this.ast=t}pipe(){return re(this,arguments)}annotations(t){return new nd(E0(this.ast,kh(t)))}toString(){return String(this.ast)}};let $h=nd;class Ph extends $h{constructor(n,s){super(n);p(this,"from");this.from=s}annotations(n){return new Ph(E0(this.ast,kh(n)),this.from)}}const lF=e=>{const t=e.ast===xl||e.ast===kl?xl:rF(e).ast;return new Ph(new w0(t,!0,!0,{},void 0),e)},fF=dm([Al]),hF=(e,t)=>{const n=Ci(e),s=[];if(n.length>0){const u=[],l=[],h=[];for(let d=0;d<n.length;d++){const _=n[d],b=e[_];if(T0(b)){const S=b.ast;switch(S._tag){case"PropertySignatureDeclaration":{const T=S.type,I=S.isOptional,x=S.annotations;u.push(new wt(_,T,I,!0,fF(S))),l.push(new wt(_,Mt(T),I,!0,x)),s.push(new wt(_,T,I,!0,x));break}case"PropertySignatureTransformation":{const T=S.from.fromKey??_;u.push(new wt(T,S.from.type,S.from.isOptional,!0,S.from.annotations)),l.push(new wt(_,S.to.type,S.to.isOptional,!0,S.to.annotations)),h.push(new OT(T,_,S.decode,S.encode));break}}}else u.push(new wt(_,b.ast,!1,!0)),l.push(new wt(_,Mt(b.ast),!1,!0)),s.push(new wt(_,b.ast,!1,!0))}if(mt(h)){const d=[],_=[];for(const b of t){const{indexSignatures:S,propertySignatures:T}=hm(b.key.ast,b.value.ast);T.forEach(I=>{u.push(I),l.push(new wt(I.name,Mt(I.type),I.isOptional,I.isReadonly,I.annotations))}),S.forEach(I=>{d.push(I),_.push(new Fc(I.parameter,Mt(I.type),I.isReadonly))})}return new am(new Hr(u,d,{[Rl]:"Struct (Encoded side)"}),new Hr(l,_,{[Rl]:"Struct (Type side)"}),new TT(h))}}const o=[];for(const u of t){const{indexSignatures:l,propertySignatures:h}=hm(u.key.ast,u.value.ast);h.forEach(d=>s.push(d)),l.forEach(d=>o.push(d))}return new Hr(s,o)},dF=(e,t)=>{const n=Ci(e);for(const s of n){const o=e[s];if(t[s]===void 0&&T0(o)){const u=o.ast,l=u._tag==="PropertySignatureDeclaration"?u.defaultValue:u.to.defaultValue;l!==void 0&&(t[s]=l())}}return t};function I0(e,t,n=hF(e,t)){var s;return s=class extends ar(n){static annotations(u){return I0(this.fields,this.records,ps(this.ast,u))}static pick(...u){return _s(YM(e,...u))}static omit(...u){return _s(XM(e,...u))}},p(s,"fields",{...e}),p(s,"records",[...t]),p(s,"make",(u,l)=>{const h=dF(e,{...u});return mF(l)?h:MM(s)(h)}),s}function _s(e,...t){return I0(e,t)}function A0(e,t,n){var s;return s=class extends ar(n){static annotations(u){return A0(this.from,this.to,ps(this.ast,u))}},p(s,"from",e),p(s,"to",t),s}const pF=O(e=>gs(e[0])&&gs(e[1]),(e,t,n)=>A0(e,t,new am(e.ast,t.ast,new ET(n.decode,n.encode)))),gF=O(e=>gs(e[0])&&gs(e[1]),(e,t,n)=>pF(e,t,{strict:!0,decode:(s,o,u,l)=>u0(n.decode(s,l)),encode:(s,o,u,l)=>u0(n.encode(s,l))}));function mF(e){return fl(e)?e:(e==null?void 0:e.disableValidation)??!1}const R0=Symbol.for("midi/structor/schema/form/annotation"),_F={annotation:e=>({[R0]:e}),getFormName:e=>e._tag==="PropertySignatureDeclaration"||e._tag==="PropertySignatureTransformation"?te():St(R0)(e)},yF=(e,t,n)=>16777216+(e<<16|t<<8|n<<0),bF=["","0","00","000","0000","00000","000000"];gF(ms,eF,{strict:!0,decode:e=>{const t=e.substring(0,2),n=e.substring(2,4),s=e.substring(4,6);return yF(parseInt(t,16),parseInt(n,16),parseInt(s,16))},encode:e=>{const t=e.toString(16);if(t.length>6)return t.substring(1,7);{const n=6-t.length;return bF[n]+t}}}).annotations(_F.annotation("Color"));const vF=()=>({tracks:[],cues:[]}),SF=e=>{let t=0;const n=[];return we.forEach(e,s=>{t!==s.startTime&&n.push({type:"blank",startTime:t,endTime:s.startTime}),n.push({...s,type:"real"}),t=s.endTime}),n.push({type:"blank",startTime:t,endTime:void 0}),n},wF=e=>{const t=[],n=[],s=[];we.forEach(e,l=>{l.type==="init-track"?t.push(l):l.type==="init-clip"?n.push(l):s.push(l)});const o=we.sortBy(t,l=>l.trackIndex),u=we.groupBy(n,l=>l.trackIndex);return{tracks:we.map(o,l=>{const h=we.get(u,l.trackIndex);return{name:l.name,color:l.color,clips:SF(h)}}),cues:s}},EF=e=>()=>[],OF=e=>ul(t=>{t.push(e)}),TF=e=>ul(t=>{t.push(e)}),IF=e=>ul(t=>{t.push(e)}),AF=e=>wF(e);var x0={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $o=Symbol.for("react.element"),RF=Symbol.for("react.portal"),xF=Symbol.for("react.fragment"),kF=Symbol.for("react.strict_mode"),CF=Symbol.for("react.profiler"),$F=Symbol.for("react.provider"),PF=Symbol.for("react.context"),MF=Symbol.for("react.forward_ref"),FF=Symbol.for("react.suspense"),NF=Symbol.for("react.memo"),LF=Symbol.for("react.lazy"),k0=Symbol.iterator;function DF(e){return e===null||typeof e!="object"?null:(e=k0&&e[k0]||e["@@iterator"],typeof e=="function"?e:null)}var C0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$0=Object.assign,P0={};function ys(e,t,n){this.props=e,this.context=t,this.refs=P0,this.updater=n||C0}ys.prototype.isReactComponent={},ys.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},ys.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function M0(){}M0.prototype=ys.prototype;function Mh(e,t,n){this.props=e,this.context=t,this.refs=P0,this.updater=n||C0}var Fh=Mh.prototype=new M0;Fh.constructor=Mh,$0(Fh,ys.prototype),Fh.isPureReactComponent=!0;var F0=Array.isArray,N0=Object.prototype.hasOwnProperty,Nh={current:null},L0={key:!0,ref:!0,__self:!0,__source:!0};function D0(e,t,n){var s,o={},u=null,l=null;if(t!=null)for(s in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(u=""+t.key),t)N0.call(t,s)&&!L0.hasOwnProperty(s)&&(o[s]=t[s]);var h=arguments.length-2;if(h===1)o.children=n;else if(1<h){for(var d=Array(h),_=0;_<h;_++)d[_]=arguments[_+2];o.children=d}if(e&&e.defaultProps)for(s in h=e.defaultProps,h)o[s]===void 0&&(o[s]=h[s]);return{$$typeof:$o,type:e,key:u,ref:l,props:o,_owner:Nh.current}}function UF(e,t){return{$$typeof:$o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Lh(e){return typeof e=="object"&&e!==null&&e.$$typeof===$o}function KF(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var U0=/\/+/g;function Dh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?KF(""+e.key):t.toString(36)}function qu(e,t,n,s,o){var u=typeof e;(u==="undefined"||u==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(u){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case $o:case RF:l=!0}}if(l)return l=e,o=o(l),e=s===""?"."+Dh(l,0):s,F0(o)?(n="",e!=null&&(n=e.replace(U0,"$&/")+"/"),qu(o,t,n,"",function(_){return _})):o!=null&&(Lh(o)&&(o=UF(o,n+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(U0,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=s===""?".":s+":",F0(e))for(var h=0;h<e.length;h++){u=e[h];var d=s+Dh(u,h);l+=qu(u,t,n,d,o)}else if(d=DF(e),typeof d=="function")for(e=d.call(e),h=0;!(u=e.next()).done;)u=u.value,d=s+Dh(u,h++),l+=qu(u,t,n,d,o);else if(u==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Ju(e,t,n){if(e==null)return e;var s=[],o=0;return qu(e,s,"","",function(u){return t.call(n,u,o++)}),s}function BF(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var xt={current:null},Gu={transition:null},jF={ReactCurrentDispatcher:xt,ReactCurrentBatchConfig:Gu,ReactCurrentOwner:Nh};function K0(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Ju,forEach:function(e,t,n){Ju(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ju(e,function(){t++}),t},toArray:function(e){return Ju(e,function(t){return t})||[]},only:function(e){if(!Lh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},me.Component=ys,me.Fragment=xF,me.Profiler=CF,me.PureComponent=Mh,me.StrictMode=kF,me.Suspense=FF,me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jF,me.act=K0,me.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=$0({},e.props),o=e.key,u=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(u=t.ref,l=Nh.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var h=e.type.defaultProps;for(d in t)N0.call(t,d)&&!L0.hasOwnProperty(d)&&(s[d]=t[d]===void 0&&h!==void 0?h[d]:t[d])}var d=arguments.length-2;if(d===1)s.children=n;else if(1<d){h=Array(d);for(var _=0;_<d;_++)h[_]=arguments[_+2];s.children=h}return{$$typeof:$o,type:e.type,key:o,ref:u,props:s,_owner:l}},me.createContext=function(e){return e={$$typeof:PF,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:$F,_context:e},e.Consumer=e},me.createElement=D0,me.createFactory=function(e){var t=D0.bind(null,e);return t.type=e,t},me.createRef=function(){return{current:null}},me.forwardRef=function(e){return{$$typeof:MF,render:e}},me.isValidElement=Lh,me.lazy=function(e){return{$$typeof:LF,_payload:{_status:-1,_result:e},_init:BF}},me.memo=function(e,t){return{$$typeof:NF,type:e,compare:t===void 0?null:t}},me.startTransition=function(e){var t=Gu.transition;Gu.transition={};try{e()}finally{Gu.transition=t}},me.unstable_act=K0,me.useCallback=function(e,t){return xt.current.useCallback(e,t)},me.useContext=function(e){return xt.current.useContext(e)},me.useDebugValue=function(){},me.useDeferredValue=function(e){return xt.current.useDeferredValue(e)},me.useEffect=function(e,t){return xt.current.useEffect(e,t)},me.useId=function(){return xt.current.useId()},me.useImperativeHandle=function(e,t,n){return xt.current.useImperativeHandle(e,t,n)},me.useInsertionEffect=function(e,t){return xt.current.useInsertionEffect(e,t)},me.useLayoutEffect=function(e,t){return xt.current.useLayoutEffect(e,t)},me.useMemo=function(e,t){return xt.current.useMemo(e,t)},me.useReducer=function(e,t,n){return xt.current.useReducer(e,t,n)},me.useRef=function(e){return xt.current.useRef(e)},me.useState=function(e){return xt.current.useState(e)},me.useSyncExternalStore=function(e,t,n){return xt.current.useSyncExternalStore(e,t,n)},me.useTransition=function(){return xt.current.useTransition()},me.version="18.3.1",x0.exports=me;var hi=x0.exports,B0=Ue(hi);const Po={},j0=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,W0=e=>"init"in e,Uh=e=>!!e.write,q0=e=>"v"in e||"e"in e,Hu=e=>{if("e"in e)throw e.e;if((Po?"production":void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},Vu=new WeakMap,J0=e=>{var t;return zu(e)&&!!((t=Vu.get(e))!=null&&t[0])},WF=e=>{const t=Vu.get(e);t!=null&&t[0]&&(t[0]=!1,t[1].forEach(n=>n()))},G0=(e,t)=>{let n=Vu.get(e);if(!n){n=[!0,new Set],Vu.set(e,n);const s=()=>{n[0]=!1};e.then(s,s)}n[1].add(t)},zu=e=>typeof(e==null?void 0:e.then)=="function",H0=(e,t,n)=>{n.p.has(e)||(n.p.add(e),t.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},Kh=(e,t,n)=>{const s=n(e),o="v"in s,u=s.v;if(zu(t))for(const l of s.d.keys())H0(e,t,n(l));s.v=t,delete s.e,(!o||!Object.is(u,s.v))&&(++s.n,zu(u)&&WF(u))},V0=(e,t,n)=>{var s;const o=new Set;for(const u of((s=n.get(e))==null?void 0:s.t)||[])n.has(u)&&o.add(u);for(const u of t.p)o.add(u);return o},qF=()=>{const e=new Set,t=()=>{e.forEach(n=>n())};return t.add=n=>(e.add(n),()=>{e.delete(n)}),t},Bh=()=>{const e={},t=new WeakMap,n=s=>{var o,u;(o=t.get(e))==null||o.forEach(l=>l(s)),(u=t.get(s))==null||u.forEach(l=>l())};return n.add=(s,o)=>{const u=s||e,l=(t.has(u)?t:t.set(u,new Set)).get(u);return l.add(o),()=>{l==null||l.delete(o),l.size||t.delete(u)}},n},JF=e=>(e.c||(e.c=Bh()),e.m||(e.m=Bh()),e.u||(e.u=Bh()),e.f||(e.f=qF()),e),GF=Symbol(),z0=(e=new WeakMap,t=new WeakMap,n=new WeakMap,s=new Set,o=new Set,u=new Set,l={},h=(T,...I)=>T.read(...I),d=(T,...I)=>T.write(...I),_=(T,I)=>{var x;return(x=T.unstable_onInit)==null?void 0:x.call(T,I)},b=(T,I)=>{var x;return(x=T.onMount)==null?void 0:x.call(T,I)},...S)=>{const T=S[0]||(C=>{if((Po?"production":void 0)!=="production"&&!C)throw new Error("Atom is undefined or null");let N=e.get(C);return N||(N={d:new Map,p:new Set,n:0},e.set(C,N),_==null||_(C,Y)),N}),I=S[1]||(()=>{const C=[],N=D=>{try{D()}catch(U){C.push(U)}};do{l.f&&N(l.f);const D=new Set,U=D.add.bind(D);s.forEach(F=>{var j;return(j=t.get(F))==null?void 0:j.l.forEach(U)}),s.clear(),u.forEach(U),u.clear(),o.forEach(U),o.clear(),D.forEach(N),s.size&&x()}while(s.size||u.size||o.size);if(C.length)throw new AggregateError(C)}),x=S[2]||(()=>{const C=[],N=new WeakSet,D=new WeakSet,U=Array.from(s);for(;U.length;){const F=U[U.length-1],j=T(F);if(D.has(F)){U.pop();continue}if(N.has(F)){if(n.get(F)===j.n)C.push([F,j]);else if((Po?"production":void 0)!=="production"&&n.has(F))throw new Error("[Bug] invalidated atom exists");D.add(F),U.pop();continue}N.add(F);for(const Te of V0(F,j,t))N.has(Te)||U.push(Te)}for(let F=C.length-1;F>=0;--F){const[j,Te]=C[F];let Ie=!1;for(const ct of Te.d.keys())if(ct!==j&&s.has(ct)){Ie=!0;break}Ie&&(W(j),ee(j)),n.delete(j)}}),W=S[3]||(C=>{var N;const D=T(C);if(q0(D)&&(t.has(C)&&n.get(C)!==D.n||Array.from(D.d).every(([ne,He])=>W(ne).n===He)))return D;D.d.clear();let U=!0;const F=()=>{t.has(C)&&(ee(C),x(),I())},j=ne=>{var He;if(j0(C,ne)){const hr=T(ne);if(!q0(hr))if(W0(ne))Kh(ne,ne.init,T);else throw new Error("no atom init");return Hu(hr)}const kn=W(ne);try{return Hu(kn)}finally{D.d.set(ne,kn.n),J0(D.v)&&H0(C,D.v,kn),(He=t.get(ne))==null||He.t.add(C),U||F()}};let Te,Ie;const ct={get signal(){return Te||(Te=new AbortController),Te.signal},get setSelf(){return(Po?"production":void 0)!=="production"&&!Uh(C)&&console.warn("setSelf function cannot be used with read-only atom"),!Ie&&Uh(C)&&(Ie=(...ne)=>{if((Po?"production":void 0)!=="production"&&U&&console.warn("setSelf function cannot be called in sync"),!U)try{return K(C,...ne)}finally{x(),I()}}),Ie}},je=D.n;try{const ne=h(C,j,ct);return Kh(C,ne,T),zu(ne)&&(G0(ne,()=>Te==null?void 0:Te.abort()),ne.then(F,F)),D}catch(ne){return delete D.v,D.e=ne,++D.n,D}finally{U=!1,je!==D.n&&n.get(C)===je&&(n.set(C,D.n),s.add(C),(N=l.c)==null||N.call(l,C))}}),L=S[4]||(C=>{const N=[C];for(;N.length;){const D=N.pop(),U=T(D);for(const F of V0(D,U,t)){const j=T(F);n.set(F,j.n),N.push(F)}}}),K=S[5]||((C,...N)=>{let D=!0;const U=j=>Hu(W(j)),F=(j,...Te)=>{var Ie;const ct=T(j);try{if(j0(C,j)){if(!W0(j))throw new Error("atom not writable");const je=ct.n,ne=Te[0];Kh(j,ne,T),ee(j),je!==ct.n&&(s.add(j),(Ie=l.c)==null||Ie.call(l,j),L(j));return}else return K(j,...Te)}finally{D||(x(),I())}};try{return d(C,U,F,...N)}finally{D=!1}}),ee=S[6]||(C=>{var N;const D=T(C),U=t.get(C);if(U&&!J0(D.v)){for(const[F,j]of D.d)if(!U.d.has(F)){const Te=T(F);q(F).t.add(C),U.d.add(F),j!==Te.n&&(s.add(F),(N=l.c)==null||N.call(l,F),L(F))}for(const F of U.d||[])if(!D.d.has(F)){U.d.delete(F);const j=H(F);j==null||j.t.delete(C)}}}),q=S[7]||(C=>{var N;const D=T(C);let U=t.get(C);if(!U){W(C);for(const F of D.d.keys())q(F).t.add(C);if(U={l:new Set,d:new Set(D.d.keys()),t:new Set},t.set(C,U),(N=l.m)==null||N.call(l,C),Uh(C)){const F=()=>{let j=!0;const Te=(...Ie)=>{try{return K(C,...Ie)}finally{j||(x(),I())}};try{const Ie=b(C,Te);Ie&&(U.u=()=>{j=!0;try{Ie()}finally{j=!1}})}finally{j=!1}};o.add(F)}}return U}),H=S[8]||(C=>{var N;const D=T(C);let U=t.get(C);if(U&&!U.l.size&&!Array.from(U.t).some(F=>{var j;return(j=t.get(F))==null?void 0:j.d.has(C)})){U.u&&u.add(U.u),U=void 0,t.delete(C),(N=l.u)==null||N.call(l,C);for(const F of D.d.keys()){const j=H(F);j==null||j.t.delete(C)}return}return U}),V=[e,t,n,s,o,u,l,h,d,_,b,T,I,x,W,L,K,ee,q,H],Y={get:C=>Hu(W(C)),set:(C,...N)=>{try{return K(C,...N)}finally{x(),I()}},sub:(C,N)=>{const U=q(C).l;return U.add(N),I(),()=>{U.delete(N),H(C),I()}}};return Object.defineProperty(Y,GF,{value:V}),Y},HF=JF,Y0=G0,jh={};let VF=0;function di(e,t){const n=`atom${++VF}`,s={toString(){return(jh?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof e=="function"?s.read=e:(s.init=e,s.read=zF,s.write=YF),t&&(s.write=t),s}function zF(e){return e(this)}function YF(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}const XF=()=>{let e=0;const t=HF({}),n=new WeakMap,s=new WeakMap,o=z0(n,s,void 0,void 0,void 0,void 0,t,void 0,(h,d,_,...b)=>e?_(h,...b):h.write(d,_,...b)),u=new Set;return t.m.add(void 0,h=>{u.add(h);const d=n.get(h);d.m=s.get(h)}),t.u.add(void 0,h=>{u.delete(h);const d=n.get(h);delete d.m}),Object.assign(o,{dev4_get_internal_weak_map:()=>n,dev4_get_mounted_atoms:()=>u,dev4_restore_atoms:h=>{const d={read:()=>null,write:(_,b)=>{++e;try{for(const[S,T]of h)"init"in S&&b(S,T)}finally{--e}}};o.set(d)}})};function ZF(){return(jh?"production":void 0)!=="production"?XF():z0()}let Mo;function X0(){return Mo||(Mo=ZF(),(jh?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=Mo),globalThis.__JOTAI_DEFAULT_STORE__!==Mo&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),Mo}const QF={},eN=hi.createContext(void 0);function Z0(e){return hi.useContext(eN)||X0()}const Q0=e=>typeof(e==null?void 0:e.then)=="function",tN=e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},nN=B0.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(tN(e),e)}),Wh=new WeakMap,rN=(e,t)=>{let n=Wh.get(e);return n||(n=new Promise((s,o)=>{let u=e;const l=_=>b=>{u===_&&s(b)},h=_=>b=>{u===_&&o(b)},d=()=>{try{const _=t();Q0(_)?(Wh.set(_,n),u=_,_.then(l(_),h(_)),Y0(_,d)):s(_)}catch(_){o(_)}};e.then(l(e),h(e)),Y0(e,d)}),Wh.set(e,n)),n};function iN(e,t){const n=Z0(),[[s,o,u],l]=hi.useReducer(_=>{const b=n.get(e);return Object.is(_[0],b)&&_[1]===n&&_[2]===e?_:[b,n,e]},void 0,()=>[n.get(e),n,e]);let h=s;if((o!==n||u!==e)&&(l(),h=n.get(e)),hi.useEffect(()=>{const _=n.sub(e,()=>{l()});return l(),_},[n,e,void 0]),hi.useDebugValue(h),Q0(h)){const _=rN(h,()=>n.get(e));return nN(_)}return h}function sN(e,t){const n=Z0();return hi.useCallback((...o)=>{if((QF?"production":void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return n.set(e,...o)},[n,e])}function oN(e,t){const n=di(t),s=new Set,o=new BroadcastChannel(e);let u=t;o.onmessage=d=>{const _=d;_.data.type==="update"?s.forEach(b=>b(_)):_.data.type==="init"&&o.postMessage({type:"update",value:u})};const l=di(d=>d(n),(d,_,b)=>{_(n,b.value),b.isEvent||(u=d(n),o.postMessage({type:"update",value:u}))});return l.onMount=d=>{const _=b=>{b.data.type==="update"&&d({isEvent:!0,value:b.data.value})};return s.add(_),o.postMessage({type:"init"}),()=>{s.delete(_)}},di(d=>d(l),(d,_,b)=>{_(l,{isEvent:!1,value:b})})}const qh={},cN=Symbol((qh?"production":void 0)!=="production"?"RESET":""),uN=e=>typeof(e==null?void 0:e.then)=="function";function ev(e=()=>{try{return window.localStorage}catch(n){(qh?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},t){var n;let s,o;const u={getItem:(d,_)=>{var b,S;const T=x=>{if(x=x||"",s!==x){try{o=JSON.parse(x,t==null?void 0:t.reviver)}catch{return _}s=x}return o},I=(S=(b=e())==null?void 0:b.getItem(d))!=null?S:null;return uN(I)?I.then(T):T(I)},setItem:(d,_)=>{var b;return(b=e())==null?void 0:b.setItem(d,JSON.stringify(_,void 0))},removeItem:d=>{var _;return(_=e())==null?void 0:_.removeItem(d)}},l=d=>(_,b,S)=>d(_,T=>{let I;try{I=JSON.parse(T||"")}catch{I=S}b(I)});let h;try{h=(n=e())==null?void 0:n.subscribe}catch{}return!h&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(h=(d,_)=>{if(!(e()instanceof window.Storage))return()=>{};const b=S=>{S.storageArea===e()&&S.key===d&&_(S.newValue)};return window.addEventListener("storage",b),()=>{window.removeEventListener("storage",b)}}),h&&(u.subscribe=l(h)),u}const aN=ev();function lN(e,t,n=aN,s){const o=s==null?void 0:s.getOnInit,u=di(o?n.getItem(e,t):t);return(qh?"production":void 0)!=="production"&&(u.debugPrivate=!0),u.onMount=h=>{h(n.getItem(e,t));let d;return n.subscribe&&(d=n.subscribe(e,h,t)),d},di(h=>h(u),(h,d,_)=>{const b=typeof _=="function"?_(h(u)):_;return b===cN?(d(u,t),n.removeItem(e)):b instanceof Promise?b.then(S=>(d(u,S),n.setItem(e,S))):(d(u,b),n.setItem(e,b))})}const fN=()=>ev(),hN={atom:(e,t)=>lN(e,t,fN(),{getOnInit:!0})},lr=e=>e,Jh=e=>({_tag:"Left",value:e}),Yu=e=>({_tag:"Right",value:e}),dN=(e,t,n)=>n._tag==="Left"?e(n.value):t(n.value),tv={dimap:(e,t,n)=>s=>t(n(e(s))),first:e=>([t,n])=>[e(t),n],right:e=>t=>t._tag==="Left"?t:Yu(e(t.value)),wander:e=>t=>t.map(e)},pN={empty:()=>{},foldMap:(e,t)=>{for(let n=0;n<t.length;n++){const s=e(t[n]);if(s!=null)return s}}},gN={empty:()=>[],foldMap:(e,t)=>{let n=[];return t.forEach(s=>{n=n.concat(e(s))}),n}},Gh=e=>({dimap:(t,n,s)=>o=>s(t(o)),first:t=>([n,s])=>t(n),right:t=>n=>n._tag==="Left"?e.empty():t(n.value),wander:t=>n=>e.foldMap(t,n)}),Hh={Equivalence:{Equivalence:"Equivalence",Iso:"Iso",Lens:"Lens",Prism:"Prism",Traversal:"Traversal",Getter:"Getter",AffineFold:"AffineFold",Fold:"Fold",Setter:"Setter"},Iso:{Equivalence:"Iso",Iso:"Iso",Lens:"Lens",Prism:"Prism",Traversal:"Traversal",Getter:"Getter",AffineFold:"AffineFold",Fold:"Fold",Setter:"Setter"},Lens:{Equivalence:"Lens",Iso:"Lens",Lens:"Lens",Prism:"Prism",Traversal:"Traversal",Getter:"Getter",AffineFold:"AffineFold",Fold:"Fold",Setter:"Setter"},Prism:{Equivalence:"Prism",Iso:"Prism",Lens:"Prism",Prism:"Prism",Traversal:"Traversal",Getter:"AffineFold",AffineFold:"AffineFold",Fold:"Fold",Setter:"Setter"},Traversal:{Equivalence:"Traversal",Iso:"Traversal",Lens:"Traversal",Prism:"Traversal",Traversal:"Traversal",Getter:"Fold",AffineFold:"Fold",Fold:"Fold",Setter:"Setter"},Getter:{Equivalence:"Getter",Iso:"Getter",Lens:"Getter",Prism:"AffineFold",Traversal:"Fold",Getter:"Getter",AffineFold:"AffineFold",Fold:"Fold",Setter:void 0},AffineFold:{Equivalence:"AffineFold",Iso:"AffineFold",Lens:"AffineFold",Prism:"AffineFold",Traversal:"Fold",Getter:"AffineFold",AffineFold:"AffineFold",Fold:"Fold",Setter:void 0},Fold:{Equivalence:"Fold",Iso:"Fold",Lens:"Fold",Prism:"Fold",Traversal:"Fold",Getter:"Fold",AffineFold:"Fold",Fold:"Fold",Setter:void 0},Setter:{Equivalence:void 0,Iso:void 0,Lens:void 0,Prism:void 0,Traversal:void 0,Getter:void 0,AffineFold:void 0,Fold:void 0,Setter:void 0}},bs=(e,t)=>{const n=t;return n._tag=e,n},nv=e=>(e._removable=!0,e);function Ae(e,t,n){switch(arguments.length){case 2:{const s=(o,u)=>e(o,t(o,u));return s._tag=Hh[e._tag][t._tag],s._removable=t._removable||!1,s}default:{const s=Hh[e._tag][t._tag],o=(u,l)=>e(u,t(u,n(u,l)));return o._tag=Hh[s][n._tag],o._removable=n._removable||!1,o}}}const mN=bs("Equivalence",(e,t)=>t),Xu=(e,t)=>bs("Iso",(n,s)=>n.dimap(e,t,s)),Yt=(e,t)=>bs("Lens",(n,s)=>n.dimap(o=>[e(o),o],t,n.first(s))),Vh=(e,t)=>bs("Prism",(n,s)=>n.dimap(e,o=>dN(lr,t,o),n.right(s))),zh=bs("Traversal",(e,t)=>e.dimap(lr,lr,e.wander(t))),_N=e=>bs("Getter",(t,n)=>t.dimap(e,lr,n)),rv=(e,t,n)=>e(tv,t)(n),yN=(e,t,n)=>e(tv,()=>t)(n),bN=(e,t)=>e(Gh({}),lr)(t),vN=(e,t)=>e(Gh(pN),lr)(t),iv=(e,t)=>e(Gh(gN),n=>[n])(t),SN=Xu(e=>e.map((t,n)=>[n,t]),e=>{const t=[...e].sort((s,o)=>s[0]-o[0]),n=[];for(let s=0;s<t.length;++s)(s===t.length-1||t[s][0]!==t[s+1][0])&&n.push(t[s][1]);return n}),sv=e=>Yt(t=>t[e],([t,n])=>Object.assign(Object.assign({},n),{[e]:t})),wN=e=>Yt(t=>{const n={};for(const s of e)n[s]=t[s];return n},([t,n])=>{const s=Object.assign({},n);for(const o of e)delete s[o];return Object.assign(s,t)}),ov=e=>Yt(t=>t[e],([t,n])=>{const s=n.slice();return s[e]=t,s}),Yh=ov(0),Xh=e=>Vh(t=>e(t)?Yu(t):Jh(t),lr),Fo=Symbol("__no_match__"),cv=Xh(e=>e!==Fo),uv=Symbol("__remove_me__"),Zh=e=>nv(Ae(Yt(t=>0<=e&&e<t.length?t[e]:Fo,([t,n])=>{if(t===Fo)return n;if(t===uv)return typeof n=="string"?n.substring(0,e)+n.substring(e+1):[...n.slice(0,e),...n.slice(e+1)];if(typeof n=="string")return e===0?t+n.substring(1):e===n.length?n.substring(0,e-1)+t:n.substring(0,e)+t+n.substring(e+1);{const s=n.slice();return s[e]=t,s}}),cv)),EN=Vh(e=>e===void 0?Jh(void 0):Yu(e),lr),ON=e=>Vh(t=>e(t)?Yu(t):Jh(t),lr),TN=e=>nv(Ae(Yt(t=>{const n=t.findIndex(e);return n===-1?[Fo,-1]:[t[n],n]},([[t,n],s])=>{if(t===Fo)return s;if(t===uv)return[...s.slice(0,n),...s.slice(n+1)];const o=s.slice();return o[n]=t,o}),Yh,cv)),IN=e=>Ae(Yt(t=>{const n=t.map((s,o)=>e(s)?o:null).filter(s=>s!=null);return[n.map(s=>t[s]),n]},([[t,n],s])=>{const o=s.length,u=t.length;let l=0,h=0,d=0;const _=[];for(;l<o;)n[h]===l?(++h,d<u&&(_.push(t[d]),++d)):_.push(s[l]),++l;for(;d<u;)_.push(t[d++]);return _}),Yh),AN=e=>Yt(t=>t===void 0?e:t,([t,n])=>t),RN=e=>Ae(Yt(t=>{const n=iv(e,t);return[n,n.length]},([[t,n],s])=>{if(t.length!==n)throw new Error("cannot add/remove elements through partsOf");let o=0;return rv(e,()=>t[o++],s)}),Yh),xN=e=>Yt(t=>e(t),([t,n])=>t),kN=e=>Yt(t=>t,([t,n])=>e(t)),CN=Yt(e=>{},([e,t])=>e===void 0?t:[e,...t]),$N=Yt(e=>{},([e,t])=>e===void 0?t:[...t,e]),PN=Ae(Xu(e=>e.split(""),e=>e.join("")),zh),MN=Ae(Xu(e=>e.split(/\b/),e=>e.join("")),zh,Xh(e=>!/\s+/.test(e)));class $e{constructor(t){this._ref=t}get _tag(){return this._ref._tag}get _removable(){return this._ref._removable}compose(t){return new $e(Ae(this._ref,t._ref))}iso(t,n){return new $e(Ae(this._ref,Xu(t,n)))}lens(t,n){return new $e(Ae(this._ref,Yt(t,([s,o])=>n(o,s))))}indexed(){return new $e(Ae(this._ref,SN))}prop(t){return new $e(Ae(this._ref,sv(t)))}path(...t){return t.length===1&&(t=t[0].split(".")),new $e(t.reduce((n,s)=>Ae(n,sv(s)),this._ref))}pick(t){return new $e(Ae(this._ref,wN(t)))}nth(t){return new $e(Ae(this._ref,ov(t)))}filter(t){return new $e(Ae(this._ref,IN(t)))}valueOr(t){return new $e(Ae(this._ref,AN(t)))}partsOf(t){const n=typeof t=="function"?t(av):t;return new $e(Ae(this._ref,RN(n._ref)))}reread(t){return new $e(Ae(this._ref,xN(t)))}rewrite(t){return new $e(Ae(this._ref,kN(t)))}optional(){return new $e(Ae(this._ref,EN))}guard_(){return t=>this.guard(t)}guard(t){return new $e(Ae(this._ref,ON(t)))}at(t){return new $e(Ae(this._ref,Zh(t)))}head(){return new $e(Ae(this._ref,Zh(0)))}index(t){return new $e(Ae(this._ref,Zh(t)))}find(t){return new $e(Ae(this._ref,TN(t)))}elems(){return new $e(Ae(this._ref,zh))}to(t){return new $e(Ae(this._ref,_N(t)))}when(t){return new $e(Ae(this._ref,Xh(t)))}chars(){return new $e(Ae(this._ref,PN))}words(){return new $e(Ae(this._ref,MN))}prependTo(){return new $e(Ae(this._ref,CN))}appendTo(){return new $e(Ae(this._ref,$N))}}const av=new $e(mN);function FN(){return av}function NN(e){return t=>bN(e._ref,t)}function LN(e){return t=>vN(e._ref,t)}function DN(e){return t=>iv(e._ref,t)}function UN(e){return t=>n=>rv(e._ref,t,n)}function KN(e){return t=>n=>yN(e._ref,t,n)}const lv=(e,t,n)=>(t.has(n)?t:t.set(n,e())).get(n),BN=new WeakMap,jN=(e,t,n)=>{const s=lv(()=>new WeakMap,BN,t);return lv(e,s,n)},WN=e=>typeof e=="function";function qN(e,t){return jN(()=>{const n=t(FN());return di(o=>{const u=o(e);return u instanceof Promise?u.then(l=>fv(n,l)):fv(n,u)},(o,u,l)=>{const h=WN(l)?UN(n)(l):KN(n)(l),d=o(e);return u(e,d instanceof Promise?d.then(h):h(d))})},e,t)}const fv=(e,t)=>e._tag==="Traversal"?DN(e)(t):e._tag==="Prism"?LN(e)(t):NN(e)(t),Qh=X0(),Zu=e=>{const t=()=>Qh.get(e),n=b=>{Qh.set(e,b)};let s;const o=b=>{Qh.sub(e,()=>{s!==void 0&&s();const S=b(t());typeof S=="function"&&(s=S)})},u=()=>iN(e),l=()=>sN(e),h=()=>[u(),l()],d=b=>Zu(qN(e,b));return{get:t,set:n,sub:o,useValue:u,useSet:l,use:h,focus:d,useFocusMemo:b=>{const S=u();return B0.useMemo(()=>d(b),[S])}}},hv=(e,t)=>Zu(di(t)),Dt={mem:(e,t)=>Zu(oN(e,t)),memSingle:hv,storage:(e,t)=>Zu(hN.atom(e,t)),array:e=>e.get().map((t,n)=>hv(`array-element-${n}`,t))},dv=_s({label:ms,key:ms,abletonProject:lF(ms),style:_s({accent:_s({color1:ms,color2:ms})})});_s({projects:sF(dv)});const pv=()=>({label:"Default",key:"default",style:{accent:{color1:"#6a11cb",color2:"#2575fc"}}}),JN={Schema:dv,defaultProjectConfig:pv,defaultProjectsConfig:()=>({projects:[pv()]})},tt={initArrangement:Dt.mem("init-arrangement",[]),importStatus:Dt.mem("import-status",{type:"none"}),project:{config:Dt.storage("projects-config",JN.defaultProjectsConfig()),active:Dt.storage("active-project","default"),abletonName:Dt.mem("ableton-name",void 0),arrangement:Dt.mem("arrangement",vF())},realTime:{beats:Dt.mem("real-time-beats",0),barBeats:Dt.mem("real-time-bar-beats",1),timeSignature:Dt.mem("real-time-time-signature",{noteCount:4,noteLength:4}),tempo:Dt.mem("real-time-tempo",0),isPlaying:Dt.mem("real-time-is-playing",!1),metronomeState:Dt.mem("real-time-metronome-state",!1),loopState:Dt.mem("real-time-loop-state",!1),halfBeat:Dt.mem("real-time-half-beat",!1)}},GN=e=>{const t=n=>{if(n.type==="init-ack")tt.importStatus.set({type:"ack",projectName:n.projectName}),tt.project.abletonName.set(n.projectName);else if(n.type==="init-project")tt.importStatus.set({type:"importing"}),tt.initArrangement.set(EF());else if(n.type==="init-track")tt.initArrangement.set(OF(n));else if(n.type==="init-clip")tt.initArrangement.set(TF(n));else if(n.type==="init-cue")tt.initArrangement.set(IF(n));else if(n.type==="init-done"){tt.importStatus.set({type:"finalizing"});const s=AF(tt.initArrangement.get());tt.project.arrangement.set(s),tt.importStatus.set({type:"done"})}else n.type==="beat"?tt.realTime.beats.set(n.value):n.type==="sig"?tt.realTime.timeSignature.set({noteCount:n.numer,noteLength:n.denom}):n.type==="bar-beat"?tt.realTime.barBeats.set(n.value):n.type==="tempo"?tt.realTime.tempo.set(n.value):n.type==="is-playing"?tt.realTime.isPlaying.set(n.value):n.type==="metronome-state"?tt.realTime.metronomeState.set(n.value):n.type==="loop-state"?tt.realTime.loopState.set(n.value):n.type==="half-beat"&&tt.realTime.halfBeat.set(n.isHalf)};e.on("sysex",n=>{const s=iE(n);s!==void 0&&t(s)})},HN=e=>{e.emit(yn.init()),tt.importStatus.sub(t=>{t.type==="ack"&&e.emit(yn.initReady(["Songs","Parts","Chris Keyboard"]))})},VN={init:(e,t)=>{console.log("Project Main"),GN(e),HN(t)}};console.log("Loading Project Worker Main");const gv=Mp(),mv=Mp();onmessage=e=>{we.isArray(e.data)&&e.data.length==2&&e.data[0]==="DAW_LISTENER"&&gv.emit(e.data[1])},mv.on("*",e=>postMessage(["DAW_EMITTER",e])),VN.init(gv,mv)})();
